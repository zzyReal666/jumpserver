(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-192a2458","chunk-52829884","chunk-2bf609ba"],{"0482":function(e,t,n){},1816:function(e,t,n){"use strict";(function(t){var a=n("440d"),o=n("9c59"),r=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,i=/[\n\r\t]/g,s=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,l=/:\d+$/,c=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,u=/^[a-zA-Z]:/;function p(e){return(e||"").toString().replace(r,"")}var f=[["#","hash"],["?","query"],function(e,t){return m(t.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],h={hash:1,query:1};function d(e){var n;n="undefined"!==typeof window?window:"undefined"!==typeof t?t:"undefined"!==typeof self?self:{};var a=n.location||{};e=e||a;var o,r={},i=typeof e;if("blob:"===e.protocol)r=new v(unescape(e.pathname),{});else if("string"===i)for(o in r=new v(e,{}),h)delete r[o];else if("object"===i){for(o in e)o in h||(r[o]=e[o]);void 0===r.slashes&&(r.slashes=s.test(e.href))}return r}function m(e){return"file:"===e||"ftp:"===e||"http:"===e||"https:"===e||"ws:"===e||"wss:"===e}function b(e,t){e=p(e),e=e.replace(i,""),t=t||{};var n,a=c.exec(e),o=a[1]?a[1].toLowerCase():"",r=!!a[2],s=!!a[3],l=0;return r?s?(n=a[2]+a[3]+a[4],l=a[2].length+a[3].length):(n=a[2]+a[4],l=a[2].length):s?(n=a[3]+a[4],l=a[3].length):n=a[4],"file:"===o?l>=2&&(n=n.slice(2)):m(o)?n=a[4]:o?r&&(n=n.slice(2)):l>=2&&m(t.protocol)&&(n=a[4]),{protocol:o,slashes:r||m(o),slashesCount:l,rest:n}}function g(e,t){if(""===e)return t;var n=(t||"/").split("/").slice(0,-1).concat(e.split("/")),a=n.length,o=n[a-1],r=!1,i=0;while(a--)"."===n[a]?n.splice(a,1):".."===n[a]?(n.splice(a,1),i++):i&&(0===a&&(r=!0),n.splice(a,1),i--);return r&&n.unshift(""),"."!==o&&".."!==o||n.push(""),n.join("/")}function v(e,t,n){if(e=p(e),e=e.replace(i,""),!(this instanceof v))return new v(e,t,n);var r,s,l,c,h,y,w=f.slice(),x=typeof t,C=this,$=0;for("object"!==x&&"string"!==x&&(n=t,t=null),n&&"function"!==typeof n&&(n=o.parse),t=d(t),s=b(e||"",t),r=!s.protocol&&!s.slashes,C.slashes=s.slashes||r&&t.slashes,C.protocol=s.protocol||t.protocol||"",e=s.rest,("file:"===s.protocol&&(2!==s.slashesCount||u.test(e))||!s.slashes&&(s.protocol||s.slashesCount<2||!m(C.protocol)))&&(w[3]=[/(.*)/,"pathname"]);$<w.length;$++)c=w[$],"function"!==typeof c?(l=c[0],y=c[1],l!==l?C[y]=e:"string"===typeof l?(h="@"===l?e.lastIndexOf(l):e.indexOf(l),~h&&("number"===typeof c[2]?(C[y]=e.slice(0,h),e=e.slice(h+c[2])):(C[y]=e.slice(h),e=e.slice(0,h)))):(h=l.exec(e))&&(C[y]=h[1],e=e.slice(0,h.index)),C[y]=C[y]||r&&c[3]&&t[y]||"",c[4]&&(C[y]=C[y].toLowerCase())):e=c(e,C);n&&(C.query=n(C.query)),r&&t.slashes&&"/"!==C.pathname.charAt(0)&&(""!==C.pathname||""!==t.pathname)&&(C.pathname=g(C.pathname,t.pathname)),"/"!==C.pathname.charAt(0)&&m(C.protocol)&&(C.pathname="/"+C.pathname),a(C.port,C.protocol)||(C.host=C.hostname,C.port=""),C.username=C.password="",C.auth&&(h=C.auth.indexOf(":"),~h?(C.username=C.auth.slice(0,h),C.username=encodeURIComponent(decodeURIComponent(C.username)),C.password=C.auth.slice(h+1),C.password=encodeURIComponent(decodeURIComponent(C.password))):C.username=encodeURIComponent(decodeURIComponent(C.auth)),C.auth=C.password?C.username+":"+C.password:C.username),C.origin="file:"!==C.protocol&&m(C.protocol)&&C.host?C.protocol+"//"+C.host:"null",C.href=C.toString()}function y(e,t,n){var r=this;switch(e){case"query":"string"===typeof t&&t.length&&(t=(n||o.parse)(t)),r[e]=t;break;case"port":r[e]=t,a(t,r.protocol)?t&&(r.host=r.hostname+":"+t):(r.host=r.hostname,r[e]="");break;case"hostname":r[e]=t,r.port&&(t+=":"+r.port),r.host=t;break;case"host":r[e]=t,l.test(t)?(t=t.split(":"),r.port=t.pop(),r.hostname=t.join(":")):(r.hostname=t,r.port="");break;case"protocol":r.protocol=t.toLowerCase(),r.slashes=!n;break;case"pathname":case"hash":if(t){var i="pathname"===e?"/":"#";r[e]=t.charAt(0)!==i?i+t:t}else r[e]=t;break;case"username":case"password":r[e]=encodeURIComponent(t);break;case"auth":var s=t.indexOf(":");~s?(r.username=t.slice(0,s),r.username=encodeURIComponent(decodeURIComponent(r.username)),r.password=t.slice(s+1),r.password=encodeURIComponent(decodeURIComponent(r.password))):r.username=encodeURIComponent(decodeURIComponent(t))}for(var c=0;c<f.length;c++){var u=f[c];u[4]&&(r[u[1]]=r[u[1]].toLowerCase())}return r.auth=r.password?r.username+":"+r.password:r.username,r.origin="file:"!==r.protocol&&m(r.protocol)&&r.host?r.protocol+"//"+r.host:"null",r.href=r.toString(),r}function w(e){e&&"function"===typeof e||(e=o.stringify);var t,n=this,a=n.host,r=n.protocol;r&&":"!==r.charAt(r.length-1)&&(r+=":");var i=r+(n.protocol&&n.slashes||m(n.protocol)?"//":"");return n.username?(i+=n.username,n.password&&(i+=":"+n.password),i+="@"):n.password?(i+=":"+n.password,i+="@"):"file:"!==n.protocol&&m(n.protocol)&&!a&&"/"!==n.pathname&&(i+="@"),(":"===a[a.length-1]||l.test(n.hostname)&&!n.port)&&(a+=":"),i+=a+n.pathname,t="object"===typeof n.query?e(n.query):n.query,t&&(i+="?"!==t.charAt(0)?"?"+t:t),n.hash&&(i+=n.hash),i}v.prototype={set:y,toString:w},v.extractProtocol=b,v.location=d,v.trimLeft=p,v.qs=o,e.exports=v}).call(this,n("c8ba"))},"24b1":function(e,t,n){},"273b":function(e,t,n){"use strict";n("0482")},"3cc2":function(e,t,n){},"440d":function(e,t,n){"use strict";e.exports=function(e,t){if(t=t.split(":")[0],e=+e,!e)return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},"65a0":function(e,t,n){"use strict";n("24b1")},7:function(e,t){},"9c59":function(e,t,n){"use strict";var a,o=Object.prototype.hasOwnProperty;function r(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return null}}function i(e){try{return encodeURIComponent(e)}catch(t){return null}}function s(e){var t,n=/([^=?#&]+)=?([^&]*)/g,a={};while(t=n.exec(e)){var o=r(t[1]),i=r(t[2]);null===o||null===i||o in a||(a[o]=i)}return a}function l(e,t){t=t||"";var n,r,s=[];for(r in"string"!==typeof t&&(t="?"),e)if(o.call(e,r)){if(n=e[r],n||null!==n&&n!==a&&!isNaN(n)||(n=""),r=i(r),n=i(n),null===r||null===n)continue;s.push(r+"="+n)}return s.length?t+s.join("&"):""}t.stringify=l,t.parse=s},a1ea:function(e,t,n){},b708:function(e,t,n){},bd11:function(e,t){e.exports=g,e.exports.match=s,e.exports.regexpToFunction=l,e.exports.parse=o,e.exports.compile=i,e.exports.tokensToFunction=c,e.exports.tokensToRegExp=b;var n="/",a=new RegExp(["(\\\\.)","(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?"].join("|"),"g");function o(e,t){var o,i=[],s=0,l=0,c="",u=t&&t.delimiter||n,f=t&&t.whitelist||void 0,h=!1;while(null!==(o=a.exec(e))){var d=o[0],m=o[1],b=o.index;if(c+=e.slice(l,b),l=b+d.length,m)c+=m[1],h=!0;else{var g="",v=o[2],y=o[3],w=o[4],x=o[5];if(!h&&c.length){var C=c.length-1,$=c[C],O=!f||f.indexOf($)>-1;O&&(g=$,c=c.slice(0,C))}c&&(i.push(c),c="",h=!1);var S="+"===x||"*"===x,j="?"===x||"*"===x,R=y||w,A=g||u,k=g||("string"===typeof i[i.length-1]?i[i.length-1]:"");i.push({name:v||s++,prefix:g,delimiter:A,optional:j,repeat:S,pattern:R?p(R):r(A,u,k)})}}return(c||l<e.length)&&i.push(c+e.substr(l)),i}function r(e,t,n){var a="[^"+u(e===t?e:e+t)+"]";return!n||n.indexOf(e)>-1||n.indexOf(t)>-1?a+"+?":u(n)+"|(?:(?!"+u(n)+")"+a+")+?"}function i(e,t){return c(o(e,t),t)}function s(e,t){var n=[],a=g(e,n,t);return l(a,n)}function l(e,t){return function(n,a){var o=e.exec(n);if(!o)return!1;for(var r=o[0],i=o.index,s={},l=a&&a.decode||decodeURIComponent,c=1;c<o.length;c++)if(void 0!==o[c]){var u=t[c-1];u.repeat?s[u.name]=o[c].split(u.delimiter).map((function(e){return l(e,u)})):s[u.name]=l(o[c],u)}return{path:r,index:i,params:s}}}function c(e,t){for(var n=new Array(e.length),a=0;a<e.length;a++)"object"===typeof e[a]&&(n[a]=new RegExp("^(?:"+e[a].pattern+")$",f(t)));return function(t,a){for(var o="",r=a&&a.encode||encodeURIComponent,i=!a||!1!==a.validate,s=0;s<e.length;s++){var l=e[s];if("string"!==typeof l){var c,u=t?t[l.name]:void 0;if(Array.isArray(u)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but got array');if(0===u.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var p=0;p<u.length;p++){if(c=r(u[p],l),i&&!n[s].test(c))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'"');o+=(0===p?l.prefix:l.delimiter)+c}}else if("string"!==typeof u&&"number"!==typeof u&&"boolean"!==typeof u){if(!l.optional)throw new TypeError('Expected "'+l.name+'" to be '+(l.repeat?"an array":"a string"))}else{if(c=r(String(u),l),i&&!n[s].test(c))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but got "'+c+'"');o+=l.prefix+c}}else o+=l}return o}}function u(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function p(e){return e.replace(/([=!:$/()])/g,"\\$1")}function f(e){return e&&e.sensitive?"":"i"}function h(e,t){if(!t)return e;var n=e.source.match(/\((?!\?)/g);if(n)for(var a=0;a<n.length;a++)t.push({name:a,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return e}function d(e,t,n){for(var a=[],o=0;o<e.length;o++)a.push(g(e[o],t,n).source);return new RegExp("(?:"+a.join("|")+")",f(n))}function m(e,t,n){return b(o(e,n),t,n)}function b(e,t,a){a=a||{};for(var o=a.strict,r=!1!==a.start,i=!1!==a.end,s=a.delimiter||n,l=[].concat(a.endsWith||[]).map(u).concat("$").join("|"),c=r?"^":"",p=0;p<e.length;p++){var h=e[p];if("string"===typeof h)c+=u(h);else{var d=h.repeat?"(?:"+h.pattern+")(?:"+u(h.delimiter)+"(?:"+h.pattern+"))*":h.pattern;t&&t.push(h),h.optional?h.prefix?c+="(?:"+u(h.prefix)+"("+d+"))?":c+="("+d+")?":c+=u(h.prefix)+"("+d+")"}}if(i)o||(c+="(?:"+u(s)+")?"),c+="$"===l?"$":"(?="+l+")";else{var m=e[e.length-1],b="string"===typeof m?m[m.length-1]===s:void 0===m;o||(c+="(?:"+u(s)+"(?="+l+"))?"),b||(c+="(?="+u(s)+"|"+l+")")}return new RegExp(c,f(a))}function g(e,t,n){return e instanceof RegExp?h(e,t):Array.isArray(e)?d(e,t,n):m(e,t,n)}},c0eb:function(e,t,n){"use strict";var a=n("c5ec"),o=n.n(a);window.$=o.a,window.jQuery=o.a,t["a"]=o.a},ca8c:function(e,t,n){"use strict";n("a1ea")},e323:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content"},[e.hasButton?n("el-button",{staticClass:"proto-setting",attrs:{disabled:!e.canSetting,icon:e.icon,size:"small",type:"primary"},on:{click:e.onSetting}}):e._e(),e._v(" "),n("Dialog",{attrs:{"show-cancel":!1,"show-confirm":!1,title:e.title,visible:e.isVisible,width:"60%"},on:{"update:visible":function(t){e.isVisible=t},close:e.onDialogClose}},[n("AutoDataForm",e._g(e._b({ref:"autoDataForm",staticClass:"data-form",attrs:{form:e.form},on:{submit:e.onSubmit}},"AutoDataForm",e.config,!1),e.$listeners))],1)],1)},o=[],r=(n("1c01"),n("58b2"),n("8e6e"),n("f3e2"),n("d25f"),n("bd86")),i=n("768b"),s=(n("ffc1"),n("6762"),n("2fdb"),n("ac6a"),n("456d"),n("96cf"),n("3b8d")),l=n("9039"),c=n("c75f"),u=n("f823");function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){Object(r["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h={components:{Dialog:l["a"],AutoDataForm:c["a"]},props:{value:{type:[String,Object],default:function(){return{}}},title:{type:String,default:function(){return this.$t("PushParams")}},btnText:{type:String,default:function(){return""}},icon:{type:String,default:"el-icon-setting"},url:{type:String,default:"/api/v1/assets/platform-automation-methods/"},method:{type:String,default:""},pushAccountParams:{type:Object,default:function(){return{}}},visible:{type:Boolean,default:!1},hasButton:{type:Boolean,default:!0}},data:function(){return{isVisible:this.visible,canSetting:!0,form:this.value,remoteMeta:{},config:{url:this.url,hasSaveContinue:!1,hasButtons:!0,hasReset:!1,fields:[],method:"get"},preFieldsMeta:{change_secret_by_ssh:{commands:{helpTextAsTip:!1}}}}},watch:{visible:function(e){this.isVisible=e},method:function(e,t){e!==t&&this.getUrlMeta()}},mounted:function(){this.getUrlMeta()},methods:{getUrlMeta:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("common/getUrlMeta",{url:this.url});case 2:t=e.sent,this.remoteMeta=t.actions[this.config.method.toUpperCase()]||{},this.onCanSetting()&&this.setFormConfig();case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onCanSetting:function(){var e=Object.keys(this.remoteMeta);return this.canSetting=e.includes(this.method)&&this.$hasPerm("assets.change_platform"),this.$emit("canSetting",this.canSetting),this.canSetting},setFormConfig:function(){var e=[],t={},n=this.method,a=this.remoteMeta[n];e=[[a.label,[n]]],t[n]={fields:[],fieldsMeta:{}};var o=this.pushAccountParams[n];if(Object.keys((null===a||void 0===a?void 0:a.children)||{}).length>0)for(var r=0,s=Object.entries(a.children);r<s.length;r++){var l=Object(i["a"])(s[r],2),c=l[0],p=l[1],h="el-input",d={};switch(null===p||void 0===p?void 0:p.type){case"list":h=u["b"];break;case"boolean":h=u["j"];break;case"text":d["text"]="textarea";break}o&&(p.default=o[c]||p.default);var m=f(f({},p),{},{component:h,el:d});t[n].fields.push(c),t[n].fieldsMeta[c]=m}var b=this.preFieldsMeta[n];if(b)for(var g=0,v=Object.entries(b);g<v.length;g++)for(var y=Object(i["a"])(v[g],2),w=y[0],x=y[1],C=0,$=Object.entries(x);C<$.length;C++){var O=Object(i["a"])($[C],2),S=O[0],j=O[1];t[n]["fieldsMeta"][w][S]=j}this.config.fields=e,this.config.fieldsMeta=t},onSetting:function(){this.isVisible=!0},onSubmit:function(e){this.$emit("input",e),this.isVisible=!1,this.$emit("update:visible",this.isVisible)},onDialogClose:function(){this.$emit("update:visible",this.isVisible)}}},d=h,m=(n("273b"),n("2877")),b=Object(m["a"])(d,a,o,!1,null,"2772642f",null);t["a"]=b.exports},fe8e:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("GenericCreateUpdatePage",e._b({},"GenericCreateUpdatePage",e.$data,!1))},o=[],r=n("cd4a"),i=n("5cba"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("AttrInput",{staticClass:"attr-input",attrs:{"form-config":e.formConfig,"table-config":e.tableConfig},on:{submit:e.onSubmit}})},l=[],c=(n("57e7"),n("d25f"),n("f823")),u=(n("7f7f"),n("6d67"),n("2caf"),n("7514"),n("0692")),p=n("9a5c"),f=[{label:u["a"].t("Platform"),value:"platform"},{label:u["a"].t("Node"),value:"node"},{label:u["a"].t("Zone"),value:"zone"},{label:u["a"].t("AccountTemplate"),value:"account_template"},{label:u["a"].t("Tags"),value:"label"},{label:u["a"].t("Strategy"),value:"name_strategy"}],h=[{label:u["a"].t("InstanceName"),value:"instance_name"},{label:u["a"].t("InstancePlatformName"),value:"instance_platform"},{label:u["a"].t("InstanceAddress"),value:"instance_address"}],d=function(e,t){return function(n,a,o){var r,i,s={},l=o;if(null!==l&&void 0!==l&&l.label)return l.label;switch(e){case"attr":return(null===(r=h.find((function(e){return e.value===l})))||void 0===r?void 0:r.label)||l;case"resource_type":return(null===(i=f.find((function(e){return e.value===l})))||void 0===i?void 0:i.label)||l;case"match":return p["a"].find((function(e){return e.value===l})).label||l;case"value":return Array.isArray(l)?l.join(", "):l;case"resource":return"function"===typeof t&&Object.assign(s,t()),s[l]||l;case"protocols":return Array.isArray(l)?l.map((function(e){return"".concat(e.name,"/").concat(e.port)})).join(", "):"";case"count":return(null===l||void 0===l?void 0:l.length)||0;default:return l}}},m={name:"RuleInput",components:{AttrInput:c["a"]},props:{value:{type:Array,default:function(){return[]}}},data:function(){var e=this,t=this.$createElement;return{formConfig:{initial:{attr:"",match:"",value:""},inline:!0,hasSaveContinue:!1,submitBtnSize:"mini",submitBtnText:this.$t("Add"),hasReset:!1,onSubmit:function(){},submitMethod:function(){return"post"},getUrl:function(){return""},fields:[["",["attr","match","value"]]],fieldsMeta:{attr:{label:"",component:c["i"],rules:[i["d"]],el:{value:[],multiple:!1,clearable:!1,options:h}},match:{label:"",component:c["i"],rules:[i["d"]],el:{value:[],multiple:!1,clearable:!1,options:p["a"].filter((function(e){var t=p["f"].concat("exclude");if(-1!==t.indexOf(e.value)&&"in"!==e.value)return e}))}},value:{component:"el-input",rules:[i["d"]]}}},tableConfig:{columns:[{prop:"attr",label:this.$t("AttrName"),formatter:d("attr")},{prop:"match",label:this.$t("Match"),formatter:d("match")},{prop:"value",label:this.$t("AttrValue"),formatter:d("value")},{prop:"action",label:this.$t("Action"),align:"center",width:"100px",formatter:function(n,a,o,r){return t("div",{attrs:{className:"input-button"}},[t("el-button",{attrs:{icon:"el-icon-minus",size:"mini",type:"danger"},style:{flexShrink:0},on:{click:e.handleDelete(r)}})])}}],totalData:this.value||[],hasPagination:!1}}},methods:{onSubmit:function(){this.$emit("input",this.tableConfig.totalData)},handleDelete:function(e){var t=this;return function(){var n,a=t.tableConfig.totalData.splice(e,1);null!==(n=a[0])&&void 0!==n&&n.id&&t.$axios.delete("/api/v1/xpack/cloud/strategy-rules/".concat(a[0].id,"/")),t.$message.success(t.$tc("DeleteSuccessMsg"))}}}},b=m,g=(n("ca8c"),n("2877")),v=Object(g["a"])(b,s,l,!1,null,"b791a522",null),y=v.exports,w=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("AttrInput",{staticClass:"action-input",attrs:{"before-submit":e.beforeSubmit,"form-config":e.formConfig,"table-config":e.tableConfig},on:{submit:e.onSubmit}})},x=[],C=(n("ac6a"),n("456d"),n("768b")),$=n("1939"),O={name:"ActionInput",components:{AttrInput:c["a"]},props:{value:{type:Array,default:function(){return[]}}},data:function(){var e=this,t=this.$createElement;return{resourceType:"",globalResource:{},globalProtocols:{},nameOptions:[{label:this.$t("InstanceName"),value:"full_name"},{label:this.$t("InstanceNamePartIp"),value:"part_name"}],formConfig:{initial:{attr:"",value:""},inline:!0,hasSaveContinue:!1,submitBtnSize:"mini",submitBtnText:this.$t("Add"),hasReset:!1,onSubmit:function(){},submitMethod:function(){return"post"},getUrl:function(){return""},cleanFormValue:function(e){return"platform"!==(null===e||void 0===e?void 0:e.attr)&&delete e.protocols,e},fields:[["",["attr","value","protocols"]]],fieldsMeta:{attr:{label:"",component:c["i"],rules:[i["d"]],el:{url:"",clearable:!1,multiple:!1,options:f},on:{change:function(t,n){var a=Object(C["a"])(t,1),o=a[0];n({value:""});var r="",i=[];switch(o){case"platform":var s=e.$route.query.category||"host";r="/api/v1/assets/platforms/?category=".concat(s);break;case"node":r="/api/v1/assets/nodes/";break;case"zone":r="/api/v1/assets/zones/";break;case"account_template":r="/api/v1/accounts/account-templates/";break;case"label":r="/api/v1/labels/labels/";break;case"name_strategy":i=e.nameOptions;break}"platform"!==o&&(e.formConfig.fieldsMeta.protocols.el.hidden=!0),e.resourceType=o,r?e.formConfig.fieldsMeta.value.el.ajax.url=r:e.formConfig.fieldsMeta.attr.el.remote=!1,e.formConfig.fieldsMeta.value.el.options=i}}},value:{label:"",component:c["i"],rules:[i["d"]],el:{options:[],value:[],ajax:{url:"/api/v1/assets/platforms/",transformOption:function(t){var n;switch(e.resourceType){case"platform":n=null===t||void 0===t?void 0:t.name,e.globalProtocols[t.id]=t.protocols,e.globalResource[t.id]=n;break;case"account_template":n="".concat(t.name,"(").concat(t.username,")"),e.globalResource[t.id]=n;break;case"node":n=null===t||void 0===t?void 0:t.full_value,e.globalResource[t.id]=n;break;case"label":n="".concat(t.name,":").concat(t.value),e.globalResource[t.id]=n;break;default:n=null===t||void 0===t?void 0:t.name,e.globalResource[t.id]=n}return{label:n,value:t.id}}},multiple:!1},on:{change:function(t,n){var a=Object(C["a"])(t,1),o=a[0];"platform"===e.resourceType?(e.formConfig.fieldsMeta.protocols.el.choices=e.globalProtocols[o]||[],e.formConfig.fieldsMeta.protocols.el.hidden=!1):e.formConfig.fieldsMeta.protocols.el.hidden=!0}}},protocols:{label:"",component:$["a"],el:{hidden:!0,settingReadonly:!0,showSetting:function(){return!1},choices:[]}}}},tableConfig:{columns:[{prop:"attr",label:this.$t("ResourceType"),formatter:d("resource_type")},{prop:"value",label:this.$t("Resource"),formatter:d("resource",(function(){return e.globalResource}))},{prop:"protocols",label:this.$t("Other"),formatter:d("protocols")},{prop:"action",label:this.$t("Action"),align:"center",width:"100px",formatter:function(n,a,o,r){return t("div",{attrs:{className:"input-button"}},[t("el-button",{attrs:{icon:"el-icon-minus",size:"mini",type:"danger"},style:{flexShrink:0},on:{click:e.handleDelete(r)}})])}}],totalData:this.value||[],hasPagination:!1}}},created:function(){this.init()},methods:{init:function(){var e=this;this.nameOptions.map((function(t){e.globalResource[t.value]=t.label}))},onSubmit:function(){this.$emit("input",this.tableConfig.totalData)},beforeSubmit:function(e){var t=this,n=!0,a={platform:this.$tc("Platform"),zone:this.$tc("Zone"),name_strategy:this.$tc("Strategy")};return this.tableConfig.totalData.map((function(o){var r,i,s=(null===(r=o.value)||void 0===r?void 0:r.id)||o.value,l=(null===(i=o.attr)||void 0===i?void 0:i.value)||o.attr;s===e.value?(n=!1,t.$message.error("".concat(t.$tc("ExistError")))):-1!==Object.keys(a).indexOf(null===e||void 0===e?void 0:e.attr)&&l===e.attr&&(n=!1,t.$message.error("".concat(t.$tc("UniqueError"),": ").concat(a[e.attr])))})),n},handleDelete:function(e){var t=this;return function(){var n,a=t.tableConfig.totalData.splice(e,1);null!==(n=a[0])&&void 0!==n&&n.id&&t.$axios.delete("/api/v1/xpack/cloud/strategy-actions/".concat(a[0].id,"/")),t.$message.success(t.$tc("DeleteSuccessMsg"))}}}},S=O,j=(n("65a0"),Object(g["a"])(S,w,x,!1,null,"19ed2677",null)),R=j.exports,A={components:{GenericCreateUpdatePage:r["c"]},data:function(){var e=this;return{url:"/api/v1/xpack/cloud/strategies/",fields:[[this.$t("Basic"),["name","priority"]],[this.$t("RuleSetting"),["rule_relation","strategy_rules"]],[this.$t("ActionSetting"),["strategy_actions"]],[this.$t("Other"),["comment"]]],fieldsMeta:{name:{rules:[i["e"],i["g"]]},rule_relation:{label:this.$t("RuleRelation"),helpTip:this.$t("RuleRelationHelpTip")},strategy_rules:{component:y},strategy_actions:{component:R}},updateSuccessNextRoute:{name:"CloudAccountList",params:{activeMenu:"StrategyList"}},createSuccessNextRoute:{name:"CloudAccountList",params:{activeMenu:"StrategyList"}},cleanFormValue:function(t){return t["category"]=e.$route.query.category||"host",t},getUrl:function(){var e,t=null===(e=this.$route.params)||void 0===e?void 0:e.id;return t?"".concat(this.url).concat(t,"/"):this.url}}},methods:{}},k=A,_=Object(g["a"])(k,a,o,!1,null,"38efa95e",null);t["default"]=_.exports}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6d7621b7"],{"10a4":function(t,e,a){"use strict";a("5d65")},"363e":function(t,e,a){},"5d65":function(t,e,a){},"78dd":function(t,e,a){"use strict";a("363e")},9819:function(t,e,a){},a69f:function(t,e,a){"use strict";a("9819")},b9b1:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"HomeCard"}},[a("el-card",{staticClass:"box-card no-border",attrs:{shadow:"never"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.title||t.btnText,expression:"title || btnText"}],staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{directives:[{name:"show",rawName:"v-show",value:t.title,expression:"title"}],staticClass:"title"},[t._v(t._s(t.title))]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.btnText,expression:"btnText"}],staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:t.btnChange}},[t._v("\n        "+t._s(t.btnText)+"\n      ")])],1),t._v(" "),a("ListTable",{ref:"ListTable",staticClass:"ListTable",attrs:{"header-actions":t.headerActions,"table-config":t.tableConfig}})],1)],1)},n=[],c=a("af7d"),r={name:"HomeCard",components:{ListTable:c["a"]},props:{title:{type:String,default:function(){return""}},btnText:{type:String,default:function(){return""}},headerActions:{type:Object,default:function(){return{hasLeftActions:!1,hasRightActions:!1,hasSearch:!1}}},tableConfig:{type:Object,default:function(){}}},data:function(){return{}},methods:{btnChange:function(){this.btnRouteName&&this.$router.push({name:this.btnRouteName})}}},o=r,i=(a("e43e"),a("2877")),u=Object(i["a"])(o,s,n,!1,null,"8e2c64ee",null);e["a"]=u.exports},ca12:function(t,e,a){},d1b8:function(t,e,a){"use strict";a("ca12")},e43e:function(t,e,a){"use strict";a("eadc")},eadc:function(t,e,a){},fc34:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return this.$hasPerm("accounts.view_changesecretautomation")?a("div",{staticClass:"change-secret-container"},[a("ChangeSecretReport",{attrs:{nav:!1}})],1):t._e()},n=[],c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("BaseReport",{attrs:{"only-charts":!t.nav}},[a("div",{staticClass:"switch-date-wrapper"},[a("SwitchDate",{staticClass:"switch-date",attrs:{name:t.name},on:{change:t.onChange}})],1),t._v(" "),a("el-row",[a("el-col",{attrs:{lg:16,md:24}},[a("CardSummary",{staticClass:"card-summary",attrs:{days:t.days}})],1),t._v(" "),a("el-col",{attrs:{lg:8,md:24}},[a("DataSummary",{staticClass:"data-summary",attrs:{days:t.days}})],1)],1),t._v(" "),a("el-row",[a("AccountSummary",{staticClass:"account-summary",attrs:{days:t.days}})],1),t._v(" "),a("el-row",[a("FailedAccountSummary",{staticClass:"failed-account-summary",attrs:{days:t.days}})],1)],1)},r=[],o=(a("7f7f"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",{attrs:{gutter:16}},[a("el-col",{staticClass:"margin-top-10",attrs:{md:24,sm:24}},[a("SummaryCountCard",{attrs:{config:t.logConfig,items:t.LogItems}})],1)],1)],1)}),i=[],u=(a("96cf"),a("3b8d")),l=(a("c5f6"),a("5f2d")),d={components:{SummaryCountCard:l["a"]},props:{days:{type:[Number,String],default:"7"}},data:function(){return{logConfig:{title:this.$t("RunningSummary")},data:{total_count_ongoing_change_secret:0,total_count_ongoing_change_secret_assets:0,total_count_ongoing_change_secret_accounts:0}}},computed:{LogItems:function(){return[{title:this.$t("Total"),body:{count:this.data.total_count_ongoing_change_secret}},{title:this.$t("Assets"),body:{count:this.data.total_count_ongoing_change_secret_assets}},{title:this.$t("Accounts"),body:{count:this.data.total_count_ongoing_change_secret_accounts}}]}},watch:{days:function(){this.getData()}},mounted:function(){this.getData()},methods:{getData:function(){var t=Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$axios.get("/api/v1/accounts/change-secret-dashboard/",{params:{total_count_ongoing_change_secret:1}});case 2:this.data=t.sent;case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},h=d,m=(a("d1b8"),a("2877")),g=Object(m["a"])(h,o,i,!1,null,"5809e211",null),f=g.exports,_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",{attrs:{gutter:16}},[a("el-col",{staticClass:"margin-top-10 card-left",attrs:{lg:12,md:24}},[a("SummaryCountCard",{attrs:{config:t.logConfig,items:t.LogItems}})],1),t._v(" "),a("el-col",{staticClass:"margin-top-10 card-right",attrs:{lg:12,md:24}},[a("SummaryCountCard",{attrs:{config:t.sessionConfig,items:t.sessionItems}})],1)],1)],1)},p=[],b={name:"CardSummary",components:{SummaryCountCard:l["a"]},props:{days:{type:[Number,String],default:"7"}},data:function(){return{logConfig:{title:this.$t("TaskSummary"),tip:this.$t("CurrentStatus")},sessionConfig:{title:this.$t("ExecutionSummary"),tip:this.$t("ChangeSecretExecutionStatus")},data:{total_count_change_secrets:0,total_count_periodic_change_secrets:0,total_count_change_secret_assets:0,total_count_change_secret_executions:0,total_count_success_change_secret_executions:0,total_count_failed_change_secret_executions:0}}},computed:{LogItems:function(){var t=this;return[{title:this.$t("Total"),body:{canDirect:!0,count:this.data.total_count_change_secrets,callback:function(){t.$eventBus.$emit("change-tab",{name:"AccountChangeSecretList",payload:{days:t.days}})}}},{title:this.$t("Periodic"),body:{count:this.data.total_count_periodic_change_secrets}},{title:this.$t("Assets"),body:{count:this.data.total_count_change_secret_assets}}]},sessionItems:function(){var t=this;return[{title:this.$t("Total"),body:{canDirect:!0,count:this.data.total_count_change_secret_executions,callback:function(){t.$eventBus.$emit("change-tab",{name:"AccountChangeSecretExecutionList",payload:{days:t.days}})}}},{title:this.$t("Success"),body:{count:this.data.total_count_success_change_secret_executions}},{title:this.$t("Failed"),body:{count:this.data.total_count_failed_change_secret_executions}}]}},watch:{days:function(){this.getData()}},mounted:function(){this.getData()},methods:{getData:function(){var t=Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$axios.get("/api/v1/accounts/change-secret-dashboard/",{params:{days:this.days,total_count_change_secrets:1,total_count_periodic_change_secrets:1,total_count_change_secret_assets:1,total_count_change_secret_status:1}});case 2:this.data=t.sent;case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},y=b,v=(a("78dd"),Object(m["a"])(y,_,p,!1,null,"db737e4a",null)),C=v.exports,w=a("280e"),$=a("d492"),S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.showViewSecretDialog?a("RecordViewSecret",{attrs:{url:t.secretUrl,visible:t.showViewSecretDialog},on:{"update:visible":function(e){t.showViewSecretDialog=e}}}):t._e(),t._v(" "),a("HomeCard",t._b({ref:"HomeCard",staticClass:"failed-accounts",attrs:{"table-config":t.tableConfig}},"HomeCard",t.cardConfig,!1))],1)},x=[],A=a("b9b1"),D=a("53f7"),T=a("ac6b"),R=a("1e7f"),k={components:{RecordViewSecret:R["a"],HomeCard:A["a"]},props:{days:{type:[Number,String],default:"7"}},data:function(){var t=this,e=this.$createElement,a=this;return{url:"/api/v1/accounts/change-secret-records/dashboard/",showViewSecretDialog:!1,cardConfig:{title:a.$tc("ChangeSecretFailAccounts")},tableConfig:{url:a.tableUrl(),columns:["asset","account","date_finished","is_success","error","actions"],columnsMeta:{asset:{label:this.$t("Asset"),formatter:D["i"],formatterArgs:{can:this.$hasPerm("assets.view_asset"),getTitle:function(t){var e=t.row;return e.asset.name},getRoute:function(t){var e=t.row;return{name:"AssetDetail",params:{id:e.asset.id}}}}},account:{label:this.$t("Account"),formatter:D["i"],formatterArgs:{can:this.$hasPerm("accounts.view_account"),getTitle:function(t){var e=t.row;return e.account.username},getRoute:function(t){var e=t.row;return{name:"AssetAccountDetail",params:{id:e.account.id}}}}},is_success:{label:this.$t("Success"),formatter:function(t){return"pending"===t.status?e("i",{class:"fa  fa fa-spinner fa-spin"}):t.is_success?e("i",{class:"fa fa-check text-primary"}):e("i",{class:"fa fa-times text-danger"})}},actions:{formatter:D["c"],formatterArgs:{hasUpdate:!1,hasDelete:!1,hasClone:!1,moreActionsTitle:this.$t("More"),extraActions:[{name:"View",title:this.$t("View"),type:"primary",callback:function(t){var e=t.row;a.secretUrl="/api/v1/accounts/change-secret-records/".concat(e.id,"/secret/"),a.showViewSecretDialog=!1,setTimeout((function(){a.showViewSecretDialog=!0}))}},{name:"Retry",title:this.$t("Retry"),can:this.$hasPerm("accounts.add_changesecretexecution"),type:"primary",callback:function(e){var a=e.row;t.$axios.post("/api/v1/accounts/change-secret-records/execute/",{record_ids:[a.id]}).then((function(t){Object(T["k"])(t["task"])}))}},{name:"ignoreFail",title:this.$t("IgnoreFail"),can:this.$hasPerm("accounts.view_changesecretrecord"),type:"primary",callback:function(e){var a=e.row;t.$axios.patch("/api/v1/accounts/change-secret-records/".concat(a.id,"/ignore-fail/")).then((function(e){t.$message.success(t.$tc("UpdateSuccessMsg")),t.$refs.HomeCard.$refs.ListTable.reloadTable()}))}}]}}}}}},watch:{days:function(){this.$refs.HomeCard.$refs.ListTable.tableConfig.url=this.tableUrl(),this.$refs.HomeCard.$refs.ListTable.reloadTable()}},methods:{tableUrl:function(){return"/api/v1/accounts/change-secret-records/dashboard/?days=".concat(this.days)}}},L=k,j=(a("10a4"),Object(m["a"])(L,S,x,!1,null,"03ce48c0",null)),O=j.exports,E=a("d619"),V={name:"ChangeSecret",components:{AccountSummary:$["a"],SwitchDate:w["a"],DataSummary:f,FailedAccountSummary:O,CardSummary:C,BaseReport:E["a"]},props:{nav:{type:Boolean,default:!0}},data:function(){return{name:"ChangeSecretDashboard",days:localStorage.getItem(this.name)||"7"}},methods:{onChange:function(t){this.days=t,localStorage.setItem("dashboardDays",t)}}},H=V,I=(a("a69f"),Object(m["a"])(H,c,r,!1,null,"ad9328a6",null)),N=I.exports,U={name:"ChangeSecret",components:{ChangeSecretReport:N},data:function(){return{}},methods:{}},F=U,P=Object(m["a"])(F,s,n,!1,null,"1e212b8e",null);e["default"]=P.exports}}]);
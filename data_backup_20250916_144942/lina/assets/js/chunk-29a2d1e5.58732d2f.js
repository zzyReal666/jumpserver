(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-29a2d1e5"],{1576:function(t,e,n){},"1daf":function(t,e,n){"use strict";n("4520")},"27d3":function(t,e,n){"use strict";n("1576")},4520:function(t,e,n){},5548:function(t,e,n){"use strict";n("d0a4")},"68b4d":function(t,e,n){},cd5f:function(t,e,n){"use strict";n("68b4d")},d0a4:function(t,e,n){},d492:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:{box:!t.disableBox}},[t.isTitle?n("div",{staticClass:"head"},[n("Title",{attrs:{config:t.config}})],1):t._e(),t._v(" "),t.loading?n("LineChart",t._b({},"LineChart",t.lineChartConfig,!1)):t._e()],1)},i=[],r=(n("96cf"),n("3b8d")),o=(n("c5f6"),n("a505")),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("echarts",{ref:"echarts",class:{"disabled-when-print":!!t.dataUrl},attrs:{options:t.options,autoresize:!0,theme:"light"},on:{finished:t.genSnapshot}}),t._v(" "),t.dataUrl?n("img",{staticClass:"enabled-when-print",attrs:{src:t.dataUrl,alt:"chart snapshot"}}):t._e()],1)},c=[],l=(n("a481"),n("313e")),d=n("b416"),h={name:"LoginMetric",props:{range:{type:String,default:"weekly"},datesMetrics:{type:Array,default:function(){return[]}},primaryName:{type:String,default:""},primaryData:{type:Array,default:function(){return[]}},secondaryName:{type:String,default:""},secondaryData:{type:Array,default:function(){return[]}}},data:function(){return{dataUrl:""}},computed:{mixColors:function(){var t=document.documentElement.style,e=t.getPropertyValue("--color-primary"),n=e.replace(/#/g,"");return{primary:e,TwoLevelColor:Object(d["c"])(n,"ffffff",38),ThreeLevelColor:Object(d["c"])(n,"ffffff",20),shadowColor:Object(d["c"])(n,"ffffff",1)}},options:function(){var t=this.mixColors,e=t.primary,n=t.TwoLevelColor,a=t.ThreeLevelColor,i=t.shadowColor;return{title:{show:!1},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{left:"auto",icon:"rect",itemWidth:10,itemHeight:10},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},color:[e,"#F3B44B"],xAxis:[{type:"category",boundaryGap:!1,axisLine:{lineStyle:{color:"#8F959E"}},axisLabel:{textStyle:{color:"#8F959E"}},axisTick:{show:!1},data:this.datesMetrics}],yAxis:[{type:"value",axisLine:{show:!1,lineStyle:{color:"#fff"}},axisLabel:{textStyle:{color:"#8F959E"}},axisTick:{show:!1},splitLine:{show:!0,lineStyle:{color:"#EFF0F1"}}}],animationDuration:500,series:[{name:this.primaryName,type:"line",smooth:!0,areaStyle:{normal:{color:new l["graphic"].LinearGradient(0,0,0,1,[{offset:0,color:e},{offset:.6,color:n},{offset:.8,color:a}],!1),shadowColor:i,shadowBlur:5}},data:this.primaryData,showSymbol:!1,lineStyle:{width:2}},{name:this.secondaryName,type:"line",smooth:!0,areaStyle:{normal:{color:new l["graphic"].LinearGradient(0,0,0,1,[{offset:0,color:"rgba(249,199,79,0.6)"},{offset:.6,color:"rgba(249,199,79,0.2)"},{offset:.8,color:"rgba(249,199,79,0.1)"}],!1),shadowColor:"rgba(249,199,79,0.1)",shadowBlur:6}},data:this.secondaryData,showSymbol:!1,lineStyle:{width:2}}]}}},watch:{range:function(){this.genSnapshot()},datesMetrics:function(){this.genSnapshot()},primaryData:function(){this.genSnapshot()},secondaryData:function(){this.genSnapshot()}},mounted:function(){var t=this;if(this.genSnapshot(),this._before=function(){return t.genSnapshot(!0)},this._after=function(){return t.forceResize()},window.addEventListener("beforeprint",this._before),window.addEventListener("afterprint",this._after),this._mql=window.matchMedia&&window.matchMedia("print"),this._mql){var e,n,a,i,r=function(e){return e.matches?t._before():t._after()};null===(e=(n=this._mql).addEventListener)||void 0===e||e.call(n,"change",r),null===(a=(i=this._mql).addListener)||void 0===a||a.call(i,r),this._mql._handler=r}},beforeDestroy:function(){var t,e,n,a;(window.removeEventListener("beforeprint",this._before),window.removeEventListener("afterprint",this._after),this._mql)&&(null===(t=(e=this._mql).removeEventListener)||void 0===t||t.call(e,"change",this._mql._handler),null===(n=(a=this._mql).removeListener)||void 0===n||n.call(a,this._mql._handler))},methods:{forceResize:function(){var t,e=null===(t=this.$refs.echarts)||void 0===t?void 0:t.echartsInstance;e&&e.resize()},genSnapshot:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,n,a,i=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=i.length>0&&void 0!==i[0]&&i[0],n&&this.forceResize(),a=null===(e=this.$refs.echarts)||void 0===e?void 0:e.echartsInstance,a){t.next=5;break}return t.abrupt("return");case 5:try{this.dataUrl=a.getDataURL({pixelRatio:2,backgroundColor:"#ffffff"})}catch(r){this.dataUrl=""}case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},u=h,f=(n("5548"),n("2877")),p=Object(f["a"])(u,s,c,!1,null,"a22eb6f2",null),m=p.exports,g={components:{Title:o["a"],LineChart:m},props:{days:{type:[Number,String],default:"7"},isTitle:{type:Boolean,default:!0},disableBox:{type:Boolean,default:!1}},data:function(){return{loading:!1,config:{title:this.$t("AccountResult"),tip:this.$t("AccountResult")},lineChartConfig:{datesMetrics:[],primaryData:[1],primaryName:this.$t("Success"),secondaryData:[1],secondaryName:this.$t("Failed")}}},watch:{days:function(){this.getMetricData()}},mounted:function(){try{this.getMetricData()}finally{this.loading=!0}},methods:{getMetricData:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,n,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e="/api/v1/accounts/change-secret-dashboard/?daily_success_and_failure_metrics=1&days=".concat(this.days),t.next=3,this.$axios.get(e);case 3:n=t.sent,a=null===n||void 0===n?void 0:n.dates_metrics_total_count_success,i=null===n||void 0===n?void 0:n.dates_metrics_total_count_failed,this.lineChartConfig.datesMetrics=null===n||void 0===n?void 0:n.dates_metrics_date,a.length>0&&(this.lineChartConfig.primaryData=a),i.length>0&&(this.lineChartConfig.secondaryData=i);case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},y=g,v=(n("1daf"),Object(f["a"])(y,a,i,!1,null,"3b21c426",null));e["a"]=v.exports},d619:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:{"no-padding":t.onlyCharts,nav:t.nav}},[!t.onlyCharts&&t.nav?n("div",{staticClass:"header nav-bar"},[n("div",{staticClass:"nav-bar-logo"},[n("Logo")],1),t._v(" "),n("RightAction",{attrs:{name:t.name}})],1):t._e(),t._v(" "),n("div",{staticClass:"content"},[t.onlyCharts?t._e():n("div",{staticClass:"title-bar"},[n("div",{staticClass:"title"},[t._v("\n        "+t._s(t.title)+"\n\n        "),n("span",{staticClass:"datetime"},[t._v("\n          ["+t._s((new Date).toLocaleString())+"]\n        ")]),t._v(" "),!t.nav&&t.url?n("span",{staticStyle:{float:"right","line-height":"40px"}},[n("el-button",{attrs:{type:"text"},on:{click:t.openNewWindow}},[n("i",{staticClass:"fa fa-external-link",staticStyle:{"font-size":"15px"}}),t._v("\n            "+t._s(t.$t("Export"))+"\n          ")])],1):t._e()]),t._v(" "),t.isDescription?n("div",{staticClass:"description"},[t._v("\n        "+t._s(t.description)+"\n      ")]):t._e()]),t._v(" "),n("div",{staticClass:"charts-zone"},[t._t("default")],2)])])},i=[],r=(n("6762"),n("2fdb"),n("4f37"),n("62db")),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"nav-bar-right export-bar"},[n("el-button-group",[n("el-button",{staticClass:"export-btn",attrs:{loading:t.exportLoading,disabled:t.exportLoading,type:"text",icon:"el-icon-printer"},on:{click:t.exportPdf}},[t._v("\n      "+t._s(t.$t("ExportAsPDF"))+"\n\n    ")]),t._v(" "),n("el-button",{staticClass:"export-btn",attrs:{type:"text",icon:"el-icon-message"},on:{click:t.emailReport}},[t._v("\n\n      "+t._s(t.$t("EMailReport"))+"\n    ")]),t._v(" "),n("el-button",{staticClass:"export-btn",attrs:{type:"text",icon:"el-icon-printer"},on:{click:t.printReport}},[t._v("\n      "+t._s(t.$t("Print"))+"\n    ")])],1)],1)},s=[],c=(n("7f7f"),n("dbfd")),l={name:"RightAction",props:{name:{type:String,default:""}},data:function(){return{exportLoading:!1}},methods:{checkName:function(){return!!this.name||(this.$message.error("Please select a chart"),!1)},getDaysParam:function(){return this.$route.query.days||localStorage.getItem(this.name)||"7"},exportPdf:function(){if(this.checkName()){var t=this.getDaysParam(),e="/core/reports/export-pdf/?chart=".concat(this.name,"&days=").concat(t);this.$message.success(this.$t("Export")+"..."),Object(c["e"])(e)}},emailReport:function(){var t=this;if(this.checkName()){var e=this.getDaysParam();this.$message.success(this.$t("EMailReport")+"..."),this.$axios.post("/core/reports/send-mail/?chart=".concat(this.name,"&days=").concat(e)).catch((function(e){t.$message.error(t.$t("Failed")+": "+e.message)}))}},printReport:function(){window.print()}}},d=l,h=(n("cd5f"),n("2877")),u=Object(h["a"])(d,o,s,!1,null,"04bfb9fd",null),f=u.exports,p={components:{Logo:r["a"],RightAction:f},props:{onlyCharts:{type:Boolean,default:!1},nav:{type:Boolean,default:!1},name:{type:String,default:""},title:{type:String,default:""},description:{type:String,default:""},url:{type:String,default:""}},data:function(){return{}},computed:{isDescription:function(){return this.description&&""!==this.description.trim()}},methods:{handleChangeChart:function(t){},openNewWindow:function(){try{if(!this.win||this.win.closed){var t=1048,e=800,n=(screen.width-t)/2,a=(screen.height-e)/2,i="width=".concat(t,",height=").concat(e,",left=").concat(n,",top=").concat(a,",scrollbars=yes,resizable=yes"),r=this.url;if(this.$route.query.days){var o=r.includes("?")?"&":"?";r="".concat(r).concat(o,"days=").concat(this.$route.query.days)}this.win=window.open(r,"_blank",i)}this.win.focus()}catch(s){console.error("打开新窗口失败:",s),window.location.href=this.url}},openSettings:function(){console.log("openSettings")}}},m=p,g=(n("27d3"),Object(h["a"])(m,a,i,!1,null,"5785de42",null));e["a"]=g.exports}}]);
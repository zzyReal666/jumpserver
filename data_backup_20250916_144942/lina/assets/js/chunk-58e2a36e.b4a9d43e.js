(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-58e2a36e"],{b662:function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("GenericDetailPage",e._b({attrs:{"active-menu":e.config.activeMenu,object:e.sessionData},on:{"update:activeMenu":function(t){return e.$set(e.config,"activeMenu",t)},"update:active-menu":function(t){return e.$set(e.config,"activeMenu",t)},"update:object":function(t){e.sessionData=t}}},"GenericDetailPage",e.config,!1),[n("keep-alive",[n(e.config.activeMenu,{tag:"component",attrs:{object:e.sessionData}})],1)],1)},i=[],a=n("cd4a"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ListTable",{attrs:{"header-actions":e.headerActions,"table-config":e.tableConfig}})},r=[],c=(n("96cf"),n("3b8d")),l=n("af7d"),u=n("d58a"),d=n("3f95"),h={name:"SessionCommands",components:{ListTable:l["a"]},data:function(){return{tableConfig:{hasSelection:!1,url:"/api/v1/terminal/commands/?session_id=".concat(this.$route.params.id),columns:["expandCol","index","input","timestamp"],columnsMeta:{expandCol:{type:"expand",formatter:u["a"]},index:{type:"index",label:"ID",sortable:"custom"},input:{label:this.$t("Command"),sortable:"custom"},timestamp:{width:"160px",sortable:"custom",formatter:function(e){return Object(d["i"])(1e3*e.timestamp)}},actions:{has:!1}}},headerActions:{hasExport:!1,hasImport:!1,hasRefresh:!1,hasCreate:!1,hasBulkDelete:!1,hasBulkUpdate:!1,hasLeftActions:!1,hasSearch:!1,hasRightActions:!1}}},mounted:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("common/getDrawerActionMeta");case 2:t=e.sent,t&&t.id&&(this.tableConfig.url="/api/v1/terminal/commands/?session_id=".concat(t.id));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},m=h,p=n("2877"),f=Object(p["a"])(m,o,r,!1,null,null,null),b=f.exports,v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("TwoCol",{scopedSlots:e._u([{key:"right",fn:function(){return[e.object?n("QuickActions",{attrs:{actions:e.quickActions,type:"primary"}}):e._e()]},proxy:!0}])},[[e.object?n("DetailCard",{attrs:{items:e.detailItems}}):e._e()]],2)},_=[],g=n("30f4"),w=n("2af9"),y=n("d952"),$=n("52cc"),j={name:"SessionDetailInfo",components:{TwoCol:$["a"],DetailCard:g["a"],QuickActions:w["o"]},props:{object:{type:Object,default:null}},data:function(){return{session:this.object}},computed:{onlineSessionActions:function(){var e=this;return[{title:this.$t("SessionTerminate"),attrs:{type:"danger",label:this.$t("Terminate"),disabled:!this.session["can_terminate"]||!e.$hasPerm("terminal.terminate_session")},callbacks:{click:function(){Object(y["g"])(e.session.id).then((function(t){var n=e.$t("TerminateTaskSendSuccessMsg");e.$message.success(n),window.setTimeout((function(){window.location.reload()}),5e4)}))}}},{title:this.$t("SessionMonitor"),attrs:{type:"primary",label:this.$t("Monitor"),disabled:!this.session["can_join"]||!e.$hasPerm("terminal.monitor_session")||"sftp"===e.session.type.value},callbacks:{click:function(){var t="/luna/monitor/"+e.session.id;window.open(t,"height=600, width=800, top=400, left=400, toolbar=no, menubar=no, scrollbars=no, location=no, status=no")}}}]},offlineSessionActions:function(){var e=this;return[{title:this.$t("ReplaySession"),attrs:{type:"primary",label:this.$t("Replay"),disabled:!this.session["can_replay"]||!e.$hasPerm("terminal.view_sessionreplay")},callbacks:{click:function(){var t="/luna/replay/"+e.session.id;window.open(t)}}},{title:this.$t("DownloadReplay"),attrs:{type:"primary",label:this.$t("Download"),disabled:!this.session["can_replay"]||!e.$hasPerm("terminal.download_sessionreplay")},callbacks:{click:function(){var t=e.session.org_id||"",n="/api/v1/terminal/sessions/".concat(e.session.id,"/replay/download/").concat(t?"?oid="+t:"");window.open(n)}}}]},detailItems:function(){var e;return[{key:this.$t("User"),value:this.session.user},{key:this.$t("Host"),value:this.session.asset},{key:this.$t("Account"),value:this.session.account},{key:this.$t("Protocol"),value:this.session.protocol},{key:this.$t("LoginFrom"),value:(null===(e=this.session.login_from)||void 0===e?void 0:e.label)||"-"},{key:this.$t("RemoteAddr"),value:this.session.remote_addr},{key:this.$t("DateStart"),value:Object(d["i"])(this.session.date_start)},{key:this.$t("DateEnd"),value:this.session.date_end?Object(d["i"])(this.session.date_end):""}]},quickActions:function(){var e=this;return e.session.is_finished?this.offlineSessionActions:this.onlineSessionActions}}},k=j,S=Object(p["a"])(k,v,_,!1,null,"80d190de",null),x=S.exports,A=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ListTable",{attrs:{"header-actions":e.headerActions,"table-config":e.tableConfig}})},D=[],O={name:"SessionJoinRecords",components:{ListTable:l["a"]},props:{object:{type:Object,required:!0}},data:function(){return{tableConfig:{url:"/api/v1/terminal/session-join-records/?session=".concat(this.object.id),columns:["joiner_display","reason","is_success","is_finished","date_joined","date_left","org_name","action_permission"],columnsShow:{min:["joiner_display","is_success","reason"],default:["joiner_display","verify_code","is_success","reason","is_finished","date_joined","date_left"]},columnsMeta:{is_success:{width:"150px"},is_finished:{width:"150px",formatterArgs:{showFalse:!1}}}},headerActions:{hasImport:!1,hasLeftActions:!1,searchConfig:{exclude:["date_joined","date_left"]}}}}},C=O,T=Object(p["a"])(C,A,D,!1,null,"9f7248f0",null),R=T.exports,P=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ListTable",{attrs:{"header-actions":e.headerActions,"table-config":e.tableConfig}})},M=[],L=n("dbfd"),E={name:"SessionFTPLogs",components:{ListTable:l["a"]},data:function(){var e=this;return{tableConfig:{hasSelection:!1,url:"/api/v1/audits/ftp-logs/?session=".concat(this.$route.params.id),columnsShow:{default:["id","user","remote_addr","asset","account","operate","filename","date_start","is_success","actions"]},columnsMeta:{remote_addr:{width:"140px"},operate:{width:"100px"},is_success:{width:"100px"},actions:{width:"82px",formatterArgs:{hasUpdate:!1,hasDelete:!1,hasClone:!1,extraActions:[{name:"download",title:this.$t("Download"),type:"primary",can:function(e){var t=e.row;return t.has_file},tip:function(t){var n=t.row;return n.has_file?e.$t("Download"):e.$t(".DownloadFTPFileTip")},callback:function(e){var t=e.row;Object(L["e"])("/api/v1/audits/ftp-logs/".concat(t.id,"/file/download/"))}}]}}}},headerActions:{hasExport:!1,hasImport:!1,hasRefresh:!1,hasCreate:!1,hasBulkDelete:!1,hasBulkUpdate:!1,hasLeftActions:!1,hasSearch:!1,hasRightActions:!1}}},mounted:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("common/getDrawerActionMeta");case 2:t=e.sent,t&&t.id&&(this.tableConfig.url="/api/v1/audits/ftp-logs/?session=".concat(t.id));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},I=E,F=Object(p["a"])(I,P,M,!1,null,null,null),J=F.exports,B={name:"SessionDetail",components:{GenericDetailPage:a["d"],SessionCommands:b,SessionDetailInfo:x,SessionJoinRecords:R,SessionFTPLogs:J},data:function(){var e=this;return{sessionData:{},config:{url:"/api/v1/terminal/sessions",activeMenu:"SessionDetailInfo",submenu:[{title:this.$t("Basic"),name:"SessionDetailInfo"},{title:this.$t("Command"),name:"SessionCommands",hidden:function(){return!e.$hasPerm("terminal.view_command")}},{title:this.$t("SessionJoinRecords"),name:"SessionJoinRecords",hidden:function(){return!e.$hasPerm("terminal.view_sessionjoinrecord")}},{title:this.$t("FileTransfer"),name:"SessionFTPLogs",hidden:function(){return!e.$hasPerm("audits.view_ftplog")}}],getObjectName:function(e){return e.id},hasActivity:!0,hasRightSide:!1}}},methods:{}},U=B,q=Object(p["a"])(U,s,i,!1,null,null,null);t["default"]=q.exports},d58a:function(e,t,n){"use strict";var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("pre",{staticStyle:{border:"none",background:"none","white-space":"pre-wrap","word-wrap":"break-word",padding:"10px 20px"}},[e._v(e._s("$ "+e.row.input)+"\n"),n("br"),e._v("\n"+e._s(e.row.output)+"\n  ")])},i=[],a=n("73c8"),o={name:"OutputExpandFormatter",extends:a["a"]},r=o,c=n("2877"),l=Object(c["a"])(r,s,i,!1,null,"55cdfbb2",null),u=l.exports;n.d(t,"a",(function(){return u}))},d952:function(e,t,n){"use strict";n.d(t,"g",(function(){return i})),n.d(t,"h",(function(){return a})),n.d(t,"e",(function(){return o})),n.d(t,"f",(function(){return r})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return h}));var s=n("b775");function i(e){return Object(s["c"])({url:"/api/v1/terminal/tasks/kill-session/",method:"post",data:e})}function a(e){return Object(s["c"])({url:"/api/v1/terminal/tasks/toggle-lock-session/",method:"post",data:e})}function o(){return Object(s["c"])({url:"/api/v1/terminal/command-storages/",method:"get"})}function r(){return Object(s["c"])({url:"/api/v1/terminal/replay-storages/",method:"get"})}function c(e){return Object(s["c"])({url:"/api/v1/terminal/command-storages/".concat(e,"/test-connective/"),method:"get"})}function l(e){return Object(s["c"])({url:"/api/v1/terminal/replay-storages/".concat(e,"/test-connective/"),method:"get"})}function u(e){return Object(s["c"])({url:e,method:"patch",data:{is_default:!0}})}function d(e){return u("/api/v1/terminal/command-storages/".concat(e,"/"))}function h(e){return u("/api/v1/terminal/replay-storages/".concat(e,"/"))}}}]);
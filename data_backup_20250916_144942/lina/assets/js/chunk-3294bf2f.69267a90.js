(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3294bf2f"],{1576:function(t,e,s){},1611:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("BaseReport",t._b({attrs:{title:t.title,nav:t.nav,name:t.name}},"BaseReport",t.$attrs,!1),[s("div",{staticClass:"charts-grid"},[s("SwitchDate",{staticClass:"switch-date",attrs:{name:t.name},on:{change:t.onChange}}),t._v(" "),s("br"),t._v(" "),s("div",{staticClass:"chart-container full-width"},[s("div",{staticClass:"chart-container-title"},[s("div",{staticClass:"chart-container-title-text"},[t._v(t._s(t.$t("Overview")))]),t._v(" "),s("SummaryCountCard",{attrs:{items:t.totalData}})],1)]),t._v(" "),s("div",{staticClass:"chart-container"},[s("div",{staticClass:"chart-container-title"},[s("UserAssetActivity",{attrs:{days:t.days}})],1)]),t._v(" "),s("div",{staticClass:"chart-container"},[s("div",{staticClass:"chart-container-title"},[s("div",{staticClass:"chart-container-title-text"},[t._v(t._s(t.$t("DistributionOfAssetLoginMethods")))]),t._v(" "),s("div",{staticClass:"chart"},[s("echarts",{attrs:{options:t.LoginEntryOptions,autoresize:!0}})],1)])]),t._v(" "),s("div",{staticClass:"chart-container"},[s("div",{staticClass:"chart-container-title"},[s("div",{staticClass:"chart-container-title-text"},[t._v(t._s(t.$t("RemoteLoginProtocolUsageDistribution")))]),t._v(" "),s("div",{staticClass:"chart"},[s("echarts",{attrs:{options:t.LoginProtocolOptions,autoresize:!0}})],1)])]),t._v(" "),s("div",{staticClass:"chart-container"},[s("div",{staticClass:"chart-container-title"},[s("div",{staticClass:"chart-container-title-text"},[t._v(t._s(t.$t("OperatingSystemDistributionOfLoginAssets")))]),t._v(" "),s("div",{staticClass:"chart"},[s("echarts",{attrs:{options:t.LoginOSOptions,autoresize:!0}})],1)])]),t._v(" "),s("div",{staticClass:"chart-container full-width"},[s("div",{staticClass:"chart-container-title"},[s("div",{staticClass:"chart-container-title-text"},[t._v(t._s(t.$t("AssetLoginTrends")))]),t._v(" "),s("div",{staticClass:"chart"},[s("echarts",{ref:"loginTrend",attrs:{options:t.loginTrendOptions,autoresize:!0}})],1)])])],1)])],1)},a=[],n=(s("6d67"),s("96cf"),s("3b8d")),o=(s("7f7f"),s("280e")),r=s("d619"),c=s("5f2d"),l=s("93a3"),h=s("313e"),d=s("5423"),u={components:{UserAssetActivity:l["a"],SummaryCountCard:c["a"],BaseReport:r["a"],SwitchDate:o["a"]},props:{nav:{type:Boolean,default:!0}},data:function(){return{title:this.$t("AssetActivityReport"),name:"AssetReport",days:localStorage.getItem(this.name)||"7",session_stats:{total:0,asset_count:0,user_count:0},pie:{asset_login_by_type:[{name:this.$t("Nothing"),value:0}],asset_login_by_from:[{name:this.$t("Nothing"),value:0}],asset_login_by_protocol:[{name:this.$t("Nothing"),value:0}]},asset_login_log_metrics:{dates_metrics_date:[],dates_metrics_total:[0]}}},computed:{totalData:function(){return[{title:this.$t("Session"),body:{count:this.session_stats.total}},{title:this.$t("Asset"),body:{count:this.session_stats.asset_count}},{title:this.$t("User"),body:{count:this.session_stats.user_count}}]},LoginEntryOptions:function(){return{tooltip:{trigger:"item"},legend:{top:"bottom"},series:[{type:"pie",minAngle:5,radius:["40%","70%"],data:this.pie.asset_login_by_from,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:15,fontWeight:"bold"}}}]}},LoginProtocolOptions:function(){return{tooltip:{trigger:"item"},legend:{orient:"vertical",left:"left"},series:[{type:"pie",minAngle:5,radius:["40%","70%"],itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:15,fontWeight:"bold"}},data:this.pie.asset_login_by_protocol}]}},LoginOSOptions:function(){return{tooltip:{trigger:"item"},legend:{orient:"vertical",left:"left"},series:[{type:"pie",minAngle:5,radius:["40%","70%"],itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:15,fontWeight:"bold"}},data:this.pie.asset_login_by_type}]}},loginTrendOptions:function(){var t=Object(d["a"])(),e=t.primary;return{title:{show:!1},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{left:"auto",icon:"rect",itemWidth:10,itemHeight:10},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},color:[e,"#F3B44B"],xAxis:[{type:"category",boundaryGap:!1,axisLine:{lineStyle:{color:"#8F959E"}},axisLabel:{textStyle:{color:"#8F959E"}},axisTick:{show:!1},data:this.asset_login_log_metrics.dates_metrics_date}],yAxis:[{type:"value",name:"",axisLine:{show:!1,lineStyle:{color:"#fff"}},axisLabel:{textStyle:{color:"#8F959E"}},axisTick:{show:!1},splitLine:{show:!0,lineStyle:{color:"#EFF0F1"}}}],animationDuration:500,series:[{name:this.$t("ConnectionCount"),type:"line",smooth:!0,areaStyle:{normal:{color:new h["graphic"].LinearGradient(0,0,0,1,[{offset:0,color:"rgba(249, 199, 79, 0.6)"},{offset:.6,color:"rgba(249, 199, 79, 0.2)"},{offset:.8,color:"rgba(249, 199, 79, 0.1)"}],!1),shadowColor:"rgba(249, 199, 79, 0.1)",shadowBlur:6}},data:this.asset_login_log_metrics.dates_metrics_total}]}}},watch:{days:function(){this.getData()}},mounted:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getData();case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{onChange:function(t){this.days=t},conversionData:function(t){return t.map((function(t){return{name:t.label,value:t.total}}))},setPieData:function(t,e){var s=this.conversionData(e);s.length>0?this.$set(this.pie,t,s):this.$set(this.pie,t,[{name:this.$t("Nothing"),value:0}])},getData:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$axios.get("/api/v1/reports/reports/asset-activity/?days=".concat(this.days));case 2:e=t.sent,this.$set(this.session_stats,"total",e.session_stats.total),this.$set(this.session_stats,"asset_count",e.session_stats.asset_count),this.$set(this.session_stats,"user_count",e.session_stats.user_count),this.$set(this.asset_login_log_metrics,"dates_metrics_date",e.asset_login_log_metrics.dates_metrics_date),this.$set(this.asset_login_log_metrics,"dates_metrics_total",e.asset_login_log_metrics.dates_metrics_total),this.setPieData("asset_login_by_type",e.asset_login_by_type),this.setPieData("asset_login_by_from",e.asset_login_by_from),this.setPieData("asset_login_by_protocol",e.asset_login_by_protocol);case 11:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},p=u,f=s("2877"),_=Object(f["a"])(p,i,a,!1,null,"410c057b",null);e["default"]=_.exports},"27d3":function(t,e,s){"use strict";s("1576")},3629:function(t,e,s){},5423:function(t,e,s){"use strict";s.d(e,"a",(function(){return a}));s("a481");var i=s("b416"),a=function(){var t=document.documentElement.style,e=t.getPropertyValue("--color-primary"),s=e.replace(/#/g,""),a=Object(i["c"])(s,"ffffff",38),n=Object(i["c"])(s,"ffffff",20),o=Object(i["c"])(s,"ffffff",1);return{primary:e,TwoLevelColor:a,ThreeLevelColor:n,shadowColor:o}}},"68b4d":function(t,e,s){},"90bb":function(t,e,s){"use strict";s("3629")},"93a3":function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"box"},[s("div",{staticClass:"head"},[s("Title",{attrs:{config:t.config}})],1),t._v(" "),t.loading?s("LineChart",t._b({},"LineChart",t.lineChartConfig,!1)):t._e()],1)},a=[],n=(s("96cf"),s("3b8d")),o=(s("c5f6"),s("a505")),r=s("13e7"),c={components:{Title:o["a"],LineChart:r["a"]},props:{days:{type:[String,Number],default:7}},data:function(){return{loading:!1,config:{title:this.$t("UserAssetActivity"),tip:this.$t("UserAssetActivity")},lineChartConfig:{datesMetrics:[],primaryData:[1],primaryName:this.$t("ActiveUsers"),secondaryData:[1],secondaryName:this.$t("LoginAssets")}}},watch:{days:function(){this.getMetricData()}},mounted:function(){try{this.getMetricData()}finally{this.loading=!0}},methods:{getMetricData:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,s,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e="/api/v1/index/?dates_metrics=1&days=".concat(this.days),t.next=3,this.$axios.get(e);case 3:s=t.sent,i=null===s||void 0===s?void 0:s.dates_metrics_total_count_active_users,a=null===s||void 0===s?void 0:s.dates_metrics_total_count_active_assets,this.lineChartConfig.datesMetrics=s.dates_metrics_date,i.length>0&&(this.lineChartConfig.primaryData=i),a.length>0&&(this.lineChartConfig.secondaryData=a);case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},l=c,h=(s("90bb"),s("2877")),d=Object(h["a"])(l,i,a,!1,null,"7c3abb67",null);e["a"]=d.exports},cd5f:function(t,e,s){"use strict";s("68b4d")},d619:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{"no-padding":t.onlyCharts,nav:t.nav}},[!t.onlyCharts&&t.nav?s("div",{staticClass:"header nav-bar"},[s("div",{staticClass:"nav-bar-logo"},[s("Logo")],1),t._v(" "),s("RightAction",{attrs:{name:t.name}})],1):t._e(),t._v(" "),s("div",{staticClass:"content"},[t.onlyCharts?t._e():s("div",{staticClass:"title-bar"},[s("div",{staticClass:"title"},[t._v("\n        "+t._s(t.title)+"\n\n        "),s("span",{staticClass:"datetime"},[t._v("\n          ["+t._s((new Date).toLocaleString())+"]\n        ")]),t._v(" "),!t.nav&&t.url?s("span",{staticStyle:{float:"right","line-height":"40px"}},[s("el-button",{attrs:{type:"text"},on:{click:t.openNewWindow}},[s("i",{staticClass:"fa fa-external-link",staticStyle:{"font-size":"15px"}}),t._v("\n            "+t._s(t.$t("Export"))+"\n          ")])],1):t._e()]),t._v(" "),t.isDescription?s("div",{staticClass:"description"},[t._v("\n        "+t._s(t.description)+"\n      ")]):t._e()]),t._v(" "),s("div",{staticClass:"charts-zone"},[t._t("default")],2)])])},a=[],n=(s("6762"),s("2fdb"),s("4f37"),s("62db")),o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"nav-bar-right export-bar"},[s("el-button-group",[s("el-button",{staticClass:"export-btn",attrs:{loading:t.exportLoading,disabled:t.exportLoading,type:"text",icon:"el-icon-printer"},on:{click:t.exportPdf}},[t._v("\n      "+t._s(t.$t("ExportAsPDF"))+"\n\n    ")]),t._v(" "),s("el-button",{staticClass:"export-btn",attrs:{type:"text",icon:"el-icon-message"},on:{click:t.emailReport}},[t._v("\n\n      "+t._s(t.$t("EMailReport"))+"\n    ")]),t._v(" "),s("el-button",{staticClass:"export-btn",attrs:{type:"text",icon:"el-icon-printer"},on:{click:t.printReport}},[t._v("\n      "+t._s(t.$t("Print"))+"\n    ")])],1)],1)},r=[],c=(s("7f7f"),s("dbfd")),l={name:"RightAction",props:{name:{type:String,default:""}},data:function(){return{exportLoading:!1}},methods:{checkName:function(){return!!this.name||(this.$message.error("Please select a chart"),!1)},getDaysParam:function(){return this.$route.query.days||localStorage.getItem(this.name)||"7"},exportPdf:function(){if(this.checkName()){var t=this.getDaysParam(),e="/core/reports/export-pdf/?chart=".concat(this.name,"&days=").concat(t);this.$message.success(this.$t("Export")+"..."),Object(c["e"])(e)}},emailReport:function(){var t=this;if(this.checkName()){var e=this.getDaysParam();this.$message.success(this.$t("EMailReport")+"..."),this.$axios.post("/core/reports/send-mail/?chart=".concat(this.name,"&days=").concat(e)).catch((function(e){t.$message.error(t.$t("Failed")+": "+e.message)}))}},printReport:function(){window.print()}}},h=l,d=(s("cd5f"),s("2877")),u=Object(d["a"])(h,o,r,!1,null,"04bfb9fd",null),p=u.exports,f={components:{Logo:n["a"],RightAction:p},props:{onlyCharts:{type:Boolean,default:!1},nav:{type:Boolean,default:!1},name:{type:String,default:""},title:{type:String,default:""},description:{type:String,default:""},url:{type:String,default:""}},data:function(){return{}},computed:{isDescription:function(){return this.description&&""!==this.description.trim()}},methods:{handleChangeChart:function(t){},openNewWindow:function(){try{if(!this.win||this.win.closed){var t=1048,e=800,s=(screen.width-t)/2,i=(screen.height-e)/2,a="width=".concat(t,",height=").concat(e,",left=").concat(s,",top=").concat(i,",scrollbars=yes,resizable=yes"),n=this.url;if(this.$route.query.days){var o=n.includes("?")?"&":"?";n="".concat(n).concat(o,"days=").concat(this.$route.query.days)}this.win=window.open(n,"_blank",a)}this.win.focus()}catch(r){console.error("打开新窗口失败:",r),window.location.href=this.url}},openSettings:function(){console.log("openSettings")}}},_=f,g=(s("27d3"),Object(d["a"])(_,i,a,!1,null,"5785de42",null));e["a"]=g.exports}}]);
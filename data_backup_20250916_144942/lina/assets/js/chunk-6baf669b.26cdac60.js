(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6baf669b"],{5143:function(e,t,s){},"555e":function(e,t,s){},d3b8:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("GenericDetailPage",e._g(e._b({attrs:{"active-menu":e.config.activeMenu,object:e.group},on:{"update:activeMenu":function(t){return e.$set(e.config,"activeMenu",t)},"update:active-menu":function(t){return e.$set(e.config,"activeMenu",t)},"update:object":function(t){e.group=t}}},"GenericDetailPage",e.config,!1),e.$listeners),[s("keep-alive",[s(e.config.activeMenu,{tag:"component",attrs:{object:e.group}})],1)],1)},n=[],a=s("cd4a"),o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("TwoCol",[s("AutoDetailCard",{attrs:{excludes:e.excludes,object:e.object,url:e.url}})],1)},i=[],c=s("e3bc"),u=s("52cc"),l={name:"GroupInfo",components:{TwoCol:u["a"],AutoDetailCard:c["a"]},props:{object:{type:Object,default:function(){return{}}}},data:function(){return{url:this.object.id?"/api/v1/users/groups/".concat(this.object.id,"/"):"/api/v1/users/groups/",excludes:["users"]}},computed:{},watch:{group:function(e,t){this.$log.debug("Group has changed"),this.relationConfig.hasObjectsId=e.users}},methods:{}},d=l,f=s("2877"),p=Object(f["a"])(d,o,i,!1,null,"fb5f9cdc",null),h=p.exports,b=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("TwoCol",{scopedSlots:e._u([{key:"right",fn:function(){return[s("RelationCard",e._b({key:e.relationKey,on:{addSuccess:e.addSuccess}},"RelationCard",e.relationConfig,!1))]},proxy:!0}])},[[s("GenericListTable",{ref:"listTable",attrs:{"header-actions":e.headerActions,"table-config":e.tableConfig}})]],2),e._v(" "),s("TwoCol")],1)},g=[],m=(s("6d67"),s("d92a"),s("7f7f"),s("96cf"),s("3b8d")),v=(s("0d6d"),s("3758")),$=s("9e38"),j=s("53f7"),w={name:"GroupUser",components:{TwoCol:u["a"],RelationCard:$["a"],GenericListTable:v["a"]},props:{object:{type:Object,required:!0,default:function(){return{}}}},data:function(){var e=this;return{quickActions:[{title:this.$t("AllMembers"),attrs:{type:"primary",label:this.$tc("Add"),disabled:!this.$hasPerm("users.add_usergroup")},callbacks:Object.freeze({click:function(){var t=e.$t("AddAllMembersWarningMsg");e.$confirm(t,e.$tc("Info"),{type:"warning",confirmButtonClass:"el-button--danger",beforeClose:function(){var t=Object(m["a"])(regeneratorRuntime.mark((function t(s,r,n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("confirm"===s){t.next=2;break}return t.abrupt("return",n());case 2:e.$axios.post("/api/v1/users/groups/".concat(e.object.id,"/add-all-users/")).then((function(t){e.$message.success(e.$tc("AddSuccessMsg")),n(),window.location.reload()}));case 3:case"end":return t.stop()}}),t)})));function s(e,s,r){return t.apply(this,arguments)}return s}()}).catch((function(){}))}})}],tableConfig:{url:"/api/v1/users/users/?group_id=".concat(this.object.id),columns:["name","delete_action"],columnsMeta:{name:{formatter:j["i"],formatterArgs:{can:!1,getTitle:function(e){var t=e.row;return t.name+"("+t.username+")"}}},delete_action:{prop:"id",label:this.$t("Actions"),align:"center",width:150,objects:this.object.users,formatter:j["h"],formatterArgs:{disabled:!this.$hasPerm("users.change_usergroup")},onDelete:function(e,t,s,r){var n=this;this.$axios.delete("/api/v1/users/users-groups-relations/",{params:{usergroup:this.object.id,user:t.id}}).then((function(e){n.$message.success(n.$tc("DeleteSuccessMsg")),n.relationKey+=1,r()})).catch((function(e){n.$message.error(n.$tc("DeleteErrorMsg")+" "+e)}))}.bind(this)},actions:{has:!1}},tableAttrs:{border:!1}},headerActions:{hasSearch:!0,hasRefresh:!0,hasLeftActions:!1,hasRightActions:!0,hasExport:!1,hasImport:!1,hasCreate:!1,searchConfig:{getUrlQuery:!1},hasMoreActions:!1},relationConfig:{icon:"fa-user",title:this.$t("Members"),objectsAjax:{url:"/api/v1/users/users/?fields_size=mini&order=name&exclude_group_id=".concat(this.object.id),transformOption:function(e){return{label:e.name+"("+e.username+")",value:e.id}}},showHasObjects:!1,hasObjectsId:this.object.users,disabled:!this.$hasPerm("users.change_usergroup")||this.$store.getters.currentOrgIsRoot,performAdd:function(t){var s="/api/v1/users/users-groups-relations/",r=e.object.id,n=t.map((function(e){return{user:e.value,usergroup:r}}));return e.$message.success(e.$tc("AddSuccessMsg")),e.$axios.post(s,n)}},relationKey:0}},methods:{addSuccess:function(){this.$refs.listTable.reloadTable()}}},C=w,A=(s("fb6d"),Object(f["a"])(C,b,g,!1,null,"34fe3d76",null)),_=A.exports,M={components:{GenericDetailPage:a["d"],GroupInfo:h,GroupUser:_},data:function(){return{group:{name:"",comment:"",users:[]},config:{url:"/api/v1/users/groups/",activeMenu:"GroupInfo",submenu:[{title:this.$t("Basic"),name:"GroupInfo"},{title:this.$t("UserList"),name:"GroupUser"}]}}},methods:{handleTabClick:function(e){this.$log.debug("Current nav is: ",this.config.activeMenu)}}},x=M,y=(s("faae"),Object(f["a"])(x,r,n,!1,null,"5dd03eae",null));t["default"]=y.exports},faae:function(e,t,s){"use strict";s("5143")},fb6d:function(e,t,s){"use strict";s("555e")}}]);
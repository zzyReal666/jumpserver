(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3a01be76","chunk-52829884","chunk-7c86b624"],{"0371":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("GenericDetailPage",t._g(t._b({attrs:{"active-menu":t.config.activeMenu,object:t.host},on:{"update:activeMenu":function(e){return t.$set(t.config,"activeMenu",e)},"update:active-menu":function(e){return t.$set(t.config,"activeMenu",e)},"update:object":function(e){t.host=e}}},"GenericDetailPage",t.config,!1),t.$listeners),[n("keep-alive",[n(t.config.activeMenu,{tag:"component",attrs:{object:t.host}})],1)],1)},i=[],s=n("cd4a"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("TwoCol",{scopedSlots:t._u([{key:"right",fn:function(){return[n("QuickActions",{attrs:{actions:t.quickActions,type:"primary"}}),t._v(" "),n("RelationCard",t._b({directives:[{name:"perms",rawName:"v-perms",value:"assets.view_label",expression:"'assets.view_label'"}],ref:"LabelRelation",staticStyle:{"margin-top":"15px"},attrs:{type:"warning"}},"RelationCard",t.labelConfig,!1))]},proxy:!0}])},[[n("AutoDetailCard",t._b({},"AutoDetailCard",t.detailBasicConfig,!1)),t._v(" "),n("AutoDetailCard",t._b({},"AutoDetailCard",t.detailSpecInfoConfig,!1)),t._v(" "),n("AutoDetailCard",t._b({},"AutoDetailCard",t.detailInfoConfig,!1))]],2)},r=[],c=(n("d92a"),n("d25f"),n("6d67"),n("7f7f"),n("e3bc")),l=n("2af9"),u=n("ac6b"),p=n("9e38"),f=n("52cc"),h={name:"Detail",components:{TwoCol:f["a"],RelationCard:p["a"],AutoDetailCard:c["a"],QuickActions:l["o"]},props:{object:{type:Object,default:function(){}}},data:function(){var t=this,e=this;return{labelConfig:{icon:"fa-info",title:this.$t("Tags"),allowCreate:!0,objectsAjax:{url:"/api/v1/labels/labels/",transformOption:function(t){var e=String(t.name)+":"+String(t.value);return{label:e,value:e}}},hasObjectsId:this.object.labels,performAdd:function(e){var n=[],a=t.$refs.LabelRelation.iHasObjects;a.map((function(t){return n.push(t.label)}));var i="/api/v1/assets/assets/".concat(t.object.id,"/");return e.map((function(t){return n.push(t.label)})),t.$axios.patch(i,{labels:n})},getHasObjects:function(t){return new Promise((function(e){return e(t.map((function(t){return{value:t,label:t}})))}))},performDelete:function(e){var n=e.value,a=t.$refs.LabelRelation.iHasObjects,i=a.filter((function(t){return t.value!==n})).map((function(t){return t.value})),s="/api/v1/assets/assets/".concat(t.object.id,"/");return t.$axios.patch(s,{labels:i})}},quickActions:[{title:this.$t("IsActive"),type:"switch",attrs:{label:this.$t("Test"),model:this.object.is_active,disabled:!e.$hasPerm("assets.change_asset")},callbacks:{change:function(t){var e=this;this.$axios.patch("/api/v1/assets/assets/".concat(this.object.id,"/"),{is_active:t}).then((function(t){e.$message.success(e.$tc("UpdateSuccessMsg"))})).catch((function(t){e.$message.error(e.$tc("UpdateErrorMsg "+t))}))}.bind(this)}},{title:this.$t("RefreshHardware"),attrs:{type:"primary",label:this.$t("Refresh"),disabled:!e.$hasPerm("assets.refresh_assethardwareinfo")},callbacks:{click:function(){this.$axios.post("/api/v1/assets/assets/".concat(this.object.id,"/tasks/"),{action:"refresh"}).then((function(t){Object(u["k"])(t["task"])}))}.bind(this)}},{title:this.$t("TestAssetsConnective"),attrs:{type:"primary",label:this.$t("Test"),disabled:!e.$hasPerm("assets.test_assetconnectivity")},callbacks:{click:function(){this.$axios.post("/api/v1/assets/assets/".concat(this.object.id,"/tasks/"),{action:"test"}).then((function(t){Object(u["k"])(t["task"])}))}.bind(this)}}],detailBasicConfig:{url:"/api/v1/assets/assets/".concat(this.object.id,"/"),object:this.object,fields:["name",{key:this.$t("Category"),value:this.object.category.label},{key:this.$t("Type"),value:this.object.type.label},"address",{key:this.$t("Protocols"),value:this.object.protocols.map((function(t){return t.name+"/"+t.port})).join(",")},{key:this.$t("Platform"),value:this.object.platform.name},"is_active","date_created","created_by","comment"]},detailSpecInfoConfig:{title:this.$t("SpecificInfo"),url:"/api/v1/assets/assets/".concat(this.object.id,"/"),object:this.object,nested:"spec_info",showUndefined:!1,excludes:["spec_info.script"]},detailInfoConfig:{url:"/api/v1/assets/hosts/".concat(this.object.id,"/"),title:this.$t("HardwareInfo"),object:this.object,nested:"info",showUndefined:!1}}},computed:{},mounted:function(){},methods:{}},d=h,m=n("2877"),b=Object(m["a"])(d,o,r,!1,null,"2cf2c61b",null),v=b.exports,g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("TwoCol",{scopedSlots:t._u([{key:"right",fn:function(){return[n("QuickActions",{attrs:{actions:t.quickActions,type:"primary"}})]},proxy:!0}])},[[n("ListTable",{attrs:{"header-actions":t.headerConfig,"table-config":t.config,"detail-drawer":t.detailDrawer}})]],2)},y=[],$=n("53f7"),j={name:"Publications",components:{TwoCol:f["a"],ListTable:l["j"],QuickActions:l["o"]},props:{object:{type:Object,default:function(){}}},data:function(){var t=this.$createElement;return{detailDrawer:function(){return n.e("chunk-3f9a845c").then(n.bind(null,"0f0b"))},headerConfig:{hasLeftActions:!1,hasImport:!1},config:{url:"/api/v1/terminal/applet-publications/?host=".concat(this.object.id),columns:["applet.display_name","applet.version","date_updated","status","actions"],columnsShow:{min:["name","actions"],default:["applet.display_name","status","actions"]},columnsMeta:{"applet.display_name":{label:this.$t("DisplayName"),width:"160px",formatter:$["i"],formatterArgs:{drawer:!0,getIcon:function(t){var e,n=t.row;return null===(e=n.applet)||void 0===e?void 0:e.icon},getTitle:function(t){var e=t.row;return e.applet.display_name},getRoute:function(t){var e=t.row;return{name:"AppletDetail",params:{id:e.applet.id}}}},id:function(t){var e=t.row;return e.applet.id}},"applet.version":{label:this.$t("Version")},status:{label:this.$t("Status"),formatter:function(e){var n={pending:"success",success:"primary",failed:"danger",unknown:"warning"},a=n[e.status.value]||"warning";return t("el-tag",{attrs:{size:"mini",type:a}},[e.status.label])}},date_updated:{label:this.$t("Date")},actions:{width:"138px",formatterArgs:{hasUpdate:!1,hasDelete:!1,hasClone:!1,extraActions:[{title:this.$t("Deploy"),callback:function(t){var e=t.row;this.$axios.post("/api/v1/terminal/applet-host-deployments/applets/",{hosts:[e.host.id],applet_id:e.applet.id}).then((function(t){Object(u["k"])(t["task"])}))}},{title:this.$t("Uninstall"),callback:function(t){var e=t.row;this.$axios.post("/api/v1/terminal/applet-host-deployments/uninstall/",{hosts:[e.host.id],applet_id:e.applet.id}).then((function(t){Object(u["k"])(t["task"])}))}}]}}}},quickActions:[{title:this.$t("InitialDeploy"),attrs:{type:"primary",label:this.$t("Deploy")},callbacks:{click:function(){this.$axios.post("/api/v1/terminal/applet-host-deployments/",{host:this.object.id}).then((function(t){Object(u["k"])(t["task"])}))}.bind(this)}},{title:this.$t("OnlyInitialDeploy"),attrs:{type:"primary",label:this.$t("Deploy")},callbacks:{click:function(){this.$axios.post("/api/v1/terminal/applet-host-deployments/",{host:this.object.id,install_applets:!1}).then((function(t){Object(u["k"])(t["task"])}))}.bind(this)}},{title:this.$t("PublishAllApplets"),attrs:{type:"primary",label:this.$t("Publish")},callbacks:{click:function(){this.$axios.post("/api/v1/terminal/applet-host-deployments/applets/",{hosts:[this.object.id]}).then((function(t){Object(u["k"])(t["task"])}))}.bind(this)}}]}}},_=j,w=Object(m["a"])(_,g,y,!1,null,null,null),k=w.exports,O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Account",{attrs:{url:t.url,"columns-meta":t.columnsMeta,"extra-quick-actions":t.quickActions,object:t.object},on:{"update:object":function(e){t.object=e}}})},x=[],A=n("75d2"),C={name:"Accounts",components:{Account:A["a"]},props:{object:{type:Object,default:function(){}}},data:function(){var t=this.$createElement;return{columnsMeta:{name:{formatter:function(e){return t("span",[e.name])}},asset:{label:this.$t("Asset"),formatter:function(e){return t("span",[e.asset.name])}}},quickActions:[{title:this.$t("GenerateAccounts"),attrs:{type:"primary",label:this.$t("Generate")},callbacks:{click:function(){var t=this;this.$axios.put("/api/v1/terminal/applet-hosts/".concat(this.object.id,"/generate-accounts/")).then((function(e){t.$message.success(t.$tc("GenerateSuccessMsg"))}))}.bind(this)}}]}}},S=C,D=Object(m["a"])(S,O,x,!1,null,null,null),T=D.exports,P=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("TwoCol",{scopedSlots:t._u([{key:"right",fn:function(){return[n("QuickActions",{attrs:{actions:t.quickActions,type:"primary"}})]},proxy:!0}])},[[n("ListTable",{attrs:{"header-actions":t.headerConfig,"table-config":t.config}})]],2)},E=[],V={name:"Developments",components:{TwoCol:f["a"],ListTable:l["m"],QuickActions:l["o"]},props:{object:{type:Object,default:function(){}}},data:function(){var t=this.$createElement;return{headerConfig:{hasImport:!1,hasExport:!1,hasLeftActions:!1},config:{hasSelection:!1,url:"/api/v1/terminal/applet-host-deployments/?host=".concat(this.object.id),columns:["id","date_start","date_finished","status","actions"],columnsMeta:{id:{type:"index",label:"ID",sortable:"custom"},status:{label:this.$t("Status"),formatter:function(e){var n={pending:"success",success:"primary",failed:"danger",unknown:"warning"},a=n[e.status.value]||"info";return t("el-tag",{attrs:{size:"mini",type:a}},[e.status.label])}},actions:{formatterArgs:{hasClone:!1,hasDelete:!1,hasUpdate:!1,extraActions:[{name:"View",title:this.$t("View"),type:"primary",callback:function(t){Object(u["k"])(t.row.task)}}]}}}},quickActions:[{title:this.$t("InitialDeploy"),attrs:{type:"primary",label:this.$t("Deploy")},callbacks:{click:function(){this.$axios.post("/api/v1/terminal/applet-host-deployments/",{host:this.object.id}).then((function(t){Object(u["k"])(t["task"])}))}.bind(this)}}]}}},M=V,R=Object(m["a"])(M,P,E,!1,null,"4efd6cb4",null),I=R.exports,U={name:"AssetHostDetail",components:{GenericDetailPage:s["d"],Applets:k,TabPage:s["l"],Detail:v,Accounts:T,Developments:I},data:function(){var t=this;return{host:{},config:{url:"/api/v1/assets/assets",activeMenu:"Detail",submenu:[{title:this.$t("Basic"),name:"Detail"},{title:this.$t("AssetAccount"),name:"Accounts"},{title:this.$t("Applets"),name:"Applets"},{title:this.$t("HostDeployment"),name:"Developments"}],hasRightSide:!0,actions:{canDelete:this.$hasPerm("terminal.delete_applethost"),canUpdate:this.$hasPerm("terminal.change_applethost"),deleteSuccessRoute:"Applets",updateCallback:function(){t.$router.push({name:"AppletHostUpdate",params:{id:t.$route.params.id},query:{platform:t.host.platform.id}})}}}}},mounted:function(){}},L=U,F=Object(m["a"])(L,a,i,!1,null,"74a4f525",null);e["default"]=F.exports},"0482":function(t,e,n){},"0d6d":function(t,e,n){var a=n("d3f4"),i=n("67ab").onFreeze;n("5eda")("freeze",(function(t){return function(e){return t&&a(e)?t(i(e)):e}}))},"260f":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.iVisible?n("Dialog",t._g(t._b({attrs:{"close-on-click-modal":!1,"confirm-title":t.$tc("Add"),"destroy-on-close":!0,model:!1,title:t.$tc("SelectTemplate"),visible:t.iVisible,width:"800px"},on:{"update:visible":function(e){t.iVisible=e},cancel:t.handleCancel,confirm:t.handleConfirm}},"Dialog",t.$attrs,!1),t.$listeners),[[n("ListTable",{ref:"listTable",attrs:{"header-actions":t.headerActions,"table-config":t.tableConfig}})]],2):t._e(),t._v(" "),t.isShowCreate?n("CreateAccountTemplateDialog",t._g({attrs:{"create-visible":t.isShowCreate},on:{"update:createVisible":function(e){t.isShowCreate=e},"update:create-visible":function(e){t.isShowCreate=e},onPerform:t.onCreateTemplatePerform}},t.$listeners)):t._e()],1)},i=[],s=(n("20d6"),n("75fc")),o=(n("57e7"),n("d25f"),n("759f"),n("7f7f"),n("6d67"),n("6b54"),n("87b3"),n("9039")),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.isVisible?n("Dialog",{attrs:{"show-cancel":!1,"show-confirm":!1,title:t.$tc("TemplateCreate"),visible:t.isVisible,width:"70%"},on:{"update:visible":function(e){t.isVisible=e}}},[n("GenericCreateUpdateForm",t._b({},"GenericCreateUpdateForm",t.formConfig,!1))],1):t._e()],1)},c=[],l=(n("1c01"),n("58b2"),n("8e6e"),n("6762"),n("2fdb"),n("456d"),n("ac6a"),n("f3e2"),n("bd86")),u=n("2af9"),p=n("d0aa"),f=n("5225");function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach((function(e){Object(l["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var m={name:"EmailContent",components:{GenericCreateUpdateForm:p["a"],Dialog:u["i"]},props:{createVisible:{type:Boolean,default:!1},category:{type:String,default:"all"}},data:function(){var t=this;return{formConfig:{initial:{secret_type:"password"},url:"/api/v1/accounts/account-templates/",getUrl:function(){return"/api/v1/accounts/account-templates/"},needGetObjectDetail:!1,hasDetailInMsg:!1,fields:Object(s["a"])(Object(f["a"])(this)),fieldsMeta:d({},Object(f["b"])(this)),hasSaveContinue:!1,cleanFormValue:function(t){return Object.keys(t).forEach((function(e,n,a){["ssh_key","token","access_key"].includes(e)&&(t["secret"]=t[e],delete t[e])})),t},createSuccessNextRoute:{name:""},onPerformSuccess:function(e){t.isVisible=!1,t.$emit("onPerform")}}}},computed:{isVisible:{set:function(t){this.$emit("update:create-visible",t)},get:function(){return this.createVisible}}},methods:{}},b=m,v=n("2877"),g=Object(v["a"])(b,r,c,!1,null,null,null),y=g.exports,$={name:"AccountTemplateDialog",components:{Dialog:o["a"],ListTable:u["j"],CreateAccountTemplateDialog:y},props:{visible:{type:Boolean,default:!1},asset:{type:Object,default:function(){}},accounts:{type:Array,default:function(){return[]}},showCreate:{type:Boolean,default:!0}},data:function(){var t,e,n=this,a=this.$createElement,i=(null===(t=this.asset)||void 0===t||null===(e=t.protocols)||void 0===e?void 0:e.map((function(t){return t.name})).toString())||"";return{isShowCreate:!1,accountsSelected:[],tableConfig:{url:"/api/v1/accounts/account-templates/?protocols=".concat(i),columns:["name","username","secret_type","privileged"],columnsMeta:{name:{formatter:function(t){return a("span",[t.name])}},privileged:{width:"120px"},actions:{has:!1}},listeners:{"toggle-row-selection":function(t,e){t?n.addRowToSelect(e):n.removeRowToSelect(e)}},theRowDefaultIsSelected:function(t){return n.accounts.some((function(e){return e.id===t.id}))}},headerActions:{onCreate:function(){n.isShowCreate=!0},hasCreate:this.showCreate,hasMoreActions:!1,hasColumnSetting:!1,hasImport:!1,hasExport:!1}}},computed:{refTable:function(){return this.$refs.listTable.$refs.ListTable.$refs.dataTable.$refs.dataTable},iVisible:{get:function(){return this.visible},set:function(t){this.$emit("update:visible",t)}}},methods:{onCreateTemplatePerform:function(){this.refTable.getList()},handleConfirm:function(){var t;this.iVisible=!1;var e=this.accounts.filter((function(t){return null===t||void 0===t?void 0:t.template})).map((function(t){return t.template})),n=this.accountsSelected.filter((function(t){return-1===e.indexOf(t.id)})).map((function(t){return{template:t.id,name:t.name,username:t.username,secret_type:t.secret_type.value,privileged:t.privileged}}));(t=this.accounts).push.apply(t,Object(s["a"])(n)),this.$emit("onConfirm",this.accounts)},handleCancel:function(){this.iVisible=!1},onAddClick:function(){this.isShowCreate=!0},hasSelectValue:function(t){return this.accountsSelected.some((function(e){return e.id===t.id}))},hasSameTypeAccount:function(t){var e=this.accounts.filter((function(t){return!(null!==t&&void 0!==t&&t.id)})),n=[].concat(Object(s["a"])(e),Object(s["a"])(this.accountsSelected)),a=n.some((function(e){return t.username===e.username&&(t.secret_type.value===e.secret_type||t.secret_type.value===e.secret_type.value)}));return a&&(this.refTable.toggleRowSelection(t,!1),this.$message.error(this.$tc("SameTypeAccountTip"))),a},addRowToSelect:function(t){var e=this.hasSelectValue(t),n=this.hasSameTypeAccount(t);e||n||this.accountsSelected.push(t)},removeRowToSelect:function(t){var e=this.hasSelectValue(t);if(e){var n=this.accountsSelected.findIndex((function(e){return(null===e||void 0===e?void 0:e.id)===t.id}));this.accountsSelected.splice(n,1)}}}},j=$,_=(n("64bc"),Object(v["a"])(j,a,i,!1,null,"3e72af18",null));e["a"]=_.exports},"273b":function(t,e,n){"use strict";n("0482")},"3cc2":function(t,e,n){},5225:function(t,e,n){"use strict";n.d(e,"a",(function(){return u})),n.d(e,"b",(function(){return p}));var a=n("75fc"),i=(n("6762"),n("768b")),s=(n("7f7f"),n("dbfd")),o=n("f823"),r=n("49bd"),c=n("863c"),l=n("0692"),u=function(t){return[[t.$t("Basic"),["name","username","privileged","su_from"]],[t.$t("Secret"),["secret_type","secret_strategy","password_rules","secret","ssh_key","token","access_key","passphrase","api_key"]],[t.$t("AutoPush"),["auto_push","platforms","push_params"]],[t.$t("Other"),["comment"]]]},p=function(t){var e=Object(s["m"])(t.$route.path),n=[],u=["password","ssh_key"],p={disabled:!1};return{su_from:{component:r["a"],el:{multiple:!1,clearable:!0,ajax:{url:"/api/v1/accounts/account-templates/su-from-account-templates/?".concat(e?"template_id="+e:""),transformOption:function(t){return{label:"".concat(t.name,"(").concat(t.username,")"),value:t.id}}}}},secret_type:{type:"radio-group",on:{change:function(t,e){var n=Object(i["a"])(t,1),a=n[0];u.includes(a)?p.disabled=!1:(e({secret_strategy:"specific"}),e({auto_push:!1}),p.disabled=!0)}}},secret_strategy:{hidden:function(t){return!u.includes(t.secret_type)}},secret:{label:t.$t("Password"),component:o["m"],hidden:function(t){return"password"!==t.secret_type||"random"===t.secret_strategy}},ssh_key:{label:t.$t("PrivateKey"),el:{type:"textarea",rows:4},component:o["n"],hidden:function(t){return"ssh_key"!==t.secret_type||"random"===t.secret_strategy}},passphrase:{label:t.$t("Passphrase"),component:o["m"],hidden:function(t){return"ssh_key"!==t.secret_type||"random"===t.secret_strategy}},token:{label:t.$t("Token"),el:{type:"textarea",rows:4},hidden:function(t){return"token"!==t.secret_type||"random"===t.secret_strategy}},access_key:{label:t.$t("AccessKey"),el:{type:"textarea",rows:4},hidden:function(t){return"access_key"!==t.secret_type||"random"===t.secret_strategy}},api_key:{label:t.$t("ApiKey"),el:{type:"textarea",rows:4},hidden:function(t){return"api_key"!==t.secret_type||"random"===t.secret_strategy}},password_rules:{component:o["g"],label:l["a"].t("PasswordRule"),hidden:function(t){var e=t.secret_strategy,n=t.secret_type;return"specific"===e||"password"!==n}},platforms:{el:{multiple:!0,ajax:{url:"/api/v1/assets/platforms/",transformOption:function(t){return{label:t.name,value:t.id}}}},on:{input:function(t,e){var s=Object(i["a"])(t,1),o=s[0];n.splice(0,n.length),n.push.apply(n,Object(a["a"])(o))}},hidden:function(t){return!t["auto_push"]}},auto_push:{el:p},push_params:{component:c["a"],el:{platforms:n,method:"push_account_method"},hidden:function(t){return!t["auto_push"]}}}}},"64bc":function(t,e,n){"use strict";n("a9d3")},7:function(t,e){},"75d2":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("TwoCol",[[n("AccountListTable",t._b({ref:"ListTable",attrs:{asset:t.object,"columns-default":t.columnsDefault,"has-clone":!1,"has-import":!1,"has-left-actions":!0,"header-extra-actions":t.headerExtraActions,url:t.iUrl}},"AccountListTable",t.$attrs,!1)),t._v(" "),t.templateDialogVisible?n("AccountTemplateDialog",{attrs:{asset:t.object,"show-create":!1,visible:t.templateDialogVisible},on:{"update:visible":function(e){t.templateDialogVisible=e},onConfirm:t.onConfirm}}):t._e()]],2)],1)},i=[],s=(n("6d67"),n("0d6d"),n("57e7"),n("75fc")),o=(n("7f7f"),n("2af9")),r=n("260f"),c=n("ac6b"),l=n("52cc"),u={name:"Detail",components:{TwoCol:l["a"],AccountListTable:o["a"],AccountTemplateDialog:r["a"]},props:{object:{type:Object,default:function(){}},url:{type:String,default:""},extraQuickActions:{type:Array,default:function(){return[]}}},data:function(){var t=this;return{title:this.$t("Test"),templateDialogVisible:!1,columnsDefault:["name","username","connect"],headerExtraActions:[{name:this.$t("AccountTemplate"),title:this.$t("AccountTemplate"),has:this.$hasLicense()||"Applets"!==this.$route.name,can:function(){return t.$hasPerm("accounts.view_accounttemplate")&&!t.$store.getters.currentOrgIsRoot},callback:function(){t.templateDialogVisible=!0}}],quickActions:[{title:this.$t("BatchTest"),attrs:{type:"primary",label:this.$tc("Test"),disabled:-1!==["clickhouse","redis","website","chatgpt"].indexOf(this.object.type.value)||this.$store.getters.currentOrgIsRoot},callbacks:Object.freeze({click:function(){t.$axios.post("/api/v1/accounts/accounts/tasks/",{action:"verify",assets:[t.object.id]}).then((function(t){Object(c["k"])(t["task"])}))}})}].concat(Object(s["a"])(this.extraQuickActions))}},computed:{iUrl:function(){return this.url||"/api/v1/accounts/accounts/?asset=".concat(this.object.id)}},methods:{onConfirm:function(t){var e,n=this;t=null===(e=t)||void 0===e?void 0:e.map((function(t){return t.asset=n.object.id,t})),this.$axios.post("/api/v1/accounts/accounts/",t).then((function(){n.templateDialogVisible=!1,n.$refs.ListTable.addAccountSuccess(),n.$message.success(n.$tc("AddSuccessMsg"))}))}}},p=u,f=n("2877"),h=Object(f["a"])(p,a,i,!1,null,null,null);e["a"]=h.exports},a9d3:function(t,e,n){},b708:function(t,e,n){},bd11:function(t,e){t.exports=v,t.exports.match=r,t.exports.regexpToFunction=c,t.exports.parse=i,t.exports.compile=o,t.exports.tokensToFunction=l,t.exports.tokensToRegExp=b;var n="/",a=new RegExp(["(\\\\.)","(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?"].join("|"),"g");function i(t,e){var i,o=[],r=0,c=0,l="",u=e&&e.delimiter||n,f=e&&e.whitelist||void 0,h=!1;while(null!==(i=a.exec(t))){var d=i[0],m=i[1],b=i.index;if(l+=t.slice(c,b),c=b+d.length,m)l+=m[1],h=!0;else{var v="",g=i[2],y=i[3],$=i[4],j=i[5];if(!h&&l.length){var _=l.length-1,w=l[_],k=!f||f.indexOf(w)>-1;k&&(v=w,l=l.slice(0,_))}l&&(o.push(l),l="",h=!1);var O="+"===j||"*"===j,x="?"===j||"*"===j,A=y||$,C=v||u,S=v||("string"===typeof o[o.length-1]?o[o.length-1]:"");o.push({name:g||r++,prefix:v,delimiter:C,optional:x,repeat:O,pattern:A?p(A):s(C,u,S)})}}return(l||c<t.length)&&o.push(l+t.substr(c)),o}function s(t,e,n){var a="[^"+u(t===e?t:t+e)+"]";return!n||n.indexOf(t)>-1||n.indexOf(e)>-1?a+"+?":u(n)+"|(?:(?!"+u(n)+")"+a+")+?"}function o(t,e){return l(i(t,e),e)}function r(t,e){var n=[],a=v(t,n,e);return c(a,n)}function c(t,e){return function(n,a){var i=t.exec(n);if(!i)return!1;for(var s=i[0],o=i.index,r={},c=a&&a.decode||decodeURIComponent,l=1;l<i.length;l++)if(void 0!==i[l]){var u=e[l-1];u.repeat?r[u.name]=i[l].split(u.delimiter).map((function(t){return c(t,u)})):r[u.name]=c(i[l],u)}return{path:s,index:o,params:r}}}function l(t,e){for(var n=new Array(t.length),a=0;a<t.length;a++)"object"===typeof t[a]&&(n[a]=new RegExp("^(?:"+t[a].pattern+")$",f(e)));return function(e,a){for(var i="",s=a&&a.encode||encodeURIComponent,o=!a||!1!==a.validate,r=0;r<t.length;r++){var c=t[r];if("string"!==typeof c){var l,u=e?e[c.name]:void 0;if(Array.isArray(u)){if(!c.repeat)throw new TypeError('Expected "'+c.name+'" to not repeat, but got array');if(0===u.length){if(c.optional)continue;throw new TypeError('Expected "'+c.name+'" to not be empty')}for(var p=0;p<u.length;p++){if(l=s(u[p],c),o&&!n[r].test(l))throw new TypeError('Expected all "'+c.name+'" to match "'+c.pattern+'"');i+=(0===p?c.prefix:c.delimiter)+l}}else if("string"!==typeof u&&"number"!==typeof u&&"boolean"!==typeof u){if(!c.optional)throw new TypeError('Expected "'+c.name+'" to be '+(c.repeat?"an array":"a string"))}else{if(l=s(String(u),c),o&&!n[r].test(l))throw new TypeError('Expected "'+c.name+'" to match "'+c.pattern+'", but got "'+l+'"');i+=c.prefix+l}}else i+=c}return i}}function u(t){return t.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function p(t){return t.replace(/([=!:$/()])/g,"\\$1")}function f(t){return t&&t.sensitive?"":"i"}function h(t,e){if(!e)return t;var n=t.source.match(/\((?!\?)/g);if(n)for(var a=0;a<n.length;a++)e.push({name:a,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return t}function d(t,e,n){for(var a=[],i=0;i<t.length;i++)a.push(v(t[i],e,n).source);return new RegExp("(?:"+a.join("|")+")",f(n))}function m(t,e,n){return b(i(t,n),e,n)}function b(t,e,a){a=a||{};for(var i=a.strict,s=!1!==a.start,o=!1!==a.end,r=a.delimiter||n,c=[].concat(a.endsWith||[]).map(u).concat("$").join("|"),l=s?"^":"",p=0;p<t.length;p++){var h=t[p];if("string"===typeof h)l+=u(h);else{var d=h.repeat?"(?:"+h.pattern+")(?:"+u(h.delimiter)+"(?:"+h.pattern+"))*":h.pattern;e&&e.push(h),h.optional?h.prefix?l+="(?:"+u(h.prefix)+"("+d+"))?":l+="("+d+")?":l+=u(h.prefix)+"("+d+")"}}if(o)i||(l+="(?:"+u(r)+")?"),l+="$"===c?"$":"(?="+c+")";else{var m=t[t.length-1],b="string"===typeof m?m[m.length-1]===r:void 0===m;i||(l+="(?:"+u(r)+"(?="+c+"))?"),b||(l+="(?="+u(r)+"|"+c+")")}return new RegExp(l,f(a))}function v(t,e,n){return t instanceof RegExp?h(t,e):Array.isArray(t)?d(t,e,n):m(t,e,n)}},c0eb:function(t,e,n){"use strict";var a=n("c5ec"),i=n.n(a);window.$=i.a,window.jQuery=i.a,e["a"]=i.a},e323:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content"},[t.hasButton?n("el-button",{staticClass:"proto-setting",attrs:{disabled:!t.canSetting,icon:t.icon,size:"small",type:"primary"},on:{click:t.onSetting}}):t._e(),t._v(" "),n("Dialog",{attrs:{"show-cancel":!1,"show-confirm":!1,title:t.title,visible:t.isVisible,width:"60%"},on:{"update:visible":function(e){t.isVisible=e},close:t.onDialogClose}},[n("AutoDataForm",t._g(t._b({ref:"autoDataForm",staticClass:"data-form",attrs:{form:t.form},on:{submit:t.onSubmit}},"AutoDataForm",t.config,!1),t.$listeners))],1)],1)},i=[],s=(n("1c01"),n("58b2"),n("8e6e"),n("f3e2"),n("d25f"),n("bd86")),o=n("768b"),r=(n("ffc1"),n("6762"),n("2fdb"),n("ac6a"),n("456d"),n("96cf"),n("3b8d")),c=n("9039"),l=n("c75f"),u=n("f823");function p(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?p(Object(n),!0).forEach((function(e){Object(s["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var h={components:{Dialog:c["a"],AutoDataForm:l["a"]},props:{value:{type:[String,Object],default:function(){return{}}},title:{type:String,default:function(){return this.$t("PushParams")}},btnText:{type:String,default:function(){return""}},icon:{type:String,default:"el-icon-setting"},url:{type:String,default:"/api/v1/assets/platform-automation-methods/"},method:{type:String,default:""},pushAccountParams:{type:Object,default:function(){return{}}},visible:{type:Boolean,default:!1},hasButton:{type:Boolean,default:!0}},data:function(){return{isVisible:this.visible,canSetting:!0,form:this.value,remoteMeta:{},config:{url:this.url,hasSaveContinue:!1,hasButtons:!0,hasReset:!1,fields:[],method:"get"},preFieldsMeta:{change_secret_by_ssh:{commands:{helpTextAsTip:!1}}}}},watch:{visible:function(t){this.isVisible=t},method:function(t,e){t!==e&&this.getUrlMeta()}},mounted:function(){this.getUrlMeta()},methods:{getUrlMeta:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("common/getUrlMeta",{url:this.url});case 2:e=t.sent,this.remoteMeta=e.actions[this.config.method.toUpperCase()]||{},this.onCanSetting()&&this.setFormConfig();case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),onCanSetting:function(){var t=Object.keys(this.remoteMeta);return this.canSetting=t.includes(this.method)&&this.$hasPerm("assets.change_platform"),this.$emit("canSetting",this.canSetting),this.canSetting},setFormConfig:function(){var t=[],e={},n=this.method,a=this.remoteMeta[n];t=[[a.label,[n]]],e[n]={fields:[],fieldsMeta:{}};var i=this.pushAccountParams[n];if(Object.keys((null===a||void 0===a?void 0:a.children)||{}).length>0)for(var s=0,r=Object.entries(a.children);s<r.length;s++){var c=Object(o["a"])(r[s],2),l=c[0],p=c[1],h="el-input",d={};switch(null===p||void 0===p?void 0:p.type){case"list":h=u["b"];break;case"boolean":h=u["j"];break;case"text":d["text"]="textarea";break}i&&(p.default=i[l]||p.default);var m=f(f({},p),{},{component:h,el:d});e[n].fields.push(l),e[n].fieldsMeta[l]=m}var b=this.preFieldsMeta[n];if(b)for(var v=0,g=Object.entries(b);v<g.length;v++)for(var y=Object(o["a"])(g[v],2),$=y[0],j=y[1],_=0,w=Object.entries(j);_<w.length;_++){var k=Object(o["a"])(w[_],2),O=k[0],x=k[1];e[n]["fieldsMeta"][$][O]=x}this.config.fields=t,this.config.fieldsMeta=e},onSetting:function(){this.isVisible=!0},onSubmit:function(t){this.$emit("input",t),this.isVisible=!1,this.$emit("update:visible",this.isVisible)},onDialogClose:function(){this.$emit("update:visible",this.isVisible)}}},d=h,m=(n("273b"),n("2877")),b=Object(m["a"])(d,a,i,!1,null,"2772642f",null);e["a"]=b.exports}}]);
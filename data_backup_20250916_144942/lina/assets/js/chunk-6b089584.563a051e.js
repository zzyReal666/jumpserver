(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6b089584","chunk-6baf669b"],{"0d6d":function(e,t,r){var s=r("d3f4"),n=r("67ab").onFreeze;r("5eda")("freeze",(function(e){return function(t){return e&&s(t)?e(n(t)):t}}))},5143:function(e,t,r){},"555e":function(e,t,r){},7:function(e,t){},d3b8:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("GenericDetailPage",e._g(e._b({attrs:{"active-menu":e.config.activeMenu,object:e.group},on:{"update:activeMenu":function(t){return e.$set(e.config,"activeMenu",t)},"update:active-menu":function(t){return e.$set(e.config,"activeMenu",t)},"update:object":function(t){e.group=t}}},"GenericDetailPage",e.config,!1),e.$listeners),[r("keep-alive",[r(e.config.activeMenu,{tag:"component",attrs:{object:e.group}})],1)],1)},n=[],o=r("cd4a"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("TwoCol",[r("AutoDetailCard",{attrs:{excludes:e.excludes,object:e.object,url:e.url}})],1)},i=[],c=r("e3bc"),u=r("52cc"),l={name:"GroupInfo",components:{TwoCol:u["a"],AutoDetailCard:c["a"]},props:{object:{type:Object,default:function(){return{}}}},data:function(){return{url:this.object.id?"/api/v1/users/groups/".concat(this.object.id,"/"):"/api/v1/users/groups/",excludes:["users"]}},computed:{},watch:{group:function(e,t){this.$log.debug("Group has changed"),this.relationConfig.hasObjectsId=e.users}},methods:{}},d=l,f=r("2877"),p=Object(f["a"])(d,a,i,!1,null,"fb5f9cdc",null),h=p.exports,b=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("TwoCol",{scopedSlots:e._u([{key:"right",fn:function(){return[r("RelationCard",e._b({key:e.relationKey,on:{addSuccess:e.addSuccess}},"RelationCard",e.relationConfig,!1))]},proxy:!0}])},[[r("GenericListTable",{ref:"listTable",attrs:{"header-actions":e.headerActions,"table-config":e.tableConfig}})]],2),e._v(" "),r("TwoCol")],1)},g=[],m=(r("6d67"),r("d92a"),r("7f7f"),r("96cf"),r("3b8d")),v=(r("0d6d"),r("3758")),$=r("9e38"),j=r("53f7"),w={name:"GroupUser",components:{TwoCol:u["a"],RelationCard:$["a"],GenericListTable:v["a"]},props:{object:{type:Object,required:!0,default:function(){return{}}}},data:function(){var e=this;return{quickActions:[{title:this.$t("AllMembers"),attrs:{type:"primary",label:this.$tc("Add"),disabled:!this.$hasPerm("users.add_usergroup")},callbacks:Object.freeze({click:function(){var t=e.$t("AddAllMembersWarningMsg");e.$confirm(t,e.$tc("Info"),{type:"warning",confirmButtonClass:"el-button--danger",beforeClose:function(){var t=Object(m["a"])(regeneratorRuntime.mark((function t(r,s,n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("confirm"===r){t.next=2;break}return t.abrupt("return",n());case 2:e.$axios.post("/api/v1/users/groups/".concat(e.object.id,"/add-all-users/")).then((function(t){e.$message.success(e.$tc("AddSuccessMsg")),n(),window.location.reload()}));case 3:case"end":return t.stop()}}),t)})));function r(e,r,s){return t.apply(this,arguments)}return r}()}).catch((function(){}))}})}],tableConfig:{url:"/api/v1/users/users/?group_id=".concat(this.object.id),columns:["name","delete_action"],columnsMeta:{name:{formatter:j["i"],formatterArgs:{can:!1,getTitle:function(e){var t=e.row;return t.name+"("+t.username+")"}}},delete_action:{prop:"id",label:this.$t("Actions"),align:"center",width:150,objects:this.object.users,formatter:j["h"],formatterArgs:{disabled:!this.$hasPerm("users.change_usergroup")},onDelete:function(e,t,r,s){var n=this;this.$axios.delete("/api/v1/users/users-groups-relations/",{params:{usergroup:this.object.id,user:t.id}}).then((function(e){n.$message.success(n.$tc("DeleteSuccessMsg")),n.relationKey+=1,s()})).catch((function(e){n.$message.error(n.$tc("DeleteErrorMsg")+" "+e)}))}.bind(this)},actions:{has:!1}},tableAttrs:{border:!1}},headerActions:{hasSearch:!0,hasRefresh:!0,hasLeftActions:!1,hasRightActions:!0,hasExport:!1,hasImport:!1,hasCreate:!1,searchConfig:{getUrlQuery:!1},hasMoreActions:!1},relationConfig:{icon:"fa-user",title:this.$t("Members"),objectsAjax:{url:"/api/v1/users/users/?fields_size=mini&order=name&exclude_group_id=".concat(this.object.id),transformOption:function(e){return{label:e.name+"("+e.username+")",value:e.id}}},showHasObjects:!1,hasObjectsId:this.object.users,disabled:!this.$hasPerm("users.change_usergroup")||this.$store.getters.currentOrgIsRoot,performAdd:function(t){var r="/api/v1/users/users-groups-relations/",s=e.object.id,n=t.map((function(e){return{user:e.value,usergroup:s}}));return e.$message.success(e.$tc("AddSuccessMsg")),e.$axios.post(r,n)}},relationKey:0}},methods:{addSuccess:function(){this.$refs.listTable.reloadTable()}}},C=w,A=(r("fb6d"),Object(f["a"])(C,b,g,!1,null,"34fe3d76",null)),_=A.exports,M={components:{GenericDetailPage:o["d"],GroupInfo:h,GroupUser:_},data:function(){return{group:{name:"",comment:"",users:[]},config:{url:"/api/v1/users/groups/",activeMenu:"GroupInfo",submenu:[{title:this.$t("Basic"),name:"GroupInfo"},{title:this.$t("UserList"),name:"GroupUser"}]}}},methods:{handleTabClick:function(e){this.$log.debug("Current nav is: ",this.config.activeMenu)}}},x=M,k=(r("faae"),Object(f["a"])(x,s,n,!1,null,"5dd03eae",null));t["default"]=k.exports},faae:function(e,t,r){"use strict";r("5143")},fb6d:function(e,t,r){"use strict";r("555e")}}]);
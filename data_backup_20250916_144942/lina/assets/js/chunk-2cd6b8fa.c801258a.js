(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2cd6b8fa"],{"1f19":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.loading?e._e():n("GenericCreateUpdatePage",e._g(e._b({},"GenericCreateUpdatePage",e.iConfig,!1),e.$listeners))},i=[],a=(n("2caf"),n("ac4d"),n("8a81"),n("5df3"),n("1c4c"),n("6b54"),n("87b3"),n("75fc")),s=(n("7514"),n("7f7f"),n("768b")),c=(n("ac6a"),n("ffc1"),n("d25f"),n("96cf"),n("3b8d")),o=(n("6d67"),n("5e04")),u=n("1b0e"),l=n("dbfd"),d=n("0e1d");function f(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=p(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}function p(e,t){if(e){if("string"===typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var m={components:{GenericCreateUpdatePage:o["a"]},props:{url:{type:String,default:function(){return""},required:!0},addFields:{type:[Array,Function],default:function(){return[]}},addFieldsMeta:{type:Object,default:function(){return{}}},removeFields:{type:[Array,Function],default:function(){return[]}},createSuccessNextRoute:{type:Object,default:function(){return{name:"AssetList"}}},updateSuccessNextRoute:{type:Object,default:function(){return{name:"AssetList"}}},updateInitial:{type:Function,default:function(e){return e}}},data:function(){return{loading:!0,platform:{},initing:!1,platformID:this.$route.query.platform||"",meta:{},iConfig:{},defaultConfig:{initial:{},platform:{},url:"/api/v1/assets/hosts/",hasReset:!1,createSuccessNextRoute:this.createSuccessNextRoute,updateSuccessNextRoute:this.updateSuccessNextRoute,hasDetailInMsg:!1,fields:[[this.$t("Basic"),["name","address","platform","nodes"]],[this.$t("Protocol"),["protocols"]],[this.$t("Account"),["accounts"]],[this.$t("Other"),["directory_services","zone","labels","is_active","comment"]]],fieldsMeta:{},performSubmit:function(e){var t=this.url,n=this.$route.params.id,r=void 0===n?"":n,i=_.cloneDeep(e),a=r?"put":"post";if(i.nodes&&0===i.nodes.length&&delete i["nodes"],"put"===a)t=Object(l["l"])(t,r),delete i["accounts"];else{var s=(null===i||void 0===i?void 0:i.accounts)||[];i.accounts=s.map((function(e){return e["secret"]=Object(u["b"])(e["secret"]),e}))}return this.$axios[a](t,i)}}}},created:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{init:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.$log.debug("Initing asset base upcate create",this.initing),!this.initing){e.next=3;break}return e.abrupt("return");case 3:return this.initing=!0,e.prev=4,e.next=7,this.genConfig();case 7:return e.next=9,this.setInitial();case 9:return e.next=11,this.setPlatformConstrains();case 11:return e.prev=11,this.initing=!1,this.loading=!1,e.finish(11);case 15:case"end":return e.stop()}}),e,this,[[4,,11,15]])})));function t(){return e.apply(this,arguments)}return t}(),genConfig:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,n,r,i,a,c,o,u,p,h,m,b,g,v;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=this.addFields,n=this.addFieldsMeta,r=this.defaultConfig,r.fieldsMeta=Object(d["a"])(this),i=this.url,a=this.$route.params.id,a||(i=Object(l["w"])(i,"platform",this.platformID)),r.fields=r.fields.filter(Boolean),c=_.merge(r,{url:i}),o=f(t),e.prev=8,p=regeneratorRuntime.mark((function e(){var t,n,r,i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=Object(s["a"])(u.value,3),n=t[0],r=t[1],i=t[2],a=c.fields.find((function(e){var t=Object(s["a"])(e,1),r=t[0];return r===n})),a?a[1]=a[1].concat(r):c.fields.splice(i,0,[n,r]);case 3:case"end":return e.stop()}}),e)})),o.s();case 11:if((u=o.n()).done){e.next=15;break}return e.delegateYield(p(),"t0",13);case 13:e.next=11;break;case 15:e.next=20;break;case 17:e.prev=17,e.t1=e["catch"](8),o.e(e.t1);case 20:return e.prev=20,o.f(),e.finish(20);case 23:for(h=0,m=Object.entries(n);h<m.length;h++)b=Object(s["a"])(m[h],2),g=b[0],v=b[1],c.fieldsMeta[g]?c.fieldsMeta[g]=Object.assign(c.fieldsMeta[g],v):c.fieldsMeta[g]=v;this.iConfig=c;case 25:case"end":return e.stop()}}),e,this,[[8,17,20,23]])})));function t(){return e.apply(this,arguments)}return t}(),setInitial:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,n,r,i,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.defaultConfig,n=this.$route.query.node,r=n?[n]:[],i=this.platformID||"Linux",a="/api/v1/assets/platforms/".concat(i,"/"),e.next=7,this.$axios.get(a);case 7:if(this.platform=e.sent,s={labels:[],is_active:!0,nodes:r,platform:parseInt(this.platform.id),protocols:[]},!this.updateInitial){e.next=12;break}return e.next=12,this.updateInitial(s);case 12:this.iConfig.initial=Object.assign({},s,t.initial);case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),setPlatformConstrains:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=this.platform,n=(null===t||void 0===t?void 0:t.protocols)||[],n=n.map((function(e){return"http"===e.name&&(e.display_name="http(s)"),delete e["id"],e})),r=this.iConfig.fieldsMeta.protocols.el.choices,r.splice.apply(r,[0,r.length].concat(Object(a["a"])(n))),this.iConfig.fieldsMeta.accounts.el.platform=t;case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},b=m,g=n("2877"),v=Object(g["a"])(b,r,i,!1,null,null,null);t["a"]=v.exports},9330:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("BaseAssetCreateUpdate",e._b({},"BaseAssetCreateUpdate",e.$data,!1))},i=[],a=(n("57e7"),n("768b")),s=n("1f19"),c=n("2af9"),o=n("5cba"),u={name:"DatabaseCreateUpdate",components:{BaseAssetCreateUpdate:s["a"]},data:function(){return{url:"/api/v1/assets/databases/",addFields:this.getAddFields(),addFieldsMeta:this.getAddFieldsMeta()}},methods:{getAddFields:function(){var e=this.$route.query.type,t=[[this.$t("Basic"),["db_name"]]],n=["use_ssl","ca_cert"],r={redis:["client_cert","client_key"],postgresql:["client_cert","client_key","pg_ssl_mode"],mysql:["client_cert","client_key","allow_invalid_cert"],mongodb:["client_key","allow_invalid_cert"]};if(r[e]&&(n=n.concat(r[e])),n.length>2){var i=[this.$t("Secure"),n,2];t.push(i)}return t},getAddFieldsMeta:function(){var e=this.$route.query.type,t={db_name:{label:this.$t("DefaultDatabase")},use_ssl:{label:this.$t("UseSSL"),component:"el-switch",on:{change:function(e,t){var n=Object(a["a"])(e,1),r=n[0];t({pg_ssl_mode:r?"require":"prefer"})}}},allow_invalid_cert:{label:this.$t("AllowInvalidCert"),hidden:function(e){return!e.use_ssl},component:"el-switch"},ca_cert:{label:this.$t("CACertificate"),hidden:function(e){return!e.use_ssl},component:c["t"]},client_cert:{label:this.$t("ClientCertificate"),hidden:function(e){return!e.use_ssl},component:c["t"]},client_key:{label:this.$t("CertificateKey"),hidden:function(e){return!e.use_ssl},component:c["t"]}};return-1!==["mongodb","postgresql"].indexOf(e)&&(t["db_name"]["rules"]=[o["f"].Required]),"oracle"===e&&(t["db_name"]["helpText"]=this.$t("OracleDBNameHelpText")),t}}},l=u,d=n("2877"),f=Object(d["a"])(l,r,i,!1,null,null,null);t["default"]=f.exports}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d22fd25"],{ea3f:function(e,t,a){"use strict";a.r(t);var c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("GenericListTable",{attrs:{"create-drawer":e.createDrawer,"detail-drawer":e.detailDrawer,"header-actions":e.headerActions,resource:e.$tc("ChangeSecret"),"table-config":e.tableConfig}})},n=[],r=(a("6d67"),a("d92a"),a("cd4a")),s=a("53f7"),o=a("ac6b"),i={name:"AccountChangeSecretList",components:{GenericListTable:r["f"]},data:function(){var e=this,t=this.$createElement,c=this;return{createDrawer:function(){return Promise.all([a.e("chunk-commons"),a.e("chunk-55b557da"),a.e("chunk-4367c372"),a.e("chunk-0e71efe5"),a.e("chunk-115e166e")]).then(a.bind(null,"ae63"))},detailDrawer:function(){return Promise.all([a.e("chunk-commons"),a.e("chunk-55b557da"),a.e("chunk-4367c372"),a.e("chunk-0e71efe5"),a.e("chunk-25a6b812")]).then(a.bind(null,"15ea"))},tableConfig:{url:"/api/v1/accounts/change-secret-automations/",columnsExclude:["password_rules"],columns:["name","accounts","secret_strategy","is_periodic","periodic_display","executed_amount","is_active","actions"],columnsShow:{min:["name","actions"],default:["name","accounts","periodic_display","executed_amount","is_active","actions"]},columnsMeta:{name:{formatter:s["i"],formatterArgs:{route:"AccountChangeSecretDetail"}},accounts:{formatter:function(e){return t("span",[" ",e.accounts.join(", ")," "])}},secret_strategy:{formatter:function(e){return t("span",[" ",e.secret_strategy.label," "])}},is_periodic:{formatterArgs:{showFalse:!1},width:"180px"},executed_amount:{formatter:function(a){var n=c.$hasPerm("accounts.view_changesecretexecution");return t("el-link",{on:{click:function(){return e.handleExecAmount(a)}},attrs:{disabled:!n}},[a.executed_amount])}},actions:{formatterArgs:{updateRoute:"AccountChangeSecretUpdate",cloneRoute:"AccountChangeSecretCreate",extraActions:[{title:c.$t("Execute"),name:"execute",order:1,can:function(e){var t=e.row;return t.is_active&&c.$hasPerm("accounts.add_changesecretexecution")},type:"primary",disabled:function(e){var t=e.row;return!t.is_active},callback:function(e){var t=e.row;this.$axios.post("/api/v1/accounts/change-secret-executions/",{automation:t.id,type:t.type.value}).then((function(e){Object(o["k"])(e["task"])}))}.bind(this)}]}}}},headerActions:{hasRefresh:!0,hasExport:!1,hasImport:!1,createRoute:"AccountChangeSecretCreate",extraMoreActions:[{name:"BatchDisable",title:this.$t("DisableSelected"),icon:"fa fa-ban",can:function(t){var a=t.selectedRows;return a.length>0&&e.$hasPerm("accounts.change_changesecretautomation")},callback:function(t){var a=t.selectedRows,c=t.reloadTable;return e.bulkDisableCallback(a,c)}},{name:"BatchActivate",title:this.$t("ActivateSelected"),icon:"fa fa-check-circle-o",can:function(t){var a=t.selectedRows;return a.length>0&&e.$hasPerm("accounts.change_changesecretautomation")},callback:function(t){var a=t.selectedRows,c=t.reloadTable;return e.bulkActivateCallback(a,c)}}]}}},methods:{handleExecAmount:function(e){this.$router.push({name:"AccountChangeSecretList",query:{tab:"AccountChangeSecretExecutionList",automation_id:e.id}})},bulkDisableCallback:function(e,t){var a=this,c="/api/v1/accounts/change-secret-automations/",n=e.map((function(e){return{id:e.id,is_active:!1}}));0!==n.length&&this.$axios.patch(c,n).then((function(){t(),a.$message.success(a.$t("DisableSuccessMsg"))})).catch((function(e){a.$message.error(a.$t("UpdateErrorMsg")+" "+e)}))},bulkActivateCallback:function(e,t){var a=this,c="/api/v1/accounts/change-secret-automations/",n=e.map((function(e){return{id:e.id,is_active:!0}}));0!==n.length&&this.$axios.patch(c,n).then((function(){t(),a.$message.success(a.$t("ActivateSuccessMsg"))})).catch((function(e){a.$message.error(a.$t("UpdateErrorMsg")+" "+e)}))}}},u=i,l=a("2877"),h=Object(l["a"])(u,c,n,!1,null,null,null);t["default"]=h.exports}}]);
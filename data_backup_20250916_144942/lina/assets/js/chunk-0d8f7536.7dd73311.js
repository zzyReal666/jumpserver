(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0d8f7536","chunk-52829884"],{"0482":function(e,t,n){},"0c0e":function(e,t,n){},"0d8a":function(e,t,n){},"25c0":function(e,t,n){},"273b":function(e,t,n){"use strict";n("0482")},"3cc2":function(e,t,n){},"3e21":function(e,t,n){},4110:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("TabPage",{attrs:{"active-menu":e.activeMenu,submenu:e.submenu},on:{"update:activeMenu":function(t){e.activeMenu=t},"update:active-menu":function(t){e.activeMenu=t}}},[n("keep-alive",[n(e.activeMenu,{tag:"component"})],1)],1)},a=[],s=n("9b8c"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-alert",{directives:[{name:"sanitize",rawName:"v-sanitize",value:e.helpText,expression:"helpText"}],attrs:{type:"success"}}),e._v(" "),n("IBox",[n("GenericCreateUpdateForm",e._b({attrs:{"create-success-next-route":e.successUrl,"update-success-next-route":e.successUrl}},"GenericCreateUpdateForm",e.$data,!1))],1)],1)},c=[],o=(n("456d"),n("ac6a"),n("f3e2"),n("2af9")),l=n("cd4a"),u=n("34b7"),h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-setting"},on:{click:function(t){e.visible=!e.visible}}},[e._v(" "+e._s(e.$t("Setting"))+" ")]),e._v(" "),e.visible?n("Dialog",{attrs:{"show-cancel":!1,"show-confirm":!1,title:e.$tc("EmailTemplate"),visible:e.visible,width:"70%"},on:{"update:visible":function(t){e.visible=t},confirm:function(t){return e.onConfirm()}}},[n("GenericCreateUpdateForm",e._b({},"GenericCreateUpdateForm",e.$data,!1))],1):e._e()],1)},d=[],f=n("d0aa"),p={name:"EmailTemplate",components:{GenericCreateUpdateForm:f["a"],Dialog:o["i"]},data:function(){return{visible:!1,fields:[[this.$t("General"),["EMAIL_SUBJECT_PREFIX"]],[this.$t("CreateUserContent"),["EMAIL_CUSTOM_USER_CREATED_SUBJECT","EMAIL_CUSTOM_USER_CREATED_HONORIFIC","EMAIL_CUSTOM_USER_CREATED_BODY"]]],successUrl:{name:"Settings",params:{activeMenu:"EmailContent"}},fieldsMeta:{EMAIL_CUSTOM_USER_CREATED_BODY:{el:{type:"textarea",rows:3}}},url:"/api/v1/settings/setting/?category=email_content",submitMethod:function(){return"patch"},onConfirm:function(){}}},methods:{}},g=p,m=n("2877"),b=Object(m["a"])(g,h,d,!1,null,"b5c5f0c2",null),S=b.exports,v=n("5cba"),E={name:"Email",components:{GenericCreateUpdateForm:l["b"],IBox:o["k"]},data:function(){var e=this;return{helpText:this.$t("EmailHelpText"),encryptedFields:["EMAIL_HOST_PASSWORD"],fields:[[this.$t("Server"),["EMAIL_PROTOCOL","EMAIL_HOST","EMAIL_PORT","EMAIL_HOST_USER","EMAIL_HOST_PASSWORD","EMAIL_FROM","EMAIL_SECURITY_PROTOCOL"]],[this.$t("Other"),["CREATE_USER_MSG"]],[this.$t("Test"),["EMAIL_RECIPIENT"]]],fieldsMeta:{EMAIL_PORT:{hidden:function(e){return"smtp"!==e.EMAIL_PROTOCOL}},EMAIL_CUSTOM_USER_CREATED_BODY:{el:{type:"textarea",rows:3}},EMAIL_FROM:{rules:[v["f"].EmailCheck]},EMAIL_RECIPIENT:{rules:[v["f"].EmailCheck]},EMAIL_SECURITY_PROTOCOL:{hidden:function(e){return"smtp"!==e.EMAIL_PROTOCOL},label:this.$t("UseSSL"),type:"radio-group",value:"ssl",options:[{label:this.$t("None"),value:"none"},{label:this.$t("SSL"),value:"ssl"},{label:this.$t("TLS"),value:"tls"}]},CREATE_USER_MSG:{label:this.$t("EmailTemplate"),component:S,helpTip:this.$t("EmailTemplateHelpTip")}},afterGetFormValue:function(e){return!0===(null===e||void 0===e?void 0:e.EMAIL_USE_SSL)?e.EMAIL_SECURITY_PROTOCOL="ssl":!0===(null===e||void 0===e?void 0:e.EMAIL_USE_TLS)?e.EMAIL_SECURITY_PROTOCOL="tls":e.EMAIL_SECURITY_PROTOCOL="none",e},hasDetailInMsg:!1,successUrl:{name:"Msg"},url:"/api/v1/settings/setting/?category=email",moreButtons:[{title:this.$t("EmailTest"),loading:!1,callback:function(t,n,i){var a={};a["EMAIL_FROM"]=t["EMAIL_FROM"],a["EMAIL_RECIPIENT"]=t["EMAIL_RECIPIENT"],i.loading=!0,Object(u["d"])(t).then((function(t){e.$message.success(t["msg"])})).catch((function(t){e.$message.error(t["response"]["data"]["error"])})).finally((function(){i.loading=!1}))}}],cleanFormValue:function(e){return Object.keys(e).forEach((function(t){switch(null===e[t]&&delete e[t],e["EMAIL_HOST_PASSWORD"]||delete e["EMAIL_HOST_PASSWORD"],e["EMAIL_SECURITY_PROTOCOL"]){case"ssl":e["EMAIL_USE_SSL"]=!0,e["EMAIL_USE_TLS"]=!1;break;case"tls":e["EMAIL_USE_SSL"]=!1,e["EMAIL_USE_TLS"]=!0;break;default:e["EMAIL_USE_SSL"]=!1,e["EMAIL_USE_TLS"]=!1;break}})),e},submitMethod:function(){return"patch"}}},methods:{}},y=E,C=Object(m["a"])(y,r,c,!1,null,"0c8c264e",null),M=C.exports,k=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("IBox",e._b({},"IBox",e.$attrs,!1),[n("div",[n("el-table",{attrs:{data:e.tableData,"span-method":e.spanMethod,stripe:!0,"tree-props":{children:"children",hasChildren:"hasChildren"},"default-expand-all":"","row-key":"id"}},[n("el-table-column",{attrs:{label:e.$tc("MessageType"),width:"230"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.value))])]}}])}),e._v(" "),e._l(e.receiveBackends,(function(t){return n("el-table-column",{key:t.id,attrs:{label:e.getNameDisplay(t),width:"80"},scopedSlots:e._u([{key:"default",fn:function(i){return[i.row.children?e._e():n("span",["site_msg"!==t.name?n("el-checkbox",{on:{change:function(t){return e.onCheckReceiveBackend(i.row)}},model:{value:i.row.receiveBackends[t.name],callback:function(n){e.$set(i.row.receiveBackends,t.name,n)},expression:"scope.row.receiveBackends[header.name]"}}):n("el-checkbox",{attrs:{disabled:!0,value:!0}})],1)]}}],null,!0)})})),e._v(" "),n("el-table-column",{attrs:{label:e.$tc("Receivers")},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-popover",{attrs:{placement:"top","popper-class":"black-theme-popover",trigger:"hover"}},[e._l(t.row.receivers,(function(t){return n("p",{key:t.name},[e._v(e._s(t.name))])})),e._v(" "),t.row.children?e._e():n("span",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[e._v("\n              "+e._s(t.row.receivers.map((function(e){return e.name})).join(", "))+"\n            ")])],2)]}}])}),e._v(" "),n("el-table-column",{attrs:{label:e.$tc("Actions"),width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.children?e._e():n("el-button",{attrs:{type:"small"},on:{click:function(n){return e.onOpenDialog(t.row)}}},[e._v("\n            "+e._s(e.$t("EditRecipient"))+"\n          ")])]}}])})],2),e._v(" "),e.dialogVisible?n("SelectDialog",{attrs:{"selected-users":e.dialogSelectedUsers,title:e.$tc("EditRecipient"),visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t},cancel:function(t){e.dialogVisible=!1},submit:e.onDialogSelectSubmit}}):e._e()],1)])},T=[],x=(n("2caf"),n("ac4d"),n("8a81"),n("5df3"),n("1c4c"),n("6b54"),n("87b3"),n("57e7"),n("7f7f"),n("d25f"),n("768b")),$=(n("ffc1"),n("96cf"),n("3b8d")),D=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Dialog",e._g(e._b({ref:"myDialog",attrs:{"destroy-on-close":!0,height:"720px",width:"790px"},on:{confirm:e.submit}},"Dialog",e.$attrs,!1),e.$listeners),[n("krryPaging",e._b({ref:"pageTransfer",staticClass:"transfer"},"krryPaging",e.pagingTransfer,!1))],1)},I=[],O=(n("6d67"),n("9039")),A=n("7624"),P=n("2612"),L={name:"ListSelect",components:{Dialog:O["a"],krryPaging:A["a"]},inheritAttrs:!1,props:{selectedUsers:{type:Array,default:function(){return[]}}},data:function(){return{pagingTransfer:{pageSize:10,filterable:!0,async:!0,dataList:[],getPageData:function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(t,n){var i,a,s,r,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=n,a=(t-1)*n,s={limit:i,offset:a,oid:"ROOT"},e.next=5,Object(P["b"])(s);case 5:return r=e.sent,c=r["results"].map((function(e){return{id:e.id,label:_.escape("".concat(e.name,"(").concat(e.username,")"))}})),e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),getSearchData:function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(t,n,i){var a,s,r,c,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=i,s=(n-1)*i,r={limit:a,offset:s,oid:"ROOT",search:t},e.next=5,Object(P["b"])(r);case 5:return c=e.sent,o=c["results"].map((function(e){return{id:e.id,label:_.escape("".concat(e.name,"(").concat(e.username,")"))}})),e.abrupt("return",o);case 8:case"end":return e.stop()}}),e)})));function t(t,n,i){return e.apply(this,arguments)}return t}(),selectedData:[],showClearBtn:!0,transferOnCheck:!0}}},mounted:function(){var e=this,t=this.selectedUsers.map((function(e){return{id:e.id,label:e.name}}));setTimeout((function(){e.pagingTransfer.selectedData=t}),500)},methods:{submit:function(){var e=this.$refs.pageTransfer.getSelectedData();this.$emit("submit",e)}}},w=L,N=(n("bb5a"),Object(m["a"])(w,D,I,!1,null,"cdaa63dc",null)),R=N.exports,B=n("e9f9");function U(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=j(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,r=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return r=e.done,e},e:function(e){c=!0,s=e},f:function(){try{r||null==n.return||n.return()}finally{if(c)throw s}}}}function j(e,t){if(e){if("string"===typeof e)return F(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?F(e,t):void 0}}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var H={components:{IBox:B["a"],SelectDialog:R},data:function(){return{currentEditSub:{},dialogVisible:!1,dialogSelectedUsers:[],receiveBackends:[],tableData:[],idMessageTypeMapper:{},idBackendMapper:{}}},mounted:function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.initBackends();case 2:return e.next=4,this.initSubscriptions();case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{onCheckReceiveBackend:function(e){for(var t=this,n=[],i=0,a=Object.entries(e.receiveBackends);i<a.length;i++){var s=Object(x["a"])(a[i],2),r=s[0],c=s[1];c&&n.push(r)}this.$axios.patch("/api/v1/notifications/system-msg-subscription/".concat(e.id,"/"),{receive_backends:n}).catch((function(e){t.$log.error(e)}))},spanMethod:function(e){e.row,e.column,e.rowIndex,e.columnIndex},onDialogSelectSubmit:function(e){var t=this;this.dialogVisible=!1,this.$axios.patch("/api/v1/notifications/system-msg-subscription/".concat(this.currentEditSub.id,"/"),{users:e}).then((function(e){var n=t.idMessageTypeMapper[e.message_type];n.receivers=e.receivers,t.tableData.forEach((function(t){var n,i=U(t.children);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a.id===e.message_type){a.receivers=e.receivers;break}}}catch(s){i.e(s)}finally{i.f()}}))})).catch((function(){}))},getNameDisplay:function(e){var t=e["name_display"];return"Site message"===t?"Inbox":t},onOpenDialog:function(e){this.currentEditSub=e,this.dialogSelectedUsers=e.receivers,this.dialogVisible=!0},initBackends:function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=[],e.next=3,this.$axios.get("/api/v1/notifications/backends/");case 3:t=e.sent,this.receiveBackends=t.filter((function(e){return e.name}));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),initSubscriptions:function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(){var t,n,i,a,s,r,c,o,l,u,h=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$axios.get("/api/v1/notifications/system-msg-subscription/");case 2:t=e.sent,n=[],i=U(t),e.prev=5,i.s();case 7:if((a=i.n()).done){e.next=30;break}s=a.value,r=[],c={id:s["category"],value:s["category_label"],children:r},o=U(s["children"]),e.prev=12,u=regeneratorRuntime.mark((function e(){var t,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=l.value,n={},h.receiveBackends.forEach((function(e){n[e.name]=t["receive_backends"].indexOf(e.name)>-1})),i={id:t["message_type"],value:t["message_type_label"],receivers:t.receivers,receiveBackends:n},r.push(i),h.idMessageTypeMapper[i.id]=r;case 6:case"end":return e.stop()}}),e)})),o.s();case 15:if((l=o.n()).done){e.next=19;break}return e.delegateYield(u(),"t0",17);case 17:e.next=15;break;case 19:e.next=24;break;case 21:e.prev=21,e.t1=e["catch"](12),o.e(e.t1);case 24:return e.prev=24,o.f(),e.finish(24);case 27:n.push(c);case 28:e.next=7;break;case 30:e.next=35;break;case 32:e.prev=32,e.t2=e["catch"](5),i.e(e.t2);case 35:return e.prev=35,i.f(),e.finish(35);case 38:this.tableData=n;case 39:case"end":return e.stop()}}),e,this,[[5,32,35,38],[12,21,24,27]])})));function t(){return e.apply(this,arguments)}return t}()}},W=H,V=(n("df1c"),Object(m["a"])(W,k,T,!1,null,"0cd926c8",null)),K=V.exports,G=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("IBox",[n("GenericCreateUpdateForm",e._b({staticClass:"form"},"GenericCreateUpdateForm",e.$data,!1))],1)},Y=[],z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("BaseSMS",{ref:"baseSms",attrs:{config:e.$data,title:e.$tc("AlibabaCloud")}})},J=[],Q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-setting"},on:{click:function(t){e.visible=!0}}},[e._v(e._s(e.$t("Setting")))]),e._v(" "),e.visible?n("Dialog",e._g({attrs:{"destroy-on-close":!0,"show-cancel":!1,"show-confirm":!1,title:e.title,visible:e.visible,width:"70%"},on:{"update:visible":function(t){e.visible=t},confirm:function(t){return e.onConfirm()}}},e.$listeners),[n("GenericCreateUpdateForm",e._b({ref:"form",on:{submitSuccess:e.submitSuccess}},"GenericCreateUpdateForm",e.iConfig,!1))],1):e._e()],1)},X=[],q={name:"Base",components:{Dialog:O["a"],GenericCreateUpdateForm:f["a"]},props:{title:{type:String,default:""},config:{type:Object,default:function(){return{}}}},data:function(){return{visible:!1}},computed:{iConfig:function(){return this.config}},methods:{onConfirm:function(){},submitSuccess:function(e){this.$emit("input",!!e[this.enableField]),this.visible=!1},testPerformError:function(e){for(var t=e.response.data,n=0,i=Object.keys(t);n<i.length;n++){var a=i[n],s=t[a];s instanceof Array&&(s=s.join(";")),this.$refs.form.$refs.form.setFieldError(a,s)}}}},Z=q,ee=Object(m["a"])(Z,Q,X,!1,null,null,null),te=ee.exports,ne=n("f823"),ie={name:"SMSAlibaba",components:{BaseSMS:te},data:function(){var e=this;return{url:"/api/v1/settings/setting/?category=alibaba",hasDetailInMsg:!1,visible:!1,moreButtons:[{title:this.$t("Test"),loading:!1,callback:function(t,n,i){i.loading=!0,e.$axios.post("/api/v1/settings/sms/alibaba/testing/",t).then((function(t){e.$message.success(t["msg"])})).catch((function(t){e.$log.error("err occur"),e.$refs.baseSms.testPerformError(t)})).finally((function(){i.loading=!1}))}}],fields:[[this.$t("Basic"),["ALIBABA_ACCESS_KEY_ID","ALIBABA_ACCESS_KEY_SECRET"]],[this.$t("Template"),["ALIBABA_VERIFY_SIGN_NAME","ALIBABA_VERIFY_TEMPLATE_CODE"]],[this.$t("Test"),["SMS_TEST_PHONE"]]],fieldsMeta:{ALIBABA_VERIFY_SIGN_TMPL:{fields:["SIGN_NAME","TEMPLATE_CODE"],fieldsMeta:{}},ALIBABA_ACCESS_KEY_SECRET:{component:ne["m"]},SMS_TEST_PHONE:{rules:[v["d"]],component:ne["h"]}},submitMethod:function(){return"patch"}}}},ae=ie,se=Object(m["a"])(ae,z,J,!1,null,null,null),re=se.exports,ce=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("BaseSMS",{ref:"baseSms",attrs:{config:e.$data,title:e.$tc("TencentCloud")}})},oe=[],le={name:"SMSTencent",components:{BaseSMS:te},data:function(){var e=this;return{url:"/api/v1/settings/setting/?category=tencent",hasDetailInMsg:!1,visible:!1,moreButtons:[{title:this.$t("Test"),loading:!1,callback:function(t,n,i){i.loading=!0,e.$axios.post("/api/v1/settings/sms/tencent/testing/",t).then((function(t){e.$message.success(t["msg"])})).catch((function(t){e.$log.error("err occur"),e.$refs.baseSms.testPerformError(t)})).finally((function(){i.loading=!1}))}}],fields:[[this.$t("Basic"),["TENCENT_SECRET_ID","TENCENT_SECRET_KEY","TENCENT_SDKAPPID"]],[this.$t("Template"),["TENCENT_VERIFY_SIGN_NAME","TENCENT_VERIFY_TEMPLATE_CODE"]],[this.$t("Test"),["SMS_TEST_PHONE"]]],fieldsMeta:{TENCENT_VERIFY_SIGN_TMPL:{fields:["SIGN_NAME","TEMPLATE_CODE"],fieldsMeta:{}},TENCENT_SECRET_KEY:{component:ne["m"]},SMS_TEST_PHONE:{rules:[v["d"]],component:ne["h"]}},submitMethod:function(){return"put"}}}},ue=le,he=Object(m["a"])(ue,ce,oe,!1,null,null,null),de=he.exports,fe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("BaseSMS",{ref:"baseSms",attrs:{config:e.$data,title:e.$tc("HuaweiCloud")}})},pe=[],ge={name:"SMSHuawei",components:{BaseSMS:te},data:function(){var e=this;return{url:"/api/v1/settings/setting/?category=huawei",hasDetailInMsg:!1,visible:!1,moreButtons:[{title:this.$t("Test"),loading:!1,callback:function(t,n,i){i.loading=!0,e.$axios.post("/api/v1/settings/sms/huawei/testing/",t).then((function(t){e.$message.success(t["msg"])})).catch((function(t){e.$log.error("err occur"),e.$refs.baseSms.testPerformError(t)})).finally((function(){i.loading=!1}))}}],fields:[[this.$t("Basic"),["HUAWEI_APP_KEY","HUAWEI_APP_SECRET","HUAWEI_SMS_ENDPOINT"]],[this.$t("Template"),["HUAWEI_SIGN_CHANNEL_NUM","HUAWEI_VERIFY_SIGN_NAME","HUAWEI_VERIFY_TEMPLATE_CODE"]],[this.$t("Test"),["SMS_TEST_PHONE"]]],fieldsMeta:{HUAWEI_VERIFY_SIGN_TMPL:{fields:["SIGN_NAME","TEMPLATE_CODE"],fieldsMeta:{}},HUAWEI_APP_SECRET:{component:ne["m"]},HUAWEI_SIGN_CHANNEL_NUM:{label:this.$t("SignChannelNum")},HUAWEI_SMS_ENDPOINT:{label:this.$t("AppEndpoint")},SMS_TEST_PHONE:{rules:[v["d"]],component:ne["h"]}},submitMethod:function(){return"put"}}}},me=ge,be=Object(m["a"])(me,fe,pe,!1,null,null,null),Se=be.exports,_e=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("BaseSMS",{ref:"baseSms",attrs:{config:e.$data,title:e.$tc("Custom")}})},ve=[],Ee={name:"SMSCustom",components:{BaseSMS:te},data:function(){var e=this;return{url:"/api/v1/settings/setting/?category=custom",hasDetailInMsg:!1,visible:!1,moreButtons:[{title:this.$t("Test"),loading:!1,callback:function(t,n,i){i.loading=!0,e.$axios.post("/api/v1/settings/sms/custom/testing/",t).then((function(t){e.$message.success(t["msg"])})).catch((function(t){e.$log.error("err occur"),e.$refs.baseSms.testPerformError(t)})).finally((function(){i.loading=!1}))}}],fields:[[this.$t("Basic"),["CUSTOM_SMS_URL","CUSTOM_SMS_REQUEST_METHOD","CUSTOM_SMS_API_PARAMS"]],[this.$t("Test"),["SMS_TEST_PHONE"]]],fieldsMeta:{CUSTOM_SMS_API_PARAMS:{label:this.$t("Params"),component:ne["d"],helpText:this.$t("CustomParams")},SMS_TEST_PHONE:{rules:[v["d"]],component:ne["h"]}},submitMethod:function(){return"patch"}}}},ye=Ee,Ce=Object(m["a"])(ye,_e,ve,!1,null,null,null),Me=Ce.exports,ke=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-alert",{attrs:{closable:!1,title:e.helpMessage,type:"success"}}),e._v(" "),n("BaseSMS",{ref:"baseSms",attrs:{config:e.$data,title:e.$tc("Custom")}})],1)},Te=[],xe={name:"SMSFileCustom",components:{BaseSMS:te},data:function(){var e=this;return{helpMessage:this.$t("CustomFile"),url:"/api/v1/settings/setting/?category=custom_file",hasDetailInMsg:!1,visible:!1,moreButtons:[{title:this.$t("Test"),loading:!1,callback:function(t,n,i){i.loading=!0,e.$axios.post("/api/v1/settings/sms/custom_file/testing/",t).then((function(t){e.$message.success(t["msg"])})).catch((function(t){e.$log.error("err occur"),e.$refs.baseSms.testPerformError(t)})).finally((function(){i.loading=!1}))}}],fields:[[this.$t("Test"),["SMS_TEST_PHONE"]]],fieldsMeta:{SMS_TEST_PHONE:{rules:[v["d"]],component:ne["h"]}},submitMethod:function(){return"patch"}}}},$e=xe,De=Object(m["a"])($e,ke,Te,!1,null,null,null),Ie=De.exports,Oe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("BaseSMS",{ref:"baseSms",attrs:{config:e.$data,title:e.$tc("CMPP2")}})},Ae=[],Pe={name:"CMPP2",components:{BaseSMS:te},data:function(){var e=this;return{url:"/api/v1/settings/setting/?category=cmpp2",hasDetailInMsg:!1,visible:!1,moreButtons:[{title:this.$t("Test"),loading:!1,callback:function(t,n,i){i.loading=!0,e.$axios.post("/api/v1/settings/sms/cmpp2/testing/",t).then((function(t){e.$message.success(t["msg"])})).catch((function(t){e.$log.error("err occur"),e.$refs.baseSms.testPerformError(t)})).finally((function(){i.loading=!1}))}}],fields:[[this.$t("Basic"),["CMPP2_HOST","CMPP2_PORT","CMPP2_SP_ID","CMPP2_SP_SECRET","CMPP2_SRC_ID","CMPP2_SERVICE_ID","CMPP2_VERIFY_SIGN_NAME","CMPP2_VERIFY_TEMPLATE_CODE"]],[this.$t("Test"),["SMS_TEST_PHONE"]]],fieldsMeta:{CMPP2_SP_SECRET:{component:ne["m"]},SMS_TEST_PHONE:{rules:[v["d"]],component:ne["h"]}},submitMethod:function(){return"patch"}}}},Le=Pe,we=Object(m["a"])(Le,Oe,Ae,!1,null,null,null),Ne=we.exports,Re={name:"Auth",components:{GenericCreateUpdateForm:f["a"],IBox:o["k"]},data:function(){return{url:"/api/v1/settings/setting/?category=sms",fields:[[this.$t("Basic"),["SMS_ENABLED","SMS_BACKEND","SMS_CODE_LENGTH"]],[this.$t("Provider"),["ALIYUN","QCLOUD","HUAWEICLOUD","CMPP2","SMSCustom","SMSFileCustom"]]],fieldsMeta:{ALIYUN:{label:this.$t("AlibabaCloud"),component:re,hidden:function(e){return"alibaba"!==e["SMS_BACKEND"]}},QCLOUD:{label:this.$t("TencentCloud"),component:de,hidden:function(e){return"tencent"!==e["SMS_BACKEND"]}},HUAWEICLOUD:{label:this.$t("HuaweiCloud"),component:Se,hidden:function(e){return"huawei"!==e["SMS_BACKEND"]}},CMPP2:{label:this.$t("CMPP2"),component:Ne,hidden:function(e){return"cmpp2"!==e["SMS_BACKEND"]}},SMSCustom:{label:this.$t("Custom"),component:Me,hidden:function(e){return"custom"!==e["SMS_BACKEND"]}},SMSFileCustom:{label:this.$t("Custom"),component:Ie,hidden:function(e){return"custom_file"!==e["SMS_BACKEND"]}}},submitMethod:function(){return"patch"},cleanFormValue:function(e){for(var t=["SET_UP"],n=0,i=t;n<i.length;n++){var a=i[n];delete e[a]}return e}}},methods:{}},Be=Re,Ue=(n("a8e0"),Object(m["a"])(Be,G,Y,!1,null,"2dc25088",null)),je=Ue.exports,Fe={name:"Index",components:{TabPage:s["a"],Email:M,Subscribe:K,SMS:je},data:function(){return{activeMenu:"Email",submenu:[{title:this.$t("Email"),name:"Email",hidden:!this.$hasPerm("settings.change_email")},{title:this.$t("SMS"),name:"SMS",hidden:!this.$hasPerm("settings.change_sms")||!this.$store.getters.hasValidLicense},{title:this.$t("MsgSubscribe"),name:"Subscribe",hidden:!this.$hasPerm("settings.change_systemmsgsubscription")}]}}},He=Fe,We=Object(m["a"])(He,i,a,!1,null,null,null);t["default"]=We.exports},6159:function(e,t,n){"use strict";n("0c0e")},7:function(e,t){},"70b5":function(e,t,n){"use strict";n("0d8a")},7624:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"krry-main"},[n("el-row",{attrs:{gutter:10}},[n("el-col",{attrs:{md:11,sm:24}},[n("krry-box",{ref:"noSelect",attrs:{async:e.async,"async-search-flag":e.asyncSearchFlag,"data-show-list":e.notSelectDataList,"filter-placeholder":e.filterPlaceholder[0]||e.$tc("Search"),filterable:e.filterable,"highlight-color":e.highlightColor,"is-highlight":e.isHighlight,"is-last-page":e.isLastPage,"operate-id":0,"page-size":e.pageSize,"page-texts":e.pageTexts,"show-clear-btn":e.showClearBtn,title:e.boxTitle[0]||e.$tc("Selection")},on:{"check-district":e.noCheckSelect,"search-word":e.searchWord,"check-disable":e.checkDisable,"get-data":e.getData,"get-data-by-keyword":e.getDataByKeyword,"clear-input":function(t){return e.clearQueryInp("left")}}})],1),e._v(" "),n("el-col",{staticClass:"buttons",attrs:{md:2,sm:24}},[n("div",{staticClass:"opera"},[e.transferOnCheck?n("svg-icon",{staticClass:"arrow",attrs:{"icon-class":"arrow"}}):[n("el-button",{staticClass:"el-transfer__button",attrs:{disabled:e.disablePre,icon:"el-icon-arrow-left",size:"mini"},on:{click:e.deleteData}}),e._v(" "),n("el-button",{staticClass:"el-transfer__button",attrs:{disabled:e.disableNex,icon:"el-icon-arrow-right",size:"mini",type:"primary"},on:{click:e.addData}})]],2)]),e._v(" "),n("el-col",{attrs:{md:11,sm:24}},[n("krry-box",{ref:"hasSelect",attrs:{"data-show-list":e.checkedData,"filter-placeholder":e.filterPlaceholder[1]||e.$tc("Search"),filterable:e.filterable,"highlight-color":e.highlightColor,"is-highlight":e.isHighlight,"operate-id":1,"page-size":e.pageSize,"page-texts":e.pageTexts,"show-clear-btn":e.showClearBtn,title:e.boxTitle[1]||e.$tc("Selected")},on:{"check-district":e.hasCheckSelect,"search-word":e.searchWord,"check-disable":e.checkDisable,"clear-input":function(t){return e.clearQueryInp("right")}}})],1)],1)],1)},a=[],s=(n("2caf"),n("4f37"),n("96cf"),n("3b8d")),r=(n("55dd"),n("6762"),n("2fdb"),n("d25f"),n("75fc")),c=(n("6d67"),n("c5f6"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-transfer-panel district-panel"},[n("div",{staticClass:"el-transfer-panel__header"},[n("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("\n      "+e._s(e.title)+"\n    ")]),e._v(" "),n("span",{staticClass:"check-number"},[e._v("\n      "+e._s(e.checkedData.length)+"/"+e._s(e.districtListMock.length)+"\n    ")])],1),e._v(" "),n("div",{staticClass:"el-transfer-panel__body"},[e.filterable?n("div",{staticClass:"el-transfer-panel__filter el-input el-input--mini el-input--prefix"},[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.searchWord,expression:"searchWord",modifiers:{trim:!0}}],staticClass:"el-input__inner",class:{showClear:e.showClearBtn},attrs:{placeholder:e.filterPlaceholder,autocomplete:"off",type:"text"},domProps:{value:e.searchWord},on:{change:e.handleKeyword,input:function(t){t.target.composing||(e.searchWord=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),e._v(" "),e._m(0),e._v(" "),e.searchWord&&e.showClearBtn?n("span",{staticClass:"clear-input"},[n("i",{staticClass:"el-icon-circle-close",on:{click:e.clearInp}})]):e._e()]):e._e(),e._v(" "),e.districtListMock.length>0?n("el-checkbox-group",{class:{expand:!e.filterable},on:{change:e.handleCheckedChange},model:{value:e.checkedData,callback:function(t){e.checkedData=t},expression:"checkedData"}},e._l(e.districtListMock,(function(t,i){return n("el-checkbox",{key:i,staticClass:"el-transfer-panel__item",attrs:{disabled:t.disabled,label:t,title:t.label}},[n("span",{directives:[{name:"sanitize",rawName:"v-sanitize",value:e.isHighlight?e.filterHighlight(t.label):t.label,expression:"isHighlight ? filterHighlight(item.label) : item.label"}]})])})),1):n("p",{staticClass:"no-data"},[e._v(e._s(this.$t("NoData")))])],1),e._v(" "),n("div",{staticClass:"vip-footer"},[n("el-button",{staticClass:"v-page",attrs:{disabled:e.disabledPre,plain:"",small:""},on:{click:e.prev}},[e._v("\n      "+e._s(e.pageTexts[0]||e.defaultPrev)+"\n    ")]),e._v(" "),n("el-button",{staticClass:"v-page",attrs:{disabled:e.disabledNex,plain:"",small:""},on:{click:e.next}},[e._v("\n      "+e._s(e.pageTexts[1]||e.defaultNext)+"\n    ")])],1)])}),o=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"el-input__prefix",staticStyle:{left:"0"}},[n("i",{staticClass:"el-input__icon el-icon-search"})])}],l=(n("a481"),n("3b2b"),{components:{},props:{title:{type:String,default:function(){return""}},operateId:{type:Number,default:function(){return 0}},dataShowList:{type:Array,default:function(){return[]}},pageSize:{type:Number,default:function(){return 10}},filterable:{type:Boolean},filterPlaceholder:{type:String,default:function(){return"Search"}},pageTexts:{type:Array,default:function(){return["",""]}},async:{type:Boolean,default:function(){return!1}},isLastPage:{type:Boolean},isHighlight:{type:Boolean},highlightColor:{type:String,default:function(){return"#409EFF"}},asyncSearchFlag:{type:Boolean},showClearBtn:{type:Boolean}},data:function(){return{districtListMock:[],checkedData:[],isIndeterminate:!1,checkAll:!1,searchWord:"",len:0,total:0,pageIndex:0,disabledPre:!0,disabledNex:!1,asyncSearch:!1,asyncPageIndex:1,asyncSearchPageIndex:1,defaultPrev:"< "+this.$tc("PagePrev"),defaultNext:this.$tc("PageNext")+" >"}},watch:{searchWord:function(e){this.$emit("search-word",e,this.operateId)},districtListMock:function(){0===this.checkedData.length&&(this.checkAll=!1,this.isIndeterminate=!1)},checkedData:function(e){this.$emit("check-disable",e,this.operateId)},checkAll:function(){this.checkAll=0!==this.districtListMock.length&&this.checkAll},dataShowList:{handler:function(){this.async?this.asyncInitData():this.initData()},deep:!0}},created:function(){this.initData()},methods:{handleKeyword:function(){this.asyncSearchPageIndex=1,this.asyncSearchFlag&&this.$emit("get-data-by-keyword",this.searchWord,this.asyncSearchPageIndex)},initData:function(){this.len=this.dataShowList.length,this.total=Math.ceil(this.len/this.pageSize),this.pageIndex=0,this.pageData()},pageData:function(){this.checkedData=[],this.total>1&&this.pageIndex<this.total-1?(0===this.pageIndex?this.disabledPre=!0:this.disabledPre=!1,this.disabledNex=!1,this.districtListMock=this.dataShowList.slice(this.pageIndex*this.pageSize,this.pageIndex*this.pageSize+this.pageSize)):(this.total>1?this.disabledPre=!1:this.disabledPre=!0,this.disabledNex=!0,this.districtListMock=this.dataShowList.slice(this.pageIndex*this.pageSize,this.len))},asyncInitData:function(){this.checkedData=[],this.disabledNex=this.isLastPage,this.disabledPre=this.asyncSearchFlag&&this.asyncSearch?this.asyncSearchPageIndex<=1:this.asyncPageIndex<=1,this.districtListMock=this.dataShowList},prev:function(){this.async?(this.disabledPre=!0,this.asyncSearchFlag&&this.asyncSearch?this.$emit("get-data-by-keyword",this.searchWord,this.asyncSearchPageIndex<=1?1:--this.asyncSearchPageIndex):this.$emit("get-data",this.asyncPageIndex<=1?1:--this.asyncPageIndex)):(this.pageIndex>0&&--this.pageIndex,this.pageData())},next:function(){this.async?(this.disabledNex=!0,this.asyncSearchFlag&&this.asyncSearch?this.$emit("get-data-by-keyword",this.searchWord,++this.asyncSearchPageIndex):this.$emit("get-data",++this.asyncPageIndex)):(this.pageIndex<=this.total-1&&++this.pageIndex,this.pageData())},handleCheckedChange:function(e){var t=e.length;this.checkAll=t===this.districtListMock.length,this.isIndeterminate=t>0&&t<this.districtListMock.length,this.$emit("check-district",e)},handleCheckAllChange:function(e){this.checkedData=e?this.districtListMock.filter((function(e){return!e.disabled})).map((function(e){return e})):[],this.isIndeterminate=!1,this.$emit("check-district",this.checkedData)},clearInp:function(){this.$emit("clear-input")},filterHighlight:function(e){var t=this.searchWord.trim();if(e=e&&e.trim(),t&&e){var n=new RegExp(t);return e.replace(n,'<span style="color: '.concat(this.highlightColor,'">').concat(t,"</span>"))}return e}}}),u=l,h=(n("6159"),n("2877")),d=Object(h["a"])(u,c,o,!1,null,"6c085aa8",null),f=d.exports,p={name:"KrryPaging",components:{krryBox:f},props:{boxTitle:{type:Array,default:function(){return["",""]}},pageSize:{type:Number,default:160},dataList:{type:Array,default:function(){return[]}},selectedData:{type:Array,default:function(){return[]}},filterable:{type:Boolean,default:function(){return!1}},filterPlaceholder:{type:Array,default:function(){return["",""]}},pageTexts:{type:Array,default:function(){return["",""]}},sort:{type:Boolean,default:function(){return!1}},async:{type:Boolean,default:function(){return!1}},getPageData:{type:Function,default:function(){return[]}},getSearchData:{type:Function,default:function(){return[]}},isHighlight:{type:Boolean,default:function(){return!1}},highlightColor:{type:String,default:function(){return"#ff2b2b"}},showClearBtn:{type:Boolean,default:function(){return!1}},transferOnCheck:{type:Boolean,default:!0}},data:function(){return{notSelectDataList:[],checkedData:[],dataListNoCheck:[],selectListCheck:[],noCheckData:[],hasCheckData:[],noSelectKeyword:"",haSelectKeyword:"",disablePre:!0,disableNex:!0,manualEmpty:!1,asyncDataList:[],isLastPage:!1}},computed:{selectIdList:function(){return this.selectListCheck.map((function(e){return e.id}))},originList:function(){return this.async?this.asyncDataList:this.dataList},asyncSearchFlag:function(){return this.async&&void 0!==this.getSearchData}},watch:{selectIdList:function(e){var t=[].concat(Object(r["a"])(this.noCheckData.map((function(e){return e.id}))),Object(r["a"])(this.hasCheckData.map((function(e){return e.id}))));this.hasCheckData=[],this.noCheckData=[],this.$emit("onChange",e,t)},dataList:{handler:function(){!this.async&&this.initData()},deep:!0},selectedData:{handler:function(){this.initData(!0)},deep:!0}},created:function(){this.async?this.getData(1,!0):this.initData(!0)},methods:{initData:function(e){var t=this;if(!this.checkedData.length&&!this.manualEmpty||e){this.checkedData=JSON.parse(JSON.stringify(this.selectedData));var n=this.$refs.hasSelect?this.$refs.hasSelect.searchWord:"";n&&this.searchWord(n,1)}if(this.async){e&&(this.selectListCheck=JSON.parse(JSON.stringify(this.checkedData)));var i=this.selectListCheck.map((function(e){return e.id}));this.notSelectDataList=this.originList.filter((function(e){return!i.includes(e.id)&&(e.label.includes(t.noSelectKeyword)||t.asyncSearchFlag)})),this.dataListNoCheck=this.originList.filter((function(e){return!i.includes(e.id)}))}else{this.selectListCheck=JSON.parse(JSON.stringify(this.checkedData));var a=this.selectListCheck.map((function(e){return e.id}));this.notSelectDataList=this.originList.filter((function(e){return!a.includes(e.id)})),this.dataListNoCheck=JSON.parse(JSON.stringify(this.notSelectDataList))}},searchWord:function(e,t){var n=this;0===t?(this.noSelectKeyword=e,this.asyncSearchFlag||(this.notSelectDataList=this.dataListNoCheck.filter((function(t){return t.label.includes(e)})))):(this.haSelectKeyword=e,this.checkedData=this.selectListCheck.filter((function(t){return t.label.includes(e)})));var i=0===t?"noSelect":"hasSelect";setTimeout((function(){!n.async&&n.$refs[i].initData()}),0)},checkDisable:function(e,t){0===t?this.disableNex=!(e.length>0):this.disablePre=!(e.length>0)},noCheckSelect:function(e){var t=this;this.noCheckData=e,this.transferOnCheck&&setTimeout((function(){return t.addData()}),300)},hasCheckSelect:function(e){var t=this;this.hasCheckData=e,setTimeout((function(){return t.deleteData()}),300)},addData:function(){var e=this,t=this.noCheckData.map((function(e){return e.id}));if(this.notSelectDataList=this.notSelectDataList.filter((function(n){return!t.includes(n.id)&&(n.label.includes(e.noSelectKeyword)||e.asyncSearchFlag)})),this.dataListNoCheck=this.dataListNoCheck.filter((function(e){return!t.includes(e.id)})),!this.async&&this.sort){var n=this.dataListNoCheck.map((function(e){return e.id}));this.checkedData=this.originList.filter((function(t){return!n.includes(t.id)&&t.label.includes(e.haSelectKeyword)})),this.selectListCheck=this.originList.filter((function(e){return!n.includes(e.id)}))}else{var i,a;(i=this.checkedData).push.apply(i,Object(r["a"])(this.noCheckData)),(a=this.selectListCheck).push.apply(a,Object(r["a"])(this.noCheckData)),this.checkedData=this.checkedData.filter((function(t){return t.label.includes(e.haSelectKeyword)}))}},deleteData:function(){var e=this,t=this.hasCheckData.map((function(e){return e.id}));this.checkedData=this.checkedData.filter((function(n){return!t.includes(n.id)&&n.label.includes(e.haSelectKeyword)})),this.selectListCheck=this.selectListCheck.filter((function(e){return!t.includes(e.id)})),this.manualEmpty=!this.checkedData.length;var n=this.selectListCheck.map((function(e){return e.id}));this.notSelectDataList=this.originList.filter((function(t){return!n.includes(t.id)&&(t.label.includes(e.noSelectKeyword)||e.asyncSearchFlag)})),this.dataListNoCheck=this.originList.filter((function(e){return!n.includes(e.id)}))},getSelectedData:function(){return this.selectIdList},clearQueryInp:function(e){switch(e){case"left":this.$refs.noSelect.searchWord="",this.asyncSearchFlag&&this.getDataByKeyword("");break;case"right":this.$refs.hasSelect.searchWord="";break;default:break}},getDataByKeyword:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,n){var i,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=t.trim(),!t){e.next=9;break}return this.$nextTick((function(){a.$refs.noSelect.asyncSearch=!0})),e.next=5,this.getSearchData(t,n,this.pageSize);case 5:i=e.sent,Array.isArray(i)&&i.length?(this.asyncDataList=i,this.notSelectDataList=i,this.initData(),this.isLastPage=i.length<this.pageSize):(this.notSelectDataList=[],this.isLastPage=!0),e.next=12;break;case 9:return this.$refs.noSelect.asyncSearch=!1,e.next=12,this.getData(1);case 12:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}(),getData:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var n,i,a=this,s=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],this.$nextTick((function(){a.$refs.noSelect.asyncPageIndex=t,a.$refs.noSelect.searchWord="",a.$refs.noSelect.asyncSearch=!1})),e.next=4,this.getPageData(t,this.pageSize);case 4:i=e.sent,Array.isArray(i)&&i.length?(this.asyncDataList=i,this.notSelectDataList=i,this.initData(n),this.isLastPage=i.length<this.pageSize):(this.notSelectDataList=[],this.isLastPage=!0);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}},g=p,m=(n("70b5"),Object(h["a"])(g,i,a,!1,null,"3051b297",null));t["a"]=m.exports},"80ed":function(e,t,n){},a8e0:function(e,t,n){"use strict";n("25c0")},b708:function(e,t,n){},bb5a:function(e,t,n){"use strict";n("80ed")},bd11:function(e,t){e.exports=b,e.exports.match=c,e.exports.regexpToFunction=o,e.exports.parse=a,e.exports.compile=r,e.exports.tokensToFunction=l,e.exports.tokensToRegExp=m;var n="/",i=new RegExp(["(\\\\.)","(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?"].join("|"),"g");function a(e,t){var a,r=[],c=0,o=0,l="",u=t&&t.delimiter||n,d=t&&t.whitelist||void 0,f=!1;while(null!==(a=i.exec(e))){var p=a[0],g=a[1],m=a.index;if(l+=e.slice(o,m),o=m+p.length,g)l+=g[1],f=!0;else{var b="",S=a[2],_=a[3],v=a[4],E=a[5];if(!f&&l.length){var y=l.length-1,C=l[y],M=!d||d.indexOf(C)>-1;M&&(b=C,l=l.slice(0,y))}l&&(r.push(l),l="",f=!1);var k="+"===E||"*"===E,T="?"===E||"*"===E,x=_||v,$=b||u,D=b||("string"===typeof r[r.length-1]?r[r.length-1]:"");r.push({name:S||c++,prefix:b,delimiter:$,optional:T,repeat:k,pattern:x?h(x):s($,u,D)})}}return(l||o<e.length)&&r.push(l+e.substr(o)),r}function s(e,t,n){var i="[^"+u(e===t?e:e+t)+"]";return!n||n.indexOf(e)>-1||n.indexOf(t)>-1?i+"+?":u(n)+"|(?:(?!"+u(n)+")"+i+")+?"}function r(e,t){return l(a(e,t),t)}function c(e,t){var n=[],i=b(e,n,t);return o(i,n)}function o(e,t){return function(n,i){var a=e.exec(n);if(!a)return!1;for(var s=a[0],r=a.index,c={},o=i&&i.decode||decodeURIComponent,l=1;l<a.length;l++)if(void 0!==a[l]){var u=t[l-1];u.repeat?c[u.name]=a[l].split(u.delimiter).map((function(e){return o(e,u)})):c[u.name]=o(a[l],u)}return{path:s,index:r,params:c}}}function l(e,t){for(var n=new Array(e.length),i=0;i<e.length;i++)"object"===typeof e[i]&&(n[i]=new RegExp("^(?:"+e[i].pattern+")$",d(t)));return function(t,i){for(var a="",s=i&&i.encode||encodeURIComponent,r=!i||!1!==i.validate,c=0;c<e.length;c++){var o=e[c];if("string"!==typeof o){var l,u=t?t[o.name]:void 0;if(Array.isArray(u)){if(!o.repeat)throw new TypeError('Expected "'+o.name+'" to not repeat, but got array');if(0===u.length){if(o.optional)continue;throw new TypeError('Expected "'+o.name+'" to not be empty')}for(var h=0;h<u.length;h++){if(l=s(u[h],o),r&&!n[c].test(l))throw new TypeError('Expected all "'+o.name+'" to match "'+o.pattern+'"');a+=(0===h?o.prefix:o.delimiter)+l}}else if("string"!==typeof u&&"number"!==typeof u&&"boolean"!==typeof u){if(!o.optional)throw new TypeError('Expected "'+o.name+'" to be '+(o.repeat?"an array":"a string"))}else{if(l=s(String(u),o),r&&!n[c].test(l))throw new TypeError('Expected "'+o.name+'" to match "'+o.pattern+'", but got "'+l+'"');a+=o.prefix+l}}else a+=o}return a}}function u(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function h(e){return e.replace(/([=!:$/()])/g,"\\$1")}function d(e){return e&&e.sensitive?"":"i"}function f(e,t){if(!t)return e;var n=e.source.match(/\((?!\?)/g);if(n)for(var i=0;i<n.length;i++)t.push({name:i,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return e}function p(e,t,n){for(var i=[],a=0;a<e.length;a++)i.push(b(e[a],t,n).source);return new RegExp("(?:"+i.join("|")+")",d(n))}function g(e,t,n){return m(a(e,n),t,n)}function m(e,t,i){i=i||{};for(var a=i.strict,s=!1!==i.start,r=!1!==i.end,c=i.delimiter||n,o=[].concat(i.endsWith||[]).map(u).concat("$").join("|"),l=s?"^":"",h=0;h<e.length;h++){var f=e[h];if("string"===typeof f)l+=u(f);else{var p=f.repeat?"(?:"+f.pattern+")(?:"+u(f.delimiter)+"(?:"+f.pattern+"))*":f.pattern;t&&t.push(f),f.optional?f.prefix?l+="(?:"+u(f.prefix)+"("+p+"))?":l+="("+p+")?":l+=u(f.prefix)+"("+p+")"}}if(r)a||(l+="(?:"+u(c)+")?"),l+="$"===o?"$":"(?="+o+")";else{var g=e[e.length-1],m="string"===typeof g?g[g.length-1]===c:void 0===g;a||(l+="(?:"+u(c)+"(?="+o+"))?"),m||(l+="(?="+u(c)+"|"+o+")")}return new RegExp(l,d(i))}function b(e,t,n){return e instanceof RegExp?f(e,t):Array.isArray(e)?p(e,t,n):g(e,t,n)}},c0eb:function(e,t,n){"use strict";var i=n("c5ec"),a=n.n(i);window.$=a.a,window.jQuery=a.a,t["a"]=a.a},df1c:function(e,t,n){"use strict";n("3e21")},e323:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content"},[e.hasButton?n("el-button",{staticClass:"proto-setting",attrs:{disabled:!e.canSetting,icon:e.icon,size:"small",type:"primary"},on:{click:e.onSetting}}):e._e(),e._v(" "),n("Dialog",{attrs:{"show-cancel":!1,"show-confirm":!1,title:e.title,visible:e.isVisible,width:"60%"},on:{"update:visible":function(t){e.isVisible=t},close:e.onDialogClose}},[n("AutoDataForm",e._g(e._b({ref:"autoDataForm",staticClass:"data-form",attrs:{form:e.form},on:{submit:e.onSubmit}},"AutoDataForm",e.config,!1),e.$listeners))],1)],1)},a=[],s=(n("1c01"),n("58b2"),n("8e6e"),n("f3e2"),n("d25f"),n("bd86")),r=n("768b"),c=(n("ffc1"),n("6762"),n("2fdb"),n("ac6a"),n("456d"),n("96cf"),n("3b8d")),o=n("9039"),l=n("c75f"),u=n("f823");function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){Object(s["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f={components:{Dialog:o["a"],AutoDataForm:l["a"]},props:{value:{type:[String,Object],default:function(){return{}}},title:{type:String,default:function(){return this.$t("PushParams")}},btnText:{type:String,default:function(){return""}},icon:{type:String,default:"el-icon-setting"},url:{type:String,default:"/api/v1/assets/platform-automation-methods/"},method:{type:String,default:""},pushAccountParams:{type:Object,default:function(){return{}}},visible:{type:Boolean,default:!1},hasButton:{type:Boolean,default:!0}},data:function(){return{isVisible:this.visible,canSetting:!0,form:this.value,remoteMeta:{},config:{url:this.url,hasSaveContinue:!1,hasButtons:!0,hasReset:!1,fields:[],method:"get"},preFieldsMeta:{change_secret_by_ssh:{commands:{helpTextAsTip:!1}}}}},watch:{visible:function(e){this.isVisible=e},method:function(e,t){e!==t&&this.getUrlMeta()}},mounted:function(){this.getUrlMeta()},methods:{getUrlMeta:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("common/getUrlMeta",{url:this.url});case 2:t=e.sent,this.remoteMeta=t.actions[this.config.method.toUpperCase()]||{},this.onCanSetting()&&this.setFormConfig();case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onCanSetting:function(){var e=Object.keys(this.remoteMeta);return this.canSetting=e.includes(this.method)&&this.$hasPerm("assets.change_platform"),this.$emit("canSetting",this.canSetting),this.canSetting},setFormConfig:function(){var e=[],t={},n=this.method,i=this.remoteMeta[n];e=[[i.label,[n]]],t[n]={fields:[],fieldsMeta:{}};var a=this.pushAccountParams[n];if(Object.keys((null===i||void 0===i?void 0:i.children)||{}).length>0)for(var s=0,c=Object.entries(i.children);s<c.length;s++){var o=Object(r["a"])(c[s],2),l=o[0],h=o[1],f="el-input",p={};switch(null===h||void 0===h?void 0:h.type){case"list":f=u["b"];break;case"boolean":f=u["j"];break;case"text":p["text"]="textarea";break}a&&(h.default=a[l]||h.default);var g=d(d({},h),{},{component:f,el:p});t[n].fields.push(l),t[n].fieldsMeta[l]=g}var m=this.preFieldsMeta[n];if(m)for(var b=0,S=Object.entries(m);b<S.length;b++)for(var _=Object(r["a"])(S[b],2),v=_[0],E=_[1],y=0,C=Object.entries(E);y<C.length;y++){var M=Object(r["a"])(C[y],2),k=M[0],T=M[1];t[n]["fieldsMeta"][v][k]=T}this.config.fields=e,this.config.fieldsMeta=t},onSetting:function(){this.isVisible=!0},onSubmit:function(e){this.$emit("input",e),this.isVisible=!1,this.$emit("update:visible",this.isVisible)},onDialogClose:function(){this.$emit("update:visible",this.isVisible)}}},p=f,g=(n("273b"),n("2877")),m=Object(g["a"])(p,i,a,!1,null,"2772642f",null);t["a"]=m.exports}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-23825912","chunk-52829884"],{"0482":function(e,t,a){},"05b9":function(e,t,a){"use strict";a("efaf")},"0e22":function(e,t,a){},1788:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el-card-table"},[a("TableAction",e._b({attrs:{"reload-table":e.reloadTable,"search-table":e.search,"table-url":e.tableUrl}},"TableAction",e.headerActions,!1)),e._v(" "),a("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"the-row"},[0===e.totalData.length?a("IBox",{staticClass:"empty-box"},[a("el-empty",{staticClass:"no-data",staticStyle:{padding:"20px"},attrs:{description:e.$t("NoData"),"image-size":200}})],1):e._e(),e._v(" "),a("div",{staticClass:"card-container"},e._l(e.totalData,(function(t,n){return a("el-card",{key:n,staticClass:"the-card",class:{"is-disabled":e.isDisabled(t)},attrs:{shadow:"hover"}},[a("keep-alive",[e._t("default",[a("Panel",{attrs:{d:t},nativeOn:{click:function(a){return e.onView(t)}}})],{index:n,item:t,onView:e.onView})],2)],1)})),1)],1),e._v(" "),a("Pagination",e._b({directives:[{name:"show",rawName:"v-show",value:e.pagination&&e.total>e.paginationSize,expression:"pagination && total > paginationSize"}],ref:"pagination",staticClass:"pagination",on:{currentSizeChange:e.handleCurrentChange,sizeChange:e.handleSizeChange}},"Pagination",e.$data,!1)),e._v(" "),e.detailDrawer?a("Drawer",{attrs:{component:e.detailDrawer,title:e.detailTitle,visible:e.detailDrawerVisible},on:{"update:visible":function(t){e.detailDrawerVisible=t}}}):e._e()],1)},i=[],r=(a("1c01"),a("58b2"),a("8e6e"),a("f3e2"),a("d25f"),a("7f7f"),a("a481"),a("57e7"),a("ac6a"),a("456d"),a("6d67"),a("96cf"),a("3b8d")),s=a("bd86"),o=(a("c5f6"),a("2f62")),l=a("2af9"),c=a("7d2b"),u=a("e9f9"),p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{on:{click:e.handleClick}},["enterprise"===e.d.edition?a("span",{staticClass:"enterprise"},[e._v("\n    "+e._s(e.$t("Enterprise"))+"\n  ")]):e._e(),e._v(" "),a("el-row",{staticClass:"panel"},[e.d.icon?a("el-col",{staticClass:"image",attrs:{span:e.d.icon?8:0}},[e.d.icon.startsWith("/")||e.d.icon.startsWith("data:")?a("img",{attrs:{alt:e.d.display_name,src:e.d.icon}}):a("Icon",{attrs:{icon:e.d.icon}})],1):e._e(),e._v(" "),a("el-col",{staticClass:"text-zone",attrs:{span:e.d.icon?16:24}},[a("div",{staticClass:"one-line"},[a("b",[e._v(e._s(e.d.display_name))])]),e._v(" "),a("div",{staticClass:"tag-zone"},[e.d.version?a("el-tag",{staticStyle:{"margin-left":"5px","background-color":"#ecf5ff",color:"#409eff"},attrs:{size:"mini"}},[e._v("\n          "+e._s(e.d.version)+"\n        ")]):e._e(),e._v(" "),e._l(e.d.tags,(function(t){return a("el-tag",{key:t,attrs:{size:"mini"}},[e._v("\n          "+e._s(e.capitalize(t))+"\n        ")])}))],2),e._v(" "),a("div",{staticClass:"comment",attrs:{title:e.d.comment}},[e._v("\n        "+e._s(e.d.comment)+"\n      ")])])],1)],1)},d=[],f=a("35a5"),h={name:"Panel",components:{Icon:f["a"]},props:{d:{type:Object,required:!0}},data:function(){return{}},methods:{capitalize:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},handleClick:function(){this.$emit("onClick",this.d)}}},m=h,g=(a("5e03"),a("2877")),b=Object(g["a"])(m,p,d,!1,null,"69f0eeda",null),v=b.exports,w=a("ca50");function x(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function _(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?x(Object(a),!0).forEach((function(t){Object(s["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):x(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var y=1,C={name:"CardTable",components:{Drawer:w["a"],IBox:u["a"],Panel:v,TableAction:c["a"],Pagination:l["n"]},props:{columns:{type:Number,default:3},tableConfig:{type:Object,default:function(){return{}}},headerActions:{type:Object,default:function(){return{}}},pagination:{type:Boolean,default:!0},subComponent:{type:Object,default:function(){return null}},subComponentProps:{type:Object,default:function(){return{}}},detailDrawer:{type:[String,Function],default:""}},data:function(){return{total:0,totalData:[],page:y,extraQuery:{},paginationSize:12,paginationLayout:"total, sizes, prev, pager, next",paginationSizes:[12,24,36],loading:!0,axiosConfig:{raw:1,params:{display:1,draw:1}},detailDrawerVisible:!1,detailTitle:""}},computed:_(_({},Object(o["b"])(["hasValidLicense"])),{},{tableUrl:function(){return this.tableConfig.url||""}}),mounted:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getList();case 3:return e.prev=3,this.loading=!1,e.finish(3);case 6:case"end":return e.stop()}}),e,this,[[0,,3,6]])})));function t(){return e.apply(this,arguments)}return t}(),methods:{isDisabled:function(e){var t;return"enterprise"===(null===(t=e.edition)||void 0===t?void 0:t.value)&&!this.hasValidLicense},getIcon:function(e){var t="fa-check-circle";return!1===e&&(t="fa-times-circle"),'<i class="fa '.concat(t,'" />')},getPageQuery:function(e,t){return this.$refs.pagination.getPageQuery(e,t)},getList:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,a,n,i,r,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.tableConfig.totalData){e.next=4;break}return this.totalData=this.tableConfig.totalData,this.total=this.totalData.length,e.abrupt("return");case 4:if(this.tableUrl){e.next=6;break}return e.abrupt("return");case 6:return t=this.getPageQuery(this.page,this.paginationSize),a=Object.assign(this.extraQuery,t,this.tableConfig.extraQuery),n=Object.keys(a).map((function(e){return e+"="+a[e]})).join("&"),i=-1===this.tableUrl.indexOf("?")?"?":"&",r="".concat(this.tableUrl).concat(i).concat(n),e.next=13,this.$axios.get(r,this.axiosConfig);case 13:s=e.sent,o=s.data,this.total=(null===o||void 0===o?void 0:o.count)||0,this.totalData=(null===o||void 0===o?void 0:o.results)||[];case 17:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),reloadTable:function(){this.getList()},search:function(e){this.extraQuery=e,this.getList()},handleSizeChange:function(e){this.page=y,this.paginationSize=e,this.getList()},handleCurrentChange:function(e){this.page=e,this.getList()},defaultPerformView:function(e){var t=this.$route.name.replace("List","Detail"),a=this.headerActions.detailRoute||t,n={replace:!0};"string"===typeof a?(n.name=a,n.params={id:e.id}):n=a,this.$router.push(n)},defaultPerformDelete:function(e){this.$axios.delete("".concat(this.tableConfig.url).concat(e.id,"/"))},onView:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.isDisabled(t)){e.next=2;break}return e.abrupt("return");case 2:if(!this.detailDrawer){e.next=9;break}return e.next=5,this.$store.dispatch("common/setDrawerActionMeta",{action:"detail",row:t,col:{},id:t.id});case 5:this.detailTitle="".concat(this.$t("Detail"),": ").concat(t.name),this.detailDrawerVisible=!0,e.next=12;break;case 9:return a=this.tableConfig.onView||this.defaultPerformView,e.next=12,a(t);case 12:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),onDelete:function(e){var t=this,a="".concat(this.$t("DeleteWarningMsg"),' "').concat(e.name,'" ?');this.$confirm(a,this.$tc("Info"),{type:"warning",confirmButtonClass:"el-button--danger",beforeClose:function(){var a=Object(r["a"])(regeneratorRuntime.mark((function a(n,i,r){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if("confirm"===n){a.next=2;break}return a.abrupt("return",r());case 2:return s=t.tableConfig.onDelete||t.defaultPerformDelete,a.next=5,s(e);case 5:r(),t.reloadTable(),t.$message.success(t.$tc("DeleteSuccessMsg"));case 8:case"end":return a.stop()}}),a)})));function n(e,t,n){return a.apply(this,arguments)}return n}()}).catch((function(){}))}}},$=C,D=(a("31a9"),Object(g["a"])($,n,i,!1,null,"2a7bdd37",null));t["a"]=D.exports},"1ccb":function(e,t,a){"use strict";a("421e")},"218d":function(e,t,a){"use strict";a("72f0")},"273b":function(e,t,a){"use strict";a("0482")},2845:function(e,t,a){"use strict";a("5586")},"31a9":function(e,t,a){"use strict";a("a752")},3586:function(e,t,a){"use strict";a("f898")},"3cc2":function(e,t,a){},"421e":function(e,t,a){},5586:function(e,t,a){},"5e03":function(e,t,a){"use strict";a("0e22")},7:function(e,t){},"72f0":function(e,t,a){},a752:function(e,t,a){},b708:function(e,t,a){},bd11:function(e,t){e.exports=b,e.exports.match=o,e.exports.regexpToFunction=l,e.exports.parse=i,e.exports.compile=s,e.exports.tokensToFunction=c,e.exports.tokensToRegExp=g;var a="/",n=new RegExp(["(\\\\.)","(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?"].join("|"),"g");function i(e,t){var i,s=[],o=0,l=0,c="",u=t&&t.delimiter||a,d=t&&t.whitelist||void 0,f=!1;while(null!==(i=n.exec(e))){var h=i[0],m=i[1],g=i.index;if(c+=e.slice(l,g),l=g+h.length,m)c+=m[1],f=!0;else{var b="",v=i[2],w=i[3],x=i[4],_=i[5];if(!f&&c.length){var y=c.length-1,C=c[y],$=!d||d.indexOf(C)>-1;$&&(b=C,c=c.slice(0,y))}c&&(s.push(c),c="",f=!1);var D="+"===_||"*"===_,O="?"===_||"*"===_,j=w||x,A=b||u,S=b||("string"===typeof s[s.length-1]?s[s.length-1]:"");s.push({name:v||o++,prefix:b,delimiter:A,optional:O,repeat:D,pattern:j?p(j):r(A,u,S)})}}return(c||l<e.length)&&s.push(c+e.substr(l)),s}function r(e,t,a){var n="[^"+u(e===t?e:e+t)+"]";return!a||a.indexOf(e)>-1||a.indexOf(t)>-1?n+"+?":u(a)+"|(?:(?!"+u(a)+")"+n+")+?"}function s(e,t){return c(i(e,t),t)}function o(e,t){var a=[],n=b(e,a,t);return l(n,a)}function l(e,t){return function(a,n){var i=e.exec(a);if(!i)return!1;for(var r=i[0],s=i.index,o={},l=n&&n.decode||decodeURIComponent,c=1;c<i.length;c++)if(void 0!==i[c]){var u=t[c-1];u.repeat?o[u.name]=i[c].split(u.delimiter).map((function(e){return l(e,u)})):o[u.name]=l(i[c],u)}return{path:r,index:s,params:o}}}function c(e,t){for(var a=new Array(e.length),n=0;n<e.length;n++)"object"===typeof e[n]&&(a[n]=new RegExp("^(?:"+e[n].pattern+")$",d(t)));return function(t,n){for(var i="",r=n&&n.encode||encodeURIComponent,s=!n||!1!==n.validate,o=0;o<e.length;o++){var l=e[o];if("string"!==typeof l){var c,u=t?t[l.name]:void 0;if(Array.isArray(u)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but got array');if(0===u.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var p=0;p<u.length;p++){if(c=r(u[p],l),s&&!a[o].test(c))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'"');i+=(0===p?l.prefix:l.delimiter)+c}}else if("string"!==typeof u&&"number"!==typeof u&&"boolean"!==typeof u){if(!l.optional)throw new TypeError('Expected "'+l.name+'" to be '+(l.repeat?"an array":"a string"))}else{if(c=r(String(u),l),s&&!a[o].test(c))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but got "'+c+'"');i+=l.prefix+c}}else i+=l}return i}}function u(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function p(e){return e.replace(/([=!:$/()])/g,"\\$1")}function d(e){return e&&e.sensitive?"":"i"}function f(e,t){if(!t)return e;var a=e.source.match(/\((?!\?)/g);if(a)for(var n=0;n<a.length;n++)t.push({name:n,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return e}function h(e,t,a){for(var n=[],i=0;i<e.length;i++)n.push(b(e[i],t,a).source);return new RegExp("(?:"+n.join("|")+")",d(a))}function m(e,t,a){return g(i(e,a),t,a)}function g(e,t,n){n=n||{};for(var i=n.strict,r=!1!==n.start,s=!1!==n.end,o=n.delimiter||a,l=[].concat(n.endsWith||[]).map(u).concat("$").join("|"),c=r?"^":"",p=0;p<e.length;p++){var f=e[p];if("string"===typeof f)c+=u(f);else{var h=f.repeat?"(?:"+f.pattern+")(?:"+u(f.delimiter)+"(?:"+f.pattern+"))*":f.pattern;t&&t.push(f),f.optional?f.prefix?c+="(?:"+u(f.prefix)+"("+h+"))?":c+="("+h+")?":c+=u(f.prefix)+"("+h+")"}}if(s)i||(c+="(?:"+u(o)+")?"),c+="$"===l?"$":"(?="+l+")";else{var m=e[e.length-1],g="string"===typeof m?m[m.length-1]===o:void 0===m;i||(c+="(?:"+u(o)+"(?="+l+"))?"),g||(c+="(?="+u(o)+"|"+l+")")}return new RegExp(c,d(n))}function b(e,t,a){return e instanceof RegExp?f(e,t):Array.isArray(e)?h(e,t,a):m(e,t,a)}},c0eb:function(e,t,a){"use strict";var n=a("c5ec"),i=a.n(n);window.$=i.a,window.jQuery=i.a,t["a"]=i.a},de0d:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("TabPage",{attrs:{"active-menu":e.activeMenu,submenu:e.submenu},on:{"update:activeMenu":function(t){e.activeMenu=t},"update:active-menu":function(t){e.activeMenu=t}}},[a("keep-alive",[a(e.activeMenu,{tag:"component"})],1)],1)},i=[],r=a("cd4a"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{md:24,sm:24}},[a("el-alert",{attrs:{type:"success"}},[e._v("\n        "+e._s(e.$t("AppletHelpText"))+"\n      ")])],1)],1),e._v(" "),a("CardTable",e._b({ref:"CardTable"},"CardTable",e.$data,!1)),e._v(" "),a("UploadDialog",{attrs:{visible:e.uploadDialogVisible},on:{"update:visible":function(t){e.uploadDialogVisible=t},"upload-event":e.handleUpload}})],1)},o=[],l=a("1788"),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Dialog",e._g(e._b({attrs:{"before-close":e.handleClose,"disabled-status":!e.isFinished,"show-cancel":!1,title:e.$tc("OfflineUpload")},on:{cancel:e.onCancel,confirm:e.onSubmit}},"Dialog",e.$attrs,!1),e.$listeners),[a("el-form",{attrs:{"label-position":"top"}},[a("el-form-item",{staticClass:"file-uploader",attrs:{label:e.$tc("Upload"),"label-width":"100px"}},[a("el-upload",{ref:"upload",attrs:{"auto-upload":!1,"before-upload":e.beforeUpload,limit:1,"on-change":e.onFileChange,accept:".zip",action:"string",drag:"","list-type":"text/csv","upload-files":"uploadFiles"}},[a("i",{staticClass:"el-icon-upload"}),e._v(" "),a("div",{staticClass:"el-upload__text"},[e._v("\n          "+e._s(e.$t("DragUploadFileInfo"))+"\n        ")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[a("span",{class:{hasError:e.hasFileFormatOrSizeError}},[e._v("\n            "+e._s(e.$t("UploadZipTips"))+"\n          ")]),e._v(" "),e.renderError?a("div",{staticClass:"hasError"},[e._v(e._s(e.renderError))]):e._e()])])],1)],1)],1)},u=[],p=a("2af9"),d={name:"UploadDialog",components:{Dialog:p["i"]},data:function(){return{hasFileFormatOrSizeError:!1,renderError:"",file:null,isFinished:!0}},methods:{onFileChange:function(e,t){"ready"===e.status&&(this.file=e)},beforeUpload:function(e){},handleClose:function(e){this.isFinished?e():this.$message.warning(this.$tc("Uploading"))},onCancel:function(){this.$emit("update:visible",!1)},onSubmit:function(){var e=this;if(this.file){this.isFinished=!1;var t=new FormData;t.append("file",this.file.raw),this.$axios.post("/api/v1/terminal/applets/upload/",t,{headers:{"Content-Type":"multipart/form-data"},timeout:36e5,disableFlashErrorMsg:!0,params:{update:!0}}).then((function(t){e.isFinished=!0,e.$message.success(e.$tc("UploadSucceed")),e.$emit("update:visible",!1),e.$emit("upload-event",t)})).catch((function(t){e.isFinished=!0;var a=t.response.data,n=(null===a||void 0===a?void 0:a.message)||(null===a||void 0===a?void 0:a.detail)||(null===a||void 0===a?void 0:a.error)||JSON.stringify(a);e.$message.error(n)})).finally((function(){e.$refs.upload.clearFiles()})),setTimeout((function(){e.$refs.upload.clearFiles()}),400)}}}},f=d,h=(a("218d"),a("2877")),m=Object(h["a"])(f,c,u,!1,null,"21271f1a",null),g=m.exports,b={name:"Applets",components:{CardTable:l["a"],UploadDialog:g},data:function(){var e=this;return{uploadDialogVisible:!1,tableConfig:{url:"/api/v1/terminal/applets/",deletePerm:"terminal.delete_applet"},headerActions:{onCreate:function(){e.uploadDialogVisible=!0},createTitle:this.$t("Upload"),hasCreate:this.$hasPerm("terminal.add_applet"),searchConfig:{getUrlQuery:!1,exclude:["version"]},extraActions:[{title:this.$t("Marketplace"),icon:"el-icon-shopping-bag-1",callback:function(){window.open("https://apps.fit2cloud.com/jumpserver")}}],detailRoute:"AppletDetail",hasExport:!1,hasImport:!1,hasBulkDelete:!1,hasBulkUpdate:!1,hasColumnSetting:!1}}},mounted:function(){this.$store.dispatch("users/enterSettingOrg")},methods:{handleUpload:function(e){this.$refs.CardTable.reloadTable()}}},v=b,w=(a("3586"),Object(h["a"])(v,s,o,!1,null,"da0d1aea",null)),x=w.exports,_=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-alert",{attrs:{type:"success"}},[a("span",{directives:[{name:"sanitize",rawName:"v-sanitize",value:e.$t("AppletHostSelectHelpMessage"),expression:"$t('AppletHostSelectHelpMessage')"}]})]),e._v(" "),a("DrawerListTable",e._b({ref:"table",staticClass:"applet-host",attrs:{"create-drawer":e.createDrawer,resource:e.$t("AppletHosts")}},"DrawerListTable",e.$data,!1))],1)},y=[],C=a("ac6b"),$=a("53f7"),D={name:"AppletHost",components:{DrawerListTable:p["j"]},data:function(){var e=this,t={type:"windows",category:"host",platform:"RemoteAppHost"};return{createDrawer:function(){return Promise.all([a.e("chunk-commons"),a.e("chunk-ac5ae2ae")]).then(a.bind(null,"3298"))},detailDrawer:function(){return Promise.all([a.e("chunk-commons"),a.e("chunk-7c86b624")]).then(a.bind(null,"0371"))},tableConfig:{url:"/api/v1/terminal/applet-hosts/",columnsExclude:["info","auto_config","gathered_info","deploy_options"],columnsShow:{min:["name","actions"],default:["name","address","protocols","load","comment","actions"]},columnsMeta:{name:{formatterArgs:{getRoute:function(e){var t=e.row;return{name:"AppletHostDetail",params:{id:t.id}}}}},load:{formatterArgs:{classChoices:{"":"success",offline:"fa fa-chain-broken text-danger",critical:"fa fa-bolt text-warning",high:"fa fa-exclamation-triangle text-info",normal:"fa fa-check text-primary"}}},protocols:{formatter:$["o"]},actions:{formatterArgs:{performDelete:function(t){var a=t.row,n=a.id,i="/api/v1/terminal/applet-hosts/".concat(n,"/");return e.$axios.delete(i)},onUpdate:function(a){var n=a.row;e.$refs.table.onUpdate({row:n,query:t})},extraActions:[{name:"Test",title:this.$t("Test"),can:this.$hasPerm("assets.test_assetconnectivity"),callback:function(t){var a=t.row;e.$axios.post("/api/v1/assets/assets/".concat(a.id,"/tasks/"),{action:"refresh"}).then((function(e){Object(C["k"])(e["task"])}))}}]}}}},headerActions:{createRoute:"AppletHostCreate",hasRefresh:!0,hasExport:!1,hasImport:!1,onCreate:function(){e.$refs.table.onCreate({query:t})}}}}},O=D,j=(a("2845"),Object(h["a"])(O,_,y,!1,null,"da4a093a",null)),A=j.exports,S=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("CardTable",e._b({ref:"CardTable"},"CardTable",e.$data,!1)),e._v(" "),a("UploadDialog",{attrs:{visible:e.uploadDialogVisible},on:{"update:visible":function(t){e.uploadDialogVisible=t},"upload-event":e.handleUpload}})],1)},P=[],k=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Dialog",e._g(e._b({attrs:{"before-close":e.handleClose,"disabled-status":!e.isFinished,"show-cancel":!1,title:e.$tc("OfflineUpload")},on:{cancel:e.onCancel,confirm:e.onSubmit}},"Dialog",e.$attrs,!1),e.$listeners),[a("el-form",{attrs:{"label-position":"top"}},[a("el-form-item",{staticClass:"file-uploader",attrs:{label:e.$tc("Upload"),"label-width":"100px"}},[a("el-upload",{ref:"upload",attrs:{"auto-upload":!1,"before-upload":e.beforeUpload,limit:1,"on-change":e.onFileChange,accept:".zip",action:"string",drag:"","list-type":"text/csv","upload-files":"uploadFiles"}},[a("i",{staticClass:"el-icon-upload"}),e._v(" "),a("div",{staticClass:"el-upload__text"},[e._v("\n          "+e._s(e.$t("DragUploadFileInfo"))+"\n        ")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[a("span",{class:{hasError:e.hasFileFormatOrSizeError}},[e._v("\n            "+e._s(e.$t("UploadZipTips"))+"\n          ")]),e._v(" "),e.renderError?a("div",{staticClass:"hasError"},[e._v(e._s(e.renderError))]):e._e()])])],1)],1)],1)},E=[],T={name:"UploadDialog",components:{Dialog:p["i"]},data:function(){return{hasFileFormatOrSizeError:!1,renderError:"",file:null,isFinished:!0}},methods:{onFileChange:function(e,t){"ready"===e.status&&(this.file=e)},beforeUpload:function(e){},handleClose:function(e){this.isFinished?e():this.$message.warning(this.$tc("Uploading"))},onCancel:function(){this.$emit("update:visible",!1)},onSubmit:function(){var e=this;if(this.file){this.isFinished=!1;var t=new FormData;t.append("file",this.file.raw),this.$axios.post("/api/v1/terminal/virtual-apps/upload/",t,{headers:{"Content-Type":"multipart/form-data"},disableFlashErrorMsg:!0}).then((function(t){e.isFinished=!0,e.$message.success(e.$tc("UploadSucceed")),e.$emit("update:visible",!1),e.$emit("upload-event",t)})).catch((function(t){e.isFinished=!0;var a=t.response.data,n=(null===a||void 0===a?void 0:a.message)||(null===a||void 0===a?void 0:a.detail)||(null===a||void 0===a?void 0:a.error)||JSON.stringify(a);e.$message.error(n)})).finally((function(){e.$refs.upload.clearFiles()}))}}}},U=T,F=(a("05b9"),Object(h["a"])(U,k,E,!1,null,"687324ac",null)),V=F.exports,M={name:"VirtualApp",components:{CardTable:l["a"],UploadDialog:V},data:function(){var e=this;return{uploadDialogVisible:!1,tableConfig:{url:"/api/v1/terminal/virtual-apps/",deletePerm:"terminal.delete_virtualapp"},headerActions:{onCreate:function(){e.uploadDialogVisible=!0},createTitle:this.$t("Upload"),searchConfig:{getUrlQuery:!1,exclude:["version"]},detailRoute:"VirtualAppDetail",hasExport:!1,hasImport:!1,hasBulkDelete:!1,hasBulkUpdate:!1,hasColumnSetting:!1}}},methods:{handleUpload:function(e){this.$refs.CardTable.reloadTable()}}},R=M,z=(a("1ccb"),Object(h["a"])(R,S,P,!1,null,"054f5f9e",null)),L=z.exports,B=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("ListTable",e._b({staticClass:"App-Provider"},"ListTable",e.$data,!1))],1)},I=[],H={name:"AppProvider",components:{ListTable:p["j"]},data:function(){var e=this;return{tableConfig:{url:"/api/v1/terminal/app-providers/",columnsShow:{min:["name"],default:["name","hostname","load","actions"]},columnsMeta:{name:{formatterArgs:{getRoute:function(e){var t=e.row;return{name:"AppProviderDetail",params:{id:t.id}}}}},load:{formatterArgs:{classChoices:{"":"success",offline:"fa fa-chain-broken text-danger",critical:"fa fa-bolt text-warning",high:"fa fa-exclamation-triangle text-info",normal:"fa fa-check text-primary"}}},actions:{formatter:$["c"],formatterArgs:{hasClone:!1,hasUpload:!1,hasUpdate:!1,canDelete:!1,performDelete:function(t){var a=t.row,n=a.id,i="/api/v1/terminal/app-providers/".concat(n,"/");return e.$axios.delete(i)}}}}},headerActions:{hasCreate:!1,hasRefresh:!0,hasExport:!1,hasImport:!1,canBulkDelete:!1}}}},Q=H,N=(a("eb31"),Object(h["a"])(Q,B,I,!1,null,"2b156200",null)),J=N.exports,W=a("4360"),q={name:"Applet",components:{TabPage:r["l"],Applets:x,AppletHosts:A,VirtualApp:L,AppProvider:J},data:function(){var e=this;return{activeMenu:"Applets",submenu:[{title:this.$t("Applets"),name:"Applets",hidden:function(){return!e.$hasPerm("terminal.view_applet")}},{title:this.$t("AppletHosts"),name:"AppletHosts",hidden:function(){return!e.$hasPerm("terminal.view_applethost")}},{title:this.$t("VirtualApp"),name:"VirtualApp",hidden:function(){return!W["a"].getters.publicSettings["VIRTUAL_APP_ENABLED"]||!e.$store.getters.hasValidLicense||!e.$hasPerm("terminal.view_virtualapp")}},{title:this.$t("AppProvider"),name:"AppProvider",hidden:function(){return!W["a"].getters.publicSettings["VIRTUAL_APP_ENABLED"]||!e.$store.getters.hasValidLicense||!e.$hasPerm("terminal.view_appprovider")}}]}}},Z=q,G=Object(h["a"])(Z,n,i,!1,null,null,null);t["default"]=G.exports},e323:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[e.hasButton?a("el-button",{staticClass:"proto-setting",attrs:{disabled:!e.canSetting,icon:e.icon,size:"small",type:"primary"},on:{click:e.onSetting}}):e._e(),e._v(" "),a("Dialog",{attrs:{"show-cancel":!1,"show-confirm":!1,title:e.title,visible:e.isVisible,width:"60%"},on:{"update:visible":function(t){e.isVisible=t},close:e.onDialogClose}},[a("AutoDataForm",e._g(e._b({ref:"autoDataForm",staticClass:"data-form",attrs:{form:e.form},on:{submit:e.onSubmit}},"AutoDataForm",e.config,!1),e.$listeners))],1)],1)},i=[],r=(a("1c01"),a("58b2"),a("8e6e"),a("f3e2"),a("d25f"),a("bd86")),s=a("768b"),o=(a("ffc1"),a("6762"),a("2fdb"),a("ac6a"),a("456d"),a("96cf"),a("3b8d")),l=a("9039"),c=a("c75f"),u=a("f823");function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(Object(a),!0).forEach((function(t){Object(r["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var f={components:{Dialog:l["a"],AutoDataForm:c["a"]},props:{value:{type:[String,Object],default:function(){return{}}},title:{type:String,default:function(){return this.$t("PushParams")}},btnText:{type:String,default:function(){return""}},icon:{type:String,default:"el-icon-setting"},url:{type:String,default:"/api/v1/assets/platform-automation-methods/"},method:{type:String,default:""},pushAccountParams:{type:Object,default:function(){return{}}},visible:{type:Boolean,default:!1},hasButton:{type:Boolean,default:!0}},data:function(){return{isVisible:this.visible,canSetting:!0,form:this.value,remoteMeta:{},config:{url:this.url,hasSaveContinue:!1,hasButtons:!0,hasReset:!1,fields:[],method:"get"},preFieldsMeta:{change_secret_by_ssh:{commands:{helpTextAsTip:!1}}}}},watch:{visible:function(e){this.isVisible=e},method:function(e,t){e!==t&&this.getUrlMeta()}},mounted:function(){this.getUrlMeta()},methods:{getUrlMeta:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("common/getUrlMeta",{url:this.url});case 2:t=e.sent,this.remoteMeta=t.actions[this.config.method.toUpperCase()]||{},this.onCanSetting()&&this.setFormConfig();case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onCanSetting:function(){var e=Object.keys(this.remoteMeta);return this.canSetting=e.includes(this.method)&&this.$hasPerm("assets.change_platform"),this.$emit("canSetting",this.canSetting),this.canSetting},setFormConfig:function(){var e=[],t={},a=this.method,n=this.remoteMeta[a];e=[[n.label,[a]]],t[a]={fields:[],fieldsMeta:{}};var i=this.pushAccountParams[a];if(Object.keys((null===n||void 0===n?void 0:n.children)||{}).length>0)for(var r=0,o=Object.entries(n.children);r<o.length;r++){var l=Object(s["a"])(o[r],2),c=l[0],p=l[1],f="el-input",h={};switch(null===p||void 0===p?void 0:p.type){case"list":f=u["b"];break;case"boolean":f=u["j"];break;case"text":h["text"]="textarea";break}i&&(p.default=i[c]||p.default);var m=d(d({},p),{},{component:f,el:h});t[a].fields.push(c),t[a].fieldsMeta[c]=m}var g=this.preFieldsMeta[a];if(g)for(var b=0,v=Object.entries(g);b<v.length;b++)for(var w=Object(s["a"])(v[b],2),x=w[0],_=w[1],y=0,C=Object.entries(_);y<C.length;y++){var $=Object(s["a"])(C[y],2),D=$[0],O=$[1];t[a]["fieldsMeta"][x][D]=O}this.config.fields=e,this.config.fieldsMeta=t},onSetting:function(){this.isVisible=!0},onSubmit:function(e){this.$emit("input",e),this.isVisible=!1,this.$emit("update:visible",this.isVisible)},onDialogClose:function(){this.$emit("update:visible",this.isVisible)}}},h=f,m=(a("273b"),a("2877")),g=Object(m["a"])(h,n,i,!1,null,"2772642f",null);t["a"]=g.exports},eb31:function(e,t,a){"use strict";a("fb06")},efaf:function(e,t,a){},f898:function(e,t,a){},fb06:function(e,t,a){}}]);
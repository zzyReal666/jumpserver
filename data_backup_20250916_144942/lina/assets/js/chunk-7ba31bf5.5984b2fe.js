(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7ba31bf5"],{3232:function(e,t,a){"use strict";a("9ae4")},"3de0":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("GenericDetailPage",e._g(e._b({attrs:{"active-menu":e.config.activeMenu,object:e.AdhocDetail},on:{"update:activeMenu":function(t){return e.$set(e.config,"activeMenu",t)},"update:active-menu":function(t){return e.$set(e.config,"activeMenu",t)},"update:object":function(t){e.AdhocDetail=t}}},"GenericDetailPage",e.config,!1),e.$listeners),[a("keep-alive",[a(e.config.activeMenu,{tag:"component",attrs:{object:e.AdhocDetail}})],1)],1)},n=[],l=(a("7f7f"),a("cd4a")),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("TwoCol",{scopedSlots:e._u([{key:"right",fn:function(){return[a("IBox",{attrs:{title:e.$tc("Variable")}},[a("Variable",{attrs:{value:e.object.variable,"disable-edit":e.disableEdit},on:{"update:value":function(t){return e.$set(e.object,"variable",t)},input:e.updateVariable}})],1)]},proxy:!0}])},[a("AutoDetailCard",{attrs:{excludes:e.excludes,object:e.object,url:e.url}})],1)},o=[],s=a("e3bc"),c=a("b3af"),u=a("2af9"),d=a("52cc"),b={components:{IBox:u["k"],Variable:c["a"],TwoCol:d["a"],AutoDetailCard:s["a"]},props:{object:{type:Object,default:function(){return{}}}},data:function(){return{url:"/api/v1/ops/adhocs/".concat(this.object.id,"/"),excludes:["variable"],disableEdit:this.object.creator!==this.$store.state.users.profile.id}},computed:{cardTitle:function(){return this.object.name}},methods:{updateVariable:function(){var e=this,t="/api/v1/ops/adhocs/".concat(this.object.id,"/");this.$axios.patch(t,{variable:this.object.variable}).then((function(){e.$message.success(e.$tc("UpdateSuccessMsg"))}))}}},v=b,f=a("2877"),p=Object(f["a"])(v,r,o,!1,null,"45cf8327",null),h=p.exports,m={components:{GenericDetailPage:l["d"],AdhocDetail:h},data:function(){return{AdhocDetail:{},config:{getTitle:function(e){return e["name"]},url:"/api/v1/ops/adhocs",activeMenu:"AdhocDetail",submenu:[{title:this.$t("Basic"),name:"AdhocDetail"}],hasRightSide:!1}}}},_=m,V=Object(f["a"])(_,i,n,!1,null,"88102764",null);t["default"]=V.exports},"9ae4":function(e,t,a){},b3af:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"variables el-data-table"},[a("el-table",{staticClass:"el-table--fit el-table--border",attrs:{data:e.variables}},[a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:e.$tc("Name"),prop:"name"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:e.$tc("VariableName"),prop:"var_name"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:e.$tc("DefaultValue"),prop:"default_value"}}),e._v(" "),e.disableEdit?e._e():a("el-table-column",{attrs:{label:e.$tc("Actions"),align:"center","class-name":"buttons",fixed:"right",width:"135"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{icon:"el-icon-minus",size:"mini",type:"danger"},on:{click:function(a){return e.removeVariable(t.row)}}}),e._v(" "),a("el-button",{attrs:{disabled:!!t.row.template,icon:"el-icon-edit",size:"mini",type:"primary"},on:{click:function(a){return e.onEditClick(t.row)}}})]}}],null,!1,3037588530)})],1),e._v(" "),e.disableEdit?e._e():a("div",{staticClass:"actions"},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.onAddClick}},[e._v("\n        "+e._s(e.$t("Add"))+"\n      ")])],1),e._v(" "),a("AddVariableDialog",{attrs:{variable:e.variable,variables:e.variables,visible:e.addVariableDialogVisible},on:{"update:visible":function(t){e.addVariableDialogVisible=t}}})],1)])},n=[],l=(a("7f7f"),a("d25f"),a("6d67"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.iVisible?a("Dialog",{attrs:{"destroy-on-close":!0,"show-cancel":!1,"show-confirm":!1,title:e.$tc("AddVariable"),visible:e.iVisible,width:"800px"},on:{"update:visible":function(t){e.iVisible=t}}},[a("VariableCreateForm",{attrs:{variable:e.variable},on:{add:e.addVariable,edit:e.editVariable}})],1):e._e()}),r=[],o=(a("20d6"),a("9039")),s=a("1efb"),c={name:"AddVariableDialog",components:{Dialog:o["a"],VariableCreateForm:s["a"]},props:{visible:{type:Boolean,default:!1},variable:{type:Object,default:function(){return{}}},variables:{type:Array,default:function(){return[]}}},computed:{iVisible:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e)}}},methods:{addVariable:function(e){var t=this.variables.findIndex((function(t){return t.name===e.name||t.var_name===e.var_name}));-1!==t&&this.variables.splice(t,1),this.variables.push(e),this.iVisible=!1},editVariable:function(e){var t=this,a=this.variables.findIndex((function(e){return e.var_name===t.variable.var_name}));this.variables.splice(a,1,e);var i=this.variables.filter((function(t){return t.var_name===e.var_name||t.name===e.name})).length;i>1&&this.variables.splice(a,1),this.iVisible=!1}}},u=c,d=a("2877"),b=Object(d["a"])(u,l,r,!1,null,"e0757cc0",null),v=b.exports,f={name:"Variable",components:{AddVariableDialog:v},props:{value:{type:[Array],default:function(){return[]}},disableEdit:{type:Boolean,default:!1}},data:function(){return{variable:{},initial:!1,addVariableDialogVisible:!1}},computed:{variables:{get:function(){return this.value},set:function(e){this.$emit("update:value",e),this.$emit("change",e)}}},watch:{variables:{handler:function(e,t){void 0!==t&&((e.length>0||!this.initial)&&(e.map((function(e){e.default_value=e.text_default_value||e.select_default_value||void 0})),this.$emit("input",e)),e&&(this.initial=!0))},immediate:!0,deep:!0}},methods:{removeVariable:function(e){this.variables=this.variables.filter((function(t){return e.id&&t.id?t.id!==e.id:e.var_name&&t.var_name?t.var_name!==e.var_name:e.name!==t.name}))},onEditClick:function(e){var t=this;this.variable=e,setTimeout((function(){t.addVariableDialogVisible=!0}))},onAddClick:function(){var e=this;this.variable=null,setTimeout((function(){e.addVariableDialogVisible=!0}))}}},p=f,h=(a("3232"),Object(d["a"])(p,i,n,!1,null,"494ead85",null));t["a"]=h.exports}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1e07196f"],{"69db":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("GenericCreateUpdatePage",e._b({on:{getObjectDone:e.disableMFAFieldIfNeed}},"GenericCreateUpdatePage",e.$data,!1))},n=[],r=s("cd4a"),a=s("5cba"),l=s("f823"),o=s("4360"),u={name:"Improvement",components:{GenericCreateUpdatePage:r["c"]},props:{object:{type:Object,default:null}},data:function(){return{url:"/api/v1/users/profile/",fields:[[this.$t("Account"),["username","name","email"]],[this.$t("Authentication"),["mfa_level","public_key"]],[this.$t("Other"),["phone"]],[this.$t("TermsAndConditions"),["terms"]]],fieldsMeta:{username:{disabled:!0},name:{disabled:!0},email:{disabled:!0},phone:{component:l["h"],hidden:function(){return o["a"].getters.publicSettings["PRIVACY_MODE"]}},mfa_level:{helpText:this.$t("MFAOfUserFirstLoginPersonalInformationImprovementPage")},public_key:{label:this.$t("SSHKey"),el:{type:"textarea",placeholder:"ssh-rsa AAAA..."},hidden:function(e){return"local"!==e.source},helpText:this.$t("SSHKeyOfProfileSSHUpdatePage")},terms:{label:this.$t("IAgree"),type:"checkbox",checked:!1,rules:[a["d"]],helpText:this.$t("MFAOfUserFirstLoginUserGuidePage")}},hasReset:!1,cleanFormValue:function(e){return e=Object.assign({},e,{is_first_login:!1}),2===e.mfa_level&&delete e["mfa_level"],e},performSubmit:function(e){return e.terms?this.$axios["patch"](this.url,e):(this.$message.error(this.$tc("PleaseAgreeToTheTerms")),Promise.reject())},onPerformSuccess:function(){var e=this;this.$message.success(this.$tc("UpdateSuccessMsg")),this.$store.dispatch("users/ifFirstLogin",!1),setTimeout((function(){return e.$router.push({name:"home"})}),100)},submitMethod:function(){return"put"}}},methods:{disableMFAFieldIfNeed:function(e){var t=((null===e||void 0===e?void 0:e.is_superuser)||(null===e||void 0===e?void 0:e.is_org_admin))&&2===o["a"].getters.publicSettings["SECURITY_MFA_AUTH"];(1===o["a"].getters.publicSettings["SECURITY_MFA_AUTH"]||t||2===(null===e||void 0===e?void 0:e.mfa_level.value))&&(this.fieldsMeta["mfa_level"].disabled=!0)}}},c=u,d=s("2877"),h=Object(d["a"])(c,i,n,!1,null,null,null);t["default"]=h.exports},7:function(e,t){}}]);
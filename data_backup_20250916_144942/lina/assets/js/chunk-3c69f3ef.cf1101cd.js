(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3c69f3ef"],{9511:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Page",[s("GrantedAssets",{ref:"grantedAssets",attrs:{actions:t.actions,comment:t.comment,name:t.name,"table-url":t.tableUrl,"tree-url":t.treeUrl}})],1)},n=[],r=s("bd86"),o=(s("6b54"),s("87b3"),s("ac6a"),s("f3e2"),s("d25f"),s("7e09")),i=s("83b2"),c=s("53f7"),l=s("34b7"),u=s("dbfd"),f={components:{Page:i["a"],GrantedAssets:o["a"]},data:function(){var t=this;return{treeUrl:"/api/v1/perms/users/self/nodes/children/tree/",tableUrl:"/api/v1/perms/users/self/assets/",preference:{},actions:{width:"88px",align:"center",formatterArgs:{hasDelete:!1,loading:!0,hasClone:!1,hasUpdate:!1,extraActions:[{name:"connect",icon:"fa-desktop",type:"primary",plain:!0,can:function(t){var e=t.row;return e.is_active},callback:function(e){var s,a,n=e.row,r=t.$store.getters.currentOrg?t.$store.getters.currentOrg.id:"",o="/luna/connect?login_to=".concat(n.id);if("new"===(null===(s=t.preference)||void 0===s||null===(a=s.basic)||void 0===a?void 0:a.connect_default_open_method))Object(u["p"])(o);else{var i="/luna/?login_to=".concat(n.id).concat(r?"&oid=".concat(r):"");window.open(i,"_blank")}}},{name:"favor",type:"info",icon:function(e){var s=e.row;return t.checkFavorite(s.id)?"fa-star":"fa-star-o"},callback:function(e){var s=e.row;return t.toggleFavorite(s.id)}}]}},allFavorites:[],name:{formatter:c["l"],formatterArgs:{canEdit:!0,showEditBtn:!0,onEnter:function(e){var s=e.row,a=e.col,n=e.oldValue,r=e.newValue;t.updateAssetCustomAttr(s,a,n,r)}}},comment:{formatter:c["l"],formatterArgs:{canEdit:!0,showEditBtn:!0,onEnter:function(e){var s=e.row,a=e.col,n=e.oldValue,r=e.newValue;t.updateAssetCustomAttr(s,a,n,r)}}}}},mounted:function(){var t=this;this.refreshAllFavorites(),this.preference=Object(l["a"])().then((function(e){t.preference=e}))},methods:{refreshAllFavorites:function(){var t=this,e=this.actions.formatterArgs;e.loading=!0,this.$axios.get("/api/v1/assets/favorite-assets/").then((function(s){t.allFavorites=s,e.loading=!1}))},favor:function(t){var e=this,s={asset:t},a="/api/v1/assets/favorite-assets/";this.$axios.post(a,s).then((function(){e.allFavorites.push({asset:t}),e.$message.success(e.$t("CollectionSucceed"))}))},disfavor:function(t){var e=this,s="/api/v1/assets/favorite-assets/?asset=".concat(t);this.$axios.delete(s).then((function(){e.allFavorites=e.allFavorites.filter((function(e){return e["asset"]!==t})),e.$message.success(e.$t("UnFavoriteSucceed"))}))},toggleFavorite:function(t){var e=this.checkFavorite(t);e?this.disfavor(t):this.favor(t)},checkFavorite:function(t){var e=!1;return this.allFavorites.forEach((function(s){s["asset"]===t&&(e=!0)})),e},updateAssetCustomAttr:function(t,e,s,a){var n=this;if(s.toString()!==a.toString()){var o=e.prop;this.$axios.post("/api/v1/assets/my-asset/",Object(r["a"])({asset:t.id},o,a)).catch((function(t){var e,s;return n.$message.error((null===t||void 0===t||null===(e=t.response)||void 0===e||null===(s=e.request)||void 0===s?void 0:s.responseText)||n.$t("BadRequestErrorMsg")),Promise.reject(t)})).then((function(){n.$set(t,o,a),n.$message.success(n.$t("UpdateSuccessMsg"))}))}}}},v=f,d=(s("c371"),s("2877")),h=Object(d["a"])(v,a,n,!1,null,null,null);e["default"]=h.exports},c371:function(t,e,s){"use strict";s("ea3c")},ea3c:function(t,e,s){}}]);
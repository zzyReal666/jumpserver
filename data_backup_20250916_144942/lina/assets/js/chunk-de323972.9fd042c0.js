(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-de323972"],{"178b":function(t,e,a){"use strict";a("c99c")},"2dd5":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card"},[t.isTitle?a("div",{staticClass:"title-section"},[a("Title",{attrs:{config:t.config}})],1):t._e(),t._v(" "),a("div",{staticClass:"metrics-section"},[a("div",{ref:"chartRef",staticClass:"the-chart"})])])},i=[],o=(a("96cf"),a("3b8d")),n=(a("7f7f"),a("6d67"),a("75fc")),c=(a("759f"),a("313e")),r=a("a505"),u={components:{Title:r["a"]},props:{isTitle:{type:Boolean,default:!0}},data:function(){return{config:{title:this.$t("RiskyAccount"),tip:this.$t("RealTimeData")},counter:{total_long_time_no_login_accounts:".",total_new_found_accounts:".",total_groups_changed_accounts:".",total_sudoers_changed_accounts:".",total_authorized_keys_changed_accounts:".",total_account_deleted_accounts:".",total_password_expired_accounts:".",total_long_time_password_accounts:".",total_weak_password_accounts:".",total_leaked_password_accounts:".",total_repeated_password_accounts:"."},chart:null}},computed:{chartOption:function(){var t=[{description:"long_time_no_login",name:this.$t("NoLoginLongTime"),value:this.counter.total_long_time_no_login_accounts},{description:"new_found",name:this.$t("NewAccountsFound"),value:this.counter.total_new_found_accounts},{description:"groups_changed",name:this.$t("GroupsChanged"),value:this.counter.total_groups_changed_accounts},{description:"sudoers_changed",name:this.$t("SudoersChanged"),value:this.counter.total_sudoers_changed_accounts},{description:"authorized_keys_changed",name:this.$t("AuthorizedKeysChanged"),value:this.counter.total_authorized_keys_changed_accounts},{description:"account_deleted",name:this.$t("AccountDeleted"),value:this.counter.total_account_deleted_accounts},{description:"password_expired",name:this.$t("PasswordExpired"),value:this.counter.total_password_expired_accounts},{description:"long_time_password",name:this.$t("LongTimePassword"),value:this.counter.total_long_time_password_accounts},{description:"weak_password",name:this.$t("WeakPassword"),value:this.counter.total_weak_password_accounts},{description:"leaked_password",name:this.$t("LeakedPassword"),value:this.counter.total_leaked_password_accounts},{description:"repeated_password",name:this.$t("RepeatedPassword"),value:this.counter.total_repeated_password_accounts}],e=[];e=t.some((function(t){return t.value>0}))?t:t.slice(0,7);var a=Math.max.apply(Math,Object(n["a"])(e.map((function(t){return t.value})))),s=a>0?a:10;return{grid:{top:"5%",left:"0",right:"15%",bottom:"3%",containLabel:!0},xAxis:{type:"value",show:!0,min:0,max:s,position:"top",axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!0,lineStyle:{color:"#E5E6EB"}},axisLabel:{color:"#646A73",fontSize:12}},yAxis:{type:"category",data:e.map((function(t){return t.name})),axisLine:{show:!1},axisTick:{show:!1},axisLabel:{color:"#646A73",fontSize:12,margin:20,width:90,overflow:"truncate",lineHeight:12,fontWeight:400}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},series:[{type:"bar",data:e.map((function(t){return{name:t.name,value:t.value,description:t.description}})),barWidth:"60%",label:{show:!1,valueAnimation:!0,formatter:"{c}",fontSize:12,color:"#1F2329",distance:10},itemStyle:{color:"#1AB394",borderRadius:[0,4,4,0]}}]}}},watch:{counter:{handler:function(){this.updateChart()},deep:!0}},mounted:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getResourcesCount();case 2:this.counter=t.sent,this.initChart(),window.addEventListener("resize",this.resizeChart);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null),window.removeEventListener("resize",this.resizeChart)},methods:{getResourcesCount:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",this.$axios.get("/api/v1/accounts/pam-dashboard/",{params:{total_long_time_no_login_accounts:1,total_new_found_accounts:1,total_groups_changed_accounts:1,total_sudoers_changed_accounts:1,total_authorized_keys_changed_accounts:1,total_account_deleted_accounts:1,total_password_expired_accounts:1,total_long_time_password_accounts:1,total_weak_password_accounts:1,total_leaked_password_accounts:1,total_repeated_password_accounts:1}}));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),initChart:function(){var t=this;this.chart=c["init"](this.$refs.chartRef),this.chart.setOption(this.chartOption),this.$hasPerm("accounts.view_accountrisk")&&this.chart.on("click",(function(e){"series"===e.componentType&&t.$router.push({name:"AccountCheckList",query:{payload:e.data.description}})}))},updateChart:function(){this.chart&&this.chart.setOption(this.chartOption)},resizeChart:function(){this.chart&&this.chart.resize()}}},l=u,h=(a("178b"),a("2877")),d=Object(h["a"])(l,s,i,!1,null,"6c59f578",null);e["a"]=d.exports},4129:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("BaseReport",t._b({attrs:{title:t.title,nav:t.nav,name:t.name}},"BaseReport",t.$attrs,!1),[a("div",{staticClass:"charts-grid"},[a("div",{staticClass:"chart-container full-width"},[a("div",{staticClass:"chart-container-title"},[a("div",{staticClass:"chart-container-title-text"},[t._v(t._s(t.$t("Overview")))]),t._v(" "),a("SummaryCountCard",{attrs:{items:t.totalData}})],1)]),t._v(" "),a("div",{staticClass:"chart-container full-width"},[a("div",{staticClass:"chart-container-title"},[a("div",{staticClass:"chart-container-title-text"},[t._v(t._s(t.$t("RiskyAccount")))]),t._v(" "),a("RiskSummary",{staticClass:"risk-summary",attrs:{"is-title":!1}})],1)]),t._v(" "),a("SwitchDate",{staticClass:"switch-date",attrs:{name:t.name},on:{change:t.onChange}}),t._v(" "),a("div",{staticClass:"chart-container full-width"},[a("div",{staticClass:"chart-container-title"},[a("div",{staticClass:"chart-container-title-text"},[t._v(t._s(t.$t("TaskExecutionTrends")))]),t._v(" "),a("div",{staticClass:"chart"},[a("echarts",{attrs:{options:t.ExecutionMetricsOptions,autoresize:!0}})],1)])]),t._v(" "),a("div",{staticClass:"chart-container full-width"},[a("div",{staticClass:"chart-container-title"},[a("div",{staticClass:"chart-container-title-text"},[t._v(t._s(t.$t("AccountResult")))]),t._v(" "),a("AccountSummary",{staticClass:"account-summary",attrs:{days:t.days,"is-title":!1,"disable-box":!0}})],1)])],1)])],1)},i=[],o=(a("456d"),a("768b")),n=(a("ac6a"),a("ffc1"),a("6d67"),a("96cf"),a("3b8d")),c=(a("7f7f"),a("d619")),r=a("5f2d"),u=a("280e"),l=a("313e"),h=a("d492"),d=a("2dd5"),_={components:{RiskSummary:d["a"],AccountSummary:h["a"],SwitchDate:u["a"],SummaryCountCard:r["a"],BaseReport:c["a"]},props:{nav:{type:Boolean,default:!0}},data:function(){return{title:this.$t("AccountAutomationReport"),name:"AccountAutomationReport",description:"-",days:localStorage.getItem(this.name)||"7",automation_stats:{push:0,check:0,backup:0,collect:0,change_secret:0},execution_metrics:{dates_metrics_date:[],legend:[],dates_metrics_total:{},series:[]}}},computed:{totalData:function(){return[{title:this.$t("AccountPushList"),body:{count:this.automation_stats.push}},{title:this.$t("RiskDetection"),body:{count:this.automation_stats.check}},{title:this.$t("BaseAccountBackup"),body:{count:this.automation_stats.backup}},{title:this.$t("DiscoverAccounts"),body:{count:this.automation_stats.collect}},{title:this.$t("MenuChangeSecret"),body:{count:this.automation_stats.change_secret}}]},ExecutionMetricsOptions:function(){return{tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{left:"auto",icon:"rect",data:this.execution_metrics.legend,itemWidth:10,itemHeight:10},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,axisLine:{lineStyle:{color:"#8F959E"}},axisLabel:{textStyle:{color:"#8F959E"}},axisTick:{show:!1},data:this.execution_metrics.dates_metrics_date}],yAxis:[{type:"value",name:"",axisLine:{show:!1,lineStyle:{color:"#fff"}},axisLabel:{textStyle:{color:"#8F959E"}},axisTick:{show:!1},splitLine:{show:!0,lineStyle:{color:"#EFF0F1"}}}],animationDuration:500,series:this.execution_metrics.series}}},watch:{days:function(){this.getData()}},mounted:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getData();case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{onChange:function(t){this.days=t,localStorage.setItem("reportDays",t)},getData:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$axios.get("/api/v1/reports/reports/account-automation/?days=".concat(this.days));case 2:e=t.sent,this.$set(this.automation_stats,"push",e.automation_stats.push),this.$set(this.automation_stats,"check",e.automation_stats.check),this.$set(this.automation_stats,"backup",e.automation_stats.backup),this.$set(this.automation_stats,"collect",e.automation_stats.collect),this.$set(this.automation_stats,"change_secret",e.automation_stats.change_secret),this.$set(this.execution_metrics,"dates_metrics_date",e.execution_metrics.dates_metrics_date),a=Object.entries(e.execution_metrics.data).map((function(t){var e=Object(o["a"])(t,2),a=e[0],s=e[1];return{name:a,type:"line",emphasis:{focus:"series"},smooth:!0,data:s,areaStyle:{color:new l["graphic"].LinearGradient(0,0,0,1,[{offset:0,color:"rgba(0, 136, 212, 0.4)"},{offset:1,color:"rgba(0, 136, 212, 0.05)"}])},lineStyle:{width:2},showSymbol:!1}})),s=Object.keys(e.execution_metrics.data),this.$set(this.execution_metrics,"legend",s),this.$set(this.execution_metrics,"series",a);case 13:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},p=_,m=a("2877"),f=Object(m["a"])(p,s,i,!1,null,"49b75443",null);e["default"]=f.exports},c99c:function(t,e,a){}}]);
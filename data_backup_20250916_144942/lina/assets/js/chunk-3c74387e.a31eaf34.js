(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3c74387e","chunk-52829884","chunk-49d7dc86","chunk-1f751575"],{"0482":function(e,t,s){},"09ba":function(e,t,s){},"243c":function(e,t,s){"use strict";s("d3b7")},"273b":function(e,t,s){"use strict";s("0482")},"31bd":function(e,t,s){"use strict";s("5fdd")},"3cc2":function(e,t,s){},"4b97":function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("GenericDetailPage",e._g(e._b({attrs:{"active-menu":e.config.activeMenu,object:e.AssetPermission},on:{"update:activeMenu":function(t){return e.$set(e.config,"activeMenu",t)},"update:active-menu":function(t){return e.$set(e.config,"activeMenu",t)},"update:object":function(t){e.AssetPermission=t},"tab-click":e.handleTabClick}},"GenericDetailPage",e.config,!1),e.$listeners),[s("keep-alive",[s(e.config.activeMenu,{tag:"component",attrs:{object:e.AssetPermission}})],1)],1)},a=[],r=(s("7f7f"),s("cd4a")),i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("TwoCol",{scopedSlots:e._u([{key:"right",fn:function(){return[s("QuickActions",{attrs:{actions:e.quickActions,type:"primary"}})]},proxy:!0}])},[[s("AutoDetailCard",{attrs:{fields:e.detailFields,object:e.object,url:e.url}})]],2)},o=[],c=(s("a481"),s("6d67"),s("d92a"),s("e3bc")),u=s("2af9"),l=s("52cc"),d={name:"AssetPermissionDetail",components:{TwoCol:l["a"],AutoDetailCard:c["a"],QuickActions:u["o"]},props:{object:{type:Object,default:function(){return{}}}},data:function(){this.$createElement;return{quickActions:[{title:this.$t("Active"),type:"switch",attrs:{model:this.object.is_active,disabled:!this.$hasPerm("perms.change_assetpermission")},callbacks:{change:function(e){var t=this;this.$axios.patch("/api/v1/perms/asset-permissions/".concat(this.object.id,"/"),{is_active:e}).then((function(e){t.$message.success(t.$tc("UpdateSuccessMsg"))})).catch((function(e){t.$message.error(t.$tc("UpdateErrorMsg "+e))}))}.bind(this)}}],url:"/api/v1/perms/asset-permissions/".concat(this.object.id),detailFields:["id","name",{key:this.$t("Action"),value:this.object.actions,formatter:function(e,t){var s=this.$createElement,n=t.map((function(e){return e.label.replace(/ \([^)]*\)/,"")}));return s("div",[n.map((function(e){return s("el-tag",{attrs:{size:"mini"},style:{marginRight:"3px"},key:e},[e])}))])}},"date_start","date_expired","date_created","created_by","comment"]}},computed:{detailCardItems:function(){return[{key:this.$t("DateStart"),value:this.object.date_start},{key:this.$t("DateExpired"),value:this.object.date_expired},{key:this.$t("DateCreated"),value:this.object.date_created},{key:this.$t("CreatedBy"),value:this.object.created_by},{key:this.$t("Comment"),value:this.object.comment}]}}},f=d,p=s("2877"),m=Object(p["a"])(f,i,o,!1,null,null,null),h=m.exports,b=s("84cc"),g=s("94db"),v=s("b0b7"),A={components:{GenericDetailPage:r["d"],AssetPermissionDetail:h,AssetPermissionUser:b["a"],AssetPermissionAsset:g["a"],AssetPermissionAccount:v["a"],TabPage:r["l"]},data:function(){var e=this;return{AssetPermission:{name:"",users_amount:0,user_groups_amount:0,assets_amount:0,nodes_amount:0,system_users_amount:0,date_start:"",date_expired:""},config:{url:"/api/v1/perms/asset-permissions/",activeMenu:"AssetPermissionDetail",submenu:[{title:this.$t("Basic"),name:"AssetPermissionDetail"},{title:this.$t("UsersAndUserGroups"),name:"AssetPermissionUser",hidden:function(){return!e.$hasPerm("users.view_user")||!e.$hasPerm("perms.change_assetpermission")}},{title:this.$t("AssetAndNode"),name:"AssetPermissionAsset",hidden:function(){return!e.$hasPerm("assets.view_asset")||!e.$hasPerm("perms.change_assetpermission")}},{title:this.$t("PermAccount"),name:"AssetPermissionAccount",hidden:function(){return!e.$hasPerm("accounts.view_account")||!e.$hasPerm("perms.change_assetpermission")}}]}}},methods:{handleTabClick:function(e){"AssetPermissionDetail"!==e.name?this.$set(this.config,"hasRightSide",!1):this.$set(this.config,"hasRightSide",!0)}}},j=A,y=Object(p["a"])(j,n,a,!1,null,null,null);t["default"]=y.exports},"54ec":function(e,t,s){},"5ebc":function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-form",{staticClass:"account-content",nativeOn:{submit:function(e){e.preventDefault()}}},[s("el-form-item",[s("el-radio-group",{on:{input:e.handleRadioChanged},model:{value:e.realRadioSelected,callback:function(t){e.realRadioSelected=t},expression:"realRadioSelected"}},e._l(e.realChoices,(function(t){return s("el-radio",{key:t.label,attrs:{disabled:t.disabled,label:t.value}},[e._v("\n        "+e._s(t.label)+"\n        "),t.tip?s("el-tooltip",{attrs:{content:t.tip,"open-delay":500,placement:"top"}},[s("i",{staticClass:"fa fa-question-circle-o"})]):e._e()],1)})),1),e._v(" "),e.showSpecZone?s("div",{staticClass:"spec-accounts spec-zone"},[s("div",{staticClass:"group-title"},[e._v(e._s(e.$t("SpecAccount")))]),e._v(" "),s("TagInput",{attrs:{autocomplete:e.autocomplete,"tag-type":e.getTagType},on:{change:e.handleTagChange},model:{value:e.specAccountsInput,callback:function(t){e.specAccountsInput=t},expression:"specAccountsInput"}}),e._v(" "),e.showAddTemplate?s("span",[s("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.showTemplateDialog=!0}}},[e._v("\n          "+e._s(e.$t("TemplateAdd"))+"\n        ")]),e._v(" "),s("span",{staticClass:"help-block"},[e._v("\n          "+e._s(e.addTemplateHelpText)+"\n        ")])],1):e._e()],1):e._e(),e._v(" "),e.enableVirtualAccount?s("div",{staticClass:"spec-zone virtual-choices"},[s("el-checkbox",{on:{change:e.handleVirtualChecked},model:{value:e.virtualChecked,callback:function(t){e.virtualChecked=t},expression:"virtualChecked"}},[e._v("\n        "+e._s(e.virtualAccount.label)+"\n      ")]),e._v(" "),e.virtualChecked?s("el-select",{attrs:{multiple:!0,placeholder:e.$t("SelectVirtualAccount")},on:{change:e.handleVirtualChecked},model:{value:e.virtualSelected,callback:function(t){e.virtualSelected=t},expression:"virtualSelected"}},e._l(e.virtualAccounts,(function(t){return s("el-option",{key:t.label,attrs:{label:t.label,value:t.value}},[e._v("\n          "+e._s(t.label)+"\n          "),s("el-tooltip",{attrs:{content:t.tip,"open-delay":500,placement:"top"}},[s("i",{staticClass:"fa fa-question-circle-o"})])],1)})),1):e._e()],1):e._e()],1),e._v(" "),e.showTemplateDialog?s("Dialog",{attrs:{title:e.$tc("AccountTemplate"),visible:e.showTemplateDialog},on:{"update:visible":function(t){e.showTemplateDialog=t},cancel:e.handleAccountTemplateCancel,confirm:e.handleAccountTemplateConfirm}},[s("ListTable",e._b({ref:"templateTable"},"ListTable",e.accountTemplateTable,!1))],1):e._e()],1)},a=[],r=s("75fc"),i=(s("f559"),s("6762"),s("2fdb"),s("57e7"),s("7618")),o=(s("6d67"),s("d25f"),s("f823")),c=s("992f"),u=s("af7d"),l=s("9039"),d={components:{TagInput:o["k"],ListTable:u["a"],Dialog:l["a"]},props:{value:{type:[Array,String],default:function(){return[]}},assets:{type:[Array],default:function(){return[]}},nodes:{type:[Array],default:function(){return[]}},oid:{type:String,default:""},showAddTemplate:{type:Boolean,default:!0},enableVirtualAccount:{type:Boolean,default:!0},addTemplateHelpText:{type:String,default:function(){return this.$t("TemplateHelpText")}}},data:function(){var e=this,t=this,s="@VIRTUAL";return{ALL:c["b"],SPEC:c["j"],VIRTUAL:s,EXCLUDE:c["h"],showTemplateDialog:!1,realRadioSelected:this.ALL,realChoices:c["m"],virtualChecked:!1,virtualSelected:[],output:[],excludeAccountsInput:[],virtualAccounts:c["o"],virtualAccountsNames:[c["f"],c["i"],c["c"]],specAccountsInput:[],specAccountsTemplate:[],showSpecZone:!1,getTagType:function(e){return t.specAccountsTemplate.filter((function(t){return t.username===e})).length>0?"primary":"info"},showExcludeZone:!1,accountTemplateTable:c["l"],autocomplete:function(s,n){var a={username:s,assets:e.assets.slice(0,20),nodes:e.nodes.slice(0,20).map((function(e){return"object"===Object(i["a"])(e)?e.pk:e}))};e.$axios.post("/api/v1/accounts/accounts/username-suggestions/",a,{params:{oid:e.oid}}).then((function(e){e||(e=[]);var s=e.filter((function(e){return-1===t.value.indexOf(e)})).map((function(e){return{value:e,label:e}}));n(s)}))}}},computed:{virtualAccount:function(){return c["n"]}},watch:{realRadioSelected:{handler:function(e){this.showSpecZone=e===this.SPEC,this.showExcludeZone=e===this.EXCLUDE},sync:!0}},mounted:function(){this.initDefaultChoice()},methods:{getVirtualChoices:function(e){return this.virtualAccounts.filter((function(t){return e.includes(t.value)})).map((function(e){return e.value}))},getExcludeChoices:function(e){return e.filter((function(e){return e.startsWith("!")})).map((function(e){return e.substring(1)}))},getSpecValues:function(e){return e.filter((function(e){return!e.startsWith("@")&&!e.startsWith("!")}))},initDefaultChoice:function(){var e=this.value||[],t=this.getSpecValues(e),s=e.includes(this.ALL);s?this.realRadioSelected=this.ALL:t.length>0||e.includes(this.SPEC)?(this.realRadioSelected=this.SPEC,this.specAccountsInput=t):this.realRadioSelected=c["g"];var n=this.getVirtualChoices(this.value);n.length>0&&(this.virtualChecked=!0,this.virtualSelected=n)},handleAccountTemplateCancel:function(){this.showTemplateDialog=!1},handleAccountTemplateConfirm:function(){var e=this;this.specAccountsTemplate=this.$refs.templateTable.selectedRows;var t=this.specAccountsTemplate.map((function(e){return e.username}));this.specAccountsInput=this.specAccountsInput.filter((function(e){return!t.includes(e)})).concat(t),this.outputValue(),setTimeout((function(){e.showTemplateDialog=!1,e.outputValue()}),100)},handleVirtualChecked:function(e,t){this.outputValue()},handleRadioChanged:function(e){this.outputValue()},handleTagChange:function(){this.outputValue()},outputValue:function(){var e=[];if(this.realRadioSelected===this.ALL)e=[this.ALL];else if(this.realRadioSelected===this.SPEC&&this.showSpecZone){var t=this.specAccountsTemplate.map((function(e){return"%".concat(e.id)}));e=[this.realRadioSelected].concat(Object(r["a"])(this.specAccountsInput),Object(r["a"])(t))}else this.realRadioSelected===c["g"]&&(e=[]);this.virtualChecked&&(e=[].concat(Object(r["a"])(e),Object(r["a"])(this.virtualSelected))),this.$log.debug("choicesSelected",e),this.$emit("input",e),this.$emit("change",e)}}},f=d,p=(s("243c"),s("2877")),m=Object(p["a"])(f,n,a,!1,null,"202e51b6",null);t["a"]=m.exports},"5fdd":function(e,t,s){},7:function(e,t){},"84cc":function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("TwoCol",{scopedSlots:e._u([{key:"right",fn:function(){return[s("RelationCard",e._b({attrs:{type:"primary"}},"RelationCard",e.userRelationConfig,!1)),e._v(" "),s("RelationCard",e._b({staticStyle:{"margin-top":"15px"},attrs:{type:"info"}},"RelationCard",e.groupRelationConfig,!1))]},proxy:!0}])},[[s("ListTable",{ref:"ListTable",attrs:{"header-actions":e.headerActions,"table-config":e.tableConfig}})]],2)},a=[],r=(s("57e7"),s("20d6"),s("75fc")),i=(s("6d67"),s("7f7f"),s("d92a"),s("af7d")),o=s("9e38"),c=s("53f7"),u=s("52cc"),l={name:"AssetPermissionUser",components:{TwoCol:u["a"],ListTable:i["a"],RelationCard:o["a"]},props:{object:{type:Object,default:function(){return{}}}},data:function(){var e,t,s=this;return{tableConfig:{url:"",id:"user",columnsExclude:["user"],columnsExtra:["delete_action"],columnsShow:{min:["user_display","delete_action"]},columnsMeta:{user_display:{label:this.$t("User"),align:"center"},delete_action:{prop:"user",label:this.$t("Actions"),align:"center",width:150,objects:this.object.users,formatter:c["h"],onDelete:function(e,t,s,n){var a=this,r="/api/v1/perms/asset-permissions-users-relations/?assetpermission=".concat(this.object.id,"&user=").concat(s);this.$axios.delete(r).then((function(e){a.$message.success(a.$tc("DeleteSuccessMsg")),a.$store.commit("common/reload")})).catch((function(e){a.$message.error(a.$tc("DeleteErrorMsg")+" "+e)}))}.bind(this)},actions:{has:!1}},tableAttrs:{border:!1}},headerActions:{hasLeft:!1,hasSearch:!0,hasRefresh:!0,hasExport:!1,hasImport:!1},userRelationConfig:{icon:"fa-user",title:this.$t("AddUserToThisPermission"),objectsAjax:{url:"/api/v1/users/users/?fields_size=mini&order=name",transformOption:function(e){return{label:e.name+"("+e.username+")",value:e.id}}},showHasMore:!1,hasObjectsId:(null===(e=this.object.users)||void 0===e?void 0:e.map((function(e){return e.id})))||[],showHasObjects:!1,performAdd:function(e){var t="/api/v1/perms/asset-permissions-users-relations/",n=s.object.id,a=e.map((function(e){return{user:e.value,assetpermission:n}}));return s.$axios.post(t,a)},onAddSuccess:function(e,t){s.$log.debug("Select value",t.select2.value),t.iHasObjects=[].concat(Object(r["a"])(t.iHasObjects),Object(r["a"])(e)),t.$refs.select2.clearSelected(),s.$refs.ListTable.reloadTable()}},groupRelationConfig:{icon:"fa-group",title:this.$t("AddUserGroupToThisPermission"),objectsAjax:{url:"/api/v1/users/groups/"},hasObjectsId:(null===(t=this.object.user_groups)||void 0===t?void 0:t.map((function(e){return e.id})))||[],performAdd:function(e){var t="/api/v1/perms/asset-permissions-user-groups-relations/",n=s.object.id,a=e.map((function(e){return{assetpermission:n,usergroup:e.value}}));return s.$axios.post(t,a)},performDelete:function(e){var t=s.object.id,n=e.value,a="/api/v1/perms/asset-permissions-user-groups-relations/?assetpermission=".concat(t,"&usergroup=").concat(n);return s.$axios.delete(a)},onAddSuccess:function(e,t){t.iHasObjects=[].concat(Object(r["a"])(t.iHasObjects),Object(r["a"])(e)),t.$refs.select2.clearSelected(),s.$message.success(s.$tc("UpdateSuccessMsg")),s.$refs.ListTable.reloadTable()},onDeleteSuccess:function(e,t){var n=t.iHasObjects.findIndex((function(t){return t.value===e.value}));t.iHasObjects.splice(n,1);while(-1!==t.select2.disabledValues.indexOf(e.value)){var a=t.select2.disabledValues.indexOf(e.value);s.$log.debug("disabled values remove index: ",a),t.select2.disabledValues.splice(a,1)}s.$message.success(s.$tc("DeleteSuccessMsg")),s.$refs.ListTable.reloadTable()}}}},watch:{object:{handler:function(e){this.updateTableConfigUrl(e.id)},immediate:!0,deep:!0}},mounted:function(){this.updateTableConfigUrl(this.$route.params.id)},methods:{updateTableConfigUrl:function(e){e&&(this.tableConfig.url="/api/v1/perms/asset-permissions/".concat(e,"/users/all/"))}}},d=l,f=s("2877"),p=Object(f["a"])(d,n,a,!1,null,null,null);t["a"]=p.exports},8633:function(e,t,s){"use strict";s("09ba")},"94db":function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("TwoCol",{scopedSlots:e._u([{key:"right",fn:function(){return[s("AssetRelationCard",e._b({attrs:{type:"primary"}},"AssetRelationCard",e.assetRelationConfig,!1)),e._v(" "),s("RelationCard",e._b({staticStyle:{"margin-top":"15px"},attrs:{type:"info"}},"RelationCard",e.nodeRelationConfig,!1))]},proxy:!0}])},[[s("ListTable",{ref:"ListTable",attrs:{"header-actions":e.headerActions,"table-config":e.tableConfig}})]],2)},a=[],r=(s("20d6"),s("75fc")),i=(s("57e7"),s("6d67"),s("d92a"),s("af7d")),o=s("9e38"),c=s("53f7"),u=s("a82e"),l=s("52cc"),d={name:"AssetPermissionAsset",components:{TwoCol:l["a"],ListTable:i["a"],RelationCard:o["a"],AssetRelationCard:u["a"]},props:{object:{type:Object,default:function(){return{}}}},data:function(){var e,t,s=this,n=this.object.id,a=n?"/api/v1/perms/asset-permissions/".concat(n,"/assets/all/"):"";return{tableConfig:{url:a,id:"asset",columnsExclude:["asset"],columnsExtra:["delete_action"],columns:["asset_display","delete_action"],columnsShow:{min:["asset_display","delete_action"]},columnsMeta:{asset_display:{label:this.$t("Asset"),align:"center"},actions:{has:!1},delete_action:{prop:"asset",label:this.$t("Actions"),align:"center",width:150,objects:this.object.assets,formatter:c["h"],onDelete:function(e,t,s,n){var a=this,r="/api/v1/perms/asset-permissions-assets-relations/?assetpermission=".concat(this.object.id,"&asset=").concat(s);this.$axios.delete(r).then((function(e){a.$message.success(a.$tc("DeleteSuccessMsg")),a.$store.commit("common/reload")})).catch((function(e){a.$message.error(a.$tc("DeleteErrorMsg")+" "+e)}))}.bind(this)}},tableAttrs:{border:!1}},headerActions:{hasLeftActions:!1,hasExport:!1,hasImport:!1},assetRelationConfig:{icon:"fa-edit",title:this.$t("AddAssetToThisPermission"),hasObjectsId:(null===(e=this.object.assets)||void 0===e?void 0:e.map((function(e){return e.id})))||[],disabled:this.$store.getters.currentOrgIsRoot,canSelect:function(e,t){var n;return-1===((null===(n=s.object.assets)||void 0===n?void 0:n.map((function(e){return e.id})))||[]).indexOf(e.id)},performAdd:function(e,t){var n="/api/v1/perms/asset-permissions-assets-relations/",a=s.object.id,r=e.map((function(e){return{assetpermission:a,asset:e}}));return s.$axios.post(n,r)},onAddSuccess:function(e,t){s.$log.debug("AssetSelect value",t.assets),s.$message.success(s.$tc("UpdateSuccessMsg")),s.$store.commit("common/reload")}},nodeRelationConfig:{icon:"fa-edit",title:this.$t("AddNodeToThisPermission"),objectsAjax:{url:"/api/v1/assets/nodes/",transformOption:function(e){return{label:e.full_value,value:e.id}}},hasObjectsId:(null===(t=this.object.nodes)||void 0===t?void 0:t.map((function(e){return e.id})))||[],performAdd:function(e){var t="/api/v1/perms/asset-permissions-nodes-relations/",n=s.object.id,a=e.map((function(e){return{assetpermission:n,node:e.value}}));return s.$axios.post(t,a)},onAddSuccess:function(e,t){s.$log.debug("Select value",t.select2.value),t.iHasObjects=[].concat(Object(r["a"])(t.iHasObjects),Object(r["a"])(e)),t.$refs.select2.clearSelected(),s.$message.success(s.$tc("UpdateSuccessMsg")),s.$refs.ListTable.reloadTable()},performDelete:function(e){var t=e.value,n=s.object.id,a="/api/v1/perms/asset-permissions-nodes-relations/?assetpermission=".concat(n,"&node=").concat(t);return s.$axios.delete(a)},onDeleteSuccess:function(e,t){var n=t.iHasObjects.findIndex((function(t){return t.value===e.value}));t.iHasObjects.splice(n,1);while(-1!==t.select2.disabledValues.indexOf(e.value)){var a=t.select2.disabledValues.indexOf(e.value);s.$log.debug("disabled values remove index: ",a),t.select2.disabledValues.splice(a,1)}s.$message.success(s.$tc("DeleteSuccessMsg")),s.$refs.ListTable.reloadTable()}}}}},f=d,p=s("2877"),m=Object(p["a"])(f,n,a,!1,null,"03cbe86c",null);t["a"]=m.exports},"94df":function(e,t,s){"use strict";const n=["B","kB","MB","GB","TB","PB","EB","ZB","YB"],a=["B","kiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],r=["b","kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],i=["b","kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],o=(e,t,s)=>{let n=e;return"string"===typeof t||Array.isArray(t)?n=e.toLocaleString(t,s):!0!==t&&void 0===s||(n=e.toLocaleString(void 0,s)),n};e.exports=(e,t)=>{if(!Number.isFinite(e))throw new TypeError(`Expected a finite number, got ${typeof e}: ${e}`);t=Object.assign({bits:!1,binary:!1},t);const s=t.bits?t.binary?i:r:t.binary?a:n;if(t.signed&&0===e)return" 0 "+s[0];const c=e<0,u=c?"-":t.signed?"+":"";let l;if(c&&(e=-e),void 0!==t.minimumFractionDigits&&(l={minimumFractionDigits:t.minimumFractionDigits}),void 0!==t.maximumFractionDigits&&(l=Object.assign({maximumFractionDigits:t.maximumFractionDigits},l)),e<1){const n=o(e,t.locale,l);return u+n+" "+s[0]}const d=Math.min(Math.floor(t.binary?Math.log(e)/Math.log(1024):Math.log10(e)/3),s.length-1);e/=Math.pow(t.binary?1024:1e3,d),l||(e=e.toPrecision(3));const f=o(Number(e),t.locale,l),p=s[d];return u+f+" "+p}},"992f":function(e,t,s){"use strict";s.d(t,"k",(function(){return o})),s.d(t,"e",(function(){return c})),s.d(t,"d",(function(){return u})),s.d(t,"b",(function(){return l})),s.d(t,"j",(function(){return d})),s.d(t,"h",(function(){return f})),s.d(t,"i",(function(){return p})),s.d(t,"f",(function(){return m})),s.d(t,"c",(function(){return h})),s.d(t,"g",(function(){return b})),s.d(t,"a",(function(){return g})),s.d(t,"n",(function(){return v})),s.d(t,"m",(function(){return A})),s.d(t,"o",(function(){return j})),s.d(t,"l",(function(){return y}));var n=s("bd86"),a=(s("a481"),s("6d67"),s("0692")),r=s("b318"),i=s("62f3"),o=[{label:a["a"].t("Name"),value:"name"},{label:a["a"].t("Username"),value:"username"},{label:a["a"].t("UserGroups"),value:"user_group"},{label:a["a"].t("AssetName"),value:"asset_name"},{label:a["a"].t("AssetAddress"),value:"address"},{label:a["a"].t("Account"),value:"accounts"},{label:a["a"].t("Valid"),value:"is_valid",children:[{value:"1",label:a["a"].t("Yes")},{value:"0",label:a["a"].t("No")}]},{label:a["a"].t("Effective"),value:"is_effective",children:[{value:"1",label:a["a"].t("Yes")},{value:"0",label:a["a"].t("No")}]},{label:a["a"].t("FromTicket"),value:"from_ticket",children:[{value:"1",label:a["a"].t("Yes")},{value:"0",label:a["a"].t("No")}]}],c={name:{formatter:i["a"],minWidth:"120px",formatterArgs:{route:"AssetPermissionDetail",drawer:!0,routeQuery:{tab:"Basic"}}},action:{label:a["a"].t("Action"),formatter:function(e){return 6===e.actions.length?a["a"].t("All"):e.actions.map((function(e){return e.label.replace(/ \([^)]*\)/,"")})).join(",")}},is_expired:{formatterArgs:{showFalse:!1}},from_ticket:{width:"130px",formatterArgs:{showFalse:!1}},users_amount:{width:80,formatter:r["a"],formatterArgs:{async:!0,route:"AssetPermissionDetail",drawer:!0,routeQuery:{tab:"AssetPermissionUser"}}},user_groups_amount:{width:80,formatter:r["a"],formatterArgs:{async:!0,drawer:!0,route:"AssetPermissionDetail",routeQuery:{tab:"AssetPermissionUser"}}},assets_amount:{width:80,formatter:r["a"],formatterArgs:{async:!0,drawer:!0,route:"AssetPermissionDetail",routeQuery:{tab:"AssetPermissionAsset"}}},nodes_amount:{width:80,formatter:r["a"],formatterArgs:{async:!0,drawer:!0,route:"AssetPermissionDetail",routeQuery:{tab:"AssetPermissionAsset"}}},accounts:{width:80,formatter:r["a"],formatterArgs:{cellValueToRemove:["@SPEC"],drawer:!0,getItem:function(e){if("@SPEC"!==e)return g[e]||e},route:"AssetPermissionDetail",routeQuery:{tab:"AssetPermissionAccount"}}},actions:{formatterArgs:{updateRoute:"AssetPermissionUpdate",cloneRoute:"AssetPermissionCreate",performDelete:function(e){var t=e.row,s=(e.col,t.id),n="/api/v1/perms/asset-permissions/".concat(s,"/");return this.$axios.delete(n)}}}},u=[].concat(o,[{label:a["a"].t("NodeSearchStrategy"),value:"all",children:[{value:"0",label:a["a"].t("OnlySearchCurrentNodePerm")},{value:"1",label:a["a"].t("SearchAncestorNodePerm")}]}]),l="@ALL",d="@SPEC",f="@NOT",p="@USER",m="@INPUT",h="@ANON",b="@NONE",g=Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])({},l,a["a"].t("AllAccounts")),d,a["a"].t("SpecAccount")),f,a["a"].t("ExcludeAccount")),b,a["a"].t("None")),p,a["a"].t("SameAccount")),m,a["a"].t("ManualAccount")),h,a["a"].t("AnonymousAccount")),v={label:a["a"].t("VirtualAccounts"),value:"@VIRTUAL",tip:a["a"].t("VirtualAccountHelpMsg")},A=[{label:g[l],value:l,tip:a["a"].t("AllAccountTip")},{label:g[d],value:d,tip:a["a"].t("SpecAccountTip")},{label:g[b],value:b}],j=[{label:g[m],value:m,tip:a["a"].t("ManualAccountTip")},{label:g[p],value:p,tip:a["a"].t("SameAccountTip")},{label:g[h],value:h,tip:a["a"].t("AnonymousAccountTip")}],y={tableConfig:{url:"/api/v1/accounts/account-templates/",columns:["name","username","has_secret","comment","date_created","date_updated"],columnsMeta:{name:{formatterArgs:{openInNewPage:!0,getRoute:function(e){var t=e.row;e.col,e.cellValue;return{name:"AccountTemplateDetail",params:{id:t.id}}}}},has_secret:{formatterArgs:{showFalse:!1}},actions:{has:!1}}},headerActions:{hasLeftActions:!1,hasImport:!1,hasExport:!1}}},b0b7:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("TwoCol",{scopedSlots:e._u([{key:"right",fn:function(){return[s("IBox",{attrs:{title:e.$tc("Account"),type:"primary"}},[s("AccountFormatter",{staticClass:"checkbox-accounts",attrs:{assets:e.assetIds,nodes:e.nodeIds,value:e.object["accounts"]},on:{change:e.updateAccount}})],1)]},proxy:!0}])},[[s("AccountListTable",{ref:"ListTable",attrs:{"columns-default":e.columns,"has-clone":!1,"has-column-actions":!1,"has-delete-action":!1,"has-export":!1,"has-import":!1,"has-left-actions":!1,"show-quick-filters":!1,url:e.url}})]],2)},a=[],r=(s("96cf"),s("3b8d")),i=(s("6d67"),s("2af9")),o=s("5ebc"),c=s("52cc"),u={name:"AssetPermissionAccount",components:{TwoCol:c["a"],IBox:i["k"],AccountFormatter:o["a"],AccountListTable:i["a"]},props:{object:{type:Object,default:function(){return{}}}},data:function(){var e=this.object.id,t=e?"/api/v1/perms/asset-permissions/".concat(e,"/accounts/"):"";return{url:t,relation:{disabled:!1,username:""},columns:["name","username","secret","asset","connect"]}},computed:{assetIds:function(){return this.object.assets.map((function(e){return e.id}))},nodeIds:function(){return this.object.nodes.map((function(e){return e.id}))}},methods:{updateAccount:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var s,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:s="/api/v1/perms/asset-permissions/".concat(this.object.id,"/"),this.$axios.patch(s,{accounts:t}).then((function(){n.object.accounts=t,n.$refs.ListTable.refresh()}));case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}},l=u,d=(s("b773"),s("2877")),f=Object(d["a"])(l,n,a,!1,null,"50ccfc67",null);t["a"]=f.exports},b708:function(e,t,s){},b773:function(e,t,s){"use strict";s("54ec")},bd11:function(e,t){e.exports=g,e.exports.match=o,e.exports.regexpToFunction=c,e.exports.parse=a,e.exports.compile=i,e.exports.tokensToFunction=u,e.exports.tokensToRegExp=b;var s="/",n=new RegExp(["(\\\\.)","(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?"].join("|"),"g");function a(e,t){var a,i=[],o=0,c=0,u="",l=t&&t.delimiter||s,f=t&&t.whitelist||void 0,p=!1;while(null!==(a=n.exec(e))){var m=a[0],h=a[1],b=a.index;if(u+=e.slice(c,b),c=b+m.length,h)u+=h[1],p=!0;else{var g="",v=a[2],A=a[3],j=a[4],y=a[5];if(!p&&u.length){var _=u.length-1,$=u[_],w=!f||f.indexOf($)>-1;w&&(g=$,u=u.slice(0,_))}u&&(i.push(u),u="",p=!1);var x="+"===y||"*"===y,O="?"===y||"*"===y,C=A||j,T=g||l,S=g||("string"===typeof i[i.length-1]?i[i.length-1]:"");i.push({name:v||o++,prefix:g,delimiter:T,optional:O,repeat:x,pattern:C?d(C):r(T,l,S)})}}return(u||c<e.length)&&i.push(u+e.substr(c)),i}function r(e,t,s){var n="[^"+l(e===t?e:e+t)+"]";return!s||s.indexOf(e)>-1||s.indexOf(t)>-1?n+"+?":l(s)+"|(?:(?!"+l(s)+")"+n+")+?"}function i(e,t){return u(a(e,t),t)}function o(e,t){var s=[],n=g(e,s,t);return c(n,s)}function c(e,t){return function(s,n){var a=e.exec(s);if(!a)return!1;for(var r=a[0],i=a.index,o={},c=n&&n.decode||decodeURIComponent,u=1;u<a.length;u++)if(void 0!==a[u]){var l=t[u-1];l.repeat?o[l.name]=a[u].split(l.delimiter).map((function(e){return c(e,l)})):o[l.name]=c(a[u],l)}return{path:r,index:i,params:o}}}function u(e,t){for(var s=new Array(e.length),n=0;n<e.length;n++)"object"===typeof e[n]&&(s[n]=new RegExp("^(?:"+e[n].pattern+")$",f(t)));return function(t,n){for(var a="",r=n&&n.encode||encodeURIComponent,i=!n||!1!==n.validate,o=0;o<e.length;o++){var c=e[o];if("string"!==typeof c){var u,l=t?t[c.name]:void 0;if(Array.isArray(l)){if(!c.repeat)throw new TypeError('Expected "'+c.name+'" to not repeat, but got array');if(0===l.length){if(c.optional)continue;throw new TypeError('Expected "'+c.name+'" to not be empty')}for(var d=0;d<l.length;d++){if(u=r(l[d],c),i&&!s[o].test(u))throw new TypeError('Expected all "'+c.name+'" to match "'+c.pattern+'"');a+=(0===d?c.prefix:c.delimiter)+u}}else if("string"!==typeof l&&"number"!==typeof l&&"boolean"!==typeof l){if(!c.optional)throw new TypeError('Expected "'+c.name+'" to be '+(c.repeat?"an array":"a string"))}else{if(u=r(String(l),c),i&&!s[o].test(u))throw new TypeError('Expected "'+c.name+'" to match "'+c.pattern+'", but got "'+u+'"');a+=c.prefix+u}}else a+=c}return a}}function l(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function d(e){return e.replace(/([=!:$/()])/g,"\\$1")}function f(e){return e&&e.sensitive?"":"i"}function p(e,t){if(!t)return e;var s=e.source.match(/\((?!\?)/g);if(s)for(var n=0;n<s.length;n++)t.push({name:n,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return e}function m(e,t,s){for(var n=[],a=0;a<e.length;a++)n.push(g(e[a],t,s).source);return new RegExp("(?:"+n.join("|")+")",f(s))}function h(e,t,s){return b(a(e,s),t,s)}function b(e,t,n){n=n||{};for(var a=n.strict,r=!1!==n.start,i=!1!==n.end,o=n.delimiter||s,c=[].concat(n.endsWith||[]).map(l).concat("$").join("|"),u=r?"^":"",d=0;d<e.length;d++){var p=e[d];if("string"===typeof p)u+=l(p);else{var m=p.repeat?"(?:"+p.pattern+")(?:"+l(p.delimiter)+"(?:"+p.pattern+"))*":p.pattern;t&&t.push(p),p.optional?p.prefix?u+="(?:"+l(p.prefix)+"("+m+"))?":u+="("+m+")?":u+=l(p.prefix)+"("+m+")"}}if(i)a||(u+="(?:"+l(o)+")?"),u+="$"===c?"$":"(?="+c+")";else{var h=e[e.length-1],b="string"===typeof h?h[h.length-1]===o:void 0===h;a||(u+="(?:"+l(o)+"(?="+c+"))?"),b||(u+="(?="+l(o)+"|"+c+")")}return new RegExp(u,f(n))}function g(e,t,s){return e instanceof RegExp?p(e,t):Array.isArray(e)?m(e,t,s):h(e,t,s)}},c0eb:function(e,t,s){"use strict";var n=s("c5ec"),a=s.n(n);window.$=a.a,window.jQuery=a.a,t["a"]=a.a},d106:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ListTable",{attrs:{"detail-drawer":e.detailDrawer,"header-actions":e.headerActions,"table-config":e.tableConfig}})},a=[],r=(s("1c01"),s("58b2"),s("8e6e"),s("f3e2"),s("d25f"),s("ac6a"),s("456d"),s("c5f6"),s("bd86")),i=s("75fc"),o=s("94df"),c=s.n(o),u=s("2af9"),l=s("3f95"),d=s("53f7");function f(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function p(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?f(Object(s),!0).forEach((function(t){Object(r["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):f(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var m={name:"BaseList",components:{ListTable:u["j"]},props:{url:{type:String,default:function(){return"/api/v1/terminal/sessions/"}},extraActions:{type:Array,default:function(){return[]}},columnsShow:{type:Object,default:function(){return{min:["id","actions"],default:["id","user","asset","account","protocol","date_start","actions"]}}},columnsMeta:{type:Object,default:function(){}},columnsExclude:{type:Array,default:function(){return[]}}},data:function(){return{detailDrawer:function(){return s.e("chunk-58e2a36e").then(s.bind(null,"b662"))},tableConfig:{url:this.url,columnsExclude:["terminal"].concat(Object(i["a"])(this.columnsExclude)),columnsShow:this.columnsShow,columnsMeta:p({id:{prop:"id",label:this.$t("Number"),width:"80px",align:"center",formatter:d["i"],formatterArgs:{drawer:!0,can:this.$hasPerm("assets.view_asset"),getTitle:function(e){e.row,e.col,e.cellValue;var t=e.index;return t+1},getDrawerTitle:function(e){var t=e.row;return t.id},getRoute:function(e){var t=e.row;return{name:"SessionDetail",params:{id:t.id}}}}},user:{formatter:d["i"],formatterArgs:{drawer:!0,getTitle:function(e){var t=e.row;return t.user},getRoute:function(e){var t=e.row;return{name:"UserDetail",params:{id:t.user_id}}}}},can_join:{formatterArgs:{showFalse:!1}},can_replay:{formatterArgs:{showFalse:!1}},can_terminate:{formatterArgs:{showFalse:!1}},has_command:{formatterArgs:{showFalse:!1}},is_finished:{formatterArgs:{showFalse:!1}},has_replay:{formatterArgs:{showFalse:!1}},asset:{label:this.$t("Target"),formatter:d["i"],formatterArgs:{drawer:!0,can:this.$hasPerm("assets.view_asset"),getTitle:function(e){var t=e.row;return t.asset},getRoute:function(e){var t=e.row;return{name:"AssetDetail",params:{id:t.asset_id},query:{tab:"Basic"}}}}},protocol:{sortable:!1,formatter:null},duration:{label:this.$t("Duration"),formatter:function(e){return Object(l["h"])(e.date_start,e.date_end)}},is_locked:{label:this.$t("IsLocked"),formatter:d["e"],formatterArgs:{showFalse:!0}},replay_size:{width:"120px",formatter:function(e){return c()(Number(e.replay_size))}},actions:{prop:"actions",label:this.$t("Actions"),width:this.dynamicActionWidth,formatter:d["c"],formatterArgs:{hasEdit:!1,hasClone:!1,hasDelete:!1,hasUpdate:!1,extraActions:this.extraActions}}},this.columnsMeta)},headerActions:{hasLeftActions:!1,hasImport:!1,hasDatePicker:!0,searchConfig:{getUrlQuery:!1,exclude:["is_finished"]}}}},computed:{dynamicActionWidth:function(){return"pt-br"===this.$i18n.locale?"160px":"130px"}}},h=m,b=(s("8633"),s("2877")),g=Object(b["a"])(h,n,a,!1,null,"0495f38f",null);t["a"]=g.exports},d3b7:function(e,t,s){},e323:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"content"},[e.hasButton?s("el-button",{staticClass:"proto-setting",attrs:{disabled:!e.canSetting,icon:e.icon,size:"small",type:"primary"},on:{click:e.onSetting}}):e._e(),e._v(" "),s("Dialog",{attrs:{"show-cancel":!1,"show-confirm":!1,title:e.title,visible:e.isVisible,width:"60%"},on:{"update:visible":function(t){e.isVisible=t},close:e.onDialogClose}},[s("AutoDataForm",e._g(e._b({ref:"autoDataForm",staticClass:"data-form",attrs:{form:e.form},on:{submit:e.onSubmit}},"AutoDataForm",e.config,!1),e.$listeners))],1)],1)},a=[],r=(s("1c01"),s("58b2"),s("8e6e"),s("f3e2"),s("d25f"),s("bd86")),i=s("768b"),o=(s("ffc1"),s("6762"),s("2fdb"),s("ac6a"),s("456d"),s("96cf"),s("3b8d")),c=s("9039"),u=s("c75f"),l=s("f823");function d(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function f(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?d(Object(s),!0).forEach((function(t){Object(r["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):d(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var p={components:{Dialog:c["a"],AutoDataForm:u["a"]},props:{value:{type:[String,Object],default:function(){return{}}},title:{type:String,default:function(){return this.$t("PushParams")}},btnText:{type:String,default:function(){return""}},icon:{type:String,default:"el-icon-setting"},url:{type:String,default:"/api/v1/assets/platform-automation-methods/"},method:{type:String,default:""},pushAccountParams:{type:Object,default:function(){return{}}},visible:{type:Boolean,default:!1},hasButton:{type:Boolean,default:!0}},data:function(){return{isVisible:this.visible,canSetting:!0,form:this.value,remoteMeta:{},config:{url:this.url,hasSaveContinue:!1,hasButtons:!0,hasReset:!1,fields:[],method:"get"},preFieldsMeta:{change_secret_by_ssh:{commands:{helpTextAsTip:!1}}}}},watch:{visible:function(e){this.isVisible=e},method:function(e,t){e!==t&&this.getUrlMeta()}},mounted:function(){this.getUrlMeta()},methods:{getUrlMeta:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("common/getUrlMeta",{url:this.url});case 2:t=e.sent,this.remoteMeta=t.actions[this.config.method.toUpperCase()]||{},this.onCanSetting()&&this.setFormConfig();case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onCanSetting:function(){var e=Object.keys(this.remoteMeta);return this.canSetting=e.includes(this.method)&&this.$hasPerm("assets.change_platform"),this.$emit("canSetting",this.canSetting),this.canSetting},setFormConfig:function(){var e=[],t={},s=this.method,n=this.remoteMeta[s];e=[[n.label,[s]]],t[s]={fields:[],fieldsMeta:{}};var a=this.pushAccountParams[s];if(Object.keys((null===n||void 0===n?void 0:n.children)||{}).length>0)for(var r=0,o=Object.entries(n.children);r<o.length;r++){var c=Object(i["a"])(o[r],2),u=c[0],d=c[1],p="el-input",m={};switch(null===d||void 0===d?void 0:d.type){case"list":p=l["b"];break;case"boolean":p=l["j"];break;case"text":m["text"]="textarea";break}a&&(d.default=a[u]||d.default);var h=f(f({},d),{},{component:p,el:m});t[s].fields.push(u),t[s].fieldsMeta[u]=h}var b=this.preFieldsMeta[s];if(b)for(var g=0,v=Object.entries(b);g<v.length;g++)for(var A=Object(i["a"])(v[g],2),j=A[0],y=A[1],_=0,$=Object.entries(y);_<$.length;_++){var w=Object(i["a"])($[_],2),x=w[0],O=w[1];t[s]["fieldsMeta"][j][x]=O}this.config.fields=e,this.config.fieldsMeta=t},onSetting:function(){this.isVisible=!0},onSubmit:function(e){this.$emit("input",e),this.isVisible=!1,this.$emit("update:visible",this.isVisible)},onDialogClose:function(){this.$emit("update:visible",this.isVisible)}}},m=p,h=(s("273b"),s("2877")),b=Object(h["a"])(m,n,a,!1,null,"2772642f",null);t["a"]=b.exports},ec7a:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ListTable",{ref:"listTable",attrs:{"create-drawer":e.createDrawer,"detail-drawer":e.detailDrawer,"header-actions":e.headerActions,resource:e.$t("UserLoginACL"),"table-config":e.tableConfig}})},a=[],r=s("2af9"),i={components:{ListTable:r["j"]},props:{url:{type:String,default:"/api/v1/acls/login-acls/"}},data:function(){return{createDrawer:function(){return s.e("chunk-28499bcd").then(s.bind(null,"e773"))},detailDrawer:function(){return Promise.all([s.e("chunk-commons"),s.e("chunk-2d207e87")]).then(s.bind(null,"a310"))},tableConfig:{url:this.url,columnsExclude:["rules","users"],columnsShow:{min:["name","actions"],default:["name","priority","is_active","action","actions"]},columnsMeta:{name:{formatterArgs:{route:"UserLoginACLDetail"}},reviewers_amount:{label:this.$t("ApproverNumbers")},actions:{formatterArgs:{hasClone:!1,updateRoute:function(e){var t=e.row;return{name:"UserLoginACLUpdate",params:{id:t.id}}}}}}},headerActions:{hasRefresh:!0,hasExport:!1,hasImport:!1,hasMoreActions:!1,createRoute:"UserLoginACLCreate"}}},activated:function(){var e=this;setTimeout((function(){e.$refs.listTable.reloadTable()}),300)}},o=i,c=s("2877"),u=Object(c["a"])(o,n,a,!1,null,null,null);t["a"]=u.exports},eea5:function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("GenericDetailPage",e._g(e._b({attrs:{"active-menu":e.config.activeMenu,object:e.user},on:{"update:activeMenu":function(t){return e.$set(e.config,"activeMenu",t)},"update:active-menu":function(t){return e.$set(e.config,"activeMenu",t)},"update:object":function(t){e.user=t}}},"GenericDetailPage",e.config,!1),e.$listeners),[s("keep-alive",[s(e.config.activeMenu,{tag:"component",attrs:{object:e.user}})],1)],1)},a=[],r=(s("1c01"),s("58b2"),s("8e6e"),s("f3e2"),s("d25f"),s("ac6a"),s("456d"),s("bd86")),i=s("2f62"),o=s("cd4a"),c=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("TwoCol",{scopedSlots:e._u([{key:"right",fn:function(){return[s("QuickActions",{attrs:{actions:e.quickActions,type:"primary"}}),e._v(" "),s("RelationCard",e._b({attrs:{type:"info"}},"RelationCard",e.relationConfig,!1))]},proxy:!0}])},[[s("AutoDetailCard",{attrs:{fields:e.detailFields,formatters:e.detailFormatters,object:e.object,url:e.url}})]],2)},u=[],l=s("768b"),d=(s("ffc1"),s("6d67"),s("96cf"),s("3b8d")),f=s("2af9"),p=s("9e38"),m=s("e3bc"),h=s("52cc"),b={name:"UserInfo",components:{TwoCol:h["a"],RelationCard:p["a"],QuickActions:f["o"],AutoDetailCard:m["a"]},props:{object:{type:Object,default:function(){return{}}}},data:function(){var e=this,t=this.$createElement,s=this;return{quickActions:[{title:this.$t("Active"),type:"switch",attrs:{model:this.object.is_active,disabled:!s.$hasPerm("users.change_user")},callbacks:{change:function(e,t){var n="/api/v1/users/users/".concat(s.object.id,"/"),a={is_active:e};s.$axios.patch(n,a).catch((function(){t.attrs.model=!e})).then((function(e){s.$message.success(s.$t("UpdateSuccessMsg"))})).catch((function(e){s.$message.error(s.$t("UpdateErrorMsg "+e))}))}}},{title:this.$t("ResetPassword"),attrs:{type:"primary",disabled:"local"!==this.object.source.value||!s.$hasPerm("users.change_user"),label:this.$t("Send")},callbacks:{click:function(){var e=s.$t("ResetPasswordWarningMsg"),t=s.$t("Info"),n="/api/v1/users/users/".concat(s.object.id,"/password/reset/"),a=s.$t("ResetPasswordSuccessMsg");s.$confirm(e,t,{type:"warning",confirmButtonClass:"el-button--warning",showCancelButton:!0,beforeClose:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(t,r,i){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("confirm"===t){e.next=2;break}return e.abrupt("return",i());case 2:return r.confirmButtonLoading=!0,e.prev=3,e.next=6,s.$axios.patch(n,{});case 6:i(),s.$message.success(a);case 8:return e.prev=8,r.confirmButtonLoading=!1,e.finish(8);case 11:case"end":return e.stop()}}),e,null,[[3,,8,11]])})));function t(t,s,n){return e.apply(this,arguments)}return t}()})}}},{title:this.$t("ResetSSHKey"),attrs:{type:"primary",disabled:!this.$store.state.users.profile.can_public_key_auth||!s.$hasPerm("users.change_user"),label:this.$t("Send")},callbacks:{click:function(){var e=s.$t("ResetSSHKeyWarningMsg"),t=s.$t("Info"),n="/api/v1/users/users/".concat(s.object.id,"/pubkey/reset/"),a=s.$t("ResetSSHKeySuccessMsg");s.$confirm(e,t,{type:"warning",confirmButtonClass:"el-button--warning",showCancelButton:!0,beforeClose:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(t,r,i){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("confirm"===t){e.next=2;break}return e.abrupt("return",i());case 2:return r.confirmButtonLoading=!0,e.prev=3,e.next=6,s.$axios.patch(n,{});case 6:i(),s.$message.success(a);case 8:return e.prev=8,r.confirmButtonLoading=!1,e.finish(8);case 11:case"end":return e.stop()}}),e,null,[[3,,8,11]])})));function t(t,s,n){return e.apply(this,arguments)}return t}()})}}},{title:this.$t("ResetMFA"),attrs:{type:"primary",disabled:!s.$hasPerm("users.change_user"),label:this.$t("Reset")},callbacks:{click:function(){var e=s.$t("ResetMFAWarningMsg"),t=s.$t("Info"),n="/api/v1/users/users/".concat(s.object.id,"/mfa/reset/"),a=s.$t("ResetMFAdSuccessMsg");s.$confirm(e,t,{type:"warning",confirmButtonClass:"el-button--warning",showCancelButton:!0,beforeClose:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(t,r,i){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("confirm"===t){e.next=2;break}return e.abrupt("return",i());case 2:return r.confirmButtonLoading=!0,e.prev=3,e.next=6,s.$axios.get(n);case 6:i(),s.$message.success(a);case 8:return e.prev=8,r.confirmButtonLoading=!1,e.finish(8);case 11:case"end":return e.stop()}}),e,null,[[3,,8,11]])})));function t(t,s,n){return e.apply(this,arguments)}return t}()})}}},{title:this.$t("UnblockUser"),attrs:{type:"primary",label:this.$t("Unblock"),disabled:!this.object.login_blocked||!s.$hasPerm("users.change_user")},callbacks:{click:function(e,t){var n="/api/v1/users/users/".concat(s.object.id,"/unblock/"),a=s.$t("UnblockSuccessMsg");s.$axios.patch(n).then((function(){t.attrs.disabled=!t.attrs.disabled,s.$message.success(a)}))}}}],url:"/api/v1/users/users/".concat(this.object.id),detailFormatters:{phone:function(){var e=s.object.phone;return t("div",[null===e||void 0===e?void 0:e.code," ",null===e||void 0===e?void 0:e.phone])},system_roles:function(){var e=s.object.system_roles||[],n=e.map((function(e){return t("el-tag",{attrs:{size:"mini"}},[e.display_name])}));return t("div",[n])},org_roles:function(){var e=s.object.org_roles||[],n=e.map((function(e){return t("el-tag",{attrs:{size:"mini"}},[e.display_name])}));return t("div",[n])}},detailFields:[{key:"",formatter:function(){return t("img",{attrs:{src:e.object.avatar_url,alt:"",height:"50"}})}},"id","name","username","email","phone","system_roles","org_roles",{key:this.$t("OrgsAndRoles"),has:this.$store.getters.currentOrgIsRoot,formatter:function(s,n){if(!e.$store.getters.currentOrgIsRoot)return"";var a=[],r=e.object.orgs_roles,i=50;return Object.entries(r).forEach((function(e){var s=Object(l["a"])(e,2),n=s[0],r=s[1],o=n;n.length>=i&&(o=n.substring(0,i-3)+"...");var c=o+": "+r.join(", ");a.push([c,t("br")])})),t("div",[a])}},"wecom_id","dingtalk_id","feishu_id","mfa_level","source","labels","created_by","date_joined","date_expired","date_password_last_updated","last_login","comment"],relationConfig:{icon:"fa-user",title:this.$t("UserGroups"),objectsAjax:{url:"/api/v1/users/groups/?fields_size=mini&order=name"},hasObjectsId:this.object.groups,performDelete:function(t){var s=t.value,n=e.object.id,a="/api/v1/users/users-groups-relations/?user=".concat(n,"&usergroup=").concat(s);return e.$axios.delete(a)},performAdd:function(t){var s="/api/v1/users/users-groups-relations/",n=e.object.id,a=t.map((function(e){return{usergroup:e.value,user:n}}));return e.$axios.post(s,a)}}}},computed:{},watch:{group:function(e,t){this.$log.debug("Group has changed"),this.relationConfig.hasObjectsId=e.users}},methods:{}},g=b,v=(s("31bd"),s("2877")),A=Object(v["a"])(g,c,u,!1,null,"50ba0d82",null),j=A.exports,y=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("TwoCol",[s("BaseList",{attrs:{"columns-show":e.columnsShow,url:e.url}})],1)},_=[],$=s("d106"),w={name:"UserSession",components:{TwoCol:h["a"],BaseList:$["a"]},props:{object:{type:Object,required:!0}},data:function(){return{url:"/api/v1/terminal/sessions/?user_id=".concat(this.object.id,"&order=is_finished,-date_end"),columnsShow:{min:["id","asset","account"],default:["id","asset","account","protocol","date_start","duration"]}}}},x=w,O=Object(v["a"])(x,y,_,!1,null,null,null),C=O.exports,T=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("TwoCol",[s("UserLoginACLTable",{attrs:{url:e.url}})],1)},S=[],P=s("ec7a"),k={name:"UserLoginACL",components:{TwoCol:h["a"],UserLoginACLTable:P["a"]},props:{object:{type:Object,required:!0}},data:function(){return{url:"/api/v1/acls/login-acls/?users="+this.object.id}}},D=k,R=Object(v["a"])(D,T,S,!1,null,"1e132fcf",null),E=R.exports,L=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("GrantedAssets",e._b({},"GrantedAssets",e.$data,!1))},U=[],M=s("7e09"),I={name:"UserGrantedAssets",components:{GrantedAssets:M["a"]},props:{object:{type:Object,required:!0}},data:function(){return{treeUrl:"/api/v1/perms/users/".concat(this.object.id,"/nodes/children/tree/"),tableUrl:"/api/v1/perms/users/".concat(this.object.id,"/assets/?all=1"),actions:{has:!1},nameDisabled:!1}}},B=I,F=Object(v["a"])(B,L,U,!1,null,null,null),V=F.exports,N=s("84cc"),G=s("94db"),H=s("4b97"),q=s("b0b7"),Q=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("TwoCol",[s("DrawerListTable",{attrs:{"create-drawer":e.createDrawer,"detail-drawer":e.detailDrawer,"header-actions":e.headerActions,"table-config":e.tableConfig,resource:e.$t("AssetPermissionRules")}})],1)},z=[],W=s("992f"),Z={name:"UserAssetPermission",components:{TwoCol:h["a"],DrawerListTable:f["j"]},props:{object:{type:Object,required:!0}},data:function(){return{createDrawer:function(){return s.e("chunk-22096c5e").then(s.bind(null,"2792"))},detailDrawer:function(){return Promise.resolve().then(s.bind(null,"4b97"))},tableConfig:{url:"/api/v1/perms/asset-permissions/?user_id=".concat(this.object.id),hasTree:!0,columnsExtra:["action"],columnsShow:{min:["name","actions"],default:["name","users_amount","user_groups_amount","assets_amount","nodes_amount","accounts","actions"]},columnsMeta:W["e"]},headerActions:{hasLeftActions:!1,hasExport:!1,hasImport:!1,searchConfig:{url:"",options:W["k"]}}}}},Y=Z,K=Object(v["a"])(Y,Q,z,!1,null,null,null),J=K.exports;function X(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function ee(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?X(Object(s),!0).forEach((function(t){Object(r["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):X(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var te={components:{UserInfo:j,UserSession:C,UserLoginACL:E,GenericDetailPage:o["d"],UserGrantedAssets:V,AssetPermissionUser:N["a"],AssetPermissionAsset:G["a"],AssetPermissionDetail:H["default"],AssetPermissionAccount:q["a"],UserAssetPermissionRules:J},data:function(){var e=this,t=this;return{user:{name:"",username:"",email:"",comment:""},config:{url:"/api/v1/users/users",activeMenu:"UserInfo",actions:{canUpdate:function(){return e.$hasPerm("users.change_user")&&!(!e.currentUserIsSuperAdmin&&e.user["is_superuser"])}},submenu:[{title:this.$t("Basic"),name:"UserInfo"},{title:this.$t("GrantedAssets"),name:"UserGrantedAssets",hidden:function(){return!t.$hasPerm("perms.view_userassets")}},{title:this.$t("AssetPermissionRules"),name:"UserAssetPermissionRules",hidden:function(){return!t.$hasPerm("perms.view_assetpermission")}},{title:this.$t("UserACLss"),name:"UserLoginACL",hidden:function(){return!t.$hasPerm("acls.view_loginacl")}},{title:this.$t("UserSession"),name:"UserSession",hidden:function(){return!t.$hasPerm("terminal.view_session")}}]}}},computed:ee({},Object(i["b"])(["currentUserIsSuperAdmin"])),methods:{handleTabClick:function(e){this.$log.debug("Current nav is: ",this.config.activeMenu)}}},se=te,ne=Object(v["a"])(se,n,a,!1,null,null,null);t["default"]=ne.exports}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-commons"],{"0100":function(e,t,n){},"0107":function(e,t,n){"use strict";n("af72")},"0906a":function(e,t,n){},"09b3":function(e,t,n){},"0cbf":function(e,t,n){},"0e3d":function(e,t,n){"use strict";n("8d34")},1307:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"asset-select-formatter"},[n("Select2",e._g(e._b({ref:"select2",on:{input:e.onInputChange,focus:function(t){return t.stopPropagation(),e.handleFocus(t)}},model:{value:e.select2Config.value,callback:function(t){e.$set(e.select2Config,"value",t)},expression:"select2Config.value"}},"Select2",e.select2Config,!1),e.$listeners)),e._v(" "),e.dialogVisible?n("AssetSelectDialog",e._g(e._b({ref:"dialog",attrs:{"base-node-url":e.baseNodeUrl,"base-url":e.baseUrl,"tree-setting":e.treeSetting,"tree-url-query":e.treeUrlQuery,value:e.value,visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t},cancel:e.handleCancel,confirm:e.handleConfirm}},"AssetSelectDialog",e.$attrs,!1),e.$listeners)):e._e()],1)},r=[],i=(n("2caf"),n("ac4d"),n("8a81"),n("5df3"),n("1c4c"),n("6b54"),n("87b3"),n("7514"),n("7618")),s=(n("7f7f"),n("c5f6"),n("49bd")),o=n("2af4");function c(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=l(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){o=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw i}}}}function l(e,t){if(e){if("string"===typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var d={componentName:"AssetSelect",components:{AssetSelectDialog:o["a"],Select2:s["a"]},props:{baseUrl:{type:String,default:"/api/v1/assets/assets/"},defaultPageSize:{type:Number,default:10},baseNodeUrl:{type:String,default:"/api/v1/assets/nodes/"},treeUrlQuery:{type:Object,default:function(){}},value:{type:Array,default:function(){return[]}},treeSetting:{type:Object,default:function(){return{}}},disabled:{type:[Boolean,Function],default:!1}},data:function(){var e,t=[],n=c(this.value);try{for(n.s();!(e=n.n()).done;){var a=e.value;"object"===Object(i["a"])(a)?t.push(a.id):t.push(a)}}catch(r){n.e(r)}finally{n.f()}return{dialogVisible:!1,initialValue:_.cloneDeep(t),select2Config:{disabled:this.disabled,value:t,multiple:!0,clearable:!0,defaultPageSize:this.defaultPageSize,ajax:{url:this.baseUrl,transformOption:function(e){return{label:e.name+"("+e.address+")",value:e.id}}}}}},methods:{handleFocus:function(){this.$refs.select2.selectRef.blur(),this.dialogVisible=!0},handleConfirm:function(e,t){void 0!==e&&(this.$refs.select2.iValue=e,this.addRowsToSelect(t),this.onInputChange(e),this.dialogVisible=!1)},handleCancel:function(){this.dialogVisible=!1},onInputChange:function(e){this.$emit("change",e)},addToSelect:function(e,t){var n=e.find((function(e){return e.value===t.id}));if(void 0===n){var a={label:"".concat(t.name,"(").concat(t.address,")"),value:t.id};e.push(a)}},addRowsToSelect:function(e){var t,n=this.$refs.select2.options,a=c(e);try{for(a.s();!(t=a.n()).done;){var r=t.value;this.addToSelect(n,r)}}catch(i){a.e(i)}finally{a.f()}}}},f=d,h=(n("0107"),n("2877")),p=Object(h["a"])(f,a,r,!1,null,"af4b4fce",null);t["a"]=p.exports},"13e7":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("echarts",{ref:"echarts",class:{"disabled-when-print":!!e.dataUrl},attrs:{options:e.options,autoresize:!0,theme:"light"},on:{finished:e.genSnapshot}}),e._v(" "),e.dataUrl?n("img",{staticClass:"enabled-when-print",staticStyle:{display:"none",width:"100%"},attrs:{src:e.dataUrl,alt:"chart snapshot"}}):e._e()],1)},r=[],i=(n("96cf"),n("3b8d")),s=(n("a481"),n("313e")),o=n("b416"),c={name:"LoginMetric",props:{range:{type:String,default:"weekly"},datesMetrics:{type:Array,default:function(){return[]}},primaryName:{type:String,default:""},primaryData:{type:Array,default:function(){return[]}},secondaryName:{type:String,default:""},secondaryData:{type:Array,default:function(){return[]}}},data:function(){return{dataUrl:"",metricsData:{dates_metrics_date:[],dates_metrics_total_count_active_assets:[],dates_metrics_total_count_active_users:[]}}},computed:{mixColors:function(){var e=document.documentElement.style,t=e.getPropertyValue("--color-primary"),n=t.replace(/#/g,""),a=Object(o["c"])(n,"ffffff",38),r=Object(o["c"])(n,"ffffff",20),i=Object(o["c"])(n,"ffffff",1);return{primary:t,TwoLevelColor:a,ThreeLevelColor:r,shadowColor:i}},options:function(){var e=this.mixColors,t=e.primary,n=e.TwoLevelColor,a=e.ThreeLevelColor,r=e.shadowColor;return{title:{show:!1},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{left:"auto",icon:"rect",itemWidth:10,itemHeight:10},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},color:[t,"#F3B44B"],xAxis:[{type:"category",boundaryGap:!1,axisLine:{lineStyle:{color:"#8F959E"}},axisLabel:{textStyle:{color:"#8F959E"}},axisTick:{show:!1},data:this.datesMetrics}],yAxis:[{type:"value",name:"",axisLine:{show:!1,lineStyle:{color:"#fff"}},axisLabel:{textStyle:{color:"#8F959E"}},axisTick:{show:!1},splitLine:{show:!0,lineStyle:{color:"#EFF0F1"}}}],animationDuration:500,series:[{name:this.primaryName,type:"line",smooth:!0,areaStyle:{normal:{color:new s["graphic"].LinearGradient(0,0,0,1,[{offset:0,color:t},{offset:.6,color:n},{offset:.8,color:a}],!1),shadowColor:r,shadowBlur:5}},data:this.primaryData},{name:this.secondaryName,type:"line",smooth:!0,areaStyle:{normal:{color:new s["graphic"].LinearGradient(0,0,0,1,[{offset:0,color:"rgba(249, 199, 79, 0.6)"},{offset:.6,color:"rgba(249, 199, 79, 0.2)"},{offset:.8,color:"rgba(249, 199, 79, 0.1)"}],!1),shadowColor:"rgba(249, 199, 79, 0.1)",shadowBlur:6}},data:this.secondaryData}]}}},watch:{range:function(){this.genSnapshot()},datesMetrics:function(){this.genSnapshot()},primaryData:function(){this.genSnapshot()},secondaryData:function(){this.genSnapshot()}},mounted:function(){var e=this;if(this.genSnapshot(),this._before=function(){return e.genSnapshot(!0)},this._after=function(){return e.forceResize()},window.addEventListener("beforeprint",this._before),window.addEventListener("afterprint",this._after),this._mql=window.matchMedia&&window.matchMedia("print"),this._mql){var t,n,a,r,i=function(t){return t.matches?e._before():e._after()};null===(t=(n=this._mql).addEventListener)||void 0===t||t.call(n,"change",i),null===(a=(r=this._mql).addListener)||void 0===a||a.call(r,i),this._mql._handler=i}},beforeDestroy:function(){var e,t,n,a;(window.removeEventListener("beforeprint",this._before),window.removeEventListener("afterprint",this._after),this._mql)&&(null===(e=(t=this._mql).removeEventListener)||void 0===e||e.call(t,"change",this._mql._handler),null===(n=(a=this._mql).removeListener)||void 0===n||n.call(a,this._mql._handler))},methods:{forceResize:function(){var e,t=null===(e=this.$refs.echarts)||void 0===e?void 0:e.echartsInstance;t&&t.resize()},genSnapshot:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n,a,r=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=r.length>0&&void 0!==r[0]&&r[0],n&&this.forceResize(),a=null===(t=this.$refs.echarts)||void 0===t?void 0:t.echartsInstance,a){e.next=5;break}return e.abrupt("return");case 5:try{this.dataUrl=a.getDataURL({pixelRatio:2,backgroundColor:"#ffffff"})}catch(i){this.dataUrl=""}case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},l=c,u=(n("fedb"),n("2877")),d=Object(u["a"])(l,a,r,!1,null,"7adf9244",null);t["a"]=d.exports},"150c":function(e,t,n){},"16c0":function(e,t,n){"use strict";n("0906a")},"17d9":function(e,t,n){},1915:function(e,t,n){},1939:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.showSetting?"show-setting":"hide-setting"},[e._l(e.items,(function(t,a){return n("div",{key:t.name,staticClass:"protocol-item"},[n("el-input",e._b({class:e.isPortReadonly(t)?"":"input-with-select",attrs:{placeholder:e.portPlaceholder,readonly:e.isPortReadonly(t),title:e.isPortReadonly(t)?"端口由 URL 指定":""},scopedSlots:e._u([{key:"prepend",fn:function(){return[n("el-select",{staticClass:"prepend",attrs:{disabled:e.disableSelect(t),value:t.display_name?t.display_name:t.name},on:{change:function(n){return e.handleProtocolChange(n,t)}}},e._l(e.remainProtocols,(function(e){return n("el-option",{key:e.name,attrs:{label:e.name,value:e.name}})})),1)]},proxy:!0},{key:"append",fn:function(){return[e.showSetting(t)?n("el-button",{attrs:{icon:"el-icon-setting"},on:{click:function(n){return e.onSettingClick(t)}}}):e._e()]},proxy:!0}],null,!0),model:{value:t.port,callback:function(n){e.$set(t,"port",n)},expression:"item.port"}},"el-input",e.$attrs,!1)),e._v(" "),e.readonly?e._e():n("div",{staticClass:"input-button"},[n("el-button",{staticStyle:{"flex-shrink":"0"},attrs:{disabled:e.disableDelete(t),icon:"el-icon-minus",size:"mini",type:"danger"},on:{click:function(t){return e.handleDelete(a)}}}),e._v(" "),a===e.items.length-1?n("el-button",{staticStyle:{"flex-shrink":"0"},attrs:{disabled:e.disableAdd(t,a),icon:"el-icon-plus",size:"mini",type:"primary"},on:{click:function(t){return e.handleAdd(a)}}}):e._e()],1)],1)})),e._v(" "),0===e.items.length?n("el-button",{staticStyle:{"flex-shrink":"0"},attrs:{icon:"el-icon-plus",size:"mini",type:"primary"},on:{click:function(t){return e.handleAdd(0)}}}):e._e(),e._v(" "),e.showDialog?n("ProtocolSettingDialog",{attrs:{disabled:e.settingReadonly||e.readonly,protocol:e.currentProtocol,visible:e.showDialog},on:{"update:visible":function(t){e.showDialog=t},confirm:e.handleSettingConfirm}}):e._e()],2)},r=[],i=(n("1c01"),n("58b2"),n("8e6e"),n("456d"),n("2caf"),n("ac4d"),n("8a81"),n("5df3"),n("1c4c"),n("6b54"),n("87b3"),n("ac6a"),n("f3e2"),n("bd86")),s=(n("7514"),n("75fc")),o=(n("57e7"),n("d25f"),n("7f7f"),n("6d67"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.$attrs.visible?n("Dialog",e._g(e._b({staticClass:"setting-dialog",attrs:{"close-on-click-modal":!1,"destroy-on-close":!0,modal:!1,"show-cancel":!1,"show-confirm":!1,title:e.$tc("PlatformProtocolConfig")+"："+e.protocol.name,width:"800px"}},"Dialog",e.$attrs,!1),e.$listeners),[e.disabled&&e.platformDetail?n("el-alert",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"success"}},[e._v("\n    "+e._s(e.$t("InheritPlatformConfig"))+"\n    "),n("el-link",{staticClass:"link-more",attrs:{href:e.platformDetail,target:"_blank"}},[e._v("\n      "+e._s(e.$t("View"))+"\n    ")]),e._v(" "),n("i",{staticClass:"fa fa-external-link"})],1):e._e(),e._v(" "),n("AutoDataForm",e._b({staticClass:"data-form",attrs:{disabled:e.disabled,form:e.form},on:{submit:e.onSubmit}},"AutoDataForm",e.config,!1))],1):e._e()}),c=[],l=(n("96cf"),n("3b8d")),u=n("2af9"),d=n("605a"),f={name:"ProtocolSetting",components:{Dialog:u["i"],AutoDataForm:u["e"]},props:{protocol:{type:Object,default:function(){return{}}},disabled:{type:Boolean,default:!1}},data:function(){var e=this,t=this,n=this.$route.query.platform;return{platform:"",loading:!0,form:this.protocol,platformDetail:n?"#/console/assets/platforms/"+n:"",config:{hasSaveContinue:!1,hasButtons:!this.disabled,url:"/api/v1/assets/protocol-settings/?name="+this.protocol.name,fields:[[t.$t("Basic"),["primary","required","default","public"]],[t.$t("Advanced"),["setting"]]],fieldsMeta:{setting:{fields:"__all__",fieldsMeta:{username_selector:{hidden:function(e){return"basic"!==e["autofill"]}},password_selector:{hidden:function(e){return"basic"!==e["autofill"]}},submit_selector:{hidden:function(e){return"basic"!==e["autofill"]}},script:{component:d["a"],hidden:function(e){return"script"!==e["autofill"]}}}},public:{disabled:"winrm"===this.protocol.name,hidden:function(t){"winrm"===e.protocol.name&&(t["public"]=!1)}}}}}},mounted:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){var t,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$store.dispatch("common/getDrawerActionMeta");case 3:t=e.sent,n=t.row.platform.id,a=t.row.platform.name,this.platformDetail=n?"/ui/#/settings/platforms?id=".concat(n,"&name=").concat(a):"",e.next=12;break;case 9:throw e.prev=9,e.t0=e["catch"](0),new Error(e.t0);case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));function t(){return e.apply(this,arguments)}return t}(),methods:{onSubmit:function(e){this.protocol=Object.assign(this.protocol,e),this.$emit("update:visible",!1),this.$emit("confirm",this.protocol)},openInNewTab:function(){window.open(this.platformDetail,"_blank")}}},h=f,p=(n("7764"),n("2877")),m=Object(p["a"])(h,o,c,!1,null,"bdf8c8b6",null),b=m.exports;function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){Object(i["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=w(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){o=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw i}}}}function w(e,t){if(e){if("string"===typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,t):void 0}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var $={components:{ProtocolSettingDialog:b},props:{value:{type:[String,Array],default:function(){return[]}},title:{type:String,default:""},choices:{type:Array,default:function(){return[]}},readonly:{type:Boolean,default:!1},settingReadonly:{type:Boolean,default:!1},showSetting:{type:Function,default:function(e){return!0}},instance:{type:Object,default:function(){return{}}}},data:function(){return{name:"",items:[],currentProtocol:{},showDialog:!1}},computed:{selectedProtocolNames:function(){return this.items.map((function(e){return e.name}))},remainProtocols:function(){var e=this;return this.choices.filter((function(t){return-1===e.selectedProtocolNames.indexOf(t.name)}))},portPlaceholder:function(){return this.settingReadonly?this.$t("Port"):this.$t("DefaultPort")},iChoices:function(){return this.choices.map((function(e){return null===e||void 0===e||delete e.id,e}))}},watch:{choices:{handler:function(e,t){var n=this;setTimeout((function(){n.setDefaultItems(e)}))},deep:!0,immediate:!0},items:{handler:function(e){this.settingReadonly&&(e=e.map((function(e){return{name:e.name,port:e.port}}))),this.$emit("input",e)},immediate:!0,deep:!0},instance:{handler:function(e){var t=this.getPortFromInstance(e);if(t){var n,a=y(this.items);try{for(a.s();!(n=a.n()).done;){var r=n.value;r["port_from_addr"]&&(r.port=t)}}catch(i){a.e(i)}finally{a.f()}}},deep:!0,immediate:!0}},mounted:function(){this.setDefaultItems(this.iChoices),this.$log.debug("Choices: ",this.choices),this.$log.debug("Value: ",this.value),this.$log.debug("Items: ",this.items)},methods:{getPortFromInstance:function(e){if(!e)return 0;var t=e.address||"";-1===t.indexOf("://")&&(t="https://".concat(t));var a=n("1816"),r=a(t),i=r.port;return(i<0||i>65535)&&(i=0),i||(i="https:"===r.protocol?443:80),i},handleSettingConfirm:function(){var e,t=this;if(this.currentProtocol.primary){var n=this.items.filter((function(e){return e.name!==t.currentProtocol.name})).map((function(e){return e.primary=!1,e}));this.items=[this.currentProtocol].concat(Object(s["a"])(n))}"winrm"===this.currentProtocol.name&&(null!==(e=this.currentProtocol.setting)&&void 0!==e&&e.use_ssl?this.currentProtocol.port=5986:this.currentProtocol.port=5985)},handleDelete:function(e){this.items=this.items.filter((function(t,n){return n!==e}))},isRequired:function(e){var t=this.iChoices.find((function(t){return t.name===e.name}));return(null===t||void 0===t?void 0:t.primary)||(null===t||void 0===t?void 0:t.required)},disableSelect:function(e){return this.isRequired(e)},disableDelete:function(e){return 1===this.items.length||!!this.settingReadonly&&this.isRequired(e)},disableAdd:function(e){return 0===this.remainProtocols.length||!e.port},handleAdd:function(e){this.items.push(g({},this.remainProtocols[0]))},handleProtocolChange:function(e,t){var n=this.choices.find((function(t){return t.name===e}));t.name=n.name,t.port=n.port},isPortFormAddr:function(e){return!!e["port_from_addr"]},isPortReadonly:function(e){return this.readonly||this.isPortFormAddr(e)},setPrimaryIfNeed:function(e){if(this.settingReadonly)return e;var t=e.filter((function(e){return e.primary}));return 0===t.length?(e[0].default=!0,e[0].public=!0):t.length>1&&t.slice(1,t.length).forEach((function(e){e.primary=!1})),e},setDefaultItems:function(e){var t=this,n=[],a=e.filter((function(e){return e.required||e.primary}));if(this.value instanceof Array&&this.value.length>0){var r=[];this.value.forEach((function(n){if(!t.settingReadonly||null!==n&&void 0!==n&&n.id&&null!==n&&void 0!==n&&n.setting)r.push(n);else{var a=t.getAssetDefaultItems(n,e);r.push.apply(r,Object(s["a"])(a))}}));var i=a.filter((function(e){return!r.find((function(t){return t.name===e.name}))}));r.push.apply(r,Object(s["a"])(i));var o=r.map((function(e){return e.name}));n=r.filter((function(e){return-1!==o.indexOf(e.name)}))}else{var c=e.filter((function(e){return e.required||e.primary||e.default}));0===c.length&&0!==e.length&&c.push(e[0]),n=c}n=this.setPrimaryIfNeed(n),this.items=n},getAssetDefaultItems:function(e,t){var n=[],a=t.find((function(t){return t.name===e.name}))||{};return n.push(g(g({},a),e)),n},onSettingClick:function(e){this.currentProtocol=e,this.showDialog=!0}}},O=$,k=(n("e9fa"),Object(p["a"])(O,a,r,!1,null,"2ca97d28",null));t["a"]=k.exports},"1a2c":function(e,t,n){},"1c5a":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("input",{ref:"upLoadFile",staticStyle:{display:"none"},attrs:{accept:e.accept,type:"file"},on:{change:e.Onchange}}),e._v(" "),n("el-button",{attrs:{size:"mini"},nativeOn:{click:function(t){return t.stopPropagation(),e.onUpLoad(t)}}},[e._v("\n    "+e._s(this.$t("SelectFile"))+"\n  ")]),e._v(" "),n("span",[e._v(e._s(e.fileName))]),e._v(" "),""!==e.tip?n("div",{staticClass:"help-block"},[e._v(e._s(e.tip))]):e._e(),e._v(" "),n("input",e._g({directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],attrs:{hidden:"",type:"text"},domProps:{value:e.value},on:{input:function(t){t.target.composing||(e.value=t.target.value)}}},e.$listeners)),e._v(" "),n("div",[e.preview?n("img",e._b({class:e.showBG?"show-bg":"",attrs:{src:e.preview,alt:""}},"img",e.$attrs,!1)):e._e()]),e._v(" "),e.fileName?n("el-button",{attrs:{size:"mini",type:"danger"},nativeOn:{click:function(t){return t.stopPropagation(),e.resetUpload(t)}}},[e._v("\n    "+e._s(this.$t("Cancel"))+"\n  ")]):e._e()],1)},r=[],i=(n("7f7f"),{props:{value:{type:String,default:function(){return""}},tip:{type:String,default:function(){return""}},accept:{type:String,default:"*"},showBG:{type:Boolean,default:!1}},data:function(){return{fileName:"",initial:this.value,preview:this.value}},watch:{value:function(e){this.$emit("customEvent",e),this.preview=this.value}},methods:{onUpLoad:function(){this.$refs.upLoadFile.click()},onInput:function(e){this.$emit("input",e)},Onchange:function(e){var t=e.target.files[0];void 0!==t&&(this.fileName=(null===t||void 0===t?void 0:t.name)||"",this.$emit("fileChange",t),this.$emit("input",this.getObjectURL(t)))},resetUpload:function(){this.fileName="",this.preview="",this.$refs.upLoadFile.value="",this.$emit("input",""),this.$emit("fileChange",null)},getObjectURL:function(e){var t=null;return void 0!==window.createObjectURL?t=window.createObjectURL(e):void 0!==window.URL?t=window.URL.createObjectURL(e):void 0!==window.webkitURL&&(t=window.webkitURL.createObjectURL(e)),t}}}),s=i,o=(n("faf1"),n("2877")),c=Object(o["a"])(s,a,r,!1,null,"14c0cfd8",null);t["a"]=c.exports},"1de0":function(e,t,n){},"1e7f":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Dialog",e._g(e._b({attrs:{"destroy-on-close":!0,"show-cancel":!1,title:e.title,visible:e.showSecret,width:"50"},on:{"update:visible":function(t){e.showSecret=t},confirm:e.accountConfirmHandle}},"Dialog",e.$attrs,!1),e.$listeners),[n("el-form",{staticClass:"password-form",attrs:{model:e.secretInfo,"label-position":"right","label-width":"100px"}},[n("el-form-item",{attrs:{label:e.$tc("OldSecret")}},[n("SecretViewerFormatter",{attrs:{"cell-value":e.secretInfo.old_secret,col:{formatterArgs:{name:"old_secret"}}}})],1),e._v(" "),n("el-form-item",{attrs:{label:e.$tc("NewSecret")}},[n("SecretViewerFormatter",{attrs:{"cell-value":e.secretInfo.new_secret,col:{formatterArgs:{name:"new_secret"}}}})],1)],1)],1)],1)},r=[],i=n("9039"),s=n("53f7"),o={name:"RecordViewSecret",components:{Dialog:i["a"],SecretViewerFormatter:s["p"]},props:{visible:{type:Boolean,default:!1},url:{type:String,default:""},title:{type:String,default:function(){return this.$tc("ViewSecret")}}},data:function(){return{secretInfo:{},showSecret:!1,mfaDialogVisible:!0}},computed:{},mounted:function(){this.showSecretDialog()},methods:{accountConfirmHandle:function(){this.showSecret=!1,this.mfaDialogVisible=!1},showSecretDialog:function(){var e=this;return this.$axios.get(this.url,{disableFlashErrorMsg:!0}).then((function(t){e.secretInfo=t,e.showSecret=!0}))},exit:function(){this.$emit("update:visible",!1)}}},c=o,l=(n("7333d"),n("2877")),u=Object(l["a"])(c,a,r,!1,null,"4194b346",null);t["a"]=u.exports},"1e9a":function(e,t,n){},"1efb":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("AutoDataForm",e._b({ref:"AutoDataForm",staticClass:"variable-add",attrs:{"submit-btn-text":e.submitBtnText},on:{submit:e.confirm}},"AutoDataForm",e.$data,!1))},r=[],i=(n("2caf"),n("ac4d"),n("8a81"),n("5df3"),n("1c4c"),n("6b54"),n("87b3"),n("7f7f"),n("768b")),s=(n("4f37"),n("28a5"),n("c75f"));function o(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=c(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){o=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw i}}}}function c(e,t){if(e){if("string"===typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var u={name:"VariableCreateForm",components:{AutoDataForm:s["a"]},props:{variable:{type:Object,default:function(){return{}}}},data:function(){var e=this,t=function(t,n,a){e.defaultValueRequired&&!n?a(new Error(e.$t("FieldRequiredError"))):a()};return{defaultValueRequired:!1,submitBtnText:this.$t("Confirm"),url:"/api/v1/ops/variables/",form:Object.assign({on_invalid:"error"},this.variable||{}),fields:[["",["name","var_name","type","text_default_value","select_default_value","extra_args","tips","required"]]],fieldsMeta:{var_name:{helpTextAsTip:!1},text_default_value:{label:this.$t("DefaultValue"),hidden:function(e){return"text"!==e.type},rules:[{validator:t}],helpTip:this.$t("DefaultValueTip"),el:{type:"input"}},select_default_value:{label:this.$t("DefaultValue"),helpTip:this.$t("DefaultValueTip"),hidden:function(e){return"select"!==e.type},rules:[{validator:t}],el:{type:"input"}},extra_args:{hidden:function(e){return"select"!==e.type},el:{type:"textarea",rows:4,placeholder:this.$t("ExtraArgsPlaceholder")},rules:[{validator:function(t,n,a){try{var r,i=n.split("\n"),s=/^[^:]+:[^:]+$/,c=o(i);try{for(c.s();!(r=c.n()).done;){var l=r.value;s.test(l.trim())||a(new Error(e.$t("ExtraArgsFormatError")))}}catch(u){c.e(u)}finally{c.f()}}catch(d){a(new Error(e.$t("ExtraArgsFormatError")))}a()}}]},required:{on:{change:function(t,n){var a=Object(i["a"])(t,1),r=a[0];e.defaultValueRequired=r}}}},hasSaveContinue:!1,method:"get"}},mounted:function(){var e;this.defaultValueRequired=(null===(e=this.variable)||void 0===e?void 0:e.required)||!1},methods:{confirm:function(e){var t;null!==(t=this.variable)&&void 0!==t&&t.name?this.$emit("edit",e):this.$emit("add",e)}}},d=u,f=(n("cc71"),n("2877")),h=Object(f["a"])(d,a,r,!1,null,"1926581c",null);t["a"]=h.exports},"22fa":function(e,t,n){},"269c":function(e,t,n){"use strict";n("58a0")},"280e":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("el-radio-group",{staticClass:"switch",attrs:{size:"mini"},on:{change:e.onChange},model:{value:e.select,callback:function(t){e.select=t},expression:"select"}},e._l(e.iOptions,(function(t){return n("el-radio-button",{key:t.value,attrs:{label:t.value}},[e._v("\n      "+e._s(t.label)+"\n    ")])})),1)],1)},r=[],i=(n("7f7f"),n("c5f6"),{props:{name:{type:String,default:"dashboardDays"},days:{type:[String,Number],default:null},options:{type:Array,default:function(){return[]}}},data:function(){var e=[{label:this.$t("Today"),value:"1"},{label:this.$t("Last7Days"),value:"7"},{label:this.$t("Last30Days"),value:"30"}];return{select:this.days,iOptions:this.options.length>0?this.options:e}},created:function(){var e=this.days;e||(e=this.$route.query.days),e||(e=localStorage.getItem(this.name)),e||(e="7"),e&&e!==this.select&&(this.select=e,this.$emit("change",e))},mounted:function(){this.$emit("change",this.select)},methods:{onChange:function(e){localStorage.setItem(this.name,e),this.$emit("change",e)}}}),s=i,o=(n("77aa"),n("2877")),c=Object(o["a"])(s,a,r,!1,null,"467ee90a",null);t["a"]=c.exports},"2af4":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Dialog",e._g(e._b({attrs:{"close-on-click-modal":!1,title:e.$tc("Assets"),"custom-class":"asset-select-dialog",top:"2vh",width:"1000px"},on:{cancel:e.handleCancel,close:e.handleClose,confirm:e.handleConfirm}},"Dialog",e.$attrs,!1),e.$listeners),[n("AssetTreeTable",e._g(e._b({ref:"ListPage",staticClass:"tree-table",attrs:{"header-actions":e.headerActions,"node-url":e.baseNodeUrl,"sync-select-to-url":!1,"table-config":e.tableConfig,"tree-setting":e.iTreeSetting,"tree-url":e.baseNodeUrl+"children/tree/",url:e.baseUrl},on:{loaded:e.handleTableLoaded}},"AssetTreeTable",e.$attrs,!1),e.$listeners))],1)},r=[],i=(n("1c01"),n("58b2"),n("8e6e"),n("f3e2"),n("d25f"),n("ac6a"),n("456d"),n("bd86")),s=(n("57e7"),n("7f7f"),n("ad09")),o=n("9039");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(i["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={componentName:"AssetSelectDialog",components:{AssetTreeTable:s["a"],Dialog:o["a"]},props:{baseUrl:{type:String,default:"/api/v1/assets/assets/"},baseNodeUrl:{type:String,default:"/api/v1/assets/nodes/"},value:{type:Array,default:function(){return[]}},canSelect:{type:Function,default:function(e,t){return!0}},disabled:{type:[Boolean,Function],default:!1},treeSetting:{type:Object,default:function(){return{}}}},data:function(){var e=this,t=this;return{isLoaded:!1,dialogVisible:!1,rowSelected:_.cloneDeep(this.value)||[],rowsAdd:[],tableConfig:{url:this.baseUrl,hasTree:!0,canSelect:this.canSelect,columns:[{prop:"name",label:this.$t("Name"),sortable:!0},{prop:"address",label:this.$t("Address"),sortable:"custom"},{prop:"platform",label:this.$t("Platform"),sortable:!0,formatter:function(e){return e.platform.name}},{prop:"actions",has:!1}],listeners:{"toggle-row-selection":function(e,n){e?t.addRowToSelect(n):t.removeRowFromSelect(n)}},theRowDefaultIsSelected:function(t){return e.value.indexOf(t.id)>-1}},headerActions:{hasLeftActions:!1,hasRightActions:!1,hasLabelSearch:!0,searchConfig:{getUrlQuery:!1}}}},computed:{iTreeSetting:function(){return l(l({},this.treeSetting),{},{selectSyncToRoute:!1})}},methods:{handleTableLoaded:function(){this.isLoaded=!0},handleClose:function(){this.$refs.ListPage.$refs.TreeList.componentKey+=1},handleConfirm:function(){this.$emit("confirm",this.rowSelected,this.rowsAdd),this.rowSelected.length>0&&this.handleClose()},handleCancel:function(){this.$emit("cancel"),this.handleClose()},addRowToSelect:function(e){var t=this.rowSelected.indexOf(e.id);-1===t&&(this.rowSelected.push(e.id),this.rowsAdd.push(e))},removeRowFromSelect:function(e){var t=this.rowSelected.indexOf(e.id);t>-1&&this.rowSelected.splice(t,1)}}},d=u,f=(n("daf3"),n("2877")),h=Object(f["a"])(d,a,r,!1,null,"202ab250",null);t["a"]=h.exports},"2af9":function(e,t,n){"use strict";n("3772");var a=n("c75f"),r=(n("d88a"),n("3e3d"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-breadcrumb",{staticClass:"app-breadcrumb",attrs:{separator:"/"}},[n("transition-group",{attrs:{name:"breadcrumb"}},e._l(e.levelList,(function(t,a){return n("el-breadcrumb-item",{key:t.path},["noRedirect"===t.redirect||a===e.levelList.length-1?n("span",{staticClass:"no-redirect"},[e._v(e._s(t.meta.title))]):n("a",{on:{click:function(n){return n.preventDefault(),e.handleLink(t)}}},[e._v(e._s(e.$tr(t.meta.title)))])])})),1)],1)}),i=[],s=(n("4f37"),n("7f7f"),n("d25f"),n("bd11")),o=n.n(s),c={data:function(){return{levelList:null}},watch:{$route:function(){this.getBreadcrumb()}},created:function(){this.getBreadcrumb()},methods:{getBreadcrumb:function(){var e=this.$route.matched.filter((function(e){return e.meta&&e.meta.title})),t=e[0];this.isDashboard(t)||(e=[{path:"/dashboard",meta:{title:"dashboard"}}].concat(e)),this.levelList=e.filter((function(e){return e.meta&&e.meta.title&&!1!==e.meta.breadcrumb}))},isDashboard:function(e){var t=e&&e.name;return!!t&&t.trim().toLocaleLowerCase()==="Dashboard".toLocaleLowerCase()},pathCompile:function(e){var t=this.$route.params,n=o.a.compile(e);return n(t)},handleLink:function(e){var t=e.redirect,n=e.path;t?this.$router.push(t):this.$router.push(this.pathCompile(n))}}},l=c,u=(n("e823"),n("2877")),d=Object(u["a"])(l,r,i,!1,null,"7149e959",null),f=(d.exports,n("a298"),n("1cf5"),n("d469"),n("30f4"),n("9039")),h=(n("082e"),n("23e2"),n("af7d")),p=n("ae05"),m=n("9e38"),b=n("49bd"),v=(n("e629"),n("3d2a")),g=n("1307"),y=n("863c"),w=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.onOpenDialog}},[e._v("\n      "+e._s(e.$tc("View"))+"\n      "),n("span",[e._v("("+e._s(e.$tc("LockedIP",e.ipCounts))+")")])])],1),e._v(" "),n("Dialog",e._g(e._b({attrs:{"destroy-on-close":!0,"show-cancel":!1,"show-confirm":!1,title:e.title,visible:e.visible,width:"40%"},on:{"update:visible":function(t){e.visible=t}}},"Dialog",e.$attrs,!1),e.$listeners),[n("BlockedIPList")],1)],1)},_=[],$=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ListTable",{ref:"ListTable",attrs:{"header-actions":e.headerActions,"table-config":e.tableConfig}})},O=[],k=(n("6d67"),{name:"BlockedIPList",components:{ListTable:p["a"]},props:{object:{type:Object,required:!1,default:function(){return{}}}},data:function(){var e=this,t=this;return{tableConfig:{url:"/api/v1/settings/security/block-ip/",columns:["ip","actions"],columnsMeta:{ip:{label:this.$t("IP")},actions:{formatterArgs:{hasDelete:!1,hasUpdate:!1,hasClone:!1,extraActions:[{name:"UnlockIP",title:this.$t("Unblock"),can:this.$hasPerm("settings.change_security"),type:"primary",callback:function(n){var a=n.row;e.$axios.post("/api/v1/settings/security/unlock-ip/",{ips:[a.ip]}).then((function(){t.$message.success(e.$tc("UnlockSuccessMsg")),t.$refs.ListTable.reloadTable()}))}}]}}}},headerActions:{hasExport:!1,hasImport:!1,hasCreate:!1,hasSearch:!1,hasRefresh:!0,hasBulkDelete:!1,hasBulkUpdate:!1,hasLeftActions:!0,hasRightActions:!0,extraMoreActions:[{name:"UnlockSelected",title:this.$t("UnblockSelected"),type:"primary",can:function(e){var t=e.selectedRows;return t.length>0},callback:function(e){var n=e.selectedRows;t.$axios.post("/api/v1/settings/security/unlock-ip/",{ips:n.map((function(e){return e.ip}))}).then((function(e){t.$message.success(t.$tc("UnlockSuccessMsg")),t.$refs.ListTable.reloadTable()}))}}]}}}}),S=k,x=Object(u["a"])(S,$,O,!1,null,"21c5b0f7",null),j=x.exports,C={componentName:"BlockedIPs",components:{BlockedIPList:j,Dialog:f["a"]},props:{value:{type:Object,default:function(){return{}}},title:{type:String,default:function(){return this.$t("BlockedIPS")}},url:{type:String,default:"/api/v1/assets/platform-automation-methods/"}},data:function(){return{remoteMeta:{},visible:!1,form:this.value,ipCounts:0,config:{url:this.url,hasSaveContinue:!1,hasButtons:!0,fields:[],fieldsMeta:{}}}},created:function(){this.getLockedIp()},methods:{getLockedIp:function(){var e=this;this.$axios.get("/api/v1/settings/security/block-ip/").then((function(t){e.ipCounts=t.count}))},onOpenDialog:function(){this.visible=!0}}},A=C,D=Object(u["a"])(A,w,_,!1,null,"0aad5dde",null),T=D.exports,P=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.onOpenDialog}},[e._v("\n      "+e._s(e.$tc("View"))+"\n    ")])],1),e._v(" "),n("Dialog",e._g(e._b({attrs:{"destroy-on-close":!0,"show-cancel":!1,"show-confirm":!1,title:e.title,visible:e.visible,width:"40%"},on:{"update:visible":function(t){e.visible=t}}},"Dialog",e.$attrs,!1),e.$listeners),[n("LeakPasswordList")],1)],1)},V=[],R=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ListTable",{ref:"ListTable",attrs:{"header-actions":e.headerActions,"table-config":e.tableConfig,"create-drawer":e.createDrawer}})},E=[],M={name:"LeakPasswordList",components:{ListTable:p["a"]},props:{object:{type:Object,required:!1,default:function(){return{}}}},data:function(){return{createDrawer:function(){return n.e("chunk-2d0c4bf7").then(n.bind(null,"3bc5"))},tableConfig:{url:"/api/v1/settings/leak-passwords/",columns:["password"],columnsMeta:{actions:{formatterArgs:{hasClone:!1,canDelete:this.$hasPerm("settings.change_security"),canUpdate:this.$hasPerm("settings.change_security")}}}},headerActions:{hasExport:!1,hasImport:!1,hasCreate:!0,hasSearch:!0,hasRefresh:!0,hasBulkDelete:!0,hasBulkUpdate:!1,hasLeftActions:!0,hasRightActions:!0,canCreate:this.$hasPerm("settings.change_security"),canBulkDelete:this.$hasPerm("settings.change_security")}}}},I=M,N=Object(u["a"])(I,R,E,!1,null,"5f6e0214",null),L=N.exports,U={componentName:"LeakPasswords",components:{LeakPasswordList:L,Dialog:f["a"]},props:{value:{type:Object,default:function(){return{}}},title:{type:String,default:function(){return this.$t("LeakPasswordList")}},url:{type:String,default:"/api/v1/settings/leak-passwords/"}},data:function(){return{visible:!1,form:this.value,config:{url:this.url,hasSaveContinue:!1,hasButtons:!0,fields:[],fieldsMeta:{}}}},methods:{onOpenDialog:function(){this.visible=!0}}},F=U,z=Object(u["a"])(F,P,V,!1,null,"c6d4689e",null),B=z.exports,H=(n("d180"),n("6557")),q=n("ad09"),W=n("e9f9"),K=n("fcd5"),G=(n("86d4"),n("ced5"),n("1c5a")),Z=n("f4e5"),Q=(n("a82e"),n("267b"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.enabled&&!e.isViewed()?n("el-alert",{staticClass:"announcement",attrs:{center:!1,title:e.title,type:"success"},on:{close:e.onClose}},[n("MarkDown",{staticClass:"markdown",attrs:{value:e.announcement.content}}),e._v(" "),e.announcement.link?n("span",[n("el-link",{staticClass:"link-more",attrs:{href:e.announcement.link,target:"_blank",type:"info"}},[e._v("\n      "+e._s(e.$t("ViewMore"))+"\n    ")]),e._v(" "),n("i",{staticClass:"fa fa-external-link icon"})],1):e._e()],1):e._e()}),Y=[],J=(n("1c01"),n("58b2"),n("8e6e"),n("f3e2"),n("ac6a"),n("456d"),n("bd86")),X=n("2f62"),ee=n("8112");function te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?te(Object(n),!0).forEach((function(t){Object(J["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ae={name:"Announcement",components:{MarkDown:ee["a"]},data:function(){return{viewedKey:"AnnouncementViewed"}},computed:ne(ne({},Object(X["b"])(["publicSettings"])),{},{announcement:function(){var e=this.publicSettings.ANNOUNCEMENT;return{id:e["ID"],subject:e["SUBJECT"],content:e["CONTENT"],link:e["LINK"],date_start:e["DATE_START"],date_end:e["DATE_END"]}},enabled:function(){return this.publicSettings.ANNOUNCEMENT_ENABLED&&(this.announcement.content||this.announcement.subject)&&this.isDateValid},title:function(){return this.$t("Announcement")+": "+this.announcement.subject},isDateValid:function(){if(void 0===this.announcement.date_start||void 0===this.announcement.date_end)return!0;var e=new Date,t=new Date(this.announcement.date_start),n=new Date(this.announcement.date_end);return e>=t&&e<=n}}),methods:{onClose:function(){localStorage.setItem(this.viewedKey,this.announcement.id)},isViewed:function(){var e=localStorage.getItem(this.viewedKey);return e===this.announcement.id}}},re=ae,ie=(n("7771"),Object(u["a"])(re,Q,Y,!1,null,"98165d12",null)),se=ie.exports,oe=n("56b0"),ce=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-page"},[e.hasPagination?n("el-pagination",e._b({attrs:{background:e.paginationBackground,"current-page":e.page,layout:e.paginationLayout,"page-size":e.size,"page-sizes":e.paginationSizes,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.extraPaginationAttrs,!1)):e._e()],1)},le=[],ue=(n("c5f6"),1),de={name:"Pagination",components:{},props:{hasPagination:{type:Boolean,default:!0},firstPage:{type:Number,default:ue},pageSizeKey:{type:String,default:"limit"},pageKey:{type:String,default:"offset"},page:{type:Number,default:1},noPaginationSize:{type:Number,default:-1},paginationSize:{type:Number,default:10},total:{type:Number,default:0},paginationSizes:{type:Array,default:function(){return[10,20,30,40,50,100]}},paginationBackground:{type:Boolean,default:!0},paginationLayout:{type:String,default:"total, sizes, prev, pager, next, jumper"},extraPaginationAttrs:{type:Object,default:function(){}},transformQuery:{type:Function,default:null}},data:function(){return{size:this.paginationSize||this.paginationSizes[0]}},methods:{handleSizeChange:function(e){this.$emit("sizeChange",e)},handleCurrentChange:function(e){this.$emit("currentSizeChange",e)},getPageQuery:function(e,t){var n={};n[this.pageSizeKey]=this.hasPagination?t:this.noPaginationSize;var a=(e-1)*t;return n[this.pageKey]=a,this.transformQuery&&(n=this.transformQuery(n)),n}}},fe=de,he=(n("bb4b"),Object(u["a"])(fe,ce,le,!1,null,"f740b02a",null)),pe=he.exports,me=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"boxDom",staticClass:"tooltip"},[n("el-tooltip",{attrs:{content:e.content,disabled:e.showTooltip,effect:e.effect,placement:e.placement}},[n("div",{staticClass:"multi-line-limit"},[e._v(e._s(e.content))])]),e._v(" "),n("div",{ref:"virtualDom",staticClass:"virtual-dom"},[e._v(e._s(e.content))])],1)},be=[],ve={name:"Tooltip",props:{content:{type:String,default:function(){return""}},placement:{type:String,default:function(){return"top"}},effect:{type:String,default:function(){return"dark"}},line:{type:Number,default:function(){return 3}}},data:function(){return{showTooltip:!0}},watch:{content:{handler:function(){var e=this;this.$nextTick((function(){return e.checkWidth()}))},immediate:!0}},mounted:function(){this.setUI()},methods:{checkWidth:function(){var e=this.$refs.boxDom.offsetWidth,t=this.$refs.virtualDom.offsetWidth;this.showTooltip=e*this.line>t},setUI:function(){this.$refs.boxDom.style.setProperty("--line","".concat(18*this.line,"px"))}}},ge=ve,ye=(n("2e3b"),Object(u["a"])(ge,me,be,!1,null,"29fc7829",null));ye.exports,n("6ecc");n.d(t,"e",(function(){return a["a"]})),n.d(t,"i",(function(){return f["a"]})),n.d(t,"m",(function(){return h["a"]})),n.d(t,"j",(function(){return p["a"]})),n.d(t,"p",(function(){return m["a"]})),n.d(t,"q",(function(){return b["a"]})),n.d(t,"t",(function(){return v["a"]})),n.d(t,"c",(function(){return g["a"]})),n.d(t,"f",(function(){return y["a"]})),n.d(t,"g",(function(){return T})),n.d(t,"l",(function(){return B})),n.d(t,"r",(function(){return H["a"]})),n.d(t,"d",(function(){return q["a"]})),n.d(t,"k",(function(){return W["a"]})),n.d(t,"o",(function(){return K["a"]})),n.d(t,"s",(function(){return G["a"]})),n.d(t,"a",(function(){return Z["a"]})),n.d(t,"b",(function(){return se})),n.d(t,"h",(function(){return oe["a"]})),n.d(t,"n",(function(){return pe}))},"2c3e":function(e,t,n){},"2c83":function(e,t,n){"use strict";n("b278")},"2dc7":function(e,t,n){},"2dfb":function(e,t,n){},"2e3b":function(e,t,n){"use strict";n("505f")},"32b3":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"code-editor",staticStyle:{"font-size":"12px"}},[n("el-form",{ref:"form",attrs:{model:e.formModel,rules:e.rules,"label-position":"top","label-width":"80px"}},[n("div",{staticClass:"form-content"},[e._l(e.iActions,(function(t,a){return n("el-form-item",{key:a,attrs:{label:t.name,prop:t.name}},["button"!==t.type||t.isVisible?e._e():[n("el-tooltip",{attrs:{disabled:!t.tip,content:t.tip}},[n("el-button",{staticClass:"start-stop-btn",attrs:{type:t.el&&t.el.type,size:"mini"},on:{click:function(e){return t.callback()}}},[n("i",{class:t.icon}),e._v("\n\n              "+e._s(t.name)+"\n            ")])],1)],e._v(" "),"input"===t.type&&t.el&&t.el.autoComplete?[n("el-tooltip",{attrs:{disabled:!t.tip,content:t.tip}},[n("el-autocomplete",{staticClass:"inline-input",attrs:{"fetch-suggestions":t.el.query,placeholder:t.placeholder,size:"mini",clearable:""},on:{change:function(n){return e.handleInputChange(t)},select:function(n){return e.handleInputChange(t)}},model:{value:e.formModel[t.name],callback:function(n){e.$set(e.formModel,t.name,n)},expression:"formModel[item.name]"}})],1)]:"input"===t.type?[n("el-tooltip",{attrs:{disabled:!t.tip,content:t.tip}},[n("el-input",{staticClass:"inline-input",class:e.isFold?"":"special-style",attrs:{placeholder:t.placeholder,size:"mini"},on:{change:function(n){return t.callback(e.formModel[t.name])}},model:{value:e.formModel[t.name],callback:function(n){e.$set(e.formModel,t.name,n)},expression:"formModel[item.name]"}})],1)]:e._e(),e._v(" "),"select"===t.type&&t.el&&t.el.create?[n("el-tooltip",{attrs:{disabled:!t.tip,content:t.tip}},[n("span",{staticClass:"filter-label"},[e._v(e._s(t.name)+":")]),e._v(" "),"select"===t.type&&t.el&&t.el.create?n("el-select",{key:a,staticClass:"autoWidth-select",attrs:{"allow-create":t.el.create||!1,filterable:t.el.create||!1,multiple:t.el.multiple,placeholder:t.name,"default-first-option":"",size:"mini"},on:{change:function(e){return t.callback(t.value)}},model:{value:e.formModel[t.name],callback:function(n){e.$set(e.formModel,t.name,n)},expression:"formModel[item.name]"}},[n("template",{slot:"prefix"},[e._v(e._s(t.label+":"+t.value))]),e._v(" "),e._l(t.options,(function(e,t){return n("el-option",{key:t,attrs:{label:e.label,title:e.value,value:e.value}})}))],2):e._e()],1)]:e._e(),e._v(" "),"select"!==t.type||t.el&&t.el.create?e._e():[n("el-tooltip",{attrs:{disabled:!t.tip,content:t.tip}},[n("el-dropdown",{staticClass:"select-dropdown",attrs:{trigger:"click"},on:{command:function(e){t.value=e,t.callback(e)}}},[n("el-button",{attrs:{size:"mini",type:"primary"}},[n("div",{staticClass:"text-content"},[n("span",{staticClass:"content"},[e._v("\n                    "+e._s(e.getLabel(t.value,t.options))+"\n                    "),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})])])]),e._v(" "),n("el-dropdown-menu",{scopedSlots:e._u([{key:"default",fn:function(a){return e._l(t.options,(function(t,a){return n("el-dropdown-item",{key:a,attrs:{command:t.value}},[e._v("\n                  "+e._s(t.label)+"\n                ")])}))}}],null,!0)})],1)],1)],e._v(" "),"switch"===t.type?[n("el-tooltip",{attrs:{disabled:!t.tip,content:t.tip}},[n("el-switch",{attrs:{"active-text":t.name,disabled:t.disabled},on:{change:function(n){return t.callback(e.formModel[t.name])}},model:{value:e.formModel[t.name],callback:function(n){e.$set(e.formModel,t.name,n)},expression:"formModel[item.name]"}})],1)]:e._e()],2)})),e._v(" "),e.toolbar.hasOwnProperty("fold")?n("div",{staticClass:"fold",class:e.isFold?"":"sepcial-icon"},[n("el-tooltip",{attrs:{content:e.$tc("MoreActions"),"open-delay":500,placement:"top"}},[n("i",{staticClass:"fa",class:[e.isFold?"fa-angle-double-right":"fa-angle-double-down"],on:{click:e.onChangeFold}})])],1):e._e()],2),e._v(" "),n("div",{staticClass:"right-side"},e._l(e.toolbar.right,(function(t,a){return n("div",{key:a},[n("el-tooltip",{attrs:{content:t.tip,"open-delay":500}},["button"===t.type?n("el-button",{attrs:{disabled:t.disabled,size:"mini",type:"default"},on:{click:function(e){return t.callback()}}},[t.icon.startsWith("fa")?n("i",{class:"fa "+t.icon}):n("svg-icon",{staticStyle:{"font-size":"14px"},attrs:{"icon-class":t.icon}})],1):e._e()],1)],1)})),0)]),e._v(" "),n("codemirror",{ref:"myCm",staticClass:"editor",style:e.iActions.length>0?{marginLeft:"30px"}:{},attrs:{options:e.iOptions},model:{value:e.iValue,callback:function(t){e.iValue=t},expression:"iValue"}})],1)},r=[],i=(n("2caf"),n("ac4d"),n("8a81"),n("5df3"),n("1c4c"),n("6b54"),n("87b3"),n("1c01"),n("58b2"),n("8e6e"),n("d25f"),n("456d"),n("7f7f"),n("f3e2"),n("ac6a"),n("8615"),n("bd86")),s=n("8f94");n("02f0"),n("9da3"),n("db91"),n("ced0"),n("8536"),n("cc10"),n("b866"),n("9603"),n("b6fc"),n("a7be");function o(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=c(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){o=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw i}}}}function c(e,t){if(e){if("string"===typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){Object(i["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f={components:{codemirror:s["codemirror"]},props:{toolbar:{type:[Array,Object],default:function(){return[]}},value:{type:[String,Object],default:function(){return""}},options:{type:Object,default:function(){return{}}}},data:function(){return{isFold:!0,formModel:{}}},computed:{iActions:function(){var e=this,t=this.toolbar.left||{},n=this.toolbar.fold||{};this.isFold||(t=d(d({},t),n));var a=Object.values(t);return a.forEach((function(t){e.formModel.hasOwnProperty(t.name)||e.$set(e.formModel,t.name,t.value||"")})),a},rules:function(){var e=this,t=this.toolbar.left||{},n=this.toolbar.fold||{};this.isFold||(t=d(d({},t),n));var a={};return Object.values(t).forEach((function(t){t.name===e.$t("RunAs")&&"input"===t.type&&(a[t.name]=[{required:!0,message:e.$t("RequiredRunas"),trigger:"blur"}])})),a},iValue:{get:function(){return this.value},set:function(e){this.$emit("update:value",e),this.$emit("input",e)}},iOptions:function(){var e={tabSize:4,mode:"shell",lineNumbers:!0,theme:"idea",placeholder:"Code goes here...",autofocus:!0};return Object.assign(e,this.options)}},methods:{onChangeFold:function(){this.isFold=!this.isFold},getLabel:function(e,t){var n,a=o(t);try{for(a.s();!(n=a.n()).done;){var r=n.value;if(r.value===e)return r.label}}catch(i){a.e(i)}finally{a.f()}},handleInputChange:function(e){e.callback(this.formModel[e.name]),this.$refs.form.validateField(e.name)}}},h=f,p=(n("335f"),n("2877")),m=Object(p["a"])(h,a,r,!1,null,"405ee108",null);t["a"]=m.exports},"335f":function(e,t,n){"use strict";n("561f")},"3aff":function(e,t,n){},"3d2a":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"upload-key"},[n("input",{ref:"upLoadFile",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:e.onChange}}),e._v(" "),e.fingerprint?n("span",[n("el-button",{attrs:{icon:"el-icon-edit",type:"text"},nativeOn:{click:function(t){return t.stopPropagation(),e.onUpLoad(t)}}},[e._v("\n      "+e._s(this.$t("Update"))+"\n    ")]),e._v(" "),e.fileName?e._e():n("span",{staticClass:"fingerprint"},[e._v(e._s(e.fingerprint))])],1):n("el-button",{attrs:{size:"mini"},nativeOn:{click:function(t){return t.stopPropagation(),e.onUpLoad(t)}}},[e._v("\n    "+e._s(this.$t("SelectFile"))+"\n  ")]),e._v(" "),n("span",[e._v(e._s(e.fileName))]),e._v(" "),""!==e.tip?n("div",[e._v(e._s(e.tip))]):e._e()],1)},r=[],i=(n("aef6"),n("7f7f"),{props:{tip:{type:String,default:function(){return""}},toFormat:{type:String,default:function(){return"string"}},fingerprint:{type:String,default:""}},data:function(){return{fileName:""}},methods:{onUpLoad:function(){this.$refs.upLoadFile.click()},onChange:function(e){var t=e.target.files;if(0!==t.length){var n=this;this.fileName=t[0].name||"";var a=new FileReader;a.onload=function(){var e=this.result;"object"===n.toFormat&&n.fileName.endsWith(".json")&&(e=JSON.parse(e)),n.$emit("input",e)},a.readAsText(t[0])}}}}),s=i,o=(n("889f"),n("2877")),c=Object(o["a"])(s,a,r,!1,null,"39687fd2",null);t["a"]=c.exports},"3e3d":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("DataZTree",e._g({ref:"dataztree",staticClass:"data-z-tree",attrs:{setting:e.treeSetting}},e.$listeners),[e._t("default",[e.menu&&e.menu.length>0?n("div",e._l(e.menu,(function(t){return n("span",{key:t.id},[e.hasMenuItem(t)?n("li",{key:t.id,staticClass:"rmenu",class:{disabled:e.checkDisabled(t)},attrs:{id:t.id,tabindex:"-1"},on:{click:function(n){return e.onMenuItemClick(t)}}},[n("Icon",{staticClass:"icon",attrs:{icon:t.icon}}),e._v(" "+e._s(t.name)+"\n        ")],1):e._e(),e._v(" "),t.divided?n("li",{staticClass:"divider"}):e._e()])})),0):e._e(),e._v(" "),e._t("rMenu")],{slot:"rMenu"})],2)},r=[],i=(n("1c01"),n("58b2"),n("8e6e"),n("d25f"),n("456d"),n("57e7"),n("7f7f"),n("4917"),n("ac6a"),n("f3e2"),n("bd86")),s=(n("d92a"),n("d469")),o=n("35a5"),c=n("c0eb"),l=n("2f62");function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){Object(i["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f={name:"AutoDataZTree",components:{DataZTree:s["a"],Icon:o["a"]},props:{setting:{type:Object,default:function(){}}},data:function(){var e=this;return{defaultMenu:[{id:"m_create",name:this.$t("CreateNode"),icon:"fa-plus-square-o",callback:this.createTreeNode,has:function(){return e.setting.showCreate}},{id:"m_edit",name:this.$t("RenameNode"),icon:"fa-pencil-square-o",callback:this.editTreeNode,has:function(){return e.setting.showUpdate}},{id:"m_del",name:this.$t("DeleteNode"),icon:"fa-minus-square",callback:this.removeTreeNode,has:function(){return e.setting.showDelete}}],defaultSetting:{showDefaultMenu:!0,showMenu:!1,showCreate:!0,showDelete:!0,showUpdate:!0,showSearch:!1,customTreeHeaderName:this.$t("AssetTree"),selectSyncToRoute:!0,async:{enable:!0,url:"".concat(this.setting.treeUrl),autoParam:["id=key","name=n","level=lv"],type:"get",headers:{"X-JMS-ORG":this.$store.getters.currentOrg?this.$store.getters.currentOrg.id:""}},callback:{onRightClick:this.onRightClick.bind(this),onRename:this.onRename.bind(this),onSelected:this.onSelected.bind(this),beforeDrop:this.beforeDrop.bind(this),onDrop:this.onDrop.bind(this),refresh:this.refresh.bind(this),onAsyncSuccess:this.onAsyncSuccess.bind(this)},hasRightMenu:!0},currentNode:"",currentNodeId:""}},computed:d(d({},Object(l["b"])(["currentOrg"])),{},{treeSetting:function(){return this.$log.debug("Settings: ",this.setting),_.merge(this.defaultSetting,this.setting)},zTree:function(){return this.$refs.dataztree.zTree},rMenu:function(){return this.$refs.dataztree.rMenu},menu:function(){var e=[];return this.setting.showDefaultMenu&&(e=e.concat(this.defaultMenu)),this.setting.menu&&this.setting.menu.length>0&&(e=e.concat(this.setting.menu)),e}}),beforeDestroy:function(){Object(c["a"])("body").unbind("mousedown")},methods:{checkDisabled:function(e){var t=e.disabled;return"function"===typeof t&&(t=t(this.currentNode)),"undefined"===typeof t&&(t=!1),t},hasMenu:function(e){return!1},hasMenuItem:function(e){var t=e.has;return"function"===typeof t&&(t=t(this.currentNode)),"undefined"===typeof t&&(t=!0),t},onMenuItemClick:function(e){e.callback(this.currentNode),this.hideRMenu()},onAsyncSuccess:function(e,t,n,a){var r=this,i=JSON.parse(a);i.forEach((function(e){if(n.checked){var t=r.zTree.getNodeByParam("id",e.id,null);t.checked=!0,r.zTree.updateNode(t)}}))},refreshTree:function(){},editTreeNode:function(){this.hideRMenu();var e=this.zTree.getSelectedNodes()[0];if(e){if(e){var t=e.name.match(/^(.+?)\s*\((\d+)\)$/);if(t){var n=t[1],a=parseInt(t[2]);e.name=n,e.meta.data["assetsAmount"]=a}else e.name=e.meta.data.value}this.zTree.editName(e)}},hideRMenu:function(){this.rMenu&&this.rMenu.css({visibility:"hidden"}),Object(c["a"])("body").unbind("mousedown",this.onBodyMouseDown)},onSelected:function(e,t){var n=this.$cookie.get("show_current_asset")||"0";if(this.setting.url){var a="?";-1!==this.setting.url.indexOf("?")&&(a="&");var r="",i=d({},this.$route.query),s=t.meta.data.id;if("node"===t.meta.type)this.currentNode=t,this.currentNodeId=t.meta.data.id,i["node"]=this.currentNodeId,i["asset"]="",r="".concat(this.setting.url).concat(a,"node_id=").concat(s,"&show_current_asset=").concat(n);else if("asset"===t.meta.type){var o;i["asset"]=(null===(o=t.meta.data)||void 0===o?void 0:o.id)||t.id,i["node"]="",r="".concat(this.setting.url).concat(a,"asset_id=").concat(i.asset,"&show_current_asset=").concat(n)}this.setting.selectSyncToRoute&&this.$router.push({query:i}),this.$emit("urlChange",r)}},removeTreeNode:function(){var e=this;this.hideRMenu();var t=this.zTree.getSelectedNodes()[0];t&&this.$axios.delete("".concat(this.treeSetting.nodeUrl).concat(t.meta.data.id,"/")).then((function(){e.$message.success(e.$tc("DeleteSuccessMsg")),e.zTree.removeNode(t),e.refreshTree()})).catch((function(){}))},onRename:function(e,t,n,a){var r,i=this,s=this.currentNodeId||(null===(r=n.meta.data)||void 0===r?void 0:r.id)||"",o="".concat(this.treeSetting.nodeUrl).concat(s,"/");if(!a){var c=n.meta.data["assetsAmount"]||0;this.$axios.patch(o,{value:n.name}).then((function(e){n.name=n.name+" ("+c+")",n.meta.data=Object.assign({},n.meta.data,e),n.meta.data["assetsAmount"]=c,i.zTree.updateNode(n),i.$message.success(i.$tc("UpdateSuccessMsg"))})).finally((function(){i.refreshTree()}))}},onBodyMouseDown:function(e){var t=this.$refs.dataztree.$refs.ztree.iRMenuID;"rMenu"===e.target.id||Object(c["a"])(e.target).parents("#".concat(t)).length>0||this.rMenu.css({visibility:"hidden"})},showRMenu:function(e,t,n){var a,r=this.$refs.dataztree.$refs.ztree.iRMenuID,i=this.$refs.dataztree.$refs.ztree.iZTreeID,s=Object(c["a"])("#".concat(i)).offset(),o=null===(a=document.querySelector(".treebox"))||void 0===a?void 0:a.scrollTop;t-=s.left,t=t<0?0:t,n-=(s.top+o)/3-10,t+=document.body.scrollLeft,n+=document.body.scrollTop+document.documentElement.scrollTop,n+Object(c["a"])("#".concat(r," ul")).height()>=window.innerHeight&&(n-=Object(c["a"])("#".concat(r," ul")).height()),n=n<0?0:n,this.rMenu.css({top:n+"px",left:t+"px",visibility:"visible"}),Object(c["a"])("#".concat(r," ul")).show(),Object(c["a"])("body").bind("mousedown",this.onBodyMouseDown)},onRightClick:function(e,t,n){var a=this.setting.showMenu;if("function"===typeof a&&(a=a(n)),a&&n&&(this.currentNode=n,this.currentNodeId=n.meta.data.id,"-12"!==(null===n||void 0===n?void 0:n.id)))if(n||"button"===e.target.tagName.toLowerCase()||0!==Object(c["a"])(e.target).parents("a").length){if(n&&!n.noR){var r,i;this.zTree.selectNode(n),null!==(r=n.meta)&&void 0!==r&&null!==(i=r.data)&&void 0!==i&&i.id&&(this.currentNodeId=n.meta.data.id),this.showRMenu("node",e.clientX,e.clientY)}}else this.zTree.cancelSelectedNode(),this.showRMenu("root",e.clientX,e.clientY)},beforeDrop:function(e,t,n,a){var r=[];if(c["a"].each(t,(function(e,t){r.push(t.name)})),!n)return!1;var i=this.$t("DropConfirmMsg",{src:r.join(","),dst:n.name});return confirm(i)},onDrop:function(e,t,n,a,r){var i=this,s=[];c["a"].each(n,(function(e,t){s.push(t.meta.data.id)}));var o="".concat(this.treeSetting.nodeUrl).concat(a.meta.data.id,"/children/add/");this.$axios.put(o,{nodes:s}).then((function(e){i.$message.success(i.$tc("UpdateSuccessMsg"))})).catch((function(e){i.$message.error(i.$tc("UpdateErrorMsg "+e))})).finally()},createTreeNode:function(){var e=this;this.hideRMenu();var t=this.zTree.getSelectedNodes()[0];if(t){this.zTree.expandNode(t,!0,!1,!0,!1);var n="".concat(this.treeSetting.nodeUrl).concat(t.meta.data.id,"/children/");this.$axios.post(n,{}).then((function(n){var a={id:n["key"],name:n["value"],pId:t.id,isParent:!0,meta:{data:n,type:"node"}};a.checked=e.zTree.getSelectedNodes()[0].checked,e.zTree.addNodes(t,0,a);var r=e.zTree.getNodeByParam("id",a.id,t);e.currentNodeId=r.meta.data.id||a.id,e.zTree.editName(r),e.$message.success(e.$tc("CreateSuccessMsg"))})).catch((function(t){e.$message.error(e.$tc("CreateErrorMsg")+" "+t)}))}},refresh:function(){},getSelectedNodes:function(){return this.zTree.getSelectedNodes()},getNodes:function(){return this.zTree.getNodes()},selectNode:function(e){return this.zTree.selectNode(e)}}},h=f,p=(n("4071"),n("2877")),m=Object(p["a"])(h,a,r,!1,null,"a92927ce",null);t["a"]=m.exports},4071:function(e,t,n){"use strict";n("0100")},4111:function(e,t,n){"use strict";n("c901")},"48a8":function(e,t,n){},"4c64":function(e,t,n){},"505f":function(e,t,n){},"52ec":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("PasswordInput",{attrs:{attrs:e.attrs,value:e.value},on:{input:e.handleInput}})},r=[],i=(n("1c01"),n("58b2"),n("8e6e"),n("f3e2"),n("d25f"),n("ac6a"),n("456d"),n("bd86")),s=n("768b"),o=(n("3b2b"),n("a337")),c=n("2f62"),l=n("4360"),u=n("0692");function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){Object(i["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h={name:"UserPassword",components:{PasswordInput:o["a"]},props:{value:{type:String,default:""}},rules:function(e){var t=e.el.userIsOrgAdmin;t=void 0===t?l["a"].getters.currentUserIsAdmin:t;var n=l["a"].getters.publicSettings.PASSWORD_RULE,a=function(e,a,r){if(!a)return r();var i=[];if(n["SECURITY_PASSWORD_UPPER_CASE"]&&i.push([/[A-Z]/,u["a"].t("UPPER_CASE_REQUIRED")]),n["SECURITY_PASSWORD_LOWER_CASE"]&&i.push([/[a-z]/,u["a"].t("LOWER_CASE_REQUIRED")]),n["SECURITY_PASSWORD_NUMBER"]&&i.push([/\d/,u["a"].t("NUMBER_REQUIRED")]),n["SECURITY_PASSWORD_SPECIAL_CHAR"]){var o=new RegExp("[`~!@#$^&*()=|{}':;',\\[\\].<>/?~！@#￥……&*（）——|{}【】‘；：”“'。，、？_+-]");i.push([o,u["a"].t("SPECIAL_CHAR_REQUIRED")])}for(var c=0,l=i;c<l.length;c++){var d=Object(s["a"])(l[c],2),f=d[0],h=d[1];if(!f.test(a))return r(new Error(h))}var p=n?n["SECURITY_PASSWORD_MIN_LENGTH"]:7;if(t&&(p=n?n.SECURITY_ADMIN_USER_PASSWORD_MIN_LENGTH:7),a.length<p)return r(new Error(u["a"].t("MIN_LENGTH_ERROR",[p])));r()};return[{required:!1,trigger:"change",validator:a}]},data:function(){return{attrs:{showStrengthMeter:!0}}},computed:f({},Object(c["b"])(["publicSettings"])),methods:{handleInput:function(e){this.$emit("input",e)}}},p=h,m=n("2877"),b=Object(m["a"])(p,a,r,!1,null,"e3b47b18",null);t["a"]=b.exports},5318:function(e,t,n){"use strict";n("c476")},"561f":function(e,t,n){},"56b0":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"box"},[n("el-input",{attrs:{clearable:""},on:{clear:e.onClear,focus:e.showDialog},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}})],1),e._v(" "),n("Dialog",{attrs:{"show-buttons":!1,title:e.$tc("NewCron"),visible:e.showCron,"append-to-body":"",top:"8vh",width:"650px"},on:{"update:visible":function(t){e.showCron=t}}},[n("Crontab",{attrs:{expression:e.expression},on:{fill:e.crontabFill,hide:function(t){e.showCron=!1}}})],1)],1)},r=[],i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-tabs",{staticClass:"tab-content"},[e.shouldHide("min")?n("el-tab-pane",{staticClass:"crontab-panel",attrs:{label:e.$tc("Min")}},[n("CrontabMin",{ref:"cronmin",attrs:{check:e.checkNumber,cron:e.contabValueObj},on:{update:e.updateContabValue}})],1):e._e(),e._v(" "),e.shouldHide("hour")?n("el-tab-pane",{attrs:{label:e.$tc("Hour")}},[n("CrontabHour",{ref:"cronhour",attrs:{check:e.checkNumber,cron:e.contabValueObj},on:{update:e.updateContabValue}})],1):e._e(),e._v(" "),e.shouldHide("day")?n("el-tab-pane",{attrs:{label:e.$tc("Day")}},[n("CrontabDay",{ref:"cronday",attrs:{check:e.checkNumber,cron:e.contabValueObj},on:{update:e.updateContabValue}})],1):e._e(),e._v(" "),e.shouldHide("month")?n("el-tab-pane",{attrs:{label:e.$tc("Month")}},[n("CrontabMonth",{ref:"cronmonth",attrs:{check:e.checkNumber,cron:e.contabValueObj},on:{update:e.updateContabValue}})],1):e._e(),e._v(" "),e.shouldHide("week")?n("el-tab-pane",{attrs:{label:e.$tc("Week")}},[n("CrontabWeek",{ref:"cronweek",attrs:{check:e.checkNumber,cron:e.contabValueObj},on:{update:e.updateContabValue}})],1):e._e()],1),e._v(" "),n("div",{staticClass:"popup-main"},[n("div",{staticClass:"popup-result"},[n("p",{staticClass:"title"},[e._v(e._s(this.$t("TimeExpression")))]),e._v(" "),n("table",[n("thead",e._l(e.tabTitles,(function(t){return n("th",{key:t,attrs:{width:"40"}},[e._v(e._s(t))])})),0),e._v(" "),n("tbody",[n("td",[n("el-input",{attrs:{max:"5",min:"0",onkeyup:"value=value.replace(/[^\\0-9\\-\\*\\,]/g,'')",size:"mini"},model:{value:e.contabValueObj.min,callback:function(t){e.$set(e.contabValueObj,"min","string"===typeof t?t.trim():t)},expression:"contabValueObj.min"}})],1),e._v(" "),n("td",[n("el-input",{attrs:{onkeyup:"value=value.replace(/[^\\0-9\\-\\*\\,]/g,'')",size:"mini"},model:{value:e.contabValueObj.hour,callback:function(t){e.$set(e.contabValueObj,"hour","string"===typeof t?t.trim():t)},expression:"contabValueObj.hour"}})],1),e._v(" "),n("td",[n("el-input",{attrs:{onkeyup:"value=value.replace(/[^\\0-9\\\\-\\*\\,]/g,'')",size:"mini"},model:{value:e.contabValueObj.day,callback:function(t){e.$set(e.contabValueObj,"day","string"===typeof t?t.trim():t)},expression:"contabValueObj.day"}})],1),e._v(" "),n("td",[n("el-input",{attrs:{onkeyup:"value=value.replace(/[^\\0-9\\-\\*\\,]/g,'')",size:"mini"},model:{value:e.contabValueObj.month,callback:function(t){e.$set(e.contabValueObj,"month","string"===typeof t?t.trim():t)},expression:"contabValueObj.month"}})],1),e._v(" "),n("td",[n("el-input",{attrs:{onkeyup:"value=value.replace(/[^\\0-9\\-\\*\\,]/g,'')",size:"mini"},model:{value:e.contabValueObj.week,callback:function(t){e.$set(e.contabValueObj,"week","string"===typeof t?t.trim():t)},expression:"contabValueObj.week"}})],1)])]),e._v(" "),n("CrontabResult",{attrs:{ex:e.contabValueString},on:{crontabDiffChange:e.crontabDiffChangeHandle}})],1),e._v(" "),n("div",{staticClass:"pop_btn"},[n("el-button",{attrs:{size:"small"},on:{click:e.clearCron}},[e._v("\n        "+e._s(this.$t("Reset"))+"\n      ")]),e._v(" "),n("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.submitFill}},[e._v("\n        "+e._s(this.$t("Confirm"))+"\n      ")])],1)])],1)},s=[],o=(n("1c01"),n("58b2"),n("8e6e"),n("f3e2"),n("d25f"),n("ac6a"),n("456d"),n("57e7"),n("bd86")),c=(n("28a5"),n("6762"),n("2fdb"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-form",{attrs:{size:"small"}},[n("el-form-item",[n("el-radio",{attrs:{label:1,size:"mini"},model:{value:e.radioValue,callback:function(t){e.radioValue=t},expression:"radioValue"}},[e._v("\n      "+e._s(this.$t("Min"))+"，"+e._s(this.$t("WildcardsAllowed"))+"[, - * /]\n    ")])],1),e._v(" "),n("el-form-item",[n("el-radio",{attrs:{label:3},model:{value:e.radioValue,callback:function(t){e.radioValue=t},expression:"radioValue"}},[e._v("\n      "+e._s(this.$t("From"))+"\n      "),n("el-input-number",{attrs:{max:59,min:1,size:"mini"},model:{value:e.average02,callback:function(t){e.average02=t},expression:"average02"}}),e._v("\n      "+e._s(this.$t("Min"))+" "+e._s(this.$t("ExecuteOnce"))+"\n    ")],1)],1),e._v(" "),n("el-form-item",[n("el-radio",{attrs:{label:4},model:{value:e.radioValue,callback:function(t){e.radioValue=t},expression:"radioValue"}},[e._v("\n      "+e._s(this.$t("Appoint"))+"\n      "),n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:e.$tc("ManyChoose"),clearable:"",multiple:"",size:"small"},model:{value:e.checkboxList,callback:function(t){e.checkboxList=t},expression:"checkboxList"}},e._l(60,(function(t){return n("el-option",{key:t,attrs:{value:t-1}},[e._v(e._s(t-1))])})),1)],1)],1)],1)}),l=[],u={name:"CrontabMin",props:{cron:{type:Object,default:function(){return{}}},check:{type:Function,default:function(){}}},data:function(){return{radioValue:1,cycle01:1,cycle02:2,average01:0,average02:1,checkboxList:[],checkNum:this.$options.propsData.check}},computed:{cycleTotal:{get:function(){return this.cycle01+"-"+(this.cycle02?this.cycle02:"")},set:function(){this.cycle01=this.checkNum(this.cycle01,0,59),this.cycle02=this.checkNum(this.cycle02,0,59)}},averageTotal:{get:function(){return"*/"+(this.average02?this.average02:0)},set:function(){this.average01=this.checkNum(this.average01,0,59),this.average02=this.checkNum(this.average02,1,59)}},checkboxString:{get:function(){var e=this.checkboxList.join();return""===e?"*":e},set:function(){}}},watch:{radioValue:"radioChange",cycleTotal:"cycleChange",averageTotal:"averageChange",checkboxString:"checkboxChange"},created:function(){var e=this;this.$nextTick((function(){for(var t=[],n=0;n<e.checkboxList.length;n++){var a=e.checkboxList[n];t.push(parseFloat(a))}e.checkboxList=t}))},methods:{radioChange:function(){switch(1!==this.radioValue&&"*"===this.cron.second&&this.$emit("update","second","0","min"),this.radioValue){case 1:this.$emit("update","min","*","min"),this.$emit("update","hour","*","min");break;case 2:this.$emit("update","min",this.cycle01+"-"+this.cycle02,"min");break;case 3:this.$emit("update","min","*/"+this.average02,"min");break;case 4:this.$emit("update","min",this.checkboxString,"min");break}},cycleChange:function(){2===this.radioValue&&this.$emit("update","min",this.cycleTotal,"min")},averageChange:function(){3===this.radioValue&&this.$emit("update","min",this.averageTotal,"min")},checkboxChange:function(){4===this.radioValue&&this.$emit("update","min",this.checkboxString,"min")}}},d=u,f=n("2877"),h=Object(f["a"])(d,c,l,!1,null,"78219c87",null),p=h.exports,m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-form",{attrs:{size:"small"}},[n("el-form-item",[n("el-radio",{attrs:{label:1},model:{value:e.radioValue,callback:function(t){e.radioValue=t},expression:"radioValue"}},[e._v("\n      "+e._s(this.$t("Hour"))+"，"+e._s(this.$t("WildcardsAllowed"))+"[, - * /]\n    ")])],1),e._v(" "),n("el-form-item",[n("el-radio",{attrs:{label:2},model:{value:e.radioValue,callback:function(t){e.radioValue=t},expression:"radioValue"}},[e._v("\n      "+e._s(this.$t("From"))+"\n      "),n("el-input-number",{attrs:{max:23,min:0,size:"mini"},model:{value:e.cycle01,callback:function(t){e.cycle01=t},expression:"cycle01"}}),e._v("\n      -\n      "),n("el-input-number",{attrs:{max:23,min:0,size:"mini"},model:{value:e.cycle02,callback:function(t){e.cycle02=t},expression:"cycle02"}}),e._v("\n      "+e._s(this.$t("Hour"))+"\n    ")],1)],1),e._v(" "),n("el-form-item",[n("el-radio",{attrs:{label:3},model:{value:e.radioValue,callback:function(t){e.radioValue=t},expression:"radioValue"}},[e._v("\n      "+e._s(this.$t("Every"))+"\n      "),n("el-input-number",{attrs:{max:23,min:1,size:"mini"},model:{value:e.average02,callback:function(t){e.average02=t},expression:"average02"}}),e._v("\n      "+e._s(this.$t("Hour"))+" "+e._s(this.$t("ExecuteOnce"))+"\n    ")],1)],1),e._v(" "),n("el-form-item",[n("el-radio",{attrs:{label:4},model:{value:e.radioValue,callback:function(t){e.radioValue=t},expression:"radioValue"}},[e._v("\n      "+e._s(this.$t("Appoint"))+"\n      "),n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:e.$tc("ManyChoose"),clearable:"",multiple:""},model:{value:e.checkboxList,callback:function(t){e.checkboxList=t},expression:"checkboxList"}},e._l(24,(function(t){return n("el-option",{key:t,attrs:{value:t-1}},[e._v(e._s(t-1))])})),1)],1)],1)],1)},b=[],v={name:"CrontabHour",props:{cron:{type:Object,default:function(){return{}}},check:{type:Function,default:function(){}}},data:function(){return{radioValue:1,cycle01:0,cycle02:1,average01:0,average02:1,checkboxList:[],checkNum:this.$options.propsData.check}},computed:{cycleTotal:{get:function(){return this.cycle01+"-"+this.cycle02},set:function(){this.cycle01=this.checkNum(this.cycle01,0,23),this.cycle02=this.checkNum(this.cycle02,0,23)}},averageTotal:{get:function(){return"*/"+this.average02},set:function(){this.average01=this.checkNum(this.average01,0,23),this.average02=this.checkNum(this.average02,1,23)}},checkboxString:{get:function(){var e=this.checkboxList.join();return""===e?"*":e},set:function(){}}},watch:{radioValue:"radioChange",cycleTotal:"cycleChange",averageTotal:"averageChange",checkboxString:"checkboxChange"},created:function(){var e=this;this.$nextTick((function(){for(var t=[],n=0;n<e.checkboxList.length;n++){var a=e.checkboxList[n];t.push(parseFloat(a))}e.checkboxList=t}))},methods:{radioChange:function(){switch(1===this.radioValue?this.$emit("update","hour","*","hour"):("*"===this.cron.min&&this.$emit("update","min","0","hour"),"*"===this.cron.second&&this.$emit("update","second","0","hour")),this.radioValue){case 2:this.$emit("update","hour",this.cycle01+"-"+this.cycle02);break;case 3:this.$emit("update","hour","*/"+this.average02);break;case 4:this.$emit("update","hour",this.checkboxString);break}},cycleChange:function(){2===this.radioValue&&this.$emit("update","hour",this.cycleTotal)},averageChange:function(){3===this.radioValue&&this.$emit("update","hour",this.averageTotal)},checkboxChange:function(){4===this.radioValue&&this.$emit("update","hour",this.checkboxString)}}},g=v,y=Object(f["a"])(g,m,b,!1,null,"2e47bf5f",null),w=y.exports,$=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-form",{attrs:{size:"small"}},[n("el-form-item",[n("el-radio",{attrs:{label:1},model:{value:e.radioValue,callback:function(t){e.radioValue=t},expression:"radioValue"}},[e._v("\n      "+e._s(this.$t("Day"))+"，"+e._s(this.$t("WildcardsAllowed"))+"[, - * /]\n    ")])],1),e._v(" "),n("el-form-item",[n("el-radio",{attrs:{label:3},model:{value:e.radioValue,callback:function(t){e.radioValue=t},expression:"radioValue"}},[e._v("\n      "+e._s(this.$t("From"))+"\n      "),n("el-input-number",{attrs:{max:31,min:0,size:"mini"},model:{value:e.cycle01,callback:function(t){e.cycle01=t},expression:"cycle01"}}),e._v(" -\n      "),n("el-input-number",{attrs:{max:31,min:0,size:"mini"},model:{value:e.cycle02,callback:function(t){e.cycle02=t},expression:"cycle02"}}),e._v(" "+e._s(this.$t("Day"))+"\n    ")],1)],1),e._v(" "),n("el-form-item",[n("el-radio",{attrs:{label:4},model:{value:e.radioValue,callback:function(t){e.radioValue=t},expression:"radioValue"}},[e._v("\n      "+e._s(this.$t("Every"))+"\n      "),n("el-input-number",{attrs:{max:31,min:1,size:"mini"},model:{value:e.average02,callback:function(t){e.average02=t},expression:"average02"}}),e._v(" "+e._s(this.$t("Day"))+" "+e._s(this.$t("ExecuteOnce"))+"\n    ")],1)],1),e._v(" "),n("el-form-item",[n("el-radio",{attrs:{label:7},model:{value:e.radioValue,callback:function(t){e.radioValue=t},expression:"radioValue"}},[e._v("\n      "+e._s(this.$t("Appoint"))+"\n      "),n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:e.$tc("ManyChoose"),clearable:"",multiple:""},model:{value:e.checkboxList,callback:function(t){e.checkboxList=t},expression:"checkboxList"}},e._l(31,(function(t){return n("el-option",{key:t,attrs:{value:t}},[e._v(e._s(t))])})),1)],1)],1)],1)},O=[],k={name:"CrontabDay",props:{cron:{type:Object,default:function(){return{}}},check:{type:Function,default:function(){}}},data:function(){return{radioValue:1,workday:1,cycle01:1,cycle02:2,average01:1,average02:1,checkboxList:[],checkNum:this.$options.propsData.check}},computed:{cycleTotal:{get:function(){return this.cycle01+"-"+this.cycle02},set:function(){this.cycle01=this.checkNum(this.cycle01,1,31),this.cycle02=this.checkNum(this.cycle02,1,31)}},averageTotal:{get:function(){return"*/"+this.average02},set:function(){this.average01=this.checkNum(this.average01,1,31),this.average02=this.checkNum(this.average02,1,31)}},checkboxString:{get:function(){var e=this.checkboxList.join();return""===e?"*":e},set:function(){}}},watch:{radioValue:"radioChange",cycleTotal:"cycleChange",averageTotal:"averageChange",workdayCheck:"workdayChange",checkboxString:"checkboxChange"},created:function(){var e=this;this.$nextTick((function(){for(var t=[],n=0;n<e.checkboxList.length;n++){var a=e.checkboxList[n];t.push(parseFloat(a))}e.checkboxList=t}))},methods:{radioChange:function(){switch(1===this.radioValue?this.$emit("update","day","*","day"):("*"===this.cron.hour&&this.$emit("update","hour","0","day"),"*"===this.cron.min&&this.$emit("update","min","0","day"),"*"===this.cron.second&&this.$emit("update","second","0","day")),this.radioValue){case 2:this.$emit("update","day","?");break;case 3:this.$emit("update","day",this.cycle01+"-"+this.cycle02);break;case 4:this.$emit("update","day","*/"+this.average02);break;case 5:this.$emit("update","day",this.workday+"W");break;case 6:this.$emit("update","day","L");break;case 7:this.$emit("update","day",this.checkboxString);break}},cycleChange:function(){3===this.radioValue&&this.$emit("update","day",this.cycleTotal)},averageChange:function(){4===this.radioValue&&this.$emit("update","day",this.averageTotal)},workdayChange:function(){5===this.radioValue&&this.$emit("update","day",this.workday+"W")},checkboxChange:function(){7===this.radioValue&&this.$emit("update","day",this.checkboxString)},weekChange:function(){"?"===this.cron.week&&2===this.radioValue?this.radioValue="1":"?"!==this.cron.week&&2!==this.radioValue&&(this.radioValue="2")}}},S=k,x=Object(f["a"])(S,$,O,!1,null,"3d1423f0",null),j=x.exports,C=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-form",{attrs:{size:"small"}},[n("el-form-item",[n("el-radio",{attrs:{label:1},model:{value:e.radioValue,callback:function(t){e.radioValue=t},expression:"radioValue"}},[e._v("\n      "+e._s(this.$t("Month"))+"，"+e._s(this.$t("WildcardsAllowed"))+"[, - * /]\n    ")])],1),e._v(" "),n("el-form-item",[n("el-radio",{attrs:{label:2},model:{value:e.radioValue,callback:function(t){e.radioValue=t},expression:"radioValue"}},[e._v("\n      "+e._s(this.$t("From"))+"\n      "),n("el-input-number",{attrs:{max:12,min:1,size:"mini"},model:{value:e.cycle01,callback:function(t){e.cycle01=t},expression:"cycle01"}}),e._v(" -\n      "),n("el-input-number",{attrs:{max:12,min:1,size:"mini"},model:{value:e.cycle02,callback:function(t){e.cycle02=t},expression:"cycle02"}}),e._v(" "+e._s(this.$t("Month"))+"\n    ")],1)],1),e._v(" "),n("el-form-item",[n("el-radio",{attrs:{label:3},model:{value:e.radioValue,callback:function(t){e.radioValue=t},expression:"radioValue"}},[e._v("\n      "+e._s(this.$t("Every"))+"\n      "),n("el-input-number",{attrs:{max:12,min:1,size:"mini"},model:{value:e.average02,callback:function(t){e.average02=t},expression:"average02"}}),e._v(" "+e._s(this.$t("Month"))+" "+e._s(this.$t("ExecuteOnce"))+"\n    ")],1)],1),e._v(" "),n("el-form-item",[n("el-radio",{attrs:{label:4},model:{value:e.radioValue,callback:function(t){e.radioValue=t},expression:"radioValue"}},[e._v("\n      "+e._s(this.$t("Appoint"))+"\n      "),n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:e.$tc("ManyChoose"),clearable:"",multiple:""},model:{value:e.checkboxList,callback:function(t){e.checkboxList=t},expression:"checkboxList"}},e._l(12,(function(t){return n("el-option",{key:t,attrs:{value:t}},[e._v(e._s(t))])})),1)],1)],1)],1)},A=[],D={name:"CrontabMonth",props:{cron:{type:Object,default:function(){return{}}},check:{type:Function,default:function(){}}},data:function(){return{radioValue:1,cycle01:1,cycle02:2,average01:1,average02:1,checkboxList:[],checkNum:this.check}},computed:{cycleTotal:{get:function(){return this.cycle01+"-"+this.cycle02},set:function(){this.cycle01=this.checkNum(this.cycle01,1,12),this.cycle02=this.checkNum(this.cycle02,1,12)}},averageTotal:{get:function(){return"*/"+this.average02},set:function(){this.average01=this.checkNum(this.average01,1,12),this.average02=this.checkNum(this.average02,1,12)}},checkboxString:{get:function(){var e=this.checkboxList.join();return""===e?"*":e},set:function(){}}},watch:{radioValue:"radioChange",cycleTotal:"cycleChange",averageTotal:"averageChange",checkboxString:"checkboxChange"},created:function(){var e=this;this.$nextTick((function(){for(var t=[],n=0;n<e.checkboxList.length;n++){var a=e.checkboxList[n];t.push(parseFloat(a))}e.checkboxList=t}))},methods:{radioChange:function(){switch(1===this.radioValue?this.$emit("update","month","*"):("*"===this.cron.day&&this.$emit("update","day","*","month"),"*"===this.cron.hour&&this.$emit("update","hour","0","month"),"*"===this.cron.min&&this.$emit("update","min","0","month"),"*"===this.cron.second&&this.$emit("update","second","0","month")),this.radioValue){case 2:this.$emit("update","month",this.cycle01+"-"+this.cycle02);break;case 3:this.$emit("update","month","*/"+this.average02);break;case 4:this.$emit("update","month",this.checkboxString);break}},cycleChange:function(){2===this.radioValue&&this.$emit("update","month",this.cycleTotal)},averageChange:function(){3===this.radioValue&&this.$emit("update","month",this.averageTotal)},checkboxChange:function(){4===this.radioValue&&this.$emit("update","month",this.checkboxString)}}},T=D,P=Object(f["a"])(T,C,A,!1,null,"5eb6e1b1",null),V=P.exports,R=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-form",{attrs:{size:"small"}},[n("el-form-item",[n("el-radio",{attrs:{label:1},model:{value:e.radioValue,callback:function(t){e.radioValue=t},expression:"radioValue"}},[e._v("\n      "+e._s(this.$t("Week"))+"，"+e._s(this.$t("WildcardsAllowed"))+"[, - * /]\n    ")])],1),e._v(" "),n("el-form-item",[n("el-radio",{attrs:{label:3},model:{value:e.radioValue,callback:function(t){e.radioValue=t},expression:"radioValue"}},[e._v("\n      "+e._s(this.$t("CycleFromWeek"))+"\n      "),n("el-input-number",{attrs:{max:7,min:1,size:"mini"},model:{value:e.cycle01,callback:function(t){e.cycle01=t},expression:"cycle01"}}),e._v(" -\n      "),n("el-input-number",{attrs:{max:7,min:1,size:"mini"},model:{value:e.cycle02,callback:function(t){e.cycle02=t},expression:"cycle02"}})],1)],1),e._v(" "),n("el-form-item",[n("el-radio",{attrs:{label:6},model:{value:e.radioValue,callback:function(t){e.radioValue=t},expression:"radioValue"}},[e._v("\n      "+e._s(this.$t("Appoint"))+"\n      "),n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:e.$tc("ManyChoose"),clearable:"",multiple:""},model:{value:e.checkboxList,callback:function(t){e.checkboxList=t},expression:"checkboxList"}},e._l(e.weekList,(function(t,a){return n("el-option",{key:a,attrs:{value:6===a?0:a+1}},[e._v("\n          "+e._s(t)+"\n        ")])})),1)],1)],1)],1)},E=[],M={name:"CrontabWeek",props:{cron:{type:Object,default:function(){return{}}},check:{type:Function,default:function(){}}},data:function(){return{radioValue:2,weekday:1,cycle01:1,cycle02:2,average01:1,average02:1,checkboxList:[],weekList:[this.$t("Monday"),this.$t("Tuesday"),this.$t("Wednesday"),this.$t("Thursday"),this.$t("Friday"),this.$t("Saturday"),this.$t("Sunday")],checkNum:this.$options.propsData.check}},computed:{cycleTotal:{get:function(){return this.cycle01+"-"+this.cycle02},set:function(){this.cycle01=this.checkNum(this.cycle01,1,7),this.cycle02=this.checkNum(this.cycle02,1,7)}},averageTotal:{get:function(){return this.average01+"#"+this.average02},set:function(){this.average01=this.checkNum(this.average01,1,4),this.average02=this.checkNum(this.average02,1,7)}},checkboxString:{get:function(){var e=this.checkboxList.join();return""===e?"*":e},set:function(){}}},watch:{radioValue:"radioChange",cycleTotal:"cycleChange",averageTotal:"averageChange",weekdayCheck:"weekdayChange",checkboxString:"checkboxChange"},created:function(){var e=this;this.$nextTick((function(){for(var t=[],n=0;n<e.checkboxList.length;n++){var a=e.checkboxList[n];t.push(parseFloat(a))}e.checkboxList=t}))},methods:{radioChange:function(){switch(1===this.radioValue?(this.$emit("update","week","*"),this.$emit("update","year","*")):("*"===this.cron.month&&this.$emit("update","month","*","week"),"*"===this.cron.day&&this.$emit("update","day","*","week"),"*"===this.cron.hour&&this.$emit("update","hour","*","week"),"*"===this.cron.min&&this.$emit("update","min","*","week"),"*"===this.cron.second&&this.$emit("update","second","*","week")),this.radioValue){case 2:this.$emit("update","week","?");break;case 3:this.$emit("update","week",this.cycle01+"-"+this.cycle02);break;case 4:this.$emit("update","week",this.average01+"#"+this.average02);break;case 5:this.$emit("update","week",this.weekday+"L");break;case 6:this.$emit("update","week",this.checkboxString);break}},cycleChange:function(){3===this.radioValue&&this.$emit("update","week",this.cycleTotal)},averageChange:function(){4===this.radioValue&&this.$emit("update","week",this.averageTotal)},weekdayChange:function(){5===this.radioValue&&this.$emit("update","week",this.weekday+"L")},checkboxChange:function(){6===this.radioValue&&this.$emit("update","week",this.checkboxString)}}},I=M,N=Object(f["a"])(I,R,E,!1,null,"580bbb1a",null),L=N.exports,U=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"popup-result-time"},[n("p",{staticClass:"title"},[e._v(e._s(this.$t("RunningTimes")))]),e._v(" "),n("ul",{staticClass:"popup-result-scroll"},[e.isShow?e._l(e.resultList,(function(t){return n("li",{key:t},[e._v(e._s(t))])})):n("li",[e._v(e._s(this.$t("CalculationResults")))])],2)])},F=[],z=(n("6b54"),n("87b3"),n("f8d86")),B=n.n(z),H=n("3f95"),q={name:"CrontabResult",props:{ex:{type:String,default:function(){return""}}},data:function(){return{dayRule:"",dayRuleSup:"",dateArr:[],resultList:[],isShow:!1}},watch:{ex:"expressionChange222"},mounted:function(){this.expressionChange222()},methods:{expressionChange222:function(){this.isShow=!0;var e="0 "+this.$options.propsData.ex;try{this.resultList=[];for(var t=B.a.parseExpression(e),n=0;n<5;n++){var a=t.next().toString();this.resultList.push(Object(H["i"])(a))}var r=new Date(this.resultList[0]),i=new Date(this.resultList[1]),s=Math.abs(i-r);this.$emit("crontabDiffChange",s)}catch(o){this.isShow=!1}}}},W=q,K=(n("a5db"),Object(f["a"])(W,U,F,!1,null,"29c1b85f",null)),G=K.exports;function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Y={name:"VCrontab",components:{CrontabMin:p,CrontabHour:w,CrontabDay:j,CrontabMonth:V,CrontabWeek:L,CrontabResult:G},props:{expression:{type:String,default:function(){return""}},hideComponent:{type:Array,default:function(){return[]}}},data:function(){return{tabTitles:[this.$t("Min"),this.$t("Hour"),this.$t("Day"),this.$t("Month"),this.$t("Week")],tabActive:0,myindex:0,contabValueObj:{second:"0",min:"0",hour:"*",day:"*",month:"*",week:"*"},newContabValueString:"",crontabDiff:0}},computed:{contabValueString:{get:function(){var e=this.contabValueObj,t=e.min+" "+e.hour+" "+e.day+" "+e.month+" "+e.week;return t},set:function(){}}},watch:{expression:"resolveExp",hideComponent:function(e){}},mounted:function(){this.resolveExp()},methods:{shouldHide:function(e){return!this.hideComponent||!this.hideComponent.includes(e)},resolveExp:function(){if(this.expression){var e=this.expression.split(" ");if(e.length>=5){var t={min:e[0],hour:e[1],day:e[2],month:e[3],week:e[4]};for(var n in this.contabValueObj=Q(Q({},this.contabValueObj),t),t)t[n]&&this.changeRadio(n,t[n])}}else this.clearCron()},tabCheck:function(e){this.tabActive=e},updateContabValue:function(e,t,n){this.contabValueObj[e]=t,n&&n!==e&&this.changeRadio(e,t)},changeRadio:function(e,t){var n,a=["second","min","hour","month"],r="cron"+e;if(this.$refs[r]){if(a.includes(e))if("*"===t)n=1;else if(t.indexOf("-")>-1){var i=t.split("-");isNaN(i[0])?this.$refs[r].cycle01=0:this.$refs[r].cycle01=i[0],this.$refs[r].cycle02=i[1],n=2}else if(t.indexOf("/")>-1){var s=t.split("/");isNaN(s[0])?this.$refs[r].average01=0:this.$refs[r].average01=s[0],this.$refs[r].average02=s[1],n=3}else n=4,this.$refs[r].checkboxList=t.split(",");else if("day"===e)if("*"===t)n=1;else if("?"===t)n=2;else if(t.indexOf("-")>-1){var o=t.split("-");isNaN(o[0])?this.$refs[r].cycle01=0:this.$refs[r].cycle01=o[0],this.$refs[r].cycle02=o[1],n=3}else if(t.indexOf("/")>-1){var c=t.split("/");isNaN(c[0])?this.$refs[r].average01=0:this.$refs[r].average01=c[0],this.$refs[r].average02=c[1],n=4}else if(t.indexOf("W")>-1){var l=t.split("W");isNaN(l[0])?this.$refs[r].workday=0:this.$refs[r].workday=l[0],n=5}else"L"===t?n=6:(this.$refs[r].checkboxList=t.split(","),n=7);else if("week"===e)if("*"===t)n=1;else if("?"===t)n=2;else if(t.indexOf("-")>-1){var u=t.split("-");isNaN(u[0])?this.$refs[r].cycle01=0:this.$refs[r].cycle01=u[0],this.$refs[r].cycle02=u[1],n=3}else if(t.indexOf("#")>-1){var d=t.split("#");isNaN(d[0])?this.$refs[r].average01=1:this.$refs[r].average01=d[0],this.$refs[r].average02=d[1],n=4}else if(t.indexOf("L")>-1){var f=t.split("L");isNaN(f[0])?this.$refs[r].weekday=1:this.$refs[r].weekday=f[0],n=5}else this.$refs[r].checkboxList=t.split(","),n=6;else"year"===e&&(""===t?n=1:"*"===t?n=2:t.indexOf("-")>-1?n=3:t.indexOf("/")>-1?n=4:(this.$refs[r].checkboxList=t.split(","),n=5));this.$refs[r].radioValue=n}},checkNumber:function(e,t,n){return e=Math.floor(e),e<t?e=t:e>n&&(e=n),e},hidePopup:function(){this.$emit("hide")},submitFill:function(){var e=60,t=this.crontabDiff/1e3/60;if(t>0&&t<e){var n=this.$t("CrontabDiffError",{minutes:e});this.$message.error(n)}else this.$emit("fill",this.contabValueString),this.hidePopup()},clearCron:function(){for(var e in this.contabValueObj={second:"0",min:"0",hour:"0",day:"*",month:"*",week:"*"},this.contabValueObj)this.changeRadio(e,this.contabValueObj[e])},crontabDiffChangeHandle:function(e){this.crontabDiff=e}}},J=Y,X=(n("fec5"),Object(f["a"])(J,i,s,!1,null,"162b4590",null)),ee=X.exports,te=n("9039"),ne={components:{Crontab:ee,Dialog:te["a"]},props:{value:{type:String,default:""}},data:function(){return{input:_.cloneDeep(this.value),expression:_.cloneDeep(this.value),showCron:!1}},watch:{value:{handler:function(e){this.crontabFill(e)}}},methods:{crontabFill:function(e){this.input=e,this.$emit("change",e)},showDialog:function(){this.expression=this.input,this.showCron=!0},onClear:function(){this.input="",this.$emit("change","")}}},ae=ne,re=(n("873a"),Object(f["a"])(ae,a,r,!1,null,"33e15f98",null));t["a"]=re.exports},5838:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Drawer",{staticClass:"drawer",attrs:{title:e.title,visible:e.iVisible},on:{"close-drawer":e.handleCloseDrawer}},[n("Page",{attrs:{title:"null"}},[n("IBox",{staticClass:"content"},[e.loading?e._e():n("AccountCreateUpdateForm",{ref:"form",attrs:{account:e.account,"add-template":e.addTemplate,asset:e.asset},on:{add:e.addAccount,edit:e.editAccount}})],1)],1)],1)},r=[],i=(n("ac4d"),n("8a81"),n("5df3"),n("1c4c"),n("7f7f"),n("6b54"),n("87b3"),n("1c01"),n("58b2"),n("8e6e"),n("f3e2"),n("d25f"),n("ac6a"),n("456d"),n("2caf"),n("bd86")),s=n("ca50"),o=n("f422"),c=n("e9f9"),l=n("83b2");function u(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=d(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){o=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw i}}}}function d(e,t){if(e){if("string"===typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){Object(i["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m={name:"CreateAccountDialog",components:{IBox:c["a"],Drawer:s["a"],Page:l["a"],AccountCreateUpdateForm:o["a"]},props:{visible:{type:Boolean,default:!1},addTemplate:{type:Boolean,default:!1},asset:{type:Object,default:null},account:{type:Object,default:function(){return{}}},title:{type:String,default:function(){return this.$t("AddAccount")}}},data:function(){return{loading:!1,platform:{}}},computed:{protocols:function(){return this.asset?this.asset.protocol:[]},iVisible:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e)}}},methods:{addAccount:function(e){var t,n,a,r=this,i=Object.assign({},e);if(this.asset)t=p({asset:this.asset.id},i),a=!1,n="/api/v1/accounts/accounts/";else if(a=!0,t=i,n="/api/v1/accounts/accounts/bulk/",0===t.assets.length)return void this.$message.error(this.$tc("PleaseSelectAsset"));this.$axios.post(n,t,{disableFlashErrorMsg:a}).then((function(e){r.handleResult(e,null),r.iVisible=a,a||r.$emit("add",!0)})).catch((function(e){r.iVisible=!0,r.handleResult(null,e)}))},editAccount:function(e){var t=this,n=p({},e),a=this.$route.query.flag;switch(a){case"copy":this.handleAccountOperation(this.account.id,"copy-to-assets",n);break;case"move":this.handleAccountOperation(this.account.id,"move-to-assets",n);break;default:this.$axios.patch("/api/v1/accounts/accounts/".concat(this.account.id,"/"),n).then((function(){t.iVisible=!1,t.$emit("add",!0),t.$message.success(t.$tc("UpdateSuccessMsg"))})).catch((function(e){return t.setFieldError(e)}))}},handleResult:function(e,t){var n,a,r=!this.asset;(t&&!Array.isArray(null===t||void 0===t||null===(n=t.response)||void 0===n?void 0:n.data)&&(r=!1),e&&!Array.isArray(e)&&(r=!1),r)?(a=t?t.response.data:e,this.$emit("bulk-create-done",a)):t?this.setFieldError(t):this.$message.success(this.$tc("CreateSuccessMsg"))},setFieldError:function(e){var t=e.response,n=t.data,a=this.$refs.form.$refs.AutoDataForm;if(400===t.status)for(var r=0,i=Object.keys(n);r<i.length;r++){var s,o=i[r],c="",l=o,d=n[l];if(d instanceof Array){d=_.filter(d,(function(e){return Object.keys(e).length>0}));var f,h=u(d);try{for(h.s();!(f=h.n()).done;){var p,m=f.value;if(m instanceof Object)c+=null===m||void 0===m||null===(p=m.port)||void 0===p?void 0:p.join(",");else c+=d}}catch(c){h.e(c)}finally{h.f()}}else c=d;if("secret"===l)l=(null===(s=a.form.secret_type)||void 0===s?void 0:s.value)||o;a.setFieldError(l,c)}},handleCloseDrawer:function(){this.iVisible=!1},handleAccountOperation:function(e,t,n){var a=this;this.$axios.post("/api/v1/accounts/accounts/".concat(e,"/").concat(t,"/"),n).then((function(e){a.iVisible=!1,a.$emit("add",!0),a.handleResult(e,null)})).catch((function(e){return a.handleResult(null,e)}))}}},b=m,v=(n("2c83"),n("2877")),g=Object(v["a"])(b,a,r,!1,null,"766b869c",null);t["a"]=g.exports},"58a0":function(e,t,n){},"58d4":function(e,t,n){"use strict";n("1a2c")},5917:function(e,t,n){},"591f":function(e,t,n){},"5c28":function(e,t,n){},"5f2d":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"box"},[n("div",{staticStyle:{"margin-bottom":"12px"}},[n("Title",{attrs:{config:e.config}})],1),e._v(" "),n("div",{staticClass:"content"},e._l(e.items,(function(t){return n("SummaryCard",e._b({key:t.title,staticClass:"summary-card",attrs:{title:t.title}},"SummaryCard",t.body,!1))})),1)])},r=[],i=n("a505"),s=n("ced5"),o={components:{Title:i["a"],SummaryCard:s["a"]},props:{config:{type:Object,default:function(){return{title:"",tip:""}}},items:{type:Array,default:function(){return[]}}},data:function(){return{}}},c=o,l=(n("fe09"),n("2877")),u=Object(l["a"])(c,a,r,!1,null,"724521d7",null);t["a"]=u.exports},"61cb":function(e,t,n){"use strict";n("2dfb")},6282:function(e,t,n){"use strict";n("a00f")},6557:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-collapse-transition",[n("div",{staticClass:"tree-table-content"},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.iShowTree,expression:"iShowTree"}],staticClass:"left",class:e.iShowTree?"":"hidden",style:{width:e.treeWidth}},["AutoDataZTree"===e.component?n("span",{staticClass:"title"},[e._v("\n        "+e._s(e.$t("AssetTree"))+"\n      ")]):e._e(),e._v(" "),n(e.component,e._g(e._b({key:e.componentTreeKey,ref:"AutoDataZTree",tag:"component",staticClass:"auto-data-ztree",attrs:{setting:e.treeSetting},on:{urlChange:e.handleUrlChange},scopedSlots:e._u([{key:"rMenu",fn:function(t){var a=t.data;return n("div",{},[e._t("rMenu",null,{data:a})],2)}}],null,!0)},"component",e.treeTabConfig,!1),e.$listeners))],1),e._v(" "),n("div",{staticClass:"right",staticStyle:{display:"flex"},style:{width:e.iShowTree?"calc(100% - "+e.treeWidth+")":"100%"}},[n("div",{staticClass:"mini"},[n("div",{staticClass:"mini-button",class:{"is-show":e.iShowTree},on:{click:function(t){e.iShowTree=!e.iShowTree}}},[n("svg-icon",{staticClass:"icon-left",style:{transform:e.iShowTree?"none":"rotate(180deg)"},attrs:{"icon-class":"double-left"}})],1)]),e._v(" "),n("div",{staticClass:"transition-box",staticStyle:{width:"calc(100% - 7px)"}},[e._t("table",[n("ListTable",e._g({key:e.componentKey,ref:"ListTable",attrs:{"header-actions":e.headerActions,"quick-filters":e.quickFilters,"quick-summary":e.quickSummary,"table-config":e.iTableConfig,"create-drawer":e.createDrawer}},e.$listeners))])],2)])])])},r=[],i=(n("1c01"),n("58b2"),n("8e6e"),n("f3e2"),n("d25f"),n("ac6a"),n("456d"),n("bd86")),s=n("9039"),o=n("dbfd"),c=n("ae05"),l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-tree",{attrs:{data:e.data,props:e.defaultProps},on:{"node-click":e.handleNodeClick}})],1)},u=[],d={name:"FileTree",data:function(){return{data:[{label:"roles",children:[{label:"a.yml"}]},{label:"vars",children:[{label:"a.yml"}]},{label:"main.yml"}],defaultProps:{children:"children",label:"label"}}},methods:{handleNodeClick:function(e){}}},f=d,h=n("2877"),p=Object(h["a"])(f,l,u,!1,null,"29917fe8",null),m=p.exports,b=n("e9f9"),v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tree-tab"},[e.tabIndices.length>0?n("el-tabs",{staticClass:"page-submenu",class:{"only-submenu":1===e.tabIndices.length},attrs:{stretch:""},on:{"tab-click":e.handleTabClick},model:{value:e.iActiveMenu,callback:function(t){e.iActiveMenu=t},expression:"iActiveMenu"}},[e._l(e.tabIndices,(function(t){return[n("el-tab-pane",{key:t.name,attrs:{disabled:t.disabled,"label-content":t.labelContent,name:t.name}},[n("span",{staticClass:"tab-container",attrs:{slot:"label"},slot:"label"},[t.icon&&!e.showText?n("i",{staticClass:"tab-icon fa ",class:t.icon}):e._e(),e._v(" "),e.showText?n("span",{staticClass:"tab-text"},[e._v(e._s(t.title))]):e._e(),e._v(" "),e._t("badge",null,{tab:t.name})],2)])]}))],2):e._e(),e._v(" "),n("transition",{attrs:{appear:"",mode:"out-in",name:"fade-transform"}},[e._t("default",[e.flag?n("keep-alive",[n("AutoDataZTree",{key:e.componentKey,ref:"AutoDataZTree",attrs:{setting:e.activeTreeSetting},on:{urlChange:e.handleUrlChange},scopedSlots:e._u([{key:"rMenu",fn:function(t){var a=t.data;return n("div",{},[e._t("rMenu",null,{data:a})],2)}}],null,!0)})],1):e._e()])],2)],1)},g=[],y=(n("2caf"),n("ac4d"),n("8a81"),n("5df3"),n("1c4c"),n("6b54"),n("87b3"),n("7618")),w=(n("7f7f"),n("96cf"),n("3b8d")),$=n("3e3d"),O=n("7ce2"),k=n.n(O);function S(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=x(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){o=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw i}}}}function x(e,t){if(e){if("string"===typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j(e,t):void 0}}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var C="activeTreeTab",A={name:"TabTree",components:{AutoDataZTree:$["a"]},props:{submenu:{type:Array,default:function(){return[]}},activeMenu:{type:String,required:!0}},data:function(){return{flag:!1,componentKey:1,activeTreeSetting:{},showText:!0,keyMap:{}}},computed:{iActiveMenu:{get:function(){return this.activeMenu},set:function(e){this.$emit("update:activeMenu",e),this.changeTreeSetting(e)}},tabIndices:function(){var e=[];return this.submenu.forEach((function(t){var n="function"===typeof t.hidden?t.hidden():t.hidden;n||e.push(t)})),e}},watch:{activeMenu:function(e){this.changeTreeSetting(e)}},mounted:function(){var e=Object(w["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getPropActiveTab();case 2:this.iActiveMenu=e.sent,this.hiddenTextIfNeed();case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{hiddenTextIfNeed:function(){var e=this,t=_.debounce((function(){var t=document.querySelector(".tree-tab .el-tabs__nav-wrap.is-scrollable");e.showText=!t}),800);t(),window.addEventListener("resize",t)},hideRMenu:function(){var e;null===(e=this.$refs.AutoDataZTree)||void 0===e||e.hideRMenu()},getSelectedNodes:function(){return this.$refs.AutoDataZTree.getSelectedNodes()},getNodes:function(){return this.$refs.AutoDataZTree.getNodes()},selectNode:function(e){return this.$refs.AutoDataZTree.selectNode(e)},handleUrlChange:function(e){this.$emit("urlChange",e)},handleTabClick:function(e){this.componentKey=this.keyMap[e.name],this.componentKey||(this.componentKey=this.$route.name+"_"+e.name),this.$emit("tab-click",e),this.$emit("update:activeMenu",e.name),this.$cookie.set(C,e.name,1),this.$router.currentRoute.query[C]&&this.$router.push({query:k()(this.$route.query,Object(i["a"])({},C,""))})},changeTreeSetting:function(e){var t=this;try{this.flag=!1;var n,a=S(this.submenu);try{for(a.s();!(n=a.n()).done;){var r=n.value;if(r.name===e){t.activeTreeSetting=r.treeSetting;break}}}catch(i){a.e(i)}finally{a.f()}}finally{this.flag=!0}},getPropActiveTab:function(){for(var e="",t=[this.$route.query[C],this.$cookie.get(C),this.activeMenu],n=0,a=t;n<a.length;n++){var r,i=a[n],s="object"===Object(y["a"])(i)?null===i||void 0===i?void 0:i.name:i,o=S(this.tabIndices);try{for(o.s();!(r=o.n()).done;){var c=r.value,l=(null===c||void 0===c?void 0:c.name)||"";if((null===s||void 0===s?void 0:s.toLowerCase())===(null===l||void 0===l?void 0:l.toLowerCase()))return l}}catch(u){o.e(u)}finally{o.f()}}return e=this.tabIndices[0].name,e}}},D=A,T=(n("c535"),Object(h["a"])(D,v,g,!1,null,"600b8c8a",null)),P=T.exports;function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){Object(i["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E={name:"TreeTable",components:{ListTable:c["a"],AutoDataZTree:$["a"],FileTree:m,TabTree:P,IBox:b["a"],Dialog:s["a"]},props:R(R({},c["a"].props),{},{treeSetting:{type:Object,default:function(){return $["a"].props.setting.default()}},showTree:{type:Boolean,default:!0},component:{type:String,default:function(){return"AutoDataZTree"}},treeTabConfig:{type:Object,default:function(){return{}}},treeWidth:{type:String,default:function(){return"23.6%"}},quickFilters:{type:Array,default:null},quickSummary:{type:Array,default:null},headerActions:{type:Object,default:function(){return{}}}}),data:function(){return{iTableConfig:this.tableConfig,iShowTree:this.showTree,componentKey:0,componentTreeKey:0}},watch:{treeConfig:{handler:function(e){},deep:!0},showTree:function(e){this.iShowTree=e}},mounted:function(){this.initSetTableUrl()},methods:{initSetTableUrl:function(){var e,t=this.$route.query||{},n=t.asset,a=void 0===n?"":n,r=t.node,i=void 0===r?"":r,s=(null===(e=this.iTableConfig)||void 0===e?void 0:e.url)||"";s&&(s=Object(o["w"])(s,"asset",a),s=Object(o["w"])(s,"node",i),this.$set(this.iTableConfig,"url",s))},handleUrlChange:function(e){this.$set(this.iTableConfig,"url",e),this.$emit("urlChange",e),this.forceRerender()},forceRerender:function(){this.componentKey+=1},forceRerenderTree:function(){this.componentTreeKey+=1},hideRMenu:function(){this.$refs.AutoDataZTree.hideRMenu()},getSelectedNodes:function(){return this.$refs.AutoDataZTree.getSelectedNodes()},getNodes:function(){return this.$refs.AutoDataZTree.getNodes()},selectNode:function(e){return this.$refs.AutoDataZTree.selectNode(e)},reloadTable:function(){this.$refs.ListTable.reloadTable()}}},M=E,I=(n("b236"),Object(h["a"])(M,a,r,!1,null,"74d78df3",null));t["a"]=I.exports},"6f29":function(e,t,n){"use strict";n("7515")},"7333d":function(e,t,n){"use strict";n("591f")},"733b":function(e,t,n){},7515:function(e,t,n){},7662:function(e,t,n){"use strict";n("1915")},7764:function(e,t,n){"use strict";n("2c3e")},7771:function(e,t,n){"use strict";n("1de0")},"77aa":function(e,t,n){"use strict";n("cbf9")},7892:function(e,t,n){},7903:function(e,t,n){"use strict";n("4c64")},"7c05":function(e,t,n){"use strict";n("48a8")},"7e09":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("AssetTreeTable",{ref:"AssetTreeTable",attrs:{"header-actions":e.headerActions,"table-config":e.tableConfig,"tree-setting":e.treeSetting}})},r=[],i=(n("1c01"),n("58b2"),n("8e6e"),n("f3e2"),n("d25f"),n("ac6a"),n("456d"),n("57e7"),n("7f7f"),n("bd86")),s=(n("a481"),n("ad09")),o=n("53f7"),c=n("a4d9");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){Object(i["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d={name:"GrantedAssets",components:{AssetTreeTable:s["a"]},props:{treeUrl:{type:String,required:!0},tableUrl:{type:String,required:!0},onSelected:{type:Function,default:function(e,t){t.tableConfig.initialUrl||(t.tableConfig.initialUrl=t.tableConfig.url);var n=t.tableConfig.initialUrl,a=e.meta.data.id,r=n.replace("/assets/","/nodes/".concat(a,"/assets/"));t.tableConfig.url=r}},actions:{type:Object,default:null},getShowUrl:{type:Function,default:function(e){var t=e.row;e.col;return this.tableUrl.replace("/assets/","/assets/".concat(t.id,"/accounts/"))}},name:{type:Object,default:function(){return{formatter:o["i"],formatterArgs:{route:"AssetDetail",can:!0}}}},comment:{type:Object,default:function(){return{}}}},data:function(){var e=this;return{treeSetting:{showMenu:!1,showRefresh:!0,showAssets:!1,showSearch:!1,url:this.tableUrl,treeUrl:this.treeUrl,notShowBuiltinTree:!0,callback:{onSelected:function(t,n){return e.onSelected(n,e)},refresh:e.refreshObjectAssetPermission}},tableConfig:{url:this.tableUrl,hasTree:!0,columnsExtra:["view_account"],columnsExclude:["spec_info"],columns:["id","name","address","comment","labels","connectivity","platform","view_account","actions"],columnsShow:{min:["name","address","accounts"],default:["name","address","platform","view_account","actions"]},columnsMeta:{name:u({},this.name),labels:{formatterArgs:{showEditBtn:!1}},actions:u({},this.actions),view_account:{label:this.$t("Accounts"),formatter:o["b"],width:"100px"},connectivity:c["c"],comment:u({},this.comment)},tableAttrs:{rowClassName:function(e){var t=e.row;return t.is_active?"":"row_disabled"}}},headerActions:{hasLeftActions:!1,hasExport:!1,hasImport:!1}}},methods:{refreshObjectAssetPermission:function(){var e=this.tableUrl.replace("/assets/","/asset-permissions/cache/");return!e.indexOf("user-groups")&&this.$axios.delete(e)}}},f=d,h=(n("7c05"),n("2877")),p=Object(h["a"])(f,a,r,!1,null,"72983a90",null);t["a"]=p.exports},"863c":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",[n("el-button",{attrs:{disabled:e.isDisabled,size:"mini",type:"primary"},on:{click:e.onOpenDialog}},[e._v("\n      "+e._s(e.$tc("Setting"))+"\n    ")])],1),e._v(" "),e.visible?n("Dialog",e._g(e._b({attrs:{"destroy-on-close":!0,"show-cancel":!1,"show-confirm":!1,title:e.title,visible:e.visible,width:"60%"},on:{"update:visible":function(t){e.visible=t}}},"Dialog",e.$attrs,!1),e.$listeners),[n("AutoDataForm",e._b({ref:"autoDataForm",staticClass:"data-form",attrs:{form:e.form},on:{submit:e.onSubmit}},"AutoDataForm",e.config,!1))],1):e._e()],1)},r=[],i=(n("1c01"),n("58b2"),n("8e6e"),n("f3e2"),n("d25f"),n("2caf"),n("ac4d"),n("8a81"),n("5df3"),n("1c4c"),n("7f7f"),n("6b54"),n("87b3"),n("bd86")),s=n("768b"),o=(n("ffc1"),n("ac6a"),n("456d"),n("6d67"),n("96cf"),n("3b8d")),c=n("9039"),l=n("c75f");function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){Object(i["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=h(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){o=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw i}}}}function h(e,t){if(e){if("string"===typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var m={componentName:"AutomationParams",components:{Dialog:c["a"],AutoDataForm:l["a"]},props:{value:{type:Object,default:function(){return{}}},title:{type:String,default:function(){return this.$t("PushParams")}},assets:{type:Array,default:function(){return[]}},nodes:{type:Array,default:function(){return[]}},platforms:{type:Array,default:function(){return[]}},method:{type:String,default:""},url:{type:String,default:"/api/v1/assets/platform-automation-methods/"}},data:function(){var e=this;return{remoteMeta:{},visible:!1,isDisabled:!0,form:this.value,config:{url:this.url,hasSaveContinue:!1,hasButtons:!0,method:"get",fields:[],fieldsMeta:{}},onFieldChangeHandler:_.debounce(e.handleFieldChange,1e3)}},computed:{refForm:function(){return this.$refs.autoDataForm}},watch:{nodes:{handler:function(){this.onFieldChangeHandler()},deep:!0},assets:{handler:function(){this.onFieldChangeHandler()},deep:!0},platforms:{handler:function(e){this.onFieldChangeHandler()},deep:!0,immediate:!0}},mounted:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getUrlMeta();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{getUrlMeta:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("common/getUrlMeta",{url:this.url});case 2:t=e.sent,this.remoteMeta=t.actions[this.config.method.toUpperCase()]||{};case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getFilterPlatforms:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$axios.post("/api/v1/assets/platforms/filter-nodes-assets/",{node_ids:this.nodes,asset_ids:this.assets,platform_ids:this.platforms.map((function(e){return e.id||e.pk||e}))});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleFieldChange:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,a,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getFilterPlatforms();case 2:t=e.sent,n=t.map((function(e){return e.automation[r.method]})),n=_.uniq(n),a=_.intersection(n,Object.keys(this.remoteMeta)),this.setFormConfig(a),this.isDisabled=a.length<=0;case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),setFormConfig:function(e){var t={},n=[],a={};this.config.fields=[];var r,i={string:"input",boolean:"switch"},o=f(e);try{for(o.s();!(r=o.n()).done;){var c=r.value,l=this.remoteMeta[c]||{};if(this.form.hasOwnProperty(c)&&(t[c]=this.form[c]),n.push([l.label,[c]]),a[c]={fields:[],fieldsMeta:{}},Object.keys((null===l||void 0===l?void 0:l.children)||{}).length>0)for(var u=0,h=Object.entries(l.children);u<h.length;u++){var p=Object(s["a"])(h[u],2),m=p[0],b=p[1],v=d(d({},b),{},{type:i[b.type]||"input"});delete v.default,a[c].fields.push(m),a[c].fieldsMeta[m]=v}}}catch(g){o.e(g)}finally{o.f()}this.form=t,this.config.fields=n,this.config.fieldsMeta=a},onOpenDialog:function(){this.visible=!0},onSubmit:function(e){var t=this;this.form=e,this.$emit("input",e),setTimeout((function(){t.visible=!1}),100),this.$log.debug("Auto push form:",e)}}},b=m,v=n("2877"),g=Object(v["a"])(b,a,r,!1,null,"73889d46",null);t["a"]=g.exports},"86d4":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-switch",e._g(e._b({class:e.type,attrs:{"inactive-color":"#dcdfe6"},model:{value:e.iValue,callback:function(t){e.iValue=t},expression:"iValue"}},"el-switch",e.$attrs,!1),e.$listeners))},r=[],i={name:"Switcher",props:{type:{type:String,default:"primary"},value:{type:[Boolean,String],default:!0}},data:function(){return{}},computed:{iValue:{set:function(e){this.$emit("input",e)},get:function(){return!!this.value}}},watch:{value:function(e){this.$log.debug("Switcher Value changed: ",e)}}},s=i,o=n("2877"),c=Object(o["a"])(s,a,r,!1,null,null,null);t["a"]=c.exports},"873a":function(e,t,n){"use strict";n("93ea")},"889f":function(e,t,n){"use strict";n("09b3")},"8d34":function(e,t,n){},"8e48":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Dialog",e._g(e._b({attrs:{"destroy-on-close":!0,"show-cancel":!1,title:e.title,visible:e.showSecret,width:"50"},on:{"update:visible":function(t){e.showSecret=t},confirm:e.accountConfirmHandle}},"Dialog",e.$attrs,!1),e.$listeners),[n("el-form",{staticClass:"password-form",attrs:{model:e.secretInfo,"label-position":"right","label-width":"130px"}},[n("el-form-item",{attrs:{label:e.$tc("Name")}},[n("span",[e._v(e._s(e.account["name"]))])]),e._v(" "),n("el-form-item",{attrs:{label:e.$tc("Username")}},[n("span",[e._v(e._s(e.account["username"]))])]),e._v(" "),n("el-form-item",{attrs:{label:e.secretTypeLabel}},[n("SecretViewerFormatter",{attrs:{"cell-value":e.secretInfo.secret,col:{formatterArgs:{name:e.account["name"],secretType:e.secretType||""}}},on:{input:e.onShowKeyCopyFormatterChange}})],1),e._v(" "),"ssh_key"===e.secretType?n("el-form-item",{attrs:{label:e.$tc("SshKeyFingerprint")}},[n("span",[e._v(e._s(e.sshKeyFingerprint))])]):e._e(),e._v(" "),n("el-form-item",{attrs:{label:e.$tc("DateCreated")}},[n("span",[e._v(e._s(e._f("date")(e.account["date_created"])))])]),e._v(" "),n("el-form-item",{attrs:{label:e.$tc("DateUpdated")}},[n("span",[e._v(e._s(e._f("date")(e.account["date_updated"])))])]),e._v(" "),e.showPasswordRecord?n("el-form-item",{directives:[{name:"perms",rawName:"v-perms",value:"accounts.view_accountsecret",expression:"'accounts.view_accountsecret'"}],attrs:{label:e.$tc("PasswordRecord")}},[n("el-link",{attrs:{underline:!1,type:"success"},on:{click:e.showHistoryDialog}},[n("span",{staticStyle:{"padding-right":"30px"}},[e._v("\n            "+e._s(e.versions)+"\n          ")])])],1):e._e()],1)],1),e._v(" "),e.showPasswordHistoryDialog?n("PasswordHistoryDialog",{attrs:{account:e.account,visible:e.showPasswordHistoryDialog},on:{"update:visible":function(t){e.showPasswordHistoryDialog=t}}}):e._e()],1)},r=[],i=(n("7f7f"),n("9039")),s=n("c51d"),o=n("53f7"),c=n("1b0e"),l={name:"ShowSecretInfo",components:{Dialog:i["a"],PasswordHistoryDialog:s["a"],SecretViewerFormatter:o["p"]},props:{account:{type:Object,default:function(){return{}}},visible:{type:Boolean,default:!1},url:{type:String,default:""},type:{type:String,default:"account"},title:{type:String,default:function(){return this.$tc("Detail")}},showPasswordRecord:{type:Boolean,default:!0}},data:function(){return{modifiedSecret:"",secretInfo:{},versions:"-",showSecret:!1,mfaDialogVisible:!0,sshKeyFingerprint:"-",historyCount:0,showPasswordHistoryDialog:!1}},computed:{secretTypeLabel:function(){return this.account["secret_type"].label||"Password"},secretType:function(){return this.account["secret_type"].value}},mounted:function(){var e=this;if(this.showPasswordRecord){var t="/api/v1/accounts/account-secrets/".concat(this.account.id,"/histories/?limit=1");this.$axios.get(t,{disableFlashErrorMsg:!0}).then((function(t){e.versions=t.count,e.showSecretDialog()}))}else this.showSecretDialog()},methods:{accountConfirmHandle:function(){this.modifiedSecret&&this.onChangeSecretSubmit(),this.showSecret=!1,this.mfaDialogVisible=!1},onChangeSecretSubmit:function(){var e=this,t={name:this.secretInfo.name,secret:Object(c["b"])(this.modifiedSecret)},n="account"===this.type?"/api/v1/accounts/accounts":"/api/v1/accounts/account-templates";this.$axios.patch("".concat(n,"/").concat(this.account.id,"/"),t).then((function(){e.$message.success(e.$tc("UpdateSuccessMsg"))}))},showSecretDialog:function(){var e=this;return this.$axios.get(this.url,{disableFlashErrorMsg:!0}).then((function(t){var n;e.secretInfo=t,e.sshKeyFingerprint=(null===t||void 0===t||null===(n=t.spec_info)||void 0===n?void 0:n.ssh_key_fingerprint)||"-",e.showSecret=!0}))},exit:function(){this.$emit("update:visible",!1)},showHistoryDialog:function(){this.showPasswordHistoryDialog=!0},onShowKeyCopyFormatterChange:function(e){e!==this.secretInfo.secret&&(this.modifiedSecret=e)}}},u=l,d=(n("a6f7"),n("2877")),f=Object(d["a"])(u,a,r,!1,null,"e13a3e6a",null);t["a"]=f.exports},"8eb6":function(e,t,n){},"91ee":function(e,t,n){},"93ea":function(e,t,n){},9714:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("TwoCol",[n("ListTable",e._b({},"ListTable",e.config,!1))],1)},r=[],i=(n("6d67"),n("768b")),s=n("2af9"),o=n("ac6b"),c=n("52cc"),l=n("53f7"),u={name:"User",components:{TwoCol:c["a"],ListTable:s["j"]},props:{object:{type:Object,default:function(){}}},data:function(){var e=this,t=Object(o["l"])(this.object.users),n=Object(i["a"])(t,2),a=n[0],r=n[1];return{config:{headerActions:{hasLeftActions:!1,hasImport:!1,hasExport:!1},tableConfig:{url:"/api/v1/users/users/?".concat(a,"=").concat(r),columns:["name","username","email","groups","system_roles","org_roles","source","is_valid"],columnsShow:{min:["name","username"],default:["name","username","email"]},columnsMeta:{name:{label:this.$t("Name"),formatter:l["i"],formatterArgs:{getRoute:function(e){var t=e.row;return{name:"UserDetail",params:{id:t.id}}}}},system_roles:{label:this.$t("SystemRoles"),formatter:function(e){return e["system_roles"].map((function(e){return e["display_name"]})).join(", ")||"-"},filters:[],columnKey:"system_roles"},org_roles:{label:this.$t("OrgRoles"),formatter:function(e){return e["org_roles"].map((function(e){return e["display_name"]})).join(", ")||"-"},filters:[],columnKey:"org_roles",has:function(){return e.$store.getters.hasValidLicense&&!e.currentOrgIsRoot}},actions:{has:!1}}}}}},computed:{iUrl:function(){return"/api/v1/users/users/"}}},d=u,f=n("2877"),h=Object(f["a"])(d,a,r,!1,null,null,null);t["a"]=h.exports},"97a4":function(e,t,n){"use strict";n("cdbb")},"99ed":function(e,t,n){},"9a5c":function(e,t,n){"use strict";var a=n("0692"),r=n("56b0"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-input",e._g(e._b({},"el-input",e.$attrs,!1),e.$listeners),[n("template",{slot:"append"},[e._v(e._s(e.iUnit))])],2)},s=[],o={name:"InputWithUnit",props:{unit:{type:String,default:""}},data:function(){return{defaultValue:24,displayMapper:{second:this.$t("Second"),min:this.$t("Minute"),hour:this.$t("Hour"),day:this.$t("Day"),week:this.$t("Week"),month:this.$t("Month"),year:this.$t("Year")}}},computed:{iUnit:function(){return this.displayMapper[this.unit]||this.unit}}},c=o,l=(n("269c"),n("2877")),u=Object(l["a"])(c,i,s,!1,null,"67928352",null),d=u.exports,f=n("4360");n.d(t,"f",(function(){return h})),n.d(t,"h",(function(){return p})),n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return b})),n.d(t,"c",(function(){return g})),n.d(t,"d",(function(){return y})),n.d(t,"g",(function(){return w})),n.d(t,"e",(function(){return _}));var h=["exact","not","in","contains","startswith","endswith","regex"],p={str:h,bool:["exact","not"],m2m:["m2m","m2m_all"],fk:["m2m"],ip:[].concat(h,["ip_in"]),int:[].concat(h,["gte","lte"]),select:["in"]},m=[{label:a["a"].t("Equal"),value:"exact"},{label:a["a"].t("NotEqual"),value:"not"},{label:a["a"].t("MatchIn"),value:"in"},{label:a["a"].t("Contains"),value:"contains"},{label:a["a"].t("Exclude"),value:"exclude"},{label:a["a"].t("Startswith"),value:"startswith"},{label:a["a"].t("Endswith"),value:"endswith"},{label:a["a"].t("Regex"),value:"regex"},{label:a["a"].t("BelongTo"),value:"m2m"},{label:a["a"].t("BelongAll"),value:"m2m_all"},{label:a["a"].t("IPMatch"),value:"ip_in"},{label:a["a"].t("GreatEqualThan"),value:"gte"},{label:a["a"].t("LessEqualThan"),value:"lte"}],b={type:"cronTab",component:r["a"],label:a["a"].t("Crontab"),hidden:function(e){return!1===e.is_periodic},helpText:a["a"].t("CrontabHelpText"),helpTip:a["a"].t("CrontabHelpTip"),on:{change:function(e,t){t({interval:null})}}},v=function(e,t,n){return""===t?n():parseInt(t)<1?n(new Error(a["a"].t("EnsureThisValueIsGreaterThanOrEqualTo1"))):void n()},g={label:a["a"].t("Interval"),hidden:function(e){return!1===e.is_periodic},component:d,el:{unit:"hour"},rules:[{validator:v}],on:{input:function(e,t){t({crontab:""})}}},y={type:"checkbox",hidden:function(e){return!f["a"].getters.hasValidLicense}},w={},_={is_periodic:y,interval:g,crontab:b}},"9e38":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("IBox",e._b({staticClass:"the-box",attrs:{title:e.title,type:e.type}},"IBox",e.$attrs,!1),[n("table",{staticClass:"CardTable",staticStyle:{width:"100%","table-layout":"fixed"}},[n("tr",[n("td",{attrs:{colspan:"2"}},[n("Select2",e._b({ref:"select2",attrs:{disabled:e.iDisabled,"show-select-all":""},model:{value:e.select2.value,callback:function(t){e.$set(e.select2,"value",t)},expression:"select2.value"}},"Select2",e.select2,!1))],1)]),e._v(" "),e._t("default"),e._v(" "),n("tr",[n("td",{attrs:{colspan:"2"}},[n("el-button",{attrs:{disabled:e.iDisabled,loading:e.submitLoading,type:e.type,size:"small"},on:{click:e.addObjects}},[e._v("\n          "+e._s(e.$t("Add"))+"\n        ")])],1)]),e._v(" "),e.showHasObjects?e._l(e.iHasObjects,(function(t){return n("tr",{key:t.value,staticClass:"item"},[n("td",{staticStyle:{width:"100%",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},[n("el-tooltip",{staticStyle:{margin:"4px"},attrs:{content:t.label.toString(),"open-delay":500,effect:"dark",placement:"left"}},[n("b",[e._v(e._s(t.label))])])],1),e._v(" "),n("td",[n("el-button",{staticStyle:{float:"right"},attrs:{disabled:e.iDisabled,size:"mini",type:"danger"},on:{click:function(n){return e.removeObject(t)}}},[n("i",{staticClass:"fa fa-minus"})])],1)])})):e._e(),e._v(" "),e.params.hasMore&&e.showHasMore?n("tr",{staticClass:"item"},[n("td",{attrs:{colspan:"2"}},[n("el-button",{staticStyle:{width:"100%"},attrs:{disabled:e.iDisabled,type:e.type,size:"small"},on:{click:e.loadMore}},[n("i",{staticClass:"fa fa-arrow-down"}),e._v("\n          "+e._s(e.$t("More"))+"\n        ")])],1)]):e._e()],2)])},r=[],i=(n("1c01"),n("58b2"),n("8e6e"),n("7514"),n("f3e2"),n("d92a"),n("96cf"),n("3b8d")),s=n("bd86"),o=(n("6762"),n("2fdb"),n("d25f"),n("75fc")),c=(n("6d67"),n("ac6a"),n("456d"),n("57e7"),n("20d6"),n("c5f6"),n("2934")),l=n("f823"),u=n("e9f9"),d=n("2f62");function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){Object(s["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={name:"RelationCard",components:{Select2:l["i"],IBox:u["a"]},props:{title:{type:String,default:""},icon:{type:String,default:""},type:{type:String,default:"primary"},objectsAjax:{type:Object,default:function(){return{}}},objects:{type:[Array,null],default:null},hasObjectsId:{type:Array,default:function(){return[]}},hasObjects:{type:Array,default:function(){return[]}},showHasObjects:{type:Boolean,default:!0},value:{type:[Array,Number,String],default:function(){return[]}},disabled:{type:[Boolean,Function],default:null},showHasMore:{type:Boolean,default:!0},performDelete:{type:Function,default:function(e,t){}},allowCreate:{type:Boolean,default:!1},select2Config:{type:Object,default:function(){}},onDeleteSuccess:{type:Function,default:function(e,t){var n=t.iHasObjects.findIndex((function(t){return t.value===e.value}));t.iHasObjects.splice(n,1);while(-1!==t.select2.disabledValues.indexOf(e.value)){var a=t.select2.disabledValues.indexOf(e.value);t.$log.debug("disabled values remove index: ",a),t.select2.disabledValues.splice(a,1)}t.$message.success(t.$t("RemoveSuccessMsg"))}},onDeleteFail:{type:Function,default:function(e,t){for(var n="",a=e.response.data,r=0,i=Object.keys(a);r<i.length;r++){var s=i[r],o=a[s];n=o instanceof Array?o.join(","):o}t.$message.error(n)}},performAdd:{type:Function,default:function(e,t){}},showAddAll:{type:Boolean,default:!1},onAddSuccess:{type:Function,default:function(e,t){t.$log.debug("Select value",t.select2.value);var n=t.iHasObjects.map((function(e){return e.value}));t.iHasObjects=[].concat(Object(o["a"])(t.iHasObjects),Object(o["a"])(e.filter((function(e){return!n.includes(e.value)})))),t.$refs.select2.clearSelected(),t.$message.success(t.$t("AddSuccessMsg")),this.$refs.select2.refresh(),this.$emit("addSuccess")}},getHasObjects:{type:Function,default:null}},data:function(){return{iHasObjects:this.hasObjects||[],totalHasObjectsLength:0,submitLoading:!1,selectAllDisabled:!1,params:{page:1,hasMore:!1,pageSize:10},select2:h({ajax:this.objectsAjax,options:this.objects,value:this.value,disabled:this.disabled,disabledValues:[],allowCreate:this.allowCreate},this.select2Config)}},computed:h(h({},Object(d["b"])(["currentOrgIsRoot"])),{},{iAjax:function(){return this.$refs.select2.iAjax},safeMakeParams:function(){return this.$refs.select2.safeMakeParams},hasObjectLeftLength:function(){return this.totalHasObjectsLength-this.iHasObjects.length},iDisabled:function(){return null!==this.disabled?this.disabled:this.currentOrgIsRoot}}),watch:{hasObjectsId:function(e,t){this.$log.debug("hasObject id change"),this.select2.disabledValues=e},iHasObjects:function(e,t){var n=e.map((function(e){return e.value})),a=t.map((function(e){return e.value})),r=_.difference(n,a),i=_.difference(a,n);this.$log.debug("hasObjects change, add ",r,"remove ",i);var s=this.select2.disabledValues;i.length>0&&(s=s.filter((function(e){return-1===i.indexOf(e)}))),r.length>0&&(s=[].concat(Object(o["a"])(s),Object(o["a"])(r))),this.select2.disabledValues=s}},mounted:function(){var e=this;this.hasObjectsId&&0!==this.hasObjectsId.length&&setTimeout((function(){e.getHasObjectsByIds()}),50)},methods:{loadMore:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.loading){e.next=2;break}return e.abrupt("return");case 2:if(this.params.hasMore){e.next=4;break}return e.abrupt("return");case 4:return this.params.page=this.params.page?this.params.page+1:1,e.prev=5,this.loading=!0,e.next=9,this.loadHasObjects();case 9:return e.prev=9,this.loading=!1,e.finish(9);case 12:case"end":return e.stop()}}),e,this,[[5,,9,12]])})));function t(){return e.apply(this,arguments)}return t}(),loadHasObjects:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.$log.debug("Start loadHasObject: ",this.params),t=this.safeMakeParams(this.params),e.next=4,this.$axios.get(this.iAjax.url,{params:t,validateStatus:function(e){return 403===e?200:e}});case 4:n=e.sent,n=this.iAjax.processResults.bind(this)(n),n.results&&n.results.forEach((function(e){a.iHasObjects.find((function(t){return t.value===e.value}))||a.iHasObjects.push(e)})),this.params.hasMore=!!n.pagination,this.totalHasObjectsLength=n.total;case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getHasObjectsByIds:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.$refs.select2&&this.iAjax&&this.safeMakeParams){e.next=2;break}return e.abrupt("return");case 2:if(this.select2.disabledValues=this.hasObjectsId,!this.getHasObjects){e.next=7;break}this.getHasObjects(this.hasObjectsId).then((function(e){n.iHasObjects=e})),e.next=13;break;case 7:return e.next=9,Object(c["a"])(this.hasObjectsId);case 9:return t=e.sent,this.params.spm=t.spm,e.next=13,this.loadHasObjects();case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),removeObject:function(e){var t=this;this.performDelete(e,this).then((function(){t.onDeleteSuccess(e,t)})).catch((function(e){t.onDeleteFail(e,t)}))},addObjects:function(){var e=this,t=this.$refs.select2.$refs.select.selected.map((function(e){return{label:e.label,value:e.value}}));0!==t.length&&this.performAdd(t,this).then((function(){e.onAddSuccess(t,e)}))},selectAll:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.selectAllDisabled=!0,this.disabled=!0,e.next=4,this.$refs.select2.selectAll();case 4:this.selectAllDisabled=!1,this.disabled=!1;case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},m=p,b=(n("a20b"),n("2877")),v=Object(b["a"])(m,a,r,!1,null,"4bd42bdb",null);t["a"]=v.exports},a00f:function(e,t,n){},a20b:function(e,t,n){"use strict";n("5c28")},a26b:function(e,t,n){},a337:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Password",e._g(e._b({staticClass:"el-input password-input",attrs:{value:e.value},on:{input:e.handleInput}},"Password",e.iAttrs,!1),e.$listeners),[e._v("\n  hello\n")])},r=[],i=n("f20a"),s=n.n(i),o={name:"PasswordInput",components:{Password:s.a},props:{value:{type:String,default:""},attrs:{type:Object,default:function(){}}},data:function(){return{}},computed:{iAttrs:function(){var e={secureLength:7,defaultClass:"el-input__inner",toggle:!0,showStrengthMeter:!1};return Object.assign(e,this.attrs)}},methods:{handleInput:function(e){this.$emit("input",e)}}},c=o,l=(n("da4c"),n("2877")),u=Object(l["a"])(c,a,r,!1,null,"ca395b2e",null);t["a"]=u.exports},a4d9:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return d}));n("1c01"),n("58b2"),n("8e6e"),n("f3e2"),n("d25f"),n("ac6a"),n("456d"),n("7f7f");var a=n("bd86"),r=n("53f7"),i=n("ac6b");function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c={formatter:r["e"],formatterArgs:{faChoices:{"-":"",ok:"fa-check-circle",err:"fa-times-circle",auth_err:"fa-times-circle",rdp_err:"fa-times-circle",password_err:"fa-times-circle",openssh_key_err:"fa-times-circle",ntlm_err:"fa-times-circle",create_temp_err:"fa-times-circle"},classChoices:{ok:"text-primary",err:"text-danger",auth_err:"text-danger",rdp_err:"text-danger",password_err:"text-danger",openssh_key_err:"text-danger",ntlm_err:"text-danger",create_temp_err:"text-danger"},getText:function(e){var t=e.cellValue;return"-"===(null===t||void 0===t?void 0:t.value)||"unknown"===(null===t||void 0===t?void 0:t.value)?"-":null===t||void 0===t?void 0:t.label}},width:"130px"};function l(e,t){return t.asset&&t.asset.id!==e.asset.id}var u=function(e){return[{name:"View",title:e.$t("View"),can:e.$hasPerm("accounts.view_accountsecret"),type:"primary",order:1,callback:function(t){var n=t.row;e.secretUrl="/api/v1/accounts/account-secrets/".concat(n.id,"/"),e.account=n,e.showViewSecretDialog=!1,setTimeout((function(){e.showViewSecretDialog=!0}))}},{name:"Update",title:e.$t("Edit"),can:function(t){var n=t.row;return e.$hasPerm("accounts.change_account")&&!e.$store.getters.currentOrgIsRoot&&!l(n,e)},callback:function(t){var n=t.row;e.isUpdateAccount=!0;var a=o(o({},e.asset),n.asset);e.iAsset=a,e.account=n,e.addTemplate=!1,e.showAddDialog=!1,setTimeout((function(){e.showAddDialog=!0}))}},{name:"UpdateSecret",title:e.$t("EditSecret"),can:function(t){var n=t.row;return e.$hasPerm("accounts.change_account")&&!e.$store.getters.currentOrgIsRoot&&!l(n,e)},callback:function(t){var n=t.row,a=o(o({},e.asset),n.asset);e.account=n,e.iAsset=a,e.showUpdateSecretDialog=!1,e.accountCreateUpdateTitle=e.$t("UpdateAccount"),setTimeout((function(){e.showUpdateSecretDialog=!0}))}},{name:"Clone",title:e.$t("Duplicate"),has:function(){return!e.asset},can:function(t){var n=t.row;return e.$hasPerm("accounts.add_account")&&!e.$store.getters.currentOrgIsRoot&&!l(n,e)},callback:function(t){var n=t.row;e.account={name:"".concat(n.name," - ").concat(e.$t("Duplicate").toLowerCase()),username:"".concat(n.username," - ").concat(e.$t("Duplicate").toLowerCase()),payload:"pam_account_clone"},e.iAsset=e.asset,e.showAddDialog=!1,setTimeout((function(){e.showAddDialog=!0}))}},{name:"Test",title:e.$t("VerifySecret"),divided:!0,can:function(t){var n=t.row;return!e.$store.getters.currentOrgIsRoot&&e.$hasPerm("accounts.verify_account")&&n.asset["auto_config"].ansible_enabled&&n.asset["auto_config"].ping_enabled},callback:function(t){var n=t.row;e.$axios.post("/api/v1/accounts/accounts/tasks/",{action:"verify",accounts:[n.id]}).then((function(e){Object(i["k"])(e["task"])}))}},{name:"ClearSecret",title:e.$t("ClearSecret"),can:function(t){var n=t.row;return e.$hasPerm("accounts.change_account")&&!l(n,e)},type:"primary",callback:function(t){var n=t.row;e.$axios.patch("/api/v1/accounts/accounts/clear-secret/",{account_ids:[n.id]}).then((function(){e.$message.success(e.$tc("ClearSuccessMsg"))}))}},{name:"SecretHistory",title:e.$t("HistoryPassword"),can:function(){return e.$hasPerm("accounts.view_accountsecret")},type:"primary",callback:function(t){var n=t.row;e.account=n,e.currentAccountColumn=n,e.showViewSecretDialog=!1,e.secretUrl="/api/v1/accounts/account-secrets/".concat(n.id,"/"),setTimeout((function(){e.showViewSecretDialog=!0}))}},{name:"CopyToOther",title:e.$t("CopyToAsset"),type:"primary",divided:!0,can:function(t){var n=t.row;return e.$hasPerm("accounts.add_account")&&!e.$store.getters.currentOrgIsRoot&&!l(n,e)},has:function(){return!e.asset},callback:function(t){var n=t.row;e.accountCreateUpdateTitle=e.$t("CopyToOther"),e.$route.query.flag="copy",e.iAsset=e.asset,e.account=n,e.showAddDialog=!0}},{name:"MoveToOther",title:e.$t("MoveToAsset"),type:"primary",can:function(t){var n=t.row;return e.$hasPerm("accounts.delete_account")&&!e.$store.getters.currentOrgIsRoot&&!l(n,e)},has:function(){return!e.asset},callback:function(t){var n=t.row;e.accountCreateUpdateTitle=e.$t("MoveToOther"),e.$route.query.flag="move",e.iAsset=e.asset,e.account=n,e.showAddDialog=!0}}]},d=function(e){return[{label:e.$t("Recent (7 days)"),options:[{label:e.$t("RecentlyDiscovered"),filter:{latest_discovery:"1"}},{label:e.$t("RecentlyLoggedIn"),filter:{latest_accessed:"1"}},{label:e.$t("RecentlyModified"),filter:{latest_updated:"1"}},{label:e.$t("RecentlyChangedPassword"),filter:{latest_secret_changed:"1"}},{label:e.$t("RecentPasswordChangeFailed"),filter:{latest_secret_change_failed:"1"}}]},{label:e.$t("RiskyAccount"),options:[{label:e.$t("NoLoginLongTime"),filter:{long_time_no_login:"true"}},{label:e.$t("AddAccount"),filter:{risk:"new_found"}},{label:e.$t("WeakPassword"),filter:{risk:"weak_password"}},{label:e.$t("EmptyPassword"),filter:{has_secret:"false"}},{label:e.$t("LongTimePassword"),filter:{long_time_no_change_secret:"true"}}]},{label:e.$t("AccountType"),options:[{label:e.$t("All"),filter:{category:""}},{label:e.$t("Host"),filter:{category:"host"}},{label:e.$t("Database"),filter:{category:"database"}},{label:e.$t("Cloud"),filter:{category:"cloud"}},{label:e.$t("Device"),filter:{category:"device"}},{label:"Web",filter:{category:"web"}},{label:e.$t("Other"),filter:{category:"custom"}}]}]}},a505:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content"},[n("span",{staticClass:"title"},[e._v(e._s(e.config.title))]),e._v(" "),e.hasTip?n("el-tooltip",{attrs:{content:e.config.tip,"open-delay":500,effect:"dark",placement:"top"}},[n("i",{staticClass:"fa fa-exclamation-circle icon"})]):e._e()],1)},r=[],i={props:{config:{type:Object,default:function(){return{}}},hasTip:{type:Boolean,default:!1}},data:function(){return{}}},s=i,o=(n("4111"),n("2877")),c=Object(o["a"])(s,a,r,!1,null,"491bccfa",null);t["a"]=c.exports},a5db:function(e,t,n){"use strict";n("a26b")},a6f7:function(e,t,n){"use strict";n("22fa")},a783:function(e,t,n){},a82e:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("IBox",e._b({attrs:{fa:e.icon,title:e.title,type:e.type}},"IBox",e.$attrs,!1),[n("table",{staticStyle:{width:"100%"}},[n("tr",[n("td",{attrs:{colspan:"2"}},[n("AssetSelect",{ref:"assetSelect",attrs:{"can-select":e.canSelect,disabled:e.disabled}})],1)]),e._v(" "),n("tr",[n("td",{attrs:{colspan:"2"}},[n("el-button",{attrs:{disabled:e.disabled,type:e.type,size:"small"},on:{click:e.addObjects}},[e._v(e._s(e.$t("Add")))])],1)])])])},r=[],i=(n("c5f6"),n("e9f9")),s=n("1307"),o={name:"AssetRelationCard",components:{IBox:i["a"],AssetSelect:s["a"]},props:{title:{type:String,default:""},icon:{type:String,default:""},type:{type:String,default:"primary"},disabled:{type:[Boolean,Function],default:!1},value:{type:[Array,Number,String],default:function(){return[]}},performAdd:{type:Function,default:function(e,t){}},onAddSuccess:{type:Function,default:function(e,t){}},canSelect:{type:Function,default:function(e,t){return!0}}},data:function(){return{}},methods:{addObjects:function(){var e=this,t=this.$refs.assetSelect.$refs.select2.iValue;this.performAdd(t,this).then((function(){return e.onAddSuccess(t,e)}))}}},c=o,l=(n("97a4"),n("2877")),u=Object(l["a"])(c,a,r,!1,null,"2ea605c7",null);t["a"]=u.exports},a9c0:function(e,t,n){},ace0:function(e,t,n){},ad09:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("TreeTable",e._g(e._b({ref:"TreeList",attrs:{"active-menu":e.treeTableConfig.activeMenu,component:e.treeComponent,"table-config":e.tableConfig,"tree-tab-config":e.treeTableConfig,"tree-width":e.treeWidth},on:{"update:activeMenu":function(t){return e.$set(e.treeTableConfig,"activeMenu",t)},"update:active-menu":function(t){return e.$set(e.treeTableConfig,"activeMenu",t)}},scopedSlots:e._u([{key:"table",fn:function(){return[e._t("table")]},proxy:!0},{key:"rMenu",fn:function(t){var a=t.data;return n("div",{},[e._t("rMenu",null,{data:a})],2)}}],null,!0)},"TreeTable",e.$attrs,!1),e.$listeners))},r=[],i=(n("1c01"),n("58b2"),n("8e6e"),n("f3e2"),n("d25f"),n("ac6a"),n("456d"),n("a481"),n("bd86")),s=n("6557"),o=n("dbfd"),c=n("c0eb");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){Object(i["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d={components:{TreeTable:s["a"]},props:{url:{type:String,default:"/api/v1/assets/assets/"},typeUrl:{type:String,default:"/api/v1/assets/nodes/category/tree/"},nodeUrl:{type:String,default:"/api/v1/assets/nodes/"},treeUrl:{type:String,default:"/api/v1/assets/nodes/children/tree/"},treeUrlQuery:{type:Object,default:function(){return{}}},treeSetting:{type:Object,default:function(){return{}}},tableConfig:{type:Object,default:function(){return{}}},showAssets:{type:Boolean,default:!1}},data:function(){var e,t,n=this,a=(null===(e=this.treeSetting)||void 0===e?void 0:e.showAssets)||this.showAssets,r=this.setTreeUrlQuery(),i="".concat(this.treeUrl,"?assets=").concat(a?"1":"0","&").concat(r),s=this;return{treeComponent:"TabTree",treeTabConfig:{activeMenu:"CustomTree",submenu:[{title:this.$t("AssetTree"),name:"CustomTree",icon:"fa-tree",treeSetting:u({showAssets:a,showMenu:!1,showRefresh:!0,showCreate:!0,showUpdate:!0,showDelete:!0,hasRightMenu:!0,showSearch:!0,url:this.url,nodeUrl:this.nodeUrl,treeUrl:i,callback:{onSelected:function(e,t){return n.getAssetsUrl(t)},beforeRefresh:function(){var e=u(u({},n.$route.query),{},{node_id:"",asset_id:""});setTimeout((function(){s.$router.replace({query:e})}),100)}}},this.treeSetting)},{title:this.$t("TypeTree"),icon:"fa-list-ul",name:"BuiltinTree",treeSetting:{showRefresh:!0,showAssets:!1,showSearch:!1,customTreeHeaderName:this.$t("TypeTree"),url:this.typeUrl,nodeUrl:(null===(t=this.treeSetting)||void 0===t?void 0:t.nodeUrl)||this.nodeUrl,treeUrl:"".concat(this.typeUrl,"?assets=").concat(a?"1":"0","&count_resource=").concat(this.treeSetting.countResource||"asset"),callback:{onSelected:function(e,t){return n.getAssetsUrl(t)}},edit:{drag:{isMove:!1}}}}]}}},computed:{treeWidth:function(){return"23.6%"},treeTableConfig:function(){return this.treeSetting.notShowBuiltinTree&&this.treeTabConfig.submenu.splice(1,1),this.treeTabConfig}},mounted:function(){this.decorateRMenu();var e=this.treeTabConfig.submenu[0].treeSetting;e.hasRightMenu=!this.currentOrgIsRoot,e.showCreate=this.$hasPerm("assets.add_node"),e.showUpdate=this.$hasPerm("assets.change_node"),e.showDelete=this.$hasPerm("assets.delete_node")},methods:{reloadTable:function(){this.$refs.TreeList.reloadTable()},setTreeUrlQuery:function(){var e="";for(var t in this.treeUrlQuery)e+="".concat(t,"=").concat(this.treeUrlQuery[t],"&");return e=e.substr(0,e.length-1),e},decorateRMenu:function(){var e=this.$cookie.get("show_current_asset")||"0";"1"===e?(Object(c["a"])("#m_show_asset_all_children_node").css("color","#606266"),Object(c["a"])("#m_show_asset_only_current_node").css("color","green")):(Object(c["a"])("#m_show_asset_all_children_node").css("color","green"),Object(c["a"])("#m_show_asset_only_current_node").css("color","#606266"))},getAssetsUrl:function(e){var t,n=this,a=(null===(t=this.treeSetting)||void 0===t?void 0:t.url)||this.url,r=function(e,t,n){setTimeout((function(){a=Object(o["w"])(a,e,t)}))};if("node"===e.meta.type){var i=e.meta.data.id;r("node_id",i),r("asset_id","")}else if("asset"===e.meta.type){var s,c=(null===(s=e.meta.data)||void 0===s?void 0:s.id)||e.id;r("node_id",""),r("asset_id",c)}else"category"===e.meta.type?r("category",e.meta.category):"type"===e.meta.type?(r("category",e.meta.category),r("type",e.meta._type)):"platform"===e.meta.type&&r("platform",e.id);setTimeout((function(){var e=n.setTreeUrlQuery();a=e?"".concat(a,"&").concat(e):a,n.$set(n.tableConfig,"url",a)})),!1!==this.treeSetting.selectSyncToRoute&&Object(o["u"])(this,a)}}},f=d,h=n("2877"),p=Object(h["a"])(f,a,r,!1,null,null,null);t["a"]=p.exports},af72:function(e,t,n){},b0bb:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"input-text",class:e.bolder?"bolder":""},[e._v("\n  "+e._s(e.text||e.value.toString())+"\n")])},r=[],i={props:{value:{type:[String,Boolean,Object,Array],default:""},text:{type:String,default:""},bolder:{type:Boolean,default:!0}},data:function(){return{}}},s=i,o=(n("6282"),n("2877")),c=Object(o["a"])(s,a,r,!1,null,"9602f4da",null);t["a"]=c.exports},b236:function(e,t,n){"use strict";n("a783")},b278:function(e,t,n){},b318:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("DetailFormatter",{attrs:{col:e.col,row:e.row,"prevent-click":e.formatterArgs.preventClick}},[[n("el-popover",{attrs:{disabled:!e.showItems,"open-delay":500,title:e.title,placement:"top-start",trigger:"hover",width:"400"},on:{show:e.getAsyncItems}},[n("div",{staticClass:"detail-content"},e._l(Object.entries(e.items),(function(t){var a=t[0],r=t[1];return n("div",{key:e.getKey(r,a),staticClass:"detail-item"},[n("span",{staticClass:"detail-item-name"},[e._v(e._s(r))])])})),0),e._v(" "),n("span",{attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(e.amount))])])]],2)},r=[],i=(n("6762"),n("2fdb"),n("456d"),n("96cf"),n("3b8d")),s=n("768b"),o=(n("ac6a"),n("ffc1"),n("7618")),c=(n("6d67"),n("d25f"),n("2caf"),n("a481"),n("7f7f"),n("62f3")),l=n("73c8"),u={name:"AmountFormatter",components:{DetailFormatter:c["a"]},extends:l["a"],props:{formatterArgsDefault:{type:Object,default:function(){return{showItems:!0,getItem:function(e){return e.name},async:!1,ajax:{},title:"",preventClick:!1}}}},data:function(){var e=Object.assign(this.formatterArgsDefault,this.col.formatterArgs||{});return{formatterArgs:e,listData:e.async?[]:this.cellValue||[],amount:"",asyncGetDone:!1}},computed:{title:function(){return this.formatterArgs.title||this.col.label.replace("amount","").replace("数量","")},cellValueToRemove:function(){return this.formatterArgs.cellValueToRemove||[]},items:function(){if(this.formatterArgs.async&&!this.asyncGetDone)return[this.$t("Loading")+"..."];var e=this.formatterArgs.getItem||function(e){return e.name},t=[];return Array.isArray(this.listData)?t=this.listData.map((function(t){return e(t)})).filter(Boolean):this.listData&&"object"===Object(o["a"])(this.listData)&&(t=Object.entries(this.listData).map((function(t){var n=Object(s["a"])(t,2),a=n[0],r=n[1],i={key:a,value:r};return e(i)})).filter(Boolean)),t},showItems:function(){return 0!==this.amount&&""!==this.amount}},watch:{cellValue:{handler:function(e){this.listData=e,this.computeAmount()}}},mounted:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.computeAmount();case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{computeAmount:function(){var e=this;if(this.formatterArgs.async)this.amount=this.cellValue;else{var t,n=[];n=Array.isArray(this.cellValue)?this.cellValue:Object.keys(this.cellValue),this.amount=((null===(t=n)||void 0===t?void 0:t.filter((function(t){return!e.cellValueToRemove.includes(t)})))||[]).length}},getKey:function(e,t){return t+e},getDefaultUrl:function(){var e=new URL(this.url,location.origin);return e.pathname+=this.row.id+"/",e.pathname},getAsyncItems:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n,a,r,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.formatterArgs.async){e.next=2;break}return e.abrupt("return");case 2:if(!this.asyncGetDone){e.next=4;break}return e.abrupt("return");case 4:return t=this.formatterArgs.ajax.url||this.getDefaultUrl(),n=this.formatterArgs.ajax.params||{},a=this.formatterArgs.ajax.transform||function(e){return e[i.col.prop.replace("_amount","")]},e.next=9,this.$axios.get(t,{params:n});case 9:r=e.sent,this.listData=a(r),this.asyncGetDone=!0;case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},d=u,f=(n("d93e"),n("2877")),h=Object(f["a"])(d,a,r,!1,null,"13b88e3e",null);t["a"]=h.exports},b593:function(e,t,n){"use strict";n("1e9a")},bb4b:function(e,t,n){"use strict";n("91ee")},c14c:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.iVisible?n("Dialog",{attrs:{"destroy-on-close":!0,"show-cancel":!1,"show-confirm":!1,title:e.$tc("TestGatewayTestConnection"),visible:e.iVisible,top:"35vh",width:"40%"},on:{"update:visible":function(t){e.iVisible=t}}},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{md:4,sm:24}},[n("div",{staticStyle:{"line-height":"34px"}},[e._v(e._s(e.$t("SSHPort")))])]),e._v(" "),n("el-col",{attrs:{md:14,sm:24}},[n("el-input",{model:{value:e.port,callback:function(t){e.port=t},expression:"port"}}),e._v(" "),n("span",{staticClass:"help-tips help-block"},[e._v(e._s(e.$t("TestGatewayHelpMessage")))])],1),e._v(" "),n("el-col",{attrs:{md:4,sm:24}},[n("el-button",{staticStyle:{"line-height":"20px"},attrs:{loading:e.loading,size:"mini",type:"primary"},on:{click:e.dialogConfirm}},[e._v("\n        "+e._s(this.$t("Confirm"))+"\n      ")])],1)],1)],1):e._e()},r=[],i=(n("c5f6"),n("9039")),s=n("ac6b"),o={name:"GatewayDialog",components:{Dialog:i["a"]},props:{visible:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},port:{type:Number,default:0},cell:{type:String,default:""}},data:function(){return{}},computed:{iVisible:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e)}}},methods:{dialogConfirm:function(){var e=this;if(isNaN(this.port))return this.$message.error(this.$tc("TestPortErrorMsg"));this.$axios.post("/api/v1/assets/gateways/".concat(this.cell,"/test-connective/"),{port:this.port}).then((function(e){Object(s["k"])(e["task"])})).finally((function(){e.iVisible=!1}))}}},c=o,l=n("2877"),u=Object(l["a"])(c,a,r,!1,null,null,null);t["a"]=u.exports},c317:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("TwoCol",[n("ListTable",e._b({},"ListTable",e.config,!1))],1)},r=[],i=n("768b"),s=n("2af9"),o=n("ac6b"),c=n("53f7"),l=n("52cc"),u={name:"AssetJsonTab",components:{TwoCol:l["a"],ListTable:s["j"]},props:{object:{type:Object,default:function(){}}},data:function(){var e=Object(o["l"])(this.object.assets),t=Object(i["a"])(e,2),n=t[0],a=t[1];return{config:{headerActions:{hasLeftActions:!1,hasImport:!1,hasExport:!1},tableConfig:{url:"/api/v1/assets/assets/?".concat(n,"=").concat(a),columns:["name","address","platform","type","is_active"],columnsShow:{min:["name","address"],default:["name","address","platform"]},columnsMeta:{name:{label:this.$t("Asset"),formatter:c["i"],formatterArgs:{getRoute:function(e){var t=e.row;return{name:"AssetDetail",params:{id:t.id}}}}},actions:{has:!1}}}}}},computed:{iUrl:function(){return"/api/v1/users/users/"}}},d=u,f=n("2877"),h=Object(f["a"])(d,a,r,!1,null,null,null);t["a"]=h.exports},c476:function(e,t,n){},c51d:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("GenericListTableDialog",e._b({attrs:{visible:e.iVisible},on:{"update:visible":function(t){e.iVisible=t}}},"GenericListTableDialog",e.config,!1))},r=[],i=(n("7f7f"),n("cd4a")),s=n("53f7"),o={components:{GenericListTableDialog:i["g"]},props:{account:{type:Object,default:function(){return{}}},visible:{type:Boolean,default:!1}},data:function(){return{config:{title:this.$t("HistoryPassword"),visible:!1,width:"60%",tableConfig:{id:"history_date",url:"/api/v1/accounts/account-secrets/".concat(this.account.id,"/histories/"),columns:["secret","version","history_date"],columnsMeta:{secret:{label:this.$t("Password"),formatter:s["p"],formatterArgs:{hasDownload:!1,name:this.account.name}},history_date:{label:this.$t("HistoryDate")},secret_type:{width:"200px"},version:{width:"100px"},actions:{has:!1}}},headerActions:{hasLeftActions:!1,hasSearch:!1}}}},computed:{iVisible:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e)}}}},c=o,l=n("2877"),u=Object(l["a"])(c,a,r,!1,null,"57dc5957",null);t["a"]=u.exports},c535:function(e,t,n){"use strict";n("99ed")},c901:function(e,t,n){},cbf9:function(e,t,n){},cc71:function(e,t,n){"use strict";n("f56a")},cdbb:function(e,t,n){},cdc0:function(e,t,n){"use strict";n("db10")},ce19:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("DetailFormatter",{attrs:{col:e.col,row:e.row}},[[n("el-popover",{attrs:{"open-delay":parseInt("500"),title:e.title,placement:"top-start",trigger:"hover",width:"400"}},[e._l(e.items,(function(t,a){return n("el-row",{key:a,staticClass:"detail-item"},[n("el-col",{attrs:{span:12}},[e._v(e._s(e.formatterArgs.info[a]))]),e._v(" "),n("el-col",{attrs:{span:12}},[e._v(e._s(t))])],1)})),e._v(" "),n("span",{attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(e.viewText))])],2)]],2)},r=[],i=(n("1c01"),n("58b2"),n("8e6e"),n("f3e2"),n("d25f"),n("ac6a"),n("456d"),n("768b")),s=(n("a481"),n("4f37"),n("4917"),n("c5f6"),n("bd86")),o=(n("7f7f"),n("62f3")),c=n("73c8");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){Object(s["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d={name:"HostInfoFormatter",components:{DetailFormatter:o["a"]},extends:c["a"],data:function(){return{info:{},formatterArgsNew:{showItems:!0,getItem:function(e){return e.name}}}},computed:{title:function(){return"".concat(this.$t("HardwareInfo"))},items:function(){var e,t=u({},this.cellValue),n=null===(e=this.cellValue)||void 0===e?void 0:e.memory;return t["memory"]=n?(n/1||0).toFixed(2):"-",t},viewText:function(){var e,t=Number(this.items["cpu_count"]||0),n=Number(this.items["cpu_cores"]||0),a=Number(this.items["cpu_vcpus"]||0),r=Number(this.items["memory"]||0),i=Number(this.items["disk_total"]||0),s=this.items["cpu_model"],o=this.items["gpu_model"],c="";if(t){var l=a||n*t;c="".concat(l," Core"),r&&(c+=" ".concat(Math.round(r),"G")),i&&(c+=" ".concat(Math.round(i),"G"));var u=this.formatCpuModel(s);if(u&&(c+=" (".concat(u,")")),o){var d=this.formatGpuModel(o);c+=" ".concat(d)}return c}return(null===(e=this.items)||void 0===e?void 0:e.distribution)||"-"}},methods:{formatCpuModel:function(e){if(!e)return"";var t=e.match(/^([^\s]+)\s*(x\d+)?$/),n=(null===t||void 0===t?void 0:t[1])||e,a=(null===t||void 0===t?void 0:t[2])||"";return n=n.replace(/GenuineIntel/i,"").replace(/\b\d+(st|nd|rd|th)? Gen\b/i,"").replace(/\(R\)/g,"").replace(/\(TM\)/g,"").replace(/\s+/g," ").trim(),"".concat(n).concat(a)},formatGpuModel:function(e){if(!e)return"";var t=e.match(/(.+?),\s*(\d+),\s*([\d.]+)(?:\s*x(\d+))?/);if(t){var n=Object(i["a"])(t,5),a=n[1],r=n[2],s=n[3],o=n[4],c=o?parseInt(o):1,l=Math.round(parseInt(r)/1024),u="".concat(a," (").concat(l,"GB, Driver ").concat(s,")");return c>1?"".concat(u," x").concat(c):u}return e}}},f=d,h=(n("d5a5"),n("2877")),p=Object(h["a"])(f,a,r,!1,null,"269574b3",null);t["a"]=p.exports},d469:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ZTree",e._g({ref:"ztree",attrs:{setting:e.treeSetting},scopedSlots:e._u([{key:"rMenu",fn:function(t){var a=t.data;return n("div",{},[e._t("rMenu",null,{data:a})],2)}}],null,!0)},e.$listeners))},r=[],i=(n("d92a"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"treebox"},[e.treeSetting.showSearch?n("div",[n("el-input",{directives:[{name:"show",rawName:"v-show",value:e.showTreeSearch,expression:"showTreeSearch"}],staticClass:"fixed-tree-search",attrs:{placeholder:e.$tc("Search"),"prefix-icon":"fa fa-search",size:"mini"},on:{input:e.treeSearchHandle},model:{value:e.treeSearchValue,callback:function(t){e.treeSearchValue=t},expression:"treeSearchValue"}},[n("span",{attrs:{slot:"suffix"},slot:"suffix"},[n("i",{staticClass:"el-icon-close",staticStyle:{"font-size":"12px",cursor:"pointer"},on:{click:e.onClose}})])])],1):e._e(),e._v(" "),n("ul",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"zloading"},[e._v("\n      "+e._s(this.$t("Loading"))+"...\n    ")]),e._v(" "),n("ul",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}],key:e.iZTreeID,staticClass:"ztree",attrs:{id:e.iZTreeID}}),e._v(" "),""===e.treeSetting.treeUrl?n("div",{staticClass:"tree-empty"},[e._v("\n      "+e._s(this.$t("Empty"))+"\n      "),e._m(0)]):e._e()]),e._v(" "),n("div",{staticClass:"rMenu",attrs:{id:e.iRMenuID}},[n("ul",{staticClass:"dropdown-menu menu-actions"},[e._t("rMenu")],2)])])}),s=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a",{attrs:{id:"tree-refresh"}},[n("i",{staticClass:"fa fa-refresh"})])}],o=(n("2caf"),n("ac4d"),n("8a81"),n("5df3"),n("1c4c"),n("6b54"),n("87b3"),n("6762"),n("2fdb"),n("7f7f"),n("456d"),n("6d67"),n("ac6a"),n("f3e2"),n("96cf"),n("3b8d")),c=(n("57e7"),n("7514"),n("75fc")),l=n("c0eb"),u=(n("6858"),n("9c11"),n("3cc2"),n("b708"),n("ad06"));function d(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=f(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){o=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw i}}}}function f(e,t){if(e){if("string"===typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var p={type:Object,default:function(){return{}}},m={name:"ZTree",components:{},props:{setting:p},data:function(){return{iZTreeID:"zTree_".concat(this._uid),iRMenuID:"rMenu_".concat(this._uid),zTree:"",rMenu:"",init:!1,loading:!1,showTreeSearch:!1,treeSearchValue:""}},computed:{treeSetting:function(){return this.setting}},mounted:function(){var e=this;window.refresh=this.refresh,window.onSearch=this.onSearch,this.initTree().then((function(){e.$nextTick((function(){e.updateTreeHeight()}))})),window.addEventListener("resize",this.updateTreeHeight)},beforeDestroy:function(){l["a"].fn.zTree.destroy(this.iZTreeID),window.removeEventListener("resize",this.updateTreeHeight)},methods:{onMenuClick:function(e){e.disabled||e.callback()},updateTreeHeight:_.debounce((function(){var e=this,t=document.getElementById(this.iZTreeID);if(t){var n=Object(c["a"])(document.getElementsByClassName("el-dialog__body"));if(n.length>0){var a=n.find((function(t){return-1!==t.innerHTML.indexOf(e.iZTreeID)}));if(a){var r=a.getBoundingClientRect();return void(t.style.height="".concat(r.height-60,"px"))}}var i=t.getBoundingClientRect();t.style.height="calc(100vh - ".concat(i.top,"px - 30px - 25px)")}}),100),initTree:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,a,r,i,s,o,c=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=c.length>0&&void 0!==c[0]&&c[0],a=this,this.loading=!0,r=n&&-1!==this.treeSetting.treeUrl.indexOf("/perms/")&&-1===this.treeSetting.treeUrl.indexOf("rebuild_tree")?-1===this.treeSetting.treeUrl.indexOf("?")?"".concat(this.treeSetting.treeUrl,"?rebuild_tree=1"):"".concat(this.treeSetting.treeUrl,"&rebuild_tree=1"):this.treeSetting.treeUrl,n&&l["a"].fn.zTree.destroy(this.iZTreeID),e.next=7,this.$axios.get(r,{"axios-retry":{retries:20,retryCondition:function(e){return u["a"].isNetworkOrIdempotentRequestError(e)||409===e.response.status},shouldResetTimeout:!0,retryDelay:function(){return 5e3}}});case 7:i=e.sent,a.loading=!1,i||(i=[]),0===(null===(t=i)||void 0===t?void 0:t.length)&&(null===(s=i)||void 0===s||s.push({name:this.$t("Empty")})),this.treeSetting.treeUrl=r,a.zTree=l["a"].fn.zTree.init(Object(l["a"])("#".concat(this.iZTreeID)),this.treeSetting,i),o=this.zTree.getNodes()[0],this.rootNodeAddDom(o),this.$emit("TreeInitFinish",this.zTree),this.treeSetting.showMenu&&(this.rMenu=Object(l["a"])("#".concat(this.iRMenuID)));case 17:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onSearch:function(){this.showTreeSearch=!this.showTreeSearch},onClose:function(){this.refresh(),this.onSearch()},rootNodeAddDom:function(e){var t=this.treeSetting,n=t.showSearch,a=t.showRefresh,r='\n        <a class="tree-action-btn" id="search-btn" onclick="onSearch()">\n          <i class="fa fa-search tree-banner-icon"></i>\n        </a>',i='\n        <a id="tree-refresh" class="tree-action-btn" onclick="refresh()">\n          <i class="fa fa-refresh"></i>\n        </a>',s="".concat(n?r:"").concat(a?i:""),o="\n        <span style=\"float: right; margin-right: 10px;\" class='tree-actions'>\n          ".concat(s,"\n        </span>");if(e){var c=Object(l["a"])("#"+e.tId+"_a");c.css({width:"calc(100% - 68px)",overflow:"hidden","text-overflow":"ellipsis"}),c.after(o)}},refresh:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,a,r,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.treeSearchValue="",null!==(t=this.treeSetting)&&void 0!==t&&null!==(n=t.callback)&&void 0!==n&&n.beforeRefresh&&this.treeSetting.callback.beforeRefresh(),null===(a=this.treeSetting)||void 0===a||null===(r=a.callback)||void 0===r||!r.refresh){e.next=5;break}return e.next=5,this.treeSetting.callback.refresh();case 5:this.zTree.destroy(),setTimeout((function(){return i.initTree(!0)}),200);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),treeSearch:function(){var e=this,t=document.getElementById("searchIcon"),n=document.getElementById("searchInput");t.classList.toggle("active"),n.focus(),n.onclick=function(e){e.stopPropagation()},n.onblur=function(e){e.stopPropagation(),e.target.value||t.classList.toggle("active")},n.oninput=function(t){return e.treeSearchHandle(t.target.value||"")}},treeSearchHandle:_.debounce((function(e){this.treeSetting.async.enable?this.filterAssetsServer(e):this.filterTree(e)}),600),getCheckedNodes:function(){return this.zTree.getCheckedNodes(!0)},recurseParent:function(e){var t=e.getParentNode();return t&&t.pId?[t].concat(Object(c["a"])(this.recurseParent(t))):t?[t]:[]},recurseChildren:function(e){var t=this;if(!e.isParent)return[];var n=e.children;if(!n)return[];var a=[];return n.forEach((function(e){a=[].concat(Object(c["a"])(n),Object(c["a"])(t.recurseChildren(e)))})),a},groupBy:function(e,t){var n={};return e.forEach((function(e){var a=JSON.stringify(t(e));n[a]=n[a]||[],n[a].push(e)})),Object.keys(n).map((function(e){return n[e]}))},filterTree:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.zTree;if(this.zTree){var a=n.getNodesByFilter((function(e){return"search"===e.id}));a&&n.removeNode(a[0]);var r=n.transformToArray(n.getNodes());if(e){if(!e)return n.hiddenNodes&&(n.showNodes(n.hiddenNodes),n.hiddenNodes=null),n.expandNodes&&(n.expandNodes.forEach((function(e){e.id!==r[0].id&&n.expandNode(e,!1)})),n.expandNodes=null),null;var i=[],s=n.getNodesByFilter((function(t){return t.name.toLowerCase().indexOf(e.toLowerCase())>-1}));if(s.length<1){var o=this.$t("Search"),l=s.length;o="".concat(o," (").concat(l,")");var u={id:"search",name:o,isParent:!1,open:!1};n.addNodes(null,u)}s.forEach((function(e){var n=t.recurseParent(e),a=t.recurseChildren(e);i=[].concat(Object(c["a"])(i),Object(c["a"])(n),Object(c["a"])(a),[e])})),n.hiddenNodes=r,n.expandNodes=i,n.hideNodes(r),n.showNodes(i);var f,h=d(i);try{for(h.s();!(f=h.n()).done;){var p=f.value;p.isParent&&n.expandNode(p,!0)}}catch(m){h.e(m)}finally{h.f()}}else n.showNodes(r)}},filterAssetsServer:function(e){var t=this;if(this.zTree){var n=this.zTree.getNodesByFilter((function(e){return"search"===e.id}));n&&(this.zTree.removeChildNodes(n[0]),this.zTree.removeNode(n[0]));var a=this.zTree.getNodes();if(e){0!==a.length&&this.zTree.hideNodes(a);var r=this.treeSetting.searchUrl?this.treeSetting.searchUrl:this.treeSetting.treeUrl,i=r.includes("?")?"&search=".concat(e):"?search=".concat(e);r.indexOf("assets/nodes/children/tree")>-1&&(r+="&all=all");var s="".concat(r).concat(i);this.$axios.get(s).then((function(e){var a=t.$t("Search"),r=e.length;a="".concat(a," (").concat(r,")");var i={id:"search",name:a,isParent:!0,open:!0,zAsync:!0};n=t.zTree.addNodes(null,i)[0],n.zAsync=!0,t.rootNodeAddDom(n);var s,o=t.groupBy(e,(function(e){var t,n;return null===(t=e.meta)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.org_name})),c=d(o);try{for(c.s();!(s=c.n()).done;){var l=s.value;t.zTree.addNodes(n,l)}}catch(u){c.e(u)}finally{c.f()}n.open=!0}))}else 0!==a.length&&this.zTree.showNodes(a)}}}},b=m,v=(n("f441"),n("2877")),g=Object(v["a"])(b,i,s,!1,null,"ab8cfbce",null),y=g.exports,w={name:"DataZTree",components:{ZTree:y},props:{setting:{type:Object,default:function(){}}},data:function(){return{defaultSetting:{view:{dblClickExpand:!1,showLine:!0},data:{simpleData:{enable:!0}},edit:{enable:!0,showRemoveBtn:!1,showRenameBtn:!1,drag:{isCopy:!1,isMove:!this.$store.getters.currentOrgIsRoot}},callback:{onRightClick:this.defaultCallback.bind(this,"onRightClick"),onRename:this.defaultCallback.bind(this,"onRename"),beforeClick:this.defaultCallback.bind(this,"beforeClick"),onSelected:this.defaultCallback.bind(this,"onSelected"),beforeDrag:this.defaultCallback.bind(this,"beforeDrag"),onDrag:this.defaultCallback.bind(this,"onDrag"),beforeDrop:this.defaultCallback.bind(this,"beforeDrop"),onDrop:this.defaultCallback.bind(this,"onDrop"),beforeAsync:this.defaultCallback.bind(this,"beforeAsync"),refresh:this.defaultCallback.bind(this,"refresh")}}}},computed:{treeSetting:function(){return _.merge(this.defaultSetting,this.setting)},zTree:function(){return this.$refs.ztree.zTree},rMenu:function(){return this.$refs.ztree.rMenu},refresh:function(){return this.$refs.ztree.refresh}},methods:{defaultCallback:function(e){}}},$=w,O=Object(v["a"])($,a,r,!1,null,null,null);t["a"]=O.exports},d4a8:function(e,t,n){"use strict";n("733b")},d5a5:function(e,t,n){"use strict";n("f5c6")},d7b5:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ChoicesFormatter",e._b({attrs:{"formatter-args-default":e.iFormatterArgsDefault}},"ChoicesFormatter",e.$props,!1))},r=[],i=n("f03e"),s={name:"TaskStatusFormatter",components:{ChoicesFormatter:i["a"]},extends:i["a"],props:{formatterArgsDefault:{type:Object,default:function(){return{faChoices:{ready:"fa-clock-o",pending:"fa-clock-o",running:"fa-spinner",success:"fa-check-circle",failed:"fa-times-circle",error:"fa-exclamation-circle",canceled:"fa-ban"},classChoices:{success:"text-primary",failed:"text-danger",error:"text-danger"},textChoices:{ready:this.$t("Ready"),pending:this.$t("Pending"),running:this.$t("Running"),success:this.$t("Success"),failed:this.$t("Failed"),error:this.$t("Error"),canceled:this.$t("Canceled")}}}}},data:function(){return{iFormatterArgsDefault:Object.assign({},i["a"].formatterArgsDefault,this.formatterArgsDefault)}},mounted:function(){}},o=s,c=n("2877"),l=Object(c["a"])(o,a,r,!1,null,"14f422eb",null);t["a"]=l.exports},d83d:function(e,t,n){},d93e:function(e,t,n){"use strict";n("3aff")},da4c:function(e,t,n){"use strict";n("e8ef")},daf3:function(e,t,n){"use strict";n("7892")},db10:function(e,t,n){},dda2:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("span",{class:e.iClasses},[e.iIcon?n("i",{class:"fa "+e.iIcon}):e._e()]),e._v(" "),e.iText?n("span",[e._v(" "+e._s(e.iText)+" ")]):e._e()])},r=[],i={props:{value:{type:[String,Boolean],default:function(){return!1}},trueText:{type:String,default:function(){return this.$t("Yes")}},falseText:{type:String,default:function(){return this.$t("No")}},trueIcon:{type:String,default:function(){return"fa-check-circle"}},falseIcon:{type:String,default:function(){return""}}},data:function(){return{}},computed:{iText:function(){return this.value?this.trueText:this.falseText},iIcon:function(){return this.value?this.trueIcon:this.falseIcon},iClasses:function(){return this.value?"text-primary":""}}},s=i,o=n("2877"),c=Object(o["a"])(s,a,r,!1,null,"76f0b3df",null);t["a"]=c.exports},e3bc:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.loading?n("IBox",{staticStyle:{width:"100%",height:"200px"}}):n("div",[e.hasObject&&e.items.length>0?n("DetailCard",e._b({attrs:{items:e.validItems,loading:e.loading}},"DetailCard",e.$attrs,!1)):e._e()],1)},r=[],i=(n("ac4d"),n("8a81"),n("5df3"),n("1c4c"),n("6b54"),n("87b3"),n("6762"),n("2fdb"),n("f3e2"),n("768b")),s=n("7618"),o=(n("2caf"),n("6d67"),n("7f7f"),n("96cf"),n("3b8d")),c=(n("d25f"),n("ac6a"),n("456d"),n("30f4")),l=n("dbfd"),u=n("3f95"),d=n("e9f9"),f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",e._l(e.value,(function(e){return n("ILabel",{key:e.key,attrs:{label:e}})})),1)},h=[],p=n("6424"),m={name:"LabelsDetailFormatter",components:{ILabel:p["a"]},props:{label:{type:String,default:""},value:{type:Array,default:function(){return[]}}}},b=m,v=n("2877"),g=Object(v["a"])(b,f,h,!1,null,"1ccb26b4",null),y=g.exports;function w(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=_(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){o=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw i}}}}function _(e,t){if(e){if("string"===typeof e)return $(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$(e,t):void 0}}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var O={name:"AutoDetailCard",components:{IBox:d["a"],DetailCard:c["a"]},props:{object:{type:Object,default:function(){return{}}},url:{type:String,required:!0},fields:{type:Array,default:null},excludes:{type:Array,default:null},showUndefined:{type:Boolean,default:!0},formatters:{type:Object,default:function(){return{}}},nested:{type:String,default:null}},data:function(){return{items:[],loading:!0}},computed:{iObject:function(){return this.nested?this.object[this.nested]||{}:this.object},hasObject:function(){return Object.keys(this.iObject).length>0},validItems:function(){var e=this;return this.items.filter((function(t){return e.isHidden(t)}))}},mounted:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.optionAndGenFields();case 2:this.loading=!1;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{defaultFormatter:function(e){var t,n=this.$createElement,a={},r=w(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;a[i]=function(e,t){return"-"===t?n("span",["-"]):n("span",{style:{cursor:"pointer"},on:{click:function(){return Object(l["d"])(t)}},attrs:{title:t}},[t])}}}catch(s){r.e(s)}finally{r.f()}return a},isHidden:function(e){var t=e.has;return"function"===typeof t&&(t=t()),void 0===t&&(t=!0),t},parseValue:function(e,t){var n;if(null===e||""===e)e="-";else if(0===e)e=0;else if("datetime"===t)e=Object(u["i"])(e);else if("labeled_choice"===t){var a;e=null===(a=e)||void 0===a?void 0:a["label"]}else if("related_field"===t||"nested object"===t||null!==(n=e)&&void 0!==n&&n.name){var r;e=null===(r=e)||void 0===r?void 0:r["name"]}else if("m2m_related_field"===t){var i;e=null===(i=e)||void 0===i?void 0:i.map((function(e){return e["name"]})).join(", ")}else"boolean"===t&&(e=e?this.$t("Yes"):this.$t("No"));return e},getComponentByName:function(e){return"labels"===e?y:null},parseArrayValue:function(e,t,n){if(Array.isArray(e)){var a=Object(s["a"])(e[0]),r={};if(0===e.length)return r={key:n,value:"-"},this.items.push(r);var o,c=w(e.entries());try{for(c.s();!(o=c.n()).done;){var l=Object(i["a"])(o.value,2),u=l[0],d=l[1];if("object"===a){var f=e[0];if(f.hasOwnProperty("name"))e.forEach((function(e){var n="".concat(name,".").concat(e.name);t.includes(n)||(r={key:e.label,value:e.value})}));else{var h="".concat(name,".").concat(d.name);if(t.includes(h))continue;r={key:d.label,value:d.value}}}else"string"===a&&(r={value:e[u]},0===u&&(r["key"]=n));u!==e.length-1&&(r["class"]="array-item"),this.items.push(r)}}catch(p){c.e(p)}finally{c.f()}}},optionAndGenFields:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,a,r,i,o,c,l,u,d,f,h,p,m,b,v;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("common/getUrlMeta",{url:this.url});case 2:t=e.sent,n=t.actions["GET"]||{},this.nested&&(n=(null===(a=n[this.nested])||void 0===a?void 0:a.children)||n||{}),r=this.fields,r=r||Object.keys(n),i=["org_id"],o=(this.excludes||[]).concat(i),r=r.filter((function(e){return!o.includes(e)})),c=this.defaultFormatter(r),l=w(r),e.prev=12,l.s();case 14:if((u=l.n()).done){e.next=48;break}if(d=u.value,"object"!==Object(s["a"])(d)){e.next=19;break}return this.items.push(d),e.abrupt("continue",46);case 19:if(f=n[d],f){e.next=22;break}return e.abrupt("continue",46);case 22:if(!f["write_only"]){e.next=24;break}return e.abrupt("continue",46);case 24:if(h=this.iObject[d],p=f.label,m=this.getComponentByName(d),!m){e.next=30;break}return this.items.push({key:p,value:h,component:m}),e.abrupt("continue",46);case 30:if(b=this.formatters[d],!b){e.next=34;break}return this.items.push({key:p,value:h,formatter:b}),e.abrupt("continue",46);case 34:if(!Array.isArray(h)){e.next=37;break}return this.parseArrayValue(h,o,p),e.abrupt("continue",46);case 37:if(h=this.parseValue(h,f.type),void 0!==h){e.next=44;break}if(!this.showUndefined){e.next=43;break}h="-",e.next=44;break;case 43:return e.abrupt("continue",46);case 44:v={key:p,value:h,formatter:c[d]},this.items.push(v);case 46:e.next=14;break;case 48:e.next=53;break;case 50:e.prev=50,e.t0=e["catch"](12),l.e(e.t0);case 53:return e.prev=53,l.f(),e.finish(53);case 56:case"end":return e.stop()}}),e,this,[[12,50,53,56]])})));function t(){return e.apply(this,arguments)}return t}()}},k=O,S=Object(v["a"])(k,a,r,!1,null,"6b2a1d32",null);t["a"]=S.exports},e629:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.hasCheckAll&&e.options.length>0?n("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("\n    "+e._s(e.$tc("SelectAll"))+"\n  ")]):e._e(),e._v(" "),n("el-checkbox-group",{on:{change:e.onChange},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[n("el-alert",{directives:[{name:"show",rawName:"v-show",value:e.tipShow,expression:"tipShow"}],attrs:{type:"error"}},[e._v(" "+e._s(e.noOptionTip))]),e._v(" "),e._l(e.options,(function(t){return n("el-checkbox",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])}))],2)],1)},r=[],i=(n("6d67"),n("ac6a"),n("f3e2"),n("96cf"),n("3b8d")),s={name:"Checkbox",props:{value:{type:Array,default:function(){return[]}},url:{type:String,default:""},processResults:{type:Function,default:function(e){return e}},noOptionTip:{type:String,default:function(){return""}},hasCheckAll:{type:Boolean,default:function(){return!0}}},data:function(){return{checkAll:!1,tipShow:!1,isIndeterminate:!1,checked:this.value||[],options:[]}},mounted:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getOptions();case 2:this.tipShow=0===this.options.length&&this.noOptionTip;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{getOptions:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=function(e){return 403===e?200:e},e.next=3,this.$axios.get(this.url,{validateStatus:t}).then((function(e){var t;null===(t=n.processResults(e))||void 0===t||t.forEach((function(e){n.options.push(e)})),n.refreshCheckboxStatus()}));case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),refreshCheckboxStatus:function(){var e=this.checked.length;this.checkAll=e===this.options.length,this.isIndeterminate=e>0&&e<this.options.length},onChange:function(){this.$log.debug("Current checked: ",this.checked),this.refreshCheckboxStatus(),this.$emit("input",this.checked)},handleCheckAllChange:function(e){this.checked=e?this.options.map((function(e){return e.value})):[],this.isIndeterminate=!1,this.$emit("input",this.checked)}}},o=s,c=n("2877"),l=Object(c["a"])(o,a,r,!1,null,"1fa2b560",null);t["a"]=l.exports},e7e4:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.iVisible?n("Dialog",{attrs:{"destroy-on-close":!0,"show-cancel":!1,"show-confirm":!1,title:e.$tc("Report"),visible:e.iVisible,top:"35vh",width:"80%"},on:{"update:visible":function(t){e.iVisible=t},close:function(t){e.loading=!0}}},[e.loading?n("span",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"loading"}):e._e(),e._v(" "),n("iframe",{staticStyle:{border:"none"},attrs:{title:"dialog",src:e.url},on:{load:e.onIframeLoad}})]):e._e()],1)},r=[],i=n("9039"),s={name:"ReportDialog",components:{Dialog:i["a"]},props:{visible:{type:Boolean,default:!1},url:{type:String,default:""}},data:function(){return{loading:!0}},computed:{iVisible:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e)}}},mounted:function(){},beforeMount:function(){},methods:{onIframeLoad:function(){this.loading=!1}}},o=s,c=(n("f980"),n("2877")),l=Object(c["a"])(o,a,r,!1,null,"377e750a",null);t["a"]=l.exports},e823:function(e,t,n){"use strict";n("8eb6")},e8ef:function(e,t,n){},e9fa:function(e,t,n){"use strict";n("ace0")},f422:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.loading?e._e():n("AutoDataForm",e._b({ref:"AutoDataForm",class:e.addTemplate?"":"account-add",attrs:{"submit-btn-text":e.submitBtnText},on:{submit:e.confirm}},"AutoDataForm",e.$data,!1))},r=[],i=(n("57e7"),n("d25f"),n("75fc")),s=(n("ac6a"),n("f3e2"),n("7f7f"),n("96cf"),n("3b8d")),o=n("c75f"),c=n("1b0e"),l=n("fcdd"),u={name:"AccountCreateForm",components:{AutoDataForm:o["a"]},props:{asset:{type:Object,default:null},platform:{type:Object,default:null},account:{type:Object,default:function(){return{}}},encryptPassword:{type:Boolean,default:!0},addTemplate:{type:Boolean,default:!1}},data:function(){return{loading:!0,isDisabled:!1,usernameChanged:!1,submitBtnText:this.$t("Confirm"),iPlatform:{automation:{},su_enabled:!1,protocols:[{name:"ssh",secret_types:["password","ssh_key","token","access_key","api_key"]}]},url:"/api/v1/accounts/accounts/",form:Object.assign({on_invalid:"error"},this.account||{}),encryptedFields:["secret"],fields:[[this.$t("Basic"),["name","username","privileged","su_from","su_from_username","template"]],[this.$t("Asset"),["assets"]],[this.$t("Secret"),["secret_type","password","ssh_key","token","access_key","passphrase","api_key","secret_reset"]],[this.$t("Other"),["push_now","params","on_invalid","is_active","comment"]]],fieldsMeta:Object(l["a"])(this),hasSaveContinue:!1}},watch:{"$route.query":{handler:function(e,t){!e||"move"!==e.flag&&"copy"!==e.flag||(this.isDisabled=!0)},immediate:!0}},mounted:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getPlatform();case 3:this.setSecretTypeOptions(),this.getDefaultAssets();case 5:return e.prev=5,this.loading=!1,e.finish(5);case 8:case"end":return e.stop()}}),e,this,[[0,,5,8]])})));function t(){return e.apply(this,arguments)}return t}(),methods:{getDefaultAssets:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=this.$route.query.asset_id,t&&!this.form.name&&(this.form.assets=[t]);case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getPlatform:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.platform&&(this.iPlatform=this.platform),this.asset&&this.asset.platform){e.next=3;break}return e.abrupt("return");case 3:return t=this.asset.platform.id,e.next=6,this.$axios.get("/api/v1/assets/platforms/".concat(t,"/"));case 6:this.iPlatform=e.sent;case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),setSecretTypeOptions:function(){var e,t,n=[{label:this.$t("Password"),value:"password"},{label:this.$t("SSHKey"),value:"ssh_key"},{label:this.$t("Token"),value:"token"},{label:this.$t("AccessKey"),value:"access_key"},{label:this.$t("ApiKey"),value:"api_key"}],a=[];null===(e=this.iPlatform.protocols)||void 0===e||e.forEach((function(e){a.push.apply(a,Object(i["a"])(e["secret_types"]))})),null!==(t=this.form)&&void 0!==t&&t.secret_type||(this.form.secret_type=a[0]),this.fieldsMeta.secret_type.options=n.filter((function(e){return a.indexOf(e.value)>-1}))},confirm:function(e){var t,n=e.secret_type||"password";e.secret=e[n],e.secret=this.encryptPassword?Object(c["b"])(e.secret):e.secret,delete e[n],e.secret||delete e["secret"],null!==(t=this.account)&&void 0!==t&&t.name?this.account.payload&&"pam_account_clone"===this.account.payload?this.$emit("add",e):this.$emit("edit",e):this.$emit("add",e)}}},d=u,f=(n("58d4"),n("2877")),h=Object(f["a"])(d,a,r,!1,null,"3cf710cc",null);t["a"]=h.exports},f441:function(e,t,n){"use strict";n("fc7c")},f4e5:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("DrawerListTable",{ref:"ListTable",attrs:{"detail-drawer":e.detailDrawer,"header-actions":e.headerActions,"quick-filters":e.quickFilters,"table-config":e.tableConfig}}),e._v(" "),e.showViewSecretDialog?n("ViewSecret",{attrs:{account:e.account,url:e.secretUrl,visible:e.showViewSecretDialog},on:{"update:visible":function(t){e.showViewSecretDialog=t}}}):e._e(),e._v(" "),e.showUpdateSecretDialog?n("UpdateSecretInfo",{attrs:{account:e.account,visible:e.showUpdateSecretDialog},on:{"update:visible":function(t){e.showUpdateSecretDialog=t},updateAuthDone:e.onUpdateAuthDone}}):e._e(),e._v(" "),e.showAddDialog?n("AccountCreateUpdate",{attrs:{account:e.account,"add-template":e.addTemplate,asset:e.iAsset,title:e.accountCreateUpdateTitle,visible:e.showAddDialog},on:{"update:visible":function(t){e.showAddDialog=t},add:e.addAccountSuccess,"bulk-create-done":function(t){return e.showBulkCreateResult(t)}}}):e._e(),e._v(" "),e.showResultDialog?n("ResultDialog",{attrs:{result:e.createAccountResults,visible:e.showResultDialog},on:{"update:visible":function(t){e.showResultDialog=t},"close-all":e.closeAll}}):e._e(),e._v(" "),e.updateSelectedDialogSetting.visible?n("AccountBulkUpdateDialog",e._b({attrs:{visible:e.updateSelectedDialogSetting.visible},on:{"update:visible":function(t){return e.$set(e.updateSelectedDialogSetting,"visible",t)},update:e.handleAccountBulkUpdate}},"AccountBulkUpdateDialog",e.updateSelectedDialogSetting,!1)):e._e(),e._v(" "),e.showPasswordHistoryDialog?n("PasswordHistoryDialog",{attrs:{account:e.currentAccountColumn,visible:e.showPasswordHistoryDialog},on:{"update:visible":function(t){e.showPasswordHistoryDialog=t}}}):e._e()],1)},r=[],i=(n("ac4d"),n("8a81"),n("5df3"),n("1c4c"),n("6b54"),n("87b3"),n("1c01"),n("58b2"),n("8e6e"),n("f3e2"),n("d25f"),n("ac6a"),n("456d"),n("2caf"),n("6d67"),n("d92a"),n("57e7"),n("96cf"),n("3b8d")),s=n("75fc"),o=(n("28a5"),n("7f7f"),n("bd86")),c=(n("a481"),n("2f62")),l=n("a4d9"),u=n("ac6b"),d=n("53f7"),f=n("8e48"),h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Dialog",e._g({attrs:{"destroy-on-close":!0,"show-buttons":!1,title:e.$tc("UpdateAssetUserToken"),visible:e.iVisible,width:"800px"},on:{"update:visible":function(t){e.iVisible=t}}},e.$listeners),[n("AutoDataForm",{attrs:{fields:e.fields,"fields-meta":e.fieldsMeta,form:e.init,"has-reset":!1,"has-save-continue":!1,url:"",method:"patch"},on:{submit:e.handleConfirm}})],1)},p=[],m=(n("8615"),n("9039")),b=n("fcdd"),v=n("1b0e"),g=n("c75f");function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $={name:"UpdateSecretInfo",components:{AutoDataForm:g["a"],Dialog:m["a"]},props:{account:{type:Object,default:function(){return{}}},visible:{type:Boolean,default:!1}},data:function(){var e=Object(b["a"])(this);return{fields:["name","secret_type","password","ssh_key","token","access_key","passphrase","api_key"],fieldsMeta:w(w({},e),{},{name:w(w({},e.name),{},{readonly:!0}),secret_type:{hidden:function(){return!0}}}),init:w({},this.account)}},computed:{iVisible:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e)}}},methods:{handleConfirm:function(e){var t=this,n=this.account.secret_type.value,a={secret:Object(v["b"])(e[n])};this.$axios.patch("/api/v1/accounts/accounts/".concat(this.account.id,"/"),a,{disableFlashErrorMsg:!0}).then((function(e){t.$message.success(t.$tc("UpdateSuccessMsg")),t.iVisible=!1})).catch((function(e){var n=Object.values(e.response.data).join(", ");t.$message.error(t.$tc("UpdateErrorMsg")+" "+n),t.iVisible=!1}))},handleCancel:function(){this.$emit("update:visible",!1)}}},O=$,k=n("2877"),S=Object(k["a"])(O,h,p,!1,null,null,null),x=S.exports,j=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Dialog",e._g(e._b({attrs:{"show-cancel":!1,title:e.title},on:{confirm:e.closeDialog}},"Dialog",e.$attrs,!1),e.$listeners),[n("el-alert",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"success"}},e._l(e.summary,(function(t){return n("span",{key:t.key},[n("b",[e._v(e._s(t.label))]),e._v(": "+e._s(t.value)+" ")])})),0),e._v(" "),n("DataTable",{attrs:{config:e.config}})],1)},C=[],A=n("1cf5"),D={name:"ResultDialog",components:{DataTable:A["a"],Dialog:m["a"]},props:{result:{type:Array,default:function(){return[]}}},data:function(){var e=this.$createElement,t=this.$t("Error"),n={created:this.$tc("Created"),updated:this.$tc("Updated"),skipped:this.$tc("Skipped")},a={created:"color-primary",updated:"color-success",skipped:"color-default"};return{title:this.$t("AddAccountResult"),config:{columns:[{prop:"asset",label:this.$t("Asset")},{prop:"state",label:this.$t("Status"),width:"200px",formatter:function(r){if(r.error)return e("span",{class:"color-error"},[t,": ",r.error]);if(r.state){var i=a[r.state],s=n[r.state];return e("span",{class:i},[s])}}}],totalData:this.result}}},computed:{summary:function(){var e={total:this.$tc("Total"),created:this.$tc("Created"),updated:this.$tc("Updated"),skipped:this.$tc("Skipped"),error:this.$tc("Error")},t=_.groupBy(this.result,"state"),n=_.mapValues(t,"length");return n["total"]=this.result.length,_.map(n,(function(t,n){return{label:e[n],value:t,key:n}}))}},methods:{closeDialog:function(){this.$emit("close-all")}}},T=D,P=(n("61cb"),Object(k["a"])(T,j,C,!1,null,"6a44ba89",null)),V=P.exports,R=n("5838"),E=n("c51d"),M=n("ae05"),I=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.visible?n("GenericUpdateFormDialog",e._g({attrs:{"form-setting":e.formSetting,"selected-rows":e.selectedRows,visible:e.visible}},e.$listeners)):e._e()},N=[],L=(n("6762"),n("2fdb"),n("cd4a"));function U(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=F(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){o=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw i}}}}function F(e,t){if(e){if("string"===typeof e)return z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(e,t):void 0}}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var B={name:"AccountBulkUpdateDialog",components:{GenericUpdateFormDialog:L["h"]},props:{visible:{type:Boolean,default:!1},selectedRows:{type:Array,default:function(){return[]}}},data:function(){return{formSetting:{url:"/api/v1/accounts/accounts/",hasSaveContinue:!1,fields:[],fieldsMeta:Object(b["a"])(this),cleanOtherFormValue:function(e){var t,n=U(e);try{var a=function(){var e=t.value;Object.keys(e).forEach((function(t,n,a){["ssh_key","token","access_key","api_key","password"].includes(t)&&(e["secret"]=Object(v["b"])(e[t]),delete e[t])}))};for(n.s();!(t=n.n()).done;)a()}catch(r){n.e(r)}finally{n.f()}return e}}}},created:function(){this.filterFieldsMeta()},methods:{filterFieldsMeta:function(){for(var e,t=["privileged"],n={},a=["password","ssh_key","passphrase","token","access_key","api_key"],r=(null===(e=this.selectedRows[0].secret_type)||void 0===e?void 0:e.value)||"password",i=0,s=a;i<s.length;i++){var o=s[i];"ssh_key"!==r||"passphrase"!==o?r!==o?delete this.formSetting.fieldsMeta[o]:(t.push(o),this.formSetting.fieldsMeta[o].hidden=function(){return!1}):(t.push("passphrase"),this.formSetting.fieldsMeta["passphrase"].hidden=function(){return!1})}t=t.concat(["is_active","comment"]);var c,l=U(t);try{for(l.s();!(c=l.n()).done;){var u=c.value;n[u]=this.formSetting.fieldsMeta[u]}}catch(d){l.e(d)}finally{l.f()}this.formSetting.fields=t,this.formSetting.fieldsMeta=n}}},H=B,q=Object(k["a"])(H,I,N,!1,null,"ff6f257c",null),W=q.exports;function K(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=G(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){o=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw i}}}}function G(e,t){if(e){if("string"===typeof e)return Z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Z(e,t):void 0}}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var J={name:"AccountListTable",components:{ViewSecret:f["a"],ResultDialog:V,DrawerListTable:M["a"],UpdateSecretInfo:x,AccountCreateUpdate:R["a"],PasswordHistoryDialog:E["a"],AccountBulkUpdateDialog:W},props:{url:{type:String,required:!0},exportUrl:{type:String,default:function(){return this.url.replace("/accounts/accounts/","/accounts/account-secrets/")}},hasLeftActions:{type:Boolean,default:!1},otherActions:{type:Array,default:null},hasClone:{type:Boolean,default:!0},asset:{type:Object,default:null},columns:{type:Array,default:function(){return[]}},hasExport:{type:Boolean,default:!0},hasImport:{type:Boolean,default:!0},hasDeleteAction:{type:Boolean,default:!0},columnsMeta:{type:Object,default:function(){}},columnsDefault:{type:Array,default:function(){return["name","username","secret","asset","platform","connect"]}},headerExtraActions:{type:Array,default:function(){return[]}},extraQuery:{type:Object,default:function(){return{}}},showQuickFilters:{type:Boolean,default:!0},showActions:{type:Boolean,default:!0}},data:function(){var e=this,t=this;return{addTemplate:!1,isUpdateAccount:!1,currentAccountColumn:{},showPasswordHistoryDialog:!1,showViewSecretDialog:!1,showUpdateSecretDialog:!1,showResultDialog:!1,showAddDialog:!1,showAddTemplateDialog:!1,detailDrawer:function(){return Promise.all([n.e("chunk-commons"),n.e("chunk-ffa07718"),n.e("chunk-6f56e3c0")]).then(n.bind(null,"707f"))},createAccountResults:[],iAsset:this.asset,account:{},secretUrl:"",quickFilters:this.showQuickFilters?Object(l["b"])(this):[],tableConfig:{url:this.url,permissions:{app:"assets",resource:"account"},extraQuery:this.extraQuery,columnsExclude:["spec_info"],columnsAdd:["secret","platform","connect"],columnsShow:{min:["name","username","actions"],default:this.columnsDefault},columnsMeta:Y({name:{minWidth:"60px",formatterArgs:{can:function(){return t.$hasPerm("accounts.view_account")},getRoute:function(e){var t=e.row;return{name:"AccountDetail",params:{id:t.id}}},getTitle:function(t){var n=t.row,a=n.name;if(n.ds&&e.asset&&e.asset.id!==n.asset.id){var r=n.ds.id.split("-")[0];a="".concat(n.name,"@").concat(r)}return a},getDrawerTitle:function(e){var t=e.row;return"".concat(t.username,"@").concat(t.asset.name)}}},secret:{formatter:d["p"],width:"130px",formatterArgs:{secretFrom:"api",hasDownload:!1,actionLeft:!0}},connect:{label:this.$t("Connect"),width:"80px",formatter:d["a"],formatterArgs:{asset:this.asset,can:function(t){t.row;return e.currentUserIsSuperAdmin}}},ds:{width:"100px",formatter:function(e){return e.ds&&e.ds["domain_name"]?e.ds["domain_name"]:""}},platform:{label:this.$t("Platform"),width:"150px",formatter:d["n"],formatterArgs:{platformAttr:"asset.platform"}},asset:{minWidth:"100px",formatter:function(e){return e.asset.name}},username:{minWidth:"60px",formatter:function(e){return e.ds&&e.ds["domain_name"]?"".concat(e.username,"@").concat(e.ds["domain_name"]):e.username}},secret_type:{formatter:function(e){return e.secret_type.label}},source:{formatter:function(e){return e.source.label}},has_secret:{width:"120px",formatterArgs:{showFalse:!1}},privileged:{width:"120px",formatterArgs:{showText:!1,showFalse:!0}},connectivity:l["c"],actions:{formatter:d["c"],has:this.showActions,formatterArgs:{performDelete:function(t){var n=t.row,a=n.id,r="/api/v1/accounts/accounts/".concat(a,"/");return e.$axios.delete(r)},hasUpdate:!1,hasDelete:!0,hasClone:!1,canDelete:function(n){var a=n.row;return t.$hasPerm("accounts.delete_account")&&!Object(l["d"])(a,e)},moreActionsTitle:this.$t("More"),extraActions:Object(l["a"])(this)}}},this.columnsMeta)},headerActions:{hasLabelSearch:!0,hasLeftActions:this.hasLeftActions,hasMoreActions:!0,hasCreate:!1,hasImport:this.hasImport,hasExport:this.hasExport&&this.$hasPerm("accounts.view_accountsecret"),exportOptions:{url:this.exportUrl,mfaVerifyRequired:!0,tips:this.$t("AccountExportTips")},importOptions:{canImportCreate:this.$hasPerm("accounts.add_account"),canImportUpdate:this.$hasPerm("accounts.change_account")},extraActions:[{name:"add",title:this.$t("Create"),type:"primary",icon:"plus",can:function(){return t.$hasPerm("accounts.add_account")&&!t.$store.getters.currentOrgIsRoot},callback:function(){setTimeout((function(){t.iAsset=e.asset,t.account={},e.addTemplate=!1,e.showAddDialog=!0}),200)}},{name:"add-template",title:this.$t("TemplateAdd"),has:!(this.platform||this.asset),can:function(){return t.$hasPerm("accounts.add_account")&&!t.$store.getters.currentOrgIsRoot},callback:function(){var n=Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.getAssetDetail();case 2:setTimeout((function(){t.iAsset=e.asset,t.account={},t.showAddDialog=!0,t.addTemplate=!0}));case 3:case"end":return n.stop()}}),n)})));function a(){return n.apply(this,arguments)}return a}()}].concat(Object(s["a"])(this.headerExtraActions)),extraMoreActions:[{name:"TestSelected",title:this.$t("TestSelected"),type:"primary",icon:"verify",can:function(n){var a=n.selectedRows;return a.length>0&&-1===["clickhouse","redis","website","chatgpt"].indexOf(a[0].asset.type.value)&&!e.$store.getters.currentOrgIsRoot&&t.$hasPerm("accounts.verify_account")},callback:function(e){var t=this,n=e.selectedRows,a=n.map((function(e){return e.id}));this.$axios.post("/api/v1/accounts/accounts/tasks/",{action:"verify",accounts:a}).then((function(e){Object(u["k"])(e["task"])})).catch((function(e){t.$message.error(t.$tc("BulkVerifyErrorMsg "+e))}))}.bind(this)},{name:"BatchClearSecret",title:this.$t("ClearSecret"),type:"primary",icon:"clean",can:function(e){var n=e.selectedRows;return n.length>0&&t.$hasPerm("accounts.change_account")},callback:function(e){var t=this,n=e.selectedRows,a=n.map((function(e){return e.id}));this.$axios.patch("/api/v1/accounts/accounts/clear-secret/",{account_ids:a}).then((function(){t.$message.success(t.$tc("ClearSuccessMsg"))})).catch((function(e){t.$message.error(t.$tc("ClearErrorMsg "+e))}))}.bind(this)},{name:"UpdateSelected",title:this.$t("UpdateSelected"),icon:"batch-update",can:function(n){var a=n.selectedRows;return a.length>0&&!e.$store.getters.currentOrgIsRoot&&t.$hasPerm("accounts.change_account")&&a.every((function(e){return e.secret_type.value===a[0].secret_type.value}))},callback:function(e){var n=e.selectedRows;t.updateSelectedDialogSetting.selectedRows=n,t.updateSelectedDialogSetting.visible=!0}}],canBulkDelete:t.$hasPerm("accounts.delete_account"),searchConfig:{getUrlQuery:!1,exclude:["asset"]},hasSearch:!0},updateSelectedDialogSetting:{visible:!1,selectedRows:[]}}},computed:Y(Y({},Object(c["b"])(["currentUserIsSuperAdmin"])),{},{accountCreateUpdateTitle:function(){return this.addTemplate?this.$t("AddAccountByTemplate"):this.isUpdateAccount?this.$t("UpdateAccount"):this.$t("AddAccount")}}),watch:{url:function(e){this.$set(this.tableConfig,"url",e),this.$set(this.headerActions.exportOptions,"url",e.replace(/(.*)accounts/,"$1account-secrets"))}},mounted:function(){this.setActions()},activated:function(){var e=this;this.tabDeactivated&&setTimeout((function(){return e.refresh()}),300)},deactivated:function(){this.tabDeactivated=!0},methods:{setActions:function(){if(this.columns.length>0&&(this.tableConfig.columns=this.columns),this.otherActions){var e,t=this.tableConfig.columns[this.tableConfig.columns.length-1],n=K(this.otherActions);try{for(n.s();!(e=n.n()).done;){var a=e.value;t.formatterArgs.extraActions.push(a)}}catch(r){n.e(r)}finally{n.f()}}},onUpdateAuthDone:function(e){Object.assign(this.account,e)},addAccountSuccess:function(){this.isUpdateAccount=!1,this.$refs.ListTable.reloadTable()},getAssetDetail:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.$route.query.asset,!t){e.next=5;break}return e.next=4,this.$axios.get("/api/v1/assets/assets/".concat(t,"/"));case 4:this.iAsset=e.sent;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),refresh:function(){this.$refs.ListTable.reloadTable()},showBulkCreateResult:function(e){var t=this;setTimeout((function(){t.showResultDialog=!0,t.createAccountResults=e}),350)},handleAccountBulkUpdate:function(){this.updateSelectedDialogSetting.visible=!1,this.$refs.ListTable.reloadTable()},closeAll:function(){var e=this;setTimeout((function(){e.showResultDialog=!1}),350),setTimeout((function(){e.showAddDialog=!1}),800),setTimeout((function(){e.refresh()}),1e3)}}},X=J,ee=(n("fc49"),Object(k["a"])(X,a,r,!1,null,"80816c00",null));t["a"]=ee.exports},f54a:function(e,t,n){"use strict";n("150c")},f56a:function(e,t,n){},f5c6:function(e,t,n){},f823:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-link",{attrs:{disabled:e.disabled},on:{click:e.onClick}},[e._v("\n  "+e._s(e.title)+"\n")])},r=[],i={name:"Link",props:{href:{type:String,default:""},title:{type:String,default:""},disabled:{type:Boolean,default:!1}},methods:{onClick:function(){window.open(this.href)}}},s=i,o=n("2877"),c=Object(o["a"])(s,a,r,!1,null,"4b69b109",null),l=c.exports,u=n("49bd"),d=n("0a23"),f=n("86d4"),h=n("e629"),p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("GenericCreateUpdateForm",e._b({staticClass:"attr-input",on:{submit:e.onSubmit}},"GenericCreateUpdateForm",e.formConfig,!1)),e._v(" "),n("DataTable",{staticClass:"attr-list",attrs:{config:e.tableConfig}})],1)},m=[],b=n("d0aa"),v=n("1cf5"),g={name:"AttrInput",components:{DataTable:v["a"],GenericCreateUpdateForm:b["a"]},props:{formConfig:{type:Object,default:function(){return{}}},tableConfig:{type:Object,default:function(){return{}}},beforeSubmit:{type:Function,default:function(e){return!0}}},data:function(){return{}},methods:{onSubmit:function(e){if(this.beforeSubmit(e)){var t=JSON.parse(JSON.stringify(e));this.tableConfig.totalData.push(t),this.$emit("submit",this.tableConfig.totalData)}}}},y=g,w=(n("f54a"),Object(o["a"])(y,p,m,!1,null,"65703fc6",null)),$=w.exports,O=n("3d2a"),k=n("605a"),S=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-input",{attrs:{placeholder:e.$tc("InputPhone"),required:""},on:{input:e.onInputChange},model:{value:e.rawValue.phone,callback:function(t){e.$set(e.rawValue,"phone",t)},expression:"rawValue.phone"}},[n("el-select",{attrs:{slot:"prepend",placeholder:e.$tc("Select"),value:e.rawValue.code},on:{change:e.onChange},slot:"prepend"},e._l(e.countries,(function(t){return n("el-option",{key:t.name,attrs:{label:t.value,value:t.value}},[n("span",{staticClass:"country-name"},[e._v(e._s(t.name))]),e._v(" "),n("span",{staticStyle:{float:"right","font-size":"13px"}},[e._v(e._s(t.value))])])})),1)],1)],1)},x=[],j=(n("28a5"),n("7f7f"),n("6d67"),{name:"PhoneInput",props:{value:{type:[Object,String],default:null}},data:function(){return{rawValue:{},countries:[{name:"China",value:"+86"}]}},computed:{fullPhone:function(){return this.rawValue.phone?"".concat(this.rawValue.code).concat(this.rawValue.phone):""}},mounted:function(){var e=this,t={code:this.getDefaultCode(),phone:""};this.rawValue=this.value||t,this.$axios.get("/api/v1/common/countries/").then((function(t){e.countries=t.map((function(e){return{name:"".concat(e.flag," ").concat(e.name),value:e.phone_code}}))})),this.$emit("input",this.fullPhone)},methods:{getDefaultCode:function(){var e={zh:"+86",en:"+1",ja:"+81",ko:"+82",fr:"+33",de:"+49",es:"+34",it:"+39",ru:"+7",ar:"+966"},t=this.$i18n.locale.split("-")[0];return localStorage.getItem("prePhoneCode")||e[t]||"+86"},onChange:function(e){this.rawValue.code=e,this.onInputChange(),localStorage.setItem("prePhoneCode",e)},onInputChange:function(){this.$emit("input",this.fullPhone)}}}),C=j,A=(n("b593"),Object(o["a"])(C,S,x,!1,null,"c693ef78",null)),D=A.exports,T=n("1c5a"),P=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"update-token"},[n("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.isShow,expression:"!isShow"}],attrs:{icon:"el-icon-edit",type:"text"},on:{click:function(t){e.isShow=!0}}},[e._v("\n    "+e._s(e.text)+"\n  ")]),e._v(" "),n("el-input",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],staticClass:"password-input",attrs:{disabled:e.disabled,placeholder:e.placeholder,type:e.type,"show-password":""},on:{change:e.onChange},model:{value:e.curValue,callback:function(t){e.curValue="string"===typeof t?t.trim():t},expression:"curValue"}}),e._v(" "),n("el-button",{attrs:{disabled:e.disabled,size:"small",type:"text"},on:{click:e.randomPassword}},[n("i",{staticClass:"fa fa-refresh"})])],1)},V=[],R=(n("57e7"),n("dbfd")),E={props:{value:{type:String,default:function(){return""}},type:{type:String,default:function(){return"input"}},text:{type:String,default:function(){return this.$t("Update")}},showInput:{type:Boolean,default:!0},placeholder:{type:String,default:function(){return""}},disabled:{type:Boolean,default:!1}},data:function(){return{isShow:this.showInput,curValue:this.value}},created:function(){-1!==this.$route.path.indexOf("/update")&&(this.isShow=!1)},methods:{onChange:function(e){this.$emit("input",this.curValue)},randomPassword:function(){this.curValue=Object(R["s"])(24,!0),this.$emit("input",this.curValue)}}},M=E,I=(n("16c0"),Object(o["a"])(M,P,V,!1,null,"e7a30626",null)),N=I.exports,L=n("52ec"),U=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{},[n("el-input",{attrs:{placeholder:e.placeholder,rows:e.rows,type:"textarea"},model:{value:e.iValue,callback:function(t){e.iValue=t},expression:"iValue"}}),e._v(" "),n("el-upload",e._b({ref:"upload",staticClass:"upload-secret",attrs:{accept:e.accept,action:"","auto-upload":!1,"file-list":e.fileList,limit:e.limit,"on-change":e.handleChange,"on-remove":e.handleRemove}},"el-upload",e.$attrs,!1),[n("el-button",{attrs:{size:"mini",type:"primary"}},[e._v("\n      "+e._s(e.btnText)+"\n    ")]),e._v(" "),e.tip?n("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("\n      "+e._s(e.tip)+"\n    ")]):e._e()],1)],1)},F=[],z=(n("c5f6"),{props:{value:{type:String,default:function(){return""}},btnText:{type:String,default:function(){return this.$t("SelectFile")}},rows:{type:Number,default:function(){return 4}},limit:{type:Number,default:function(){return 2}},accept:{type:String,default:function(){return""}},placeholder:{type:String,default:function(){return""}},tip:{type:String,default:function(){return""}}},data:function(){return{fileName:"",fileList:[],iValue:this.value}},watch:{iValue:function(e){this.$emit("input",e)}},methods:{handleChange:function(e,t){var n=this,a=t.slice(-1);this.fileList=a;var r=new FileReader;r.onload=function(e){var t=e.target.result;n.iValue=t,n.$emit("input",n.iValue)},r.readAsText(e.raw)},handleRemove:function(){this.iValue="",this.fileList=[],this.$emit("input",this.iValue)}}}),B=z,H=(n("5318"),Object(o["a"])(B,U,F,!1,null,"5a5c04eb",null)),q=H.exports,W=n("b0bb"),K=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",e._l(e.iValue,(function(t,a){return n("div",{key:a,staticClass:"command-item",attrs:{prop:"iValue."+a+".value"}},[n("el-input",{attrs:{size:"mini"},model:{value:e.iValue[a],callback:function(t){e.$set(e.iValue,a,t)},expression:"iValue[index]"}},[n("template",{slot:"prepend"},[e._v(" "+e._s(e.inputTitle+" "+(a+1)))])],2),e._v(" "),n("div",{staticClass:"input-button"},[n("el-button",{staticStyle:{"flex-shrink":"0"},attrs:{disabled:e.deleteDisabled(),icon:"el-icon-minus",size:"mini",type:"danger"},on:{click:function(n){return e.handleDelete(t)}}}),e._v(" "),a===e.iValue.length-1?n("el-button",{staticStyle:{"flex-shrink":"0"},attrs:{icon:"el-icon-plus",size:"mini",type:"primary"},on:{click:function(t){return e.handleAdd()}}}):e._e()],1)],1)})),0)},G=[],Z=(n("5df3"),n("1c4c"),{props:{value:{type:Array,default:function(){return[""]}},inputTitle:{type:String,default:function(){return""}}},data:function(){return{iValue:[""]}},watch:{iValue:{handler:function(e){this.$emit("input",Array.from(e))}}},created:function(){this.iValue=Array.from(this.value)},methods:{handleDelete:function(e){var t=this.iValue.indexOf(e);-1!==t&&this.iValue.splice(t,1)},handleAdd:function(){this.iValue.push("")},deleteDisabled:function(){return this.iValue.length<=1}}}),Q=Z,Y=(n("cdc0"),Object(o["a"])(Q,K,G,!1,null,"4c79d963",null)),J=Y.exports,X=n("a337"),ee=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"c-weektime"},[n("div",{staticClass:"c-schedue"}),e._v(" "),n("div",{class:{"c-schedue":!0,"c-schedue-notransi":e.mode}}),e._v(" "),n("table",{staticClass:"c-weektime-table",class:{"c-min-table":e.colspan<2}},[n("thead",{staticClass:"c-weektime-head"},[n("tr",[n("th",{staticClass:"week-td",attrs:{rowspan:"8"}},[e._v(e._s(this.$t("WeekOrTime")))]),e._v(" "),n("th",{attrs:{colspan:12*e.colspan}},[e._v("00:00 - 12:00")]),e._v(" "),n("th",{attrs:{colspan:12*e.colspan}},[e._v("12:00 - 24:00")])]),e._v(" "),n("tr",e._l(e.theadArr,(function(t){return n("td",{key:t,attrs:{colspan:e.colspan}},[e._v(e._s(t))])})),0)]),e._v(" "),n("tbody",{staticClass:"c-weektime-body",on:{mouseleave:function(t){return e.containerLeave()}}},[e._l(e.weekTimeData,(function(t){return n("tr",{key:t.row},[n("td",[e._v(e._s(t.value))]),e._v(" "),e._l(t.child,(function(t){return n("td",{key:t.row+"-"+t.col,staticClass:"weektime-atom-item",class:e.selectClasses(t),attrs:{"data-time":t.col,"data-week":t.row},on:{mousedown:function(n){return e.cellDown(t)},mouseenter:function(n){return e.cellEnter(t)},mouseup:function(n){return e.cellUp(t)}}})}))],2)})),e._v(" "),n("tr",[n("td",{staticClass:"c-weektime-preview",attrs:{colspan:"49"}},[n("div",{staticClass:"g-clearfix c-weektime-con"},[n("span",{staticClass:"g-pull-left"},[e._v(e._s(this.$t("CanDragSelect")))]),e._v(" "),n("a",{staticClass:"g-pull-right",on:{click:function(t){return t.preventDefault(),e.clearWeektime(t)}}},[e._v(e._s(this.$t("ClearSelection")))]),e._v(" "),n("a",{staticClass:"g-pull-right g-pull-margin",on:{click:function(t){return t.preventDefault(),e.selectAll(t)}}},[e._v(e._s(this.$t("SelectAll")))])])])])],2)])])},te=[],ne=(n("ac6a"),n("f3e2"),n("3b2b"),n("a481"),n("f559"),n("768b")),ae=function(e){return Array.from(Array(e)).map((function(e,t){return t}))};function re(e){var t,n=-1,a=e.length,r=[];if(a){while(++n<a){var i=e[n];i.check&&(i.check!==Boolean(t)?r.push.apply(r,["、",i.begin,"~",i.end]):r.length&&(r.pop(),r.push(i.end))),t=Boolean(i.check)}return r.shift(),r.join("")}}var ie={name:"WeekCronSelect",props:{value:{type:Array,default:function(){return[]}},colspan:{type:Number,default:function(){return 1}}},data:function(){return{width:0,height:0,left:0,top:0,mode:0,row:0,col:0,theadArr:[],weekArr:[this.$t("Monday"),this.$t("Tuesday"),this.$t("Wednesday"),this.$t("Thursday"),this.$t("Friday"),this.$t("Saturday"),this.$t("Sunday")],weekTimeData:[],timeRange:[]}},computed:{styleValue:function(){return{width:"".concat(this.width,"px"),height:"".concat(this.height,"px"),left:"".concat(this.left,"px"),top:"".concat(this.top,"px")}},selectClasses:function(){return function(e){return e.check?"ui-selected":""}}},created:function(){this.init(),this.value.length>0&&this.nextValue()},methods:{init:function(){var e=this;this.theadArr=ae(24);var t=this.weekArr.map((function(t,n){var a=function(t,n,a){return ae(a).map((function(a,r){var i=e.formatWeektime(r);return{week:t,value:i,begin:i.split("~")[0],end:i.split("~")[1],row:n,col:r}}))};return{value:t,row:n,child:a(t,n,24*e.colspan)}}));this.weekTimeData=t},nextValue:function(){for(var e=_.cloneDeep(this.value),t=0,n=e.length;t<n;t++){var a=e[t],r=null===a||void 0===a?void 0:a.value;if(r.length>0)for(var i=r.split("、"),s=0;s<i.length;s++){var o=i[s];this.renderWeekRange(o,a.id)}}},renderWeekRange:function(e,t){for(var n=0===t?6:t-1,a=e.split("~"),r=Object(ne["a"])(a,2),i=r[0],s=r[1],o=this.countIndex(i),c=this.countIndex(s),l=o;l<(0===c?24:c);l++){var u=this.weekTimeData[n],d=u.child[l];d&&(d.check=!0)}},countIndex:function(e){var t=e.substr(0,2),n=t.startsWith("0")?t.substr(1,2):t;return Number(n)},formatDate:function(e,t){var n={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var a in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+a+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?n[a]:("00"+n[a]).substr((""+n[a]).length)));return t},formatWeektime:function(e){var t=1542384e6,n=8,a=(new Date).getTimezoneOffset(),r=new Date(t).getTime(),i=new Date(r+60*a*1e3+60*n*60*1e3).getTime(),s=i+18e5*e*(2/this.colspan),o=s+2/this.colspan*18e5,c=this.formatDate(new Date(s),"hh:mm"),l=this.formatDate(new Date(o),"hh:mm");return"".concat(c,"~").concat(l)},clearWeektime:function(){var e=this;this.weekTimeData.forEach((function(t){t.child.forEach((function(t){e.$set(t,"check",!1)}))})),this.timeRange=[],this.$emit("change",this.timeRange)},selectAll:function(){var e=this;this.weekTimeData.forEach((function(t){t.child.forEach((function(t){e.$set(t,"check",!0)}))})),this.setTimeRange()},containerLeave:function(){this.width=0,this.height=0,this.mode=0},setTimeRange:function(){this.timeRange=this.weekTimeData.map((function(e){return{id:6===e.row?0:e.row+1,value:re(e.child)}})),this.$emit("change",this.timeRange)},cellEnter:function(e){var t=document.querySelector("td[data-week='".concat(e.row,"'][data-time='").concat(e.col,"']"));t&&!this.mode?(this.left=t.offsetLeft,this.top=t.offsetTop):e.col<=this.col&&e.row<=this.row?(this.width=(this.col-e.col+1)*t.offsetWidth,this.height=(this.row-e.row+1)*t.offsetHeight,this.left=t.offsetLeft,this.top=t.offsetTop):e.col>=this.col&&e.row>=this.row?(this.width=(e.col-this.col+1)*t.offsetWidth,this.height=(e.row-this.row+1)*t.offsetHeight,e.col>this.col&&e.row===this.row&&(this.top=t.offsetTop),e.col===this.col&&e.row>this.row&&(this.left=t.offsetLeft)):e.col>this.col&&e.row<this.row?(this.width=(e.col-this.col+1)*t.offsetWidth,this.height=(this.row-e.row+1)*t.offsetHeight,this.top=t.offsetTop):e.col<this.col&&e.row>this.row&&(this.width=(this.col-e.col+1)*t.offsetWidth,this.height=(e.row-this.row+1)*t.offsetHeight,this.left=t.offsetLeft)},cellDown:function(e){var t=document.querySelector("td[data-week='".concat(e.row,"'][data-time='").concat(e.col,"']"));this.check=Boolean(e.check),this.mode=1,t&&(this.width=t.offsetWidth,this.height=t.offsetHeight),this.row=e.row,this.col=e.col},cellUp:function(e){e.col<=this.col&&e.row<=this.row?this.selectWeek([e.row,this.row],[e.col,this.col],!this.check):e.col>=this.col&&e.row>=this.row?this.selectWeek([this.row,e.row],[this.col,e.col],!this.check):e.col>this.col&&e.row<this.row?this.selectWeek([e.row,this.row],[this.col,e.col],!this.check):e.col<this.col&&e.row>this.row&&this.selectWeek([this.row,e.row],[e.col,this.col],!this.check),this.width=0,this.height=0,this.mode=0,this.setTimeRange()},selectWeek:function(e,t,n){var a=this,r=Object(ne["a"])(e,2),i=r[0],s=r[1],o=Object(ne["a"])(t,2),c=o[0],l=o[1];this.weekTimeData.forEach((function(e){e.child.forEach((function(e){e.row>=i&&e.row<=s&&e.col>=c&&e.col<=l&&a.$set(e,"check",n)}))}))}}},se=ie,oe=(n("0e3d"),Object(o["a"])(se,ee,te,!1,null,"4ed8bd7a",null)),ce=oe.exports,le=n("dda2"),ue=n("2b0c"),de=n("2e5c"),fe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-radio-group",{on:{input:e.handleTypeChange},model:{value:e.iValue.type,callback:function(t){e.$set(e.iValue,"type",t)},expression:"iValue.type"}},e._l(e.types,(function(t){return n("el-radio",{key:t.name,attrs:{label:t.name}},[e._v("\n      "+e._s(t.label)+"\n    ")])})),1),e._v(" "),"ids"===e.iValue.type?n("Select2",e._b({on:{change:e.onChangeEmit},model:{value:e.ids,callback:function(t){e.ids=t},expression:"ids"}},"Select2",e.select2,!1)):e._e(),e._v(" "),"attrs"===e.iValue.type?n("div",[n("DataTable",{staticClass:"attr-list",attrs:{config:e.tableConfig}}),e._v(" "),n("div",{staticClass:"actions"},[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.handleAttrAdd}},[e._v("\n        "+e._s(e.$t("Add"))+"\n      ")]),e._v(" "),n("span",{staticStyle:{"padding-left":"10px","font-size":"13px"}},[n("span",{staticClass:"help-tips; "},[e._v(e._s(e.$t("MatchedCount"))+":")]),e._v(" "),n("a",{staticClass:"text-link",staticStyle:{padding:"0 5px"},on:{click:e.showAttrMatchTable}},[e._v(e._s(e.attrMatchCount))])])],1)],1):e._e(),e._v(" "),e.attrFormVisible?n("AttrFormDialog",{attrs:{attrs:e.attrs,"attrs-added":e.attrsAdded,form:e.attrForm,visible:e.attrFormVisible},on:{"update:visible":function(t){e.attrFormVisible=t},confirm:e.handleAttrDialogConfirm}}):e._e(),e._v(" "),e.attrMatchTableVisible?n("AttrMatchResultDialog",{attrs:{attrs:e.attrs,url:e.attrMatchTableUrl,visible:e.attrMatchTableVisible},on:{"update:visible":function(t){e.attrMatchTableVisible=t}}}):e._e()],1)},he=[],pe=(n("20d6"),n("2caf"),n("7514"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return"bool"===e.attr.type?n("span",[e.value?n("i",{staticClass:"fa fa-check text-primary"}):n("i",{staticClass:"fa fa-times text-danger"})]):n("span",{attrs:{title:e.value}},[e._v("\n  "+e._s(e.value)+"\n")])}),me=[],be=(n("6762"),n("2fdb"),n("d25f"),n("4917"),n("96cf"),n("3b8d")),ve=n("73c8"),ge={name:"ValueFormatter",extends:ve["a"],props:{formatterArgsDefault:{type:Object,default:function(){return{attrs:{}}}}},data:function(){var e=Object.assign(this.formatterArgsDefault,this.col.formatterArgs);return{formatterArgs:e,loading:!0,attr:{},value:""}},watch:{cellValue:{handler:function(){this.getValue()},deep:!0},formatterArgs:{handler:function(){this.getValue()},deep:!0},row:{handler:function(){this.getValue()},deep:!0}},mounted:function(){var e=this;setTimeout((function(){e.getValue()}),100)},methods:{getValue:function(){var e=Object(be["a"])(regeneratorRuntime.mark((function e(){var t,n,a,r,i,s,o=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.attr=this.formatterArgs.attrs.find((function(e){return e.name===o.row.name})),t=this.row.match,this.$log.debug("ValueFormatter: ",this.attr,this.row.name),"m2m"!==this.attr.type){e.next=14;break}return n=Object(R["w"])(this.attr.el.url,"ids",this.cellValue.join(",")),e.next=7,this.$axios.get(n);case 7:if(e.t0=e.sent,e.t0){e.next=10;break}e.t0=[];case 10:a=e.t0,a.length>0&&("labels"===this.attr.name?this.value=a.map((function(e){return"".concat(e.name,":").concat(e.value)})).join(", "):(r=this.attr.el.displayField||"name",this.value=a.map((function(e){return e[r]})).join(", "))),e.next=15;break;case 14:"select"===this.attr.type?(i=this.attr.el.options||[],s=i.filter((function(e){return o.cellValue.includes(e.value)})),this.value=s.map((function(e){return e.label})).join(", ")):["in","ip_in"].includes(t)?this.value=this.cellValue.join(", "):this.value=this.cellValue;case 15:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},ye=ge,we=Object(o["a"])(ye,pe,me,!1,null,"377cc414",null),_e=we.exports,$e=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Dialog",e._g(e._b({attrs:{"destroy-on-close":!0,"show-buttons":!1,title:e.$tc("SelectAttrs")}},"Dialog",e.$attrs,!1),e.$listeners),[e.loading?e._e():n("div",[n("DataForm",e._b({staticClass:"attr-form",attrs:{form:e.form},on:{submit:e.onAttrDialogConfirm}},"DataForm",e.formConfig,!1))],1)])},Oe=[],ke=n("9039"),Se=n("a298"),xe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.loading?e._e():n("div",["array"===e.type?n("TagInput",{attrs:{value:e.iValue},on:{input:e.handleInput}}):"select"===e.type?n("Select2",e._b({attrs:{value:e.iValue},on:{change:e.handleInput,input:e.handleInput}},"Select2",e.attr.el,!1)):"bool"===e.type?n("Switcher",{attrs:{value:e.iValue},on:{change:e.handleInput,input:e.handleInput}}):n("el-input",{attrs:{value:e.iValue},on:{input:e.handleInput}})],1)},je=[],Ce=(n("6b54"),n("87b3"),{name:"ValueField",components:{Switcher:f["a"],TagInput:d["a"],Select2:u["a"]},props:{value:{type:[String,Number,Boolean,Array,Object],default:function(){return""}},match:{type:String,default:"exact"},attr:{type:Object,default:function(){return{}}}},data:function(){return{loading:!0,type:"string"}},computed:{iValue:{get:function(){var e=["array","select"],t=this.value;return e.includes(this.type)?Array.isArray(this.value)||(t=[]):t="bool"===this.type?!!this.value:Array.isArray(this.value)?"":this.value.toString(),this.value!==t&&this.handleInput(t),t}}},watch:{match:function(){this.changeValueType()},attr:{handler:function(){this.changeValueType()},deep:!0}},mounted:function(){this.changeValueType()},methods:{handleInput:function(e){this.$emit("input",e)},changeValueType:function(){var e=this;this.loading=!0,this.type=this.getType(),this.$nextTick((function(){e.loading=!1}))},getType:function(){var e=this.attr.type||"str";return this.$log.debug("Value field attr type: ",e,this.attr,this.match),["m2m","fk","select"].includes(e)?"select":"bool"===e?"bool":["in","ip_in"].includes(this.match)?"array":this.match.startsWith("m2m")?"select":"string"}}}),Ae=Ce,De=Object(o["a"])(Ae,xe,je,!1,null,"e920847a",null),Te=De.exports,Pe=n("9a5c"),Ve={name:"AttrFormDialog",components:{Dialog:ke["a"],DataForm:Se["a"]},props:{attrs:{type:Array,default:function(){return[]}},attrsAdded:{type:Array,default:function(){return[]}},form:{type:Object,default:function(){return{}}}},data:function(){var e=this,t=this;return{loading:!0,currentValue:"",formConfig:{hasSaveContinue:!1,fields:[{id:"name",label:this.$t("AttrName"),type:"select",options:this.attrs.map((function(t){var n=e.attrsAdded.includes(t.name)&&e.form.name!==t.name;return t.disabled&&(n=!0),{label:t.label,value:t.name,disabled:n}})),on:{change:function(n,a){var r=Object(ne["a"])(n,1),i=r[0],s=e.attrs.find((function(e){return e.name===i}));if(s){var o=t.updateMatchOptions(s);setTimeout((function(){a({match:o.value})}),10)}}}},{id:"match",label:this.$t("Match"),type:"select",options:Pe["a"],on:{change:function(t,n){var a=Object(ne["a"])(t,1),r=a[0];setTimeout((function(){e.formConfig.fields[2].el.match=r}),10)}}},{id:"value",label:this.$t("AttrValue"),component:Te,el:{match:Pe["a"][0].value,attr:this.attrs[0]},on:{input:function(e,n){var a=Object(ne["a"])(e,1),r=a[0];t.currentValue=r}}}]}}},mounted:function(){void 0!==this.form.index&&-1!==this.form.index||Object.assign(this.form,this.getDefaultAttrForm()),this.updateMatchOptions(),this.$log.debug("Attr Form config: ",this.formConfig),this.loading=!1},methods:{getDefaultAttrForm:function(){var e=this,t=this.attrs.map((function(e){return e.name})),n=t.filter((function(t){return!e.attrsAdded.includes(t)})),a=this.attrs[0].name;return n.length>0&&(a=n[0]),{name:a,match:"exact",value:"",rel:"and"}},onAttrDialogConfirm:function(e){var t=this;setTimeout((function(){t.$emit("confirm",e)}),300)},updateMatchOptions:function(e){var t=this;if(e||(e=this.attrs.find((function(e){return e.name===t.form.name}))),e){var n=e.type||"str",a=Pe["h"][n];Pe["a"].forEach((function(e){e.hidden=!a.includes(e.value)})),this.formConfig.fields[2].el.attr=e;var r=Pe["a"].filter((function(e){return!e.hidden})),i=r.find((function(e){return e.value===t.form.match}))||r[0];return this.formConfig.fields[2].el.match=i.value,i}}}},Re=Ve,Ee=(n("6f29"),Object(o["a"])(Re,$e,Oe,!1,null,"9acc75d0",null)),Me=Ee.exports,Ie=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Dialog",{attrs:{"destroy-on-close":!0,"show-buttons":!1,title:e.$tc("MatchResult"),"v-bind":e.$attrs,"v-on":e.$listeners,visible:e.iVisible},on:{"update:visible":function(t){e.iVisible=t}}},[n("ListTable",e._b({},"ListTable",e.attrMatchTableConfig,!1))],1)},Ne=[],Le=n("af7d"),Ue={name:"AttrMatchResultDialog",components:{ListTable:Le["a"],Dialog:ke["a"]},props:{url:{type:String,default:""},attrs:{type:Array,default:function(){return[]}},visible:{type:Boolean,default:!1}},data:function(){return{attrMatchTableConfig:{headerActions:{hasCreate:!1,hasImport:!1,hasExport:!1,hasMoreActions:!1},tableConfig:{url:this.url,columns:this.attrs.filter((function(e){return e.inTable})).map((function(e){return{prop:e.name,label:e.label,formatter:e.formatter}})),columnsMeta:{actions:{has:!1}}}}}},computed:{iVisible:{set:function(e){this.$emit("update:visible",e)},get:function(){return this.visible}}}},Fe=Ue,ze=Object(o["a"])(Fe,Ie,Ne,!1,null,"44afeb21",null),Be=ze.exports,He=n("ac6b"),qe={name:"JSONManyToManySelect",components:{AttrFormDialog:Me,DataTable:v["a"],Select2:u["a"],AttrMatchResultDialog:Be},props:{value:{type:Object,default:function(){return{type:"all"}}},select2:{type:Object,required:!0},attrs:{type:Array,default:function(){return[]}},resource:{type:String,default:""},attrTableColumns:{type:Array,default:function(){return["name"]}}},data:function(){var e=this,t=this.$createElement,n=function(t){return function(n,a,r){var i,s=r;switch(t){case"name":return(null===(i=e.attrs.find((function(e){return e.name===s})))||void 0===i?void 0:i.label)||s;case"match":return Pe["a"].find((function(e){return e.value===s})).label||s;case"value":return Array.isArray(s)?s.join(", "):s;default:return s}}};return{iValue:Object.assign({type:"all"},this.value),attrFormVisible:!1,attrForm:{},attrMatchCount:0,attrMatchTableVisible:!1,attrMatchTableUrl:"",ids:this.value.ids||[],editIndex:-1,types:[{name:"all",label:this.$t("All")+this.$t("WordSep")+this.resource.toLowerCase()},{name:"ids",label:this.$t("Spec")+this.$t("WordSep")+this.resource.toLowerCase()},{name:"attrs",label:this.$t("SelectByAttr")}],tableConfig:{columns:[{prop:"name",label:this.$t("AttrName"),formatter:n("name")},{prop:"match",label:this.$t("Match"),formatter:n("match")},{prop:"value",label:this.$t("AttrValue"),formatter:_e,formatterArgs:{attrs:this.attrs}},{prop:"action",label:this.$t("Action"),align:"center",width:"120px",formatter:function(n,a,r,i){return t("div",{attrs:{className:"input-button"}},[t("el-button",{attrs:{icon:"el-icon-edit",size:"mini",type:"primary"},style:{flexShrink:0},on:{click:e.handleAttrEdit({row:n,col:a,cellValue:r,index:i})}}),t("el-button",{attrs:{icon:"el-icon-minus",size:"mini",type:"danger"},style:{flexShrink:0},on:{click:e.handleAttrDelete({row:n,col:a,cellValue:r,index:i})}})])}}],totalData:this.value.attrs||[],hasPagination:!1}}},computed:{attrsAdded:function(){return this.tableConfig.totalData.map((function(e){return e.name}))}},watch:{attrFormVisible:function(e){e||this.getAttrsCount()}},mounted:function(){"attrs"===this.value.type&&this.getAttrsCount(),this.$emit("input",this.iValue)},methods:{showAttrMatchTable:function(){var e=this.getAttrFilterKey(),t=Object(ne["a"])(e,2),n=t[0],a=t[1];this.attrMatchTableUrl=Object(R["w"])(this.select2.url,n,a),this.attrMatchTableVisible=!0},getAttrFilterKey:function(){if(0===this.tableConfig.totalData.length)return"";var e={type:"attrs",attrs:this.tableConfig.totalData};return e=Object(He["l"])(e),e},getAttrsCount:function(){var e=this,t=this.getAttrFilterKey();if(t){var n=Object(ne["a"])(t,2),a=n[0],r=n[1],i=Object(R["w"])(this.select2.url,a,r);return i=Object(R["w"])(i,"limit",1),this.$axios.get(i).then((function(t){e.attrMatchCount=t.count}))}this.attrMatchCount=0},handleAttrEdit:function(e){var t=this,n=e.row,a=e.index;return function(){t.attrForm=Object.assign({index:a},n),t.editIndex=a,t.attrFormVisible=!0}},handleAttrDelete:function(e){var t=this,n=e.index;return function(){t.tableConfig.totalData.splice(n,1),t.getAttrsCount()}},handleAttrAdd:function(){this.attrForm={},this.editIndex=-1,this.attrFormVisible=!0},onChangeEmit:function(){var e=this.iValue.type;this.handleTypeChange(e)},handleTypeChange:function(e){switch(e){case"ids":this.$emit("input",{type:"ids",ids:this.ids});break;case"attrs":this.$emit("input",{type:"attrs",attrs:this.tableConfig.totalData});break;default:this.$emit("input",{type:"all"});break}},handleAttrDialogConfirm:function(e){this.editIndex>-1&&this.tableConfig.totalData.splice(this.editIndex,1);var t=this.tableConfig.totalData,n=t.findIndex((function(t){return t.name===e.name}));-1===n?t.push(Object.assign({},e)):t.splice(n,1,Object.assign({},e)),this.attrFormVisible=!1,this.onChangeEmit()}}},We=qe,Ke=(n("d4a8"),Object(o["a"])(We,fe,he,!1,null,"70ac774e",null)),Ge=Ke.exports,Ze=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{display:"block"}},[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.visible=!0}}},[e._v("\n    "+e._s(e.$t("Setting"))+"\n  ")]),e._v(" "),n("Dialog",{attrs:{"destroy-on-close":!0,title:e.$tc("PasswordRule"),visible:e.visible,width:"600px"},on:{"update:visible":function(t){e.visible=t},cancel:e.handleCancel,confirm:e.handleConfirm,open:e.handleOpen}},[n("AutoDataForm",e._b({ref:"dataform"},"AutoDataForm",e.form,!1))],1)],1)},Qe=[],Ye=n("c75f"),Je={name:"PasswordRule",components:{Dialog:ke["a"],AutoDataForm:Ye["a"]},props:{value:{type:Object,default:function(){return{length:16}}}},data:function(){return{visible:!1,form:{url:"",hasButtons:!1,hasReset:!1,hasSaveContinue:!1,form:Object.assign({},this.value),fields:[{id:"length",label:this.$t("Length"),type:"input-number",el:{min:8,max:36,size:"mini"}},{id:"uppercase",label:this.$t("Uppercase"),type:"checkbox"},{id:"lowercase",label:this.$t("Lowercase"),type:"checkbox"},{id:"digit",label:this.$t("Digit"),type:"checkbox"},{id:"symbol",label:this.$t("SpecialSymbol"),type:"checkbox"},{id:"exclude_symbols",label:this.$t("ExcludeSymbol"),type:"input"}]}}},methods:{handleConfirm:function(){var e=this,t=this.$refs.dataform.dataForm.getFormValue();this.form.form=t,this.$emit("input",t),setTimeout((function(){e.visible=!1}),100)},handleCancel:function(){var e=this;this.$refs.dataform.dataForm.resetForm(),setTimeout((function(){e.visible=!1}),100)},handleOpen:function(){}}},Xe=Je,et=Object(o["a"])(Xe,Ze,Qe,!1,null,"94546c2c",null),tt=et.exports;n.d(t,"j",(function(){return f["a"]})),n.d(t,"i",(function(){return u["a"]})),n.d(t,"k",(function(){return d["a"]})),n.d(t,"a",(function(){return $})),n.d(t,"d",(function(){return k["a"]})),n.d(t,"m",(function(){return N})),n.d(t,"h",(function(){return D})),n.d(t,"o",(function(){return L["a"]})),n.d(t,"b",(function(){return J})),n.d(t,"f",(function(){return X["a"]})),n.d(t,"n",(function(){return q})),n.d(t,"g",(function(){return tt})),n.d(t,"l",(function(){return W["a"]})),n.d(t,"p",(function(){return ce})),n.d(t,"e",(function(){return ue["a"]})),n.d(t,"c",(function(){return Ge}));f["a"],h["a"],u["a"],d["a"],O["a"],k["a"],T["a"],L["a"],X["a"],W["a"],le["a"],ue["a"],de["a"]},f980:function(e,t,n){"use strict";n("d83d")},faf1:function(e,t,n){"use strict";n("a9c0")},fc49:function(e,t,n){"use strict";n("5917")},fc7c:function(e,t,n){},fcd5:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("IBox",e._b({attrs:{fa:e.fa,title:e.title}},"IBox",e.$attrs,!1),e._l(e.actions,(function(t){return n("div",{key:t.title,staticClass:"quick-actions"},[n("table",[void 0===t.has||t.has?n("ActionItem",{attrs:{action:t}}):e._e()],1)])})),0)},r=[],i=n("e9f9"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("tr",[n("td",[e._v("\n    "+e._s(e.getActionTitle(e.action))+"\n    "),e.action.attrs.showTip?n("el-tooltip",{attrs:{content:e.action.attrs.tip,"open-delay":500,effect:"dark"}},[n("i",{staticClass:"fa fa-question-circle-o"})]):e._e()],1),e._v(" "),n("td",[n("span",{attrs:{slot:"reference"},slot:"reference"},[n(e.iType,e._g(e._b({tag:"component",attrs:{title:e.label},model:{value:e.action.attrs.model,callback:function(t){e.$set(e.action.attrs,"model",t)},expression:"action.attrs.model"}},"component",e.action.attrs,!1),e.callbacks),[e._v("\n        "+e._s(e.label)+"\n      ")])],1)])])},o=[],c=n("768b"),l=(n("ac6a"),n("ffc1"),n("b0b4")),u=n("d225"),d=n("86d4"),f=n("49bd"),h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.iShowSelect,expression:"!iShowSelect"}],staticClass:"button-text",attrs:{disabled:e.disabled,type:"text"},on:{click:function(t){e.iShowSelect=!0}}},[e._v("\n    "+e._s(e.iLabel)+"\n    "),n("svg-icon",{attrs:{"class-name":"icon","icon-class":"switch"}})],1),e._v(" "),n("Select2",e._g(e._b({directives:[{name:"show",rawName:"v-show",value:e.iShowSelect,expression:"iShowSelect"}],ref:"select2",attrs:{disabled:e.disabled},on:{change:e.onSelectChange},model:{value:e.iValue,callback:function(t){e.iValue=t},expression:"iValue"}},"Select2",e.$attrs,!1),e.$listeners))],1)},p=[],m=(n("d25f"),n("c5f6"),n("dbfd")),b={components:{Select2:f["a"]},props:{value:{type:[String,Number],default:function(){return""}},label:{type:String,default:function(){return""}},showSelect:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},data:function(){return{iShowSelect:this.showSelect,iLabel:this.label||"-"}},computed:{iValue:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}},created:function(){var e=this.$route.path;Object(m["n"])(e)&&this.value&&!this.showSelect&&(this.iShowSelect=!1)},methods:{onSelectChange:function(e){var t=this.$refs.select2.options.filter((function(t){return t.value===e})),n=t.length>0?t[0].label:"";this.iShowSelect=this.showSelect,this.iLabel=e?n:"-"}}},v=b,g=(n("7903"),n("2877")),y=Object(g["a"])(v,h,p,!1,null,"1089a85b",null),w=y.exports,_=Object(l["a"])((function e(){Object(u["a"])(this,e),this.title="",this.type="",this.attrs={},this.callbacks=""})),$={name:"ActionItem",components:{Switcher:d["a"],Select2:f["a"],UpdateSelect:w},props:{action:{type:[_,Object],default:function(){return{title:""}}}},data:function(){return{empty:function(){}}},computed:{iType:function(){switch(this.action.type){case"switch":return"Switcher";case"switcher":return"Switcher";case"select2":return"Select2";case"updateSelect":return"UpdateSelect";default:return"el-button"}},label:function(){return this.action.attrs?this.action.attrs.label:""},model:function(){return this.action.attrs?this.action.attrs.model:""},callbacks:function(){for(var e=this,t={},n=this.action.callbacks||{},a=function(){var n=Object(c["a"])(i[r],2),a=n[0],s=n[1];t[a]=function(t){return s(t,e.action)}},r=0,i=Object.entries(n);r<i.length;r++)a();return t}},methods:{getActionTitle:function(e){return Object(m["y"])(e.title)}}},O=$,k=Object(g["a"])(O,s,o,!1,null,null,null),S=k.exports,x={name:"QuickActions",components:{IBox:i["a"],ActionItem:S},props:{fa:{type:String,default:""},title:{type:String,default:function(){return this.$t("QuickUpdate")}},actions:{type:Array,default:function(){return[]}}}},j=x,C=(n("7662"),Object(g["a"])(j,a,r,!1,null,"12ce64da",null));t["a"]=C.exports},fcdd:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n("768b"),r=(n("7f7f"),n("6762"),n("f823")),i=n("49bd"),s=n("1307"),o=n("5cba"),c=n("e323"),l=function(e){var t,n,l=["root","administrator"];function u(e,t){var n=l.includes(e);n&&t({privileged:!0,secret_reset:!1,push_now:!1})}return{assets:{component:s["a"],label:e.$t("Asset"),rules:[o["d"]],el:{multiple:!1},hidden:function(){return e.platform||e.asset}},template:{component:i["a"],rules:[o["d"]],el:{get disabled(){return e.isDisabled},multiple:!1,ajax:{url:"/api/v1/accounts/account-templates/",transformOption:function(e){return{label:e.name,value:e.id}}}},hidden:function(){return e.platform||e.asset||!e.addTemplate}},on_invalid:{rules:[o["d"]],label:e.$t("AccountPolicy"),helpTip:e.$t("AccountPolicyHelpText"),el:{get disabled(){return e.isDisabled}},hidden:function(){return e.platform||e.asset}},name:{label:e.$t("Name"),rules:[o["e"]],el:{get disabled(){return e.isDisabled}},on:{input:function(t,n){var r,i=Object(a["a"])(t,1),s=i[0];e.usernameChanged||(null!==(r=e.account)&&void 0!==r&&r.name||n({username:s}));u(s,n)}},hidden:function(){return e.addTemplate}},username:{el:{get disabled(){var t;return!(null===(t=e.account)||void 0===t||!t.name)||e.isDisabled}},on:{input:function(t,n){var r=Object(a["a"])(t,1);r[0];e.usernameChanged=!0},change:function(e,t){var n=Object(a["a"])(e,1),r=n[0];u(r,t)}},hidden:function(){return e.addTemplate}},privileged:{label:e.$t("Privileged"),el:{get disabled(){return e.isDisabled}},hidden:function(){return e.addTemplate}},su_from:{component:i["a"],hidden:function(t){var n;return!(null!==(n=e.asset)&&void 0!==n&&n.id)||!e.iPlatform.su_enabled},el:{multiple:!1,clearable:!0,ajax:{url:"/api/v1/accounts/accounts/su-from-accounts/?account=".concat((null===(t=e.account)||void 0===t?void 0:t.id)||"","&asset=").concat((null===(n=e.asset)||void 0===n?void 0:n.id)||""),transformOption:function(e){return{label:"".concat(e.name,"(").concat(e.username,")"),value:e.id}}}}},su_from_username:{label:e.$t("UserSwitchFrom"),el:{get disabled(){return e.isDisabled}},hidden:function(t){return e.platform||e.asset||e.addTemplate}},password:{label:e.$t("Password"),component:r["m"],el:{get disabled(){return e.isDisabled}},hidden:function(t){return"password"!==t.secret_type||e.addTemplate}},ssh_key:{label:e.$t("PrivateKey"),component:r["n"],el:{get disabled(){return e.isDisabled}},hidden:function(t){return"ssh_key"!==t.secret_type||e.addTemplate}},passphrase:{label:e.$t("Passphrase"),component:r["m"],el:{get disabled(){return e.isDisabled}},hidden:function(t){return"ssh_key"!==t.secret_type||e.addTemplate}},token:{label:e.$t("Token"),component:r["n"],el:{get disabled(){return e.isDisabled}},hidden:function(t){return"token"!==t.secret_type||e.addTemplate}},access_key:{id:"access_key",label:e.$t("AccessKey"),component:r["n"],el:{get disabled(){return e.isDisabled}},hidden:function(t){return"access_key"!==t.secret_type||e.addTemplate}},api_key:{id:"api_key",label:e.$t("ApiKey"),component:r["n"],el:{get disabled(){return e.isDisabled}},hidden:function(t){return"api_key"!==t.secret_type||e.addTemplate}},secret_type:{type:"radio-group",options:[],el:{get disabled(){return e.isDisabled}},hidden:function(){return e.addTemplate}},push_now:{helpTip:e.$t("WindowsPushHelpText"),hidden:function(t){var n=e.iPlatform.automation||{};return!n.push_account_enabled||!n.ansible_enabled||!e.$hasPerm("accounts.push_account")||"ssh_key"===t.secret_type&&"windows"===e.iPlatform.type.value||e.addTemplate||!t.secret_reset}},params:{label:e.$t("PushParams"),component:c["a"],el:{},hidden:function(t){var n=e.iPlatform.automation||{};return!e.iPlatform.automation||(e.fieldsMeta.params.el.method=e.iPlatform.automation.push_account_method,e.fieldsMeta.params.el.pushAccountParams=e.iPlatform.automation.push_account_params,!t.push_now||!n.push_account_enabled||!n.ansible_enabled||"ssh_key"===t.secret_type&&"windows"===e.iPlatform.type.value||!e.$hasPerm("accounts.push_account")||e.addTemplate)}},is_active:{label:e.$t("IsActive"),el:{get disabled(){return e.isDisabled}}},comment:{label:e.$t("Comment"),el:{get disabled(){return e.isDisabled}}},secret_reset:{label:e.$t("SecretReset"),el:{get disabled(){return e.isDisabled}}}}}},fe09:function(e,t,n){"use strict";n("2dc7")},fec5:function(e,t,n){"use strict";n("17d9")},fedb:function(e,t,n){"use strict";n("0cbf")}}]);
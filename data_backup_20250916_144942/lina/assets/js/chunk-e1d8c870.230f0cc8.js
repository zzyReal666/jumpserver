(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e1d8c870","chunk-52829884"],{"0482":function(e,t,n){},"273b":function(e,t,n){"use strict";n("0482")},"36bd":function(e,t,n){"use strict";var r=n("4bf8"),i=n("77f1"),a=n("9def");e.exports=function(e){var t=r(this),n=a(t.length),o=arguments.length,s=i(o>1?arguments[1]:void 0,n),c=o>2?arguments[2]:void 0,l=void 0===c?n:i(c,n);while(l>s)t[s++]=e;return t}},"3cc2":function(e,t,n){},"560e":function(e,t,n){"use strict";n("d4b3")},"5a85":function(e,t,n){"use strict";n("86b2")},"6c7b":function(e,t,n){var r=n("5ca1");r(r.P,"Array",{fill:n("36bd")}),n("9c6c")("fill")},7:function(e,t){},"7ff7":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("TabPage",{attrs:{"active-menu":e.activeMenu,submenu:e.submenu},on:{"update:activeMenu":function(t){e.activeMenu=t},"update:active-menu":function(t){e.activeMenu=t}}},[n("keep-alive",[n(e.activeMenu,{tag:"component"})],1)],1)},i=[],a=(n("7f7f"),n("9b8c")),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("IBox",[n("GenericCreateUpdateForm",e._b({},"GenericCreateUpdateForm",e.$data,!1))],1)},s=[],c=(n("456d"),n("ac6a"),n("f3e2"),n("e9f9")),l=n("cd4a"),u={name:"Terminal",components:{IBox:c["a"],GenericCreateUpdateForm:l["b"]},data:function(){var e=this;return{fields:[[this.$t("Basic"),["SECURITY_SERVICE_ACCOUNT_REGISTRATION"]],["SSH & KoKo",["TERMINAL_KOKO_SSH_ENABLED","TERMINAL_PASSWORD_AUTH","TERMINAL_PUBLIC_KEY_AUTH","TERMINAL_ASSET_LIST_SORT_BY","TERMINAL_ASSET_LIST_PAGE_SIZE"]],["RDP & Razor",["TERMINAL_RAZOR_ENABLED"]],["DB & Magnus",["TERMINAL_MAGNUS_ENABLED"]]],fieldsMeta:{TERMINAL_RAZOR_ENABLED:{hidden:function(){return!e.$store.getters.hasValidLicense},el:{hiddenGroup:!0}},TERMINAL_MAGNUS_ENABLED:{hidden:function(){return!e.$store.getters.hasValidLicense},el:{hiddenGroup:!0}}},getUrl:function(){return"/api/v1/settings/setting/?category=terminal"},hasDetailInMsg:!1,submitMethod:function(){return"put"},cleanFormValue:function(e){return Object.keys(e).forEach((function(t){null===e[t]&&delete e[t]})),e}}},methods:{}},d=u,p=n("2877"),f=Object(p["a"])(d,o,s,!1,null,"1d57e7da",null),m=f.exports,h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("ListTable",{ref:"ListTable",attrs:{"header-actions":e.headerActions,"table-config":e.tableConfig,"create-drawer":e.createDrawer,"detail-drawer":e.detailDrawer}}),e._v(" "),n("Dialog",{attrs:{"destroy-on-close":!0,"show-cancel":!1,"show-confirm":!1,title:e.$tc("TerminalUpdateStorage"),visible:e.dialogSettings.visible},on:{"update:visible":function(t){return e.$set(e.dialogSettings,"visible",t)}}},[n("GenericCreateUpdateForm",e._b({},"GenericCreateUpdateForm",e.dialogSettings.iFormSetting,!1))],1)],1)},g=[],v=(n("2caf"),n("ac4d"),n("8a81"),n("5df3"),n("1c4c"),n("6b54"),n("87b3"),n("8615"),n("9039")),b=n("49bd"),y=n("2af9"),w=n("53f7");function S(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=C(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function C(e,t){if(e){if("string"===typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?E(e,t):void 0}}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var x={components:{ListTable:y["j"],Dialog:v["a"],GenericCreateUpdateForm:l["b"]},data:function(){var e=this,t=this;return{createDrawer:function(){return n.e("chunk-445cfa49").then(n.bind(null,"0d244"))},detailDrawer:function(){return Promise.all([n.e("chunk-commons"),n.e("chunk-2d21d885")]).then(n.bind(null,"d267"))},dialogSettings:{selectedRows:[],visible:!1,iFormSetting:{url:"/api/v1/terminal/terminals/",getUrl:function(){return"/api/v1/terminal/terminals/"},fields:[["",["command_storage","replay_storage"]]],fieldsMeta:{command_storage:{label:this.$t("CommandStorage"),component:b["a"],el:{ajax:{url:"/api/v1/terminal/command-storages/"},multiple:!1}},replay_storage:{label:this.$t("ReplayStorage"),component:b["a"],el:{ajax:{url:"/api/v1/terminal/replay-storages/?type_not=sftp"},multiple:!1}}},submitMethod:function(){return"post"},cleanFormValue:function(t){var n,r=[],i={},a=S(e.dialogSettings.selectedRows);try{for(a.s();!(n=a.n()).done;){var o=n.value;i=Object.assign({},t,{id:o.id}),r.push(i)}}catch(s){a.e(s)}finally{a.f()}return r},onSubmit:function(t){var n="/api/v1/terminal/terminals/",r=e.$t("UpdateSuccessMsg");t=Object.values(t),e.$axios.patch(n,t).then((function(t){e.$message.success(r),e.dialogSettings.visible=!1})).catch((function(t){e.$emit("submitError",t);var n=t.response,r=n.data;if(400===n.status)for(var i=0,a=Object.keys(r);i<a.length;i++){var o=a[i],s=r[o];s instanceof Array&&(s=s.join(";")),e.$refs.form.setFieldError(o,s)}}))},hasSaveContinue:!1}},tableConfig:{url:"/api/v1/terminal/terminals/",permissions:{app:"terminal",resource:"terminal"},columnsShow:{min:["name","actions"],default:["name","session_online","stat","load","actions"]},columnsMeta:{name:{sortable:"custom",formatter:w["i"],formatterArgs:{drawer:!0,getRoute:function(e){var t=e.row;return{name:"TerminalDetail",params:{id:t.id}}}}},stat:{formatter:function(e){if(null===e||void 0===e||!e.stat)return"";var t=e.stat;return"".concat(t["cpu_load"]," / ").concat(t["memory_used"],"% / ").concat(t["disk_used"],"%")}},load:{filterable:"custom",sortable:!1,formatterArgs:{classChoices:{offline:"fa fa-chain-broken text-danger",critical:"fa fa-bolt text-warning",high:"fa fa-exclamation-triangle text-info",normal:"fa fa-check text-primary"}}},remote_addr:{sortable:"custom"},is_active:{align:"center"},is_alive:{},session_online:{},actions:{formatterArgs:{hasClone:!1,updateRoute:{name:"TerminalUpdate"}}}}},headerActions:{hasCreate:!1,hasUpload:!1,hasExport:!1,hasImport:!1,hasUpdate:!1,extraActions:[],hasBulkUpdate:!0,canBulkUpdate:function(e){var n=e.selectedRows;return n.length>0&&t.$hasPerm("terminal.change_terminal")},handleBulkUpdate:function(t){var n=t.selectedRows;e.dialogSettings.selectedRows=n,e.dialogSettings.visible=!0}}}}},M=x,k=Object(p["a"])(M,h,g,!1,null,null,null),O=k.exports,$=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.loaded?n("el-row",{attrs:{gutter:40}},e._l(e.metricsData,(function(e){return n("el-col",{key:e.type,attrs:{lg:12,md:24}},[n("MonitorCard",{staticClass:"monitorCard",attrs:{type:e.type,"component-metric":e}})],1)})),1):e._e()},A=[],j=(n("96cf"),n("3b8d")),R=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[n("el-row",{attrs:{gutter:10}},[n("el-col",{staticStyle:{"padding-right":"15px"},attrs:{md:19,sm:24}},[n("div",[n("div",{staticStyle:{"text-align":"left","font-weight":"350",color:"#000000"}},[n("span",{staticClass:"name"},[e._v(e._s(e.componentName))])]),e._v(" "),n("div",{staticClass:"type"},e._l(e.componentTypes,(function(t){return n("span",{key:t.key},[t.icon?n("i",{class:t.icon,style:{color:t.color}}):e._e(),e._v(" "),n("span",{staticStyle:{color:"#a3a3a4"}},[e._v(e._s(t.name))]),e._v(" "),e.componentMetric[t.key].length>0?n("el-popover",{attrs:{placement:"bottom","popper-class":"monitor-popover",trigger:"hover",width:"280"}},[n("ul",e._l(e.componentMetric[t.key],(function(t,r){return n("li",{key:r,on:{click:function(n){return e.routeToList(t)}}},[e._v("\n                    "+e._s(t)+"\n                  ")])})),0),e._v(" "),n("span",{staticClass:"num",attrs:{slot:"reference"},slot:"reference"},[e._v("\n                  "+e._s(e.componentMetric[t.key].length||0)+"\n                ")])]):n("span",[e._v("\n                "+e._s(e.componentMetric[t.key]instanceof Array?e.componentMetric[t.key].length:e.componentMetric[t.key])+"\n              ")])],1)})),0),e._v(" "),n("div",{staticClass:"progress",class:e.componentMetric.type+"-progress"},[n("div",{staticStyle:{position:"absolute",height:"100%",padding:"2px 0"}},e._l(e.barArray,(function(e,t){return n("span",{key:t,staticClass:"box-bar"})})),0)])])]),e._v(" "),n("el-col",{staticStyle:{"padding-left":"10px"},attrs:{md:5,sm:24}},[n("div",{staticClass:"session"},[n("div",{staticClass:"session-title"},[e._v("\n            "+e._s(e.$t("OnlineSessions"))+"\n          ")]),e._v(" "),n("div",{staticStyle:{"text-align":"center","font-size":"22px"}},[n("i",{staticClass:"fa fa-comments-o",staticStyle:{color:"#00c360"}}),e._v("\n            "+e._s(e.componentMetric.session_active)+"\n          ")])])])],1)],1)],1)},L=[],T=(n("a481"),n("0cd8"),n("6c7b"),n("6d67"),{name:"MonitorCard",components:{},props:{type:{type:String,default:"koko",required:!0},componentMetric:{type:Object,default:function(){return{}}}},data:function(){return{resizeObserver:null,barArray:new Array(77).fill(0).map((function(e,t){return t+1})),typeWidths:{normal:this.toPercent(this.componentMetric.normal),high:this.toPercent(this.componentMetric.high),critical:this.toPercent(this.componentMetric.critical),offline:this.toPercent(this.componentMetric.offline)}}},computed:{componentName:function(){var e={koko:"KoKo",omnidb:"OmniDB",guacamole:"Guacamole",lion:"Lion",xrdp:"Xrdp",razor:"Razor",core:"Core",celery:"Celery",magnus:"Magnus",tinker:"Tinker",chen:"Chen",kael:"Kael",video_worker:"Video-Worker",panda:"Panda",nec:"Nec",facelive:"Facelive"};return e[this.componentMetric.type]},componentTypes:function(){var e=[{name:this.$t("Total"),key:"total",color:"#13CE66"},{name:this.$t("NormalLoad"),key:"normal",color:"#13CE66",icon:"el-icon-circle-check"},{name:this.$t("HighLoad"),key:"high",color:"#E6A23C",icon:"el-icon-bell"},{name:this.$t("CriticalLoad"),key:"critical",color:"#FF4949",icon:"el-icon-message-solid"},{name:this.$t("Offline"),key:"offline",color:"#bfbaba",icon:"el-icon-circle-close"}];return e}},mounted:function(){var e=this;this.$nextTick((function(){e.resizeObserver=new ResizeObserver(e.setBarColor),e.resizeObserver.observe(document.querySelector(".box-card"))}))},beforeDestroy:function(){var e=document.querySelector(".box-card");e&&this.resizeObserver.unobserve(e),this.resizeObserver=null},methods:{setElementsColor:function(e){var t=".".concat(this.componentMetric.type,"-progress .box-bar"),n=document.querySelectorAll(t);e.reduce((function(e,t){for(var r=e;r<t.num+e&&r<n.length;r++)n[r].style.backgroundColor=t.color;return t.num+e}),0)},setBarColor:function(){var e=document.querySelector(".".concat(this.componentMetric.type,"-progress"));if(e){var t=[],n=this.typeWidths,r=n.normal,i=n.high,a=n.critical,o=n.offline,s=_.round(parseFloat(window.getComputedStyle(e).width),2),c=r?s*r/100:r,l=i?s*i/100:i,u=a?s*a/100:a,d=o?s*o/100:o,p=_.round(c/10),f=_.round(l/10),m=_.round(u/10),h=_.round(d/10);t.push({color:"#13CE66",num:p},{color:"#E6A23C",num:f},{color:"#FF4949",num:m},{color:"#bfbaba",num:h}),this.setElementsColor(t)}},toPercent:function(e){return e=e instanceof Array?e.length:e,Math.round(e/this.componentMetric.total*1e4)/100},routeToList:function(e){this.$router.replace({name:"TerminalSetting",query:{tab:"TerminalList",name:e}})}}}),D=T,P=(n("c99c7"),n("560e"),Object(p["a"])(D,R,L,!1,null,"5f64b878",null)),U=P.exports,I={name:"SystemMonitor",components:{MonitorCard:U},data:function(){return{metricsData:[],loaded:!1}},computed:{},mounted:function(){this.getMetricsData()},methods:{getMetricsData:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t="/api/v1/terminal/components/metrics/",this.$axios.get(t).then((function(e){n.metricsData=e})).finally((function(){n.loaded=!0}));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},F=I,N=(n("aad4"),Object(p["a"])(F,$,A,!1,null,"515e50b6",null)),B=N.exports,z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-alert",{directives:[{name:"sanitize",rawName:"v-sanitize",value:e.helpMessage,expression:"helpMessage"}],attrs:{type:"success"}}),e._v(" "),n("ListTable",{ref:"ListTable",attrs:{"header-actions":e.headerActions,"table-config":e.tableConfig,"create-drawer":e.createDrawer,resource:e.$t("Endpoint")}})],1)},G=[],V={name:"EndpointList",components:{ListTable:y["j"]},data:function(){var e=this;return{createDrawer:function(){return n.e("chunk-2d0c1917").then(n.bind(null,"4731"))},helpMessage:this.$t("EndpointListHelpMessage"),tableConfig:{url:"/api/v1/terminal/endpoints/",columnsExclude:["magnus_listen_db_port"],columnsShow:{min:["name","actions"],default:["name","host","actions","http_port","https_port","ssh_port","rdp_port","vnc_port","mysql_port","mariadb_port","postgresql_port","redis_port","sqlserver_port","oracle_port","mongodb_port","is_active"]},columnsMeta:{name:{formatter:null},actions:{formatterArgs:{canUpdate:this.$hasPerm("terminal.change_endpoint"),updateRoute:"EndpointUpdate",cloneRoute:"EndpointCreate",canDelete:function(t){var n=t.row;return"00000000-0000-0000-0000-000000000001"!==n.id&&e.$hasPerm("terminal.delete_endpoint")}}}}},headerActions:{canCreate:this.$hasPerm("terminal.add_endpoint"),hasMoreActions:!1,createRoute:"EndpointCreate"}}}},q=V,K=Object(p["a"])(q,z,G,!1,null,null,null),H=K.exports,W=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-alert",{directives:[{name:"sanitize",rawName:"v-sanitize",value:e.helpMessage,expression:"helpMessage"}],attrs:{type:"success"}}),e._v(" "),n("ListTable",{ref:"ListTable",attrs:{"header-actions":e.headerActions,"table-config":e.tableConfig,"create-drawer":e.createDrawer,resource:e.$t("EndpointRules")}})],1)},Y=[],Z={name:"EndpointRule",components:{ListTable:y["j"]},data:function(){return{createDrawer:function(){return n.e("chunk-2d0d6753").then(n.bind(null,"7345"))},helpMessage:this.$t("EndpointRuleListHelpMessage"),tableConfig:{url:"/api/v1/terminal/endpoint-rules/",columnsShow:{min:["name","actions"],default:["name","ip_group","priority","endpoint","actions"]},columnsMeta:{name:{formatter:null},actions:{formatterArgs:{canUpdate:this.$hasPerm("terminal.change_endpointrule"),updateRoute:"EndpointRuleUpdate",cloneRoute:"EndpointRuleCreate"}}}},headerActions:{canCreate:this.$hasPerm("terminal.add_endpointrule"),hasMoreActions:!1,createRoute:"EndpointRuleCreate"}}}},J=Z,X=Object(p["a"])(J,W,Y,!1,null,null,null),Q=X.exports,ee=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"table-header clearfix",class:e.device},[n("div",{staticClass:"search left"},[n("div",{staticClass:"search-input"},[n("el-input",{staticClass:"search-text",attrs:{placeholder:e.$tc("Search"),"validate-event":!1},on:{focus:function(t){e.focus=!0},input:e.handleInput},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e._v(" "),n("div",{staticClass:"search-input"},[n("DatetimeRangePicker",e._b({staticClass:"datepicker",on:{dateChange:e.handleDateChange}},"DatetimeRangePicker",e.datePicker,!1))],1),e._v(" "),n("div",{staticClass:"search-input"},[n("ActionsGroup",{staticClass:"right-side-actions right-side-item",attrs:{actions:e.iconActions,"is-fa":!0}})],1)])]),e._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"cards"},e._l(e.cardLogs,(function(t,r){return n("card-log",{key:r,staticClass:"card-log",attrs:{components:t.components,logs:t.logs,search:e.isearch,title:t.title}})})),1)])},te=[],ne=(n("386d"),n("55dd"),n("6762"),n("2fdb"),n("d92a"),n("8ea5"),n("2e5c")),re=n("3f95"),ie=n("2ef0"),ae=n("b775");function oe(e){return Object(ae["c"])({url:"/api/v1/terminal/loki/logs/",method:"get",params:e})}var se=n("3772"),ce=n("4360"),le=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-card",{staticClass:"log-card"},[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",[e._v(" "+e._s(e.title))]),e._v(" "),n("el-button",{staticStyle:{float:"right"},attrs:{type:"text"},on:{click:e.tailLog}},[e._v(" "+e._s(e.$tc("TailLog"))+" ")])],1),e._v(" "),e.logs.length>0?n("table",{staticClass:"log-table"},e._l(e.logs,(function(t,r){return n("tr",{key:r},[n("td",[e._v(e._s(t["message"]))])])})),0):n("table",{staticClass:"log-table"},[n("tr",[n("td",[e._v(e._s(e.$tc("NoLog")))])])])])},ue=[],de=n("dbfd"),pe={name:"CardLog",props:{logs:{type:Array,default:function(){return[]}},title:{type:String,default:""},components:{type:Array,default:function(){return[]}},search:{type:String,default:""}},methods:{tailLog:function(){var e={components:this.components.join("|"),search:this.search},t=new URLSearchParams(e),n="/ui/#/terminal/components/loki/tail/?"+t.toString();Object(de["q"])(n)}}},fe=pe,me=(n("5a85"),Object(p["a"])(fe,le,ue,!1,null,"5dd6410c",null)),he=me.exports,ge=[],ve=[{title:"Core",components:["core","jms_core"]},{title:"Web",components:["web","jms_web"]},{title:"Koko",components:["koko","jms_koko"]},{title:"Lion",components:["lion","jms_lion"]},{title:"Chen",components:["chen","jms_chen"]},{title:"Magnus",components:["magnus"]}],be=[{title:"Razor",components:["razor","jms_razor"]},{title:"Xrdp",components:["xrdp","jms_xrdp"]},{title:"Nec",components:["nec","jms_nec"]},{title:"Facelive",components:["facelive","jms_facelive"]}];ge.push.apply(ge,ve),ce["a"].getters.hasValidLicense&&ge.push.apply(ge,be);var _e={name:"ComponentLog",components:{DatetimeRangePicker:ne["a"],ActionsGroup:se["a"],CardLog:he},data:function(){return{loading:!0,search:"",isearch:"",datePicker:{dateStart:Object(re["e"])(7).toISOString(),dateEnd:Object(re["f"])(1).toISOString()},lokiData:[],cards:ge}},computed:{iconActions:function(){return[{name:"actionRefresh",icon:"refresh",tip:this.$t("Refresh"),has:!0,callback:this.refresh_component_logs.bind(this)}]},device:function(){return"mobile"===this.$store.state.app.device?"mobile":""},cardLogs:function(){var e=this.cards.map((function(e){return{title:e.title,components:e.components,logs:[]}}));return this.lokiData.forEach((function(t){var n=t.stream["component"],r=t.values.map((function(e){return{component:n,time:e[0],message:e[1]}}));e.forEach((function(e){e.components.includes(n)&&(e.logs=e.logs.concat(r))}))})),e.sort((function(e,t){return t.logs.length-e.logs.length})),e}},mounted:function(){this.refresh_component_logs()},methods:{handleDateChange:Object(ie["debounce"])((function(e){this.datePicker={dateStart:e[0].toISOString(),dateEnd:e[1].toISOString()},this.refresh_component_logs()}),500),handleInput:Object(ie["debounce"])((function(){this.isearch=this.search,this.refresh_component_logs()}),1e3),selectChange:Object(ie["debounce"])((function(e){this.refresh_component_logs()}),1e3),refresh_component_logs:function(){var e=this,t=new Date(this.datePicker.dateStart),n=new Date(this.datePicker.dateEnd),r={start:Math.floor(t/1e3),end:Math.floor(n/1e3),search:this.isearch};this.loading=!0,oe(r).then((function(t){e.lokiData=t})).catch((function(t){e.$message.error(t)})).finally((function(){e.loading=!1}))}}},ye=_e,we=(n("b838"),Object(p["a"])(ye,ee,te,!1,null,"d42b827e",null)),Se=we.exports,Ce={components:{TabPage:a["a"],Basic:m,Monitor:B,TerminalList:O,EndpointList:H,EndpointRuleList:Q,ComponentLog:Se},data:function(){var e=this;return{loading:!0,activeMenu:"Basic",submenu:[{title:this.$t("Basic"),name:"Basic"},{title:this.$t("Components"),name:"TerminalList",hidden:function(){return!e.$hasPerm("terminal.view_terminal")}},{title:this.$t("ComponentMonitor"),name:"Monitor",hidden:function(){return!(e.$hasPerm("terminal.view_status")&&e.$store.getters.hasValidLicense)}},{title:this.$t("Endpoints"),name:"EndpointList",hidden:function(){return!e.$hasPerm("terminal.view_endpoint")}},{title:this.$t("EndpointRules"),name:"EndpointRuleList",hidden:function(){return!e.$hasPerm("terminal.view_endpointrule")}},{title:this.$t("Log"),name:"ComponentLog",hidden:function(){return!e.$store.getters.publicSettings["LOKI_LOG_ENABLED"]}}]}},computed:{componentData:function(){return{}}},beforeRouteUpdate:function(e,t,n){var r;e.name===t.name&&e.path===t.path&&null!==(r=e.query)&&void 0!==r&&r.tab&&this.$store.commit("common/reload"),n()}},Ee=Ce,xe=Object(p["a"])(Ee,r,i,!1,null,"2b3b0e1d",null);t["default"]=xe.exports},"86b2":function(e,t,n){},aad4:function(e,t,n){"use strict";n("f44d")},b708:function(e,t,n){},b838:function(e,t,n){"use strict";n("c2b8")},bd11:function(e,t){e.exports=v,e.exports.match=s,e.exports.regexpToFunction=c,e.exports.parse=i,e.exports.compile=o,e.exports.tokensToFunction=l,e.exports.tokensToRegExp=g;var n="/",r=new RegExp(["(\\\\.)","(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?"].join("|"),"g");function i(e,t){var i,o=[],s=0,c=0,l="",u=t&&t.delimiter||n,p=t&&t.whitelist||void 0,f=!1;while(null!==(i=r.exec(e))){var m=i[0],h=i[1],g=i.index;if(l+=e.slice(c,g),c=g+m.length,h)l+=h[1],f=!0;else{var v="",b=i[2],_=i[3],y=i[4],w=i[5];if(!f&&l.length){var S=l.length-1,C=l[S],E=!p||p.indexOf(C)>-1;E&&(v=C,l=l.slice(0,S))}l&&(o.push(l),l="",f=!1);var x="+"===w||"*"===w,M="?"===w||"*"===w,k=_||y,O=v||u,$=v||("string"===typeof o[o.length-1]?o[o.length-1]:"");o.push({name:b||s++,prefix:v,delimiter:O,optional:M,repeat:x,pattern:k?d(k):a(O,u,$)})}}return(l||c<e.length)&&o.push(l+e.substr(c)),o}function a(e,t,n){var r="[^"+u(e===t?e:e+t)+"]";return!n||n.indexOf(e)>-1||n.indexOf(t)>-1?r+"+?":u(n)+"|(?:(?!"+u(n)+")"+r+")+?"}function o(e,t){return l(i(e,t),t)}function s(e,t){var n=[],r=v(e,n,t);return c(r,n)}function c(e,t){return function(n,r){var i=e.exec(n);if(!i)return!1;for(var a=i[0],o=i.index,s={},c=r&&r.decode||decodeURIComponent,l=1;l<i.length;l++)if(void 0!==i[l]){var u=t[l-1];u.repeat?s[u.name]=i[l].split(u.delimiter).map((function(e){return c(e,u)})):s[u.name]=c(i[l],u)}return{path:a,index:o,params:s}}}function l(e,t){for(var n=new Array(e.length),r=0;r<e.length;r++)"object"===typeof e[r]&&(n[r]=new RegExp("^(?:"+e[r].pattern+")$",p(t)));return function(t,r){for(var i="",a=r&&r.encode||encodeURIComponent,o=!r||!1!==r.validate,s=0;s<e.length;s++){var c=e[s];if("string"!==typeof c){var l,u=t?t[c.name]:void 0;if(Array.isArray(u)){if(!c.repeat)throw new TypeError('Expected "'+c.name+'" to not repeat, but got array');if(0===u.length){if(c.optional)continue;throw new TypeError('Expected "'+c.name+'" to not be empty')}for(var d=0;d<u.length;d++){if(l=a(u[d],c),o&&!n[s].test(l))throw new TypeError('Expected all "'+c.name+'" to match "'+c.pattern+'"');i+=(0===d?c.prefix:c.delimiter)+l}}else if("string"!==typeof u&&"number"!==typeof u&&"boolean"!==typeof u){if(!c.optional)throw new TypeError('Expected "'+c.name+'" to be '+(c.repeat?"an array":"a string"))}else{if(l=a(String(u),c),o&&!n[s].test(l))throw new TypeError('Expected "'+c.name+'" to match "'+c.pattern+'", but got "'+l+'"');i+=c.prefix+l}}else i+=c}return i}}function u(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function d(e){return e.replace(/([=!:$/()])/g,"\\$1")}function p(e){return e&&e.sensitive?"":"i"}function f(e,t){if(!t)return e;var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return e}function m(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(v(e[i],t,n).source);return new RegExp("(?:"+r.join("|")+")",p(n))}function h(e,t,n){return g(i(e,n),t,n)}function g(e,t,r){r=r||{};for(var i=r.strict,a=!1!==r.start,o=!1!==r.end,s=r.delimiter||n,c=[].concat(r.endsWith||[]).map(u).concat("$").join("|"),l=a?"^":"",d=0;d<e.length;d++){var f=e[d];if("string"===typeof f)l+=u(f);else{var m=f.repeat?"(?:"+f.pattern+")(?:"+u(f.delimiter)+"(?:"+f.pattern+"))*":f.pattern;t&&t.push(f),f.optional?f.prefix?l+="(?:"+u(f.prefix)+"("+m+"))?":l+="("+m+")?":l+=u(f.prefix)+"("+m+")"}}if(o)i||(l+="(?:"+u(s)+")?"),l+="$"===c?"$":"(?="+c+")";else{var h=e[e.length-1],g="string"===typeof h?h[h.length-1]===s:void 0===h;i||(l+="(?:"+u(s)+"(?="+c+"))?"),g||(l+="(?="+u(s)+"|"+c+")")}return new RegExp(l,p(r))}function v(e,t,n){return e instanceof RegExp?f(e,t):Array.isArray(e)?m(e,t,n):h(e,t,n)}},c0eb:function(e,t,n){"use strict";var r=n("c5ec"),i=n.n(r);window.$=i.a,window.jQuery=i.a,t["a"]=i.a},c2b8:function(e,t,n){},c99c7:function(e,t,n){"use strict";n("f239")},d4b3:function(e,t,n){},e323:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content"},[e.hasButton?n("el-button",{staticClass:"proto-setting",attrs:{disabled:!e.canSetting,icon:e.icon,size:"small",type:"primary"},on:{click:e.onSetting}}):e._e(),e._v(" "),n("Dialog",{attrs:{"show-cancel":!1,"show-confirm":!1,title:e.title,visible:e.isVisible,width:"60%"},on:{"update:visible":function(t){e.isVisible=t},close:e.onDialogClose}},[n("AutoDataForm",e._g(e._b({ref:"autoDataForm",staticClass:"data-form",attrs:{form:e.form},on:{submit:e.onSubmit}},"AutoDataForm",e.config,!1),e.$listeners))],1)],1)},i=[],a=(n("1c01"),n("58b2"),n("8e6e"),n("f3e2"),n("d25f"),n("bd86")),o=n("768b"),s=(n("ffc1"),n("6762"),n("2fdb"),n("ac6a"),n("456d"),n("96cf"),n("3b8d")),c=n("9039"),l=n("c75f"),u=n("f823");function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f={components:{Dialog:c["a"],AutoDataForm:l["a"]},props:{value:{type:[String,Object],default:function(){return{}}},title:{type:String,default:function(){return this.$t("PushParams")}},btnText:{type:String,default:function(){return""}},icon:{type:String,default:"el-icon-setting"},url:{type:String,default:"/api/v1/assets/platform-automation-methods/"},method:{type:String,default:""},pushAccountParams:{type:Object,default:function(){return{}}},visible:{type:Boolean,default:!1},hasButton:{type:Boolean,default:!0}},data:function(){return{isVisible:this.visible,canSetting:!0,form:this.value,remoteMeta:{},config:{url:this.url,hasSaveContinue:!1,hasButtons:!0,hasReset:!1,fields:[],method:"get"},preFieldsMeta:{change_secret_by_ssh:{commands:{helpTextAsTip:!1}}}}},watch:{visible:function(e){this.isVisible=e},method:function(e,t){e!==t&&this.getUrlMeta()}},mounted:function(){this.getUrlMeta()},methods:{getUrlMeta:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("common/getUrlMeta",{url:this.url});case 2:t=e.sent,this.remoteMeta=t.actions[this.config.method.toUpperCase()]||{},this.onCanSetting()&&this.setFormConfig();case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onCanSetting:function(){var e=Object.keys(this.remoteMeta);return this.canSetting=e.includes(this.method)&&this.$hasPerm("assets.change_platform"),this.$emit("canSetting",this.canSetting),this.canSetting},setFormConfig:function(){var e=[],t={},n=this.method,r=this.remoteMeta[n];e=[[r.label,[n]]],t[n]={fields:[],fieldsMeta:{}};var i=this.pushAccountParams[n];if(Object.keys((null===r||void 0===r?void 0:r.children)||{}).length>0)for(var a=0,s=Object.entries(r.children);a<s.length;a++){var c=Object(o["a"])(s[a],2),l=c[0],d=c[1],f="el-input",m={};switch(null===d||void 0===d?void 0:d.type){case"list":f=u["b"];break;case"boolean":f=u["j"];break;case"text":m["text"]="textarea";break}i&&(d.default=i[l]||d.default);var h=p(p({},d),{},{component:f,el:m});t[n].fields.push(l),t[n].fieldsMeta[l]=h}var g=this.preFieldsMeta[n];if(g)for(var v=0,b=Object.entries(g);v<b.length;v++)for(var _=Object(o["a"])(b[v],2),y=_[0],w=_[1],S=0,C=Object.entries(w);S<C.length;S++){var E=Object(o["a"])(C[S],2),x=E[0],M=E[1];t[n]["fieldsMeta"][y][x]=M}this.config.fields=e,this.config.fieldsMeta=t},onSetting:function(){this.isVisible=!0},onSubmit:function(e){this.$emit("input",e),this.isVisible=!1,this.$emit("update:visible",this.isVisible)},onDialogClose:function(){this.$emit("update:visible",this.isVisible)}}},m=f,h=(n("273b"),n("2877")),g=Object(h["a"])(m,r,i,!1,null,"2772642f",null);t["a"]=g.exports},f239:function(e,t,n){},f44d:function(e,t,n){}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4fcda924","chunk-52829884"],{"0482":function(e,t,i){},"273b":function(e,t,i){"use strict";i("0482")},3232:function(e,t,i){"use strict";i("9ae4")},"3cc2":function(e,t,i){},7:function(e,t){},"766c":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("GenericDetailPage",e._g(e._b({attrs:{"active-menu":e.config.activeMenu,object:e.JobDetail},on:{"update:activeMenu":function(t){return e.$set(e.config,"activeMenu",t)},"update:active-menu":function(t){return e.$set(e.config,"activeMenu",t)},"update:object":function(t){e.JobDetail=t}}},"GenericDetailPage",e.config,!1),e.$listeners),[i("keep-alive",[i(e.config.activeMenu,{tag:"component",attrs:{object:e.JobDetail}})],1)],1)},n=[],r=(i("7f7f"),i("cd4a")),o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("TwoCol",[i("AutoDetailCard",{attrs:{fields:e.detailFields,object:e.object,url:e.url}}),e._v(" "),[i("IBox",{attrs:{title:e.$tc("Variable")}},[i("Variable",{attrs:{value:e.object.variable},on:{"update:value":function(t){return e.$set(e.object,"variable",t)},input:e.updateVariable}})],1)]],2)},s=[],l=i("e3bc"),c=i("52cc"),u=i("b3af"),f=i("2af9"),d={components:{TwoCol:c["a"],IBox:f["k"],Variable:u["a"],AutoDetailCard:l["a"]},props:{object:{type:Object,default:function(){return{}}}},data:function(){return{url:"/api/v1/ops/jobs/".concat(this.object.id,"/"),detailFields:["name","type","comment",{key:this.$t("AverageTimeCost"),value:this.object.average_time_cost.toFixed(2)+"s"},"date_last_run","date_updated","date_created"]}},computed:{cardTitle:function(){return this.object.name}},methods:{updateVariable:function(){var e=this,t="/api/v1/ops/jobs/".concat(this.object.id,"/");this.$axios.patch(t,{variable:this.object.variable}).then((function(){e.$message.success(e.$tc("UpdateSuccessMsg"))}))}}},b=d,p=i("2877"),h=Object(p["a"])(b,o,s,!1,null,"f8f14faa",null),m=h.exports,v=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("GenericListTable",{attrs:{"header-actions":e.headerActions,"table-config":e.tableConfig}})],1)},g=[],y=i("3758"),_=i("53f7"),w=i("ac6b"),x={components:{GenericListTable:y["a"]},props:{object:{type:Object,default:null},query:{type:Object,default:null}},data:function(){var e=this.$createElement;return{showLogViewer:!1,showLogId:"",tableConfig:{url:"/api/v1/ops/job-executions/",columns:["material","date_start","is_finished","is_success","time_cost","actions"],columnsMeta:{is_finished:{label:this.$t("IsFinished"),formatter:function(t){return t.is_finished?e("i",{class:"fa fa-check text-primary"}):e("i",{class:"fa fa-times text-danger"})},formatterArgs:{width:"14px"}},is_success:{label:this.$t("IsSuccess"),formatter:function(t){return t.is_finished?t.is_success?e("i",{class:"fa fa-check text-primary"}):e("i",{class:"fa fa-times text-danger"}):e("i",{class:"fa  fa fa-spinner fa-spin"})},formatterArgs:{width:"14px"}},time_cost:{label:this.$t("Time"),width:"100px",formatter:function(e){return e.time_cost?e.time_cost.toFixed(2)+"s":"-"}},actions:{formatter:_["c"],formatterArgs:{hasUpdate:!1,hasDelete:!1,hasClone:!1,extraActions:[{name:"showLog",title:this.$t("Output"),can:!0,callback:function(e){var t=e.row;Object(w["k"])(t.task_id)}}]}}}},headerActions:{hasRightActions:!1,hasLeftActions:!1}}},mounted:function(){this.object&&(this.tableConfig.url+="?job_id=".concat(this.object.id)),this.query&&(this.tableConfig.url+="?type=".concat(this.query.type))}},j=x,$=Object(p["a"])(j,v,g,!1,null,null,null),V=$.exports,O={components:{GenericDetailPage:r["d"],JobDetail:m,JobHistory:V},data:function(){return{JobDetail:{},config:{getTitle:function(e){return e["name"]},url:"/api/v1/ops/jobs",activeMenu:"JobDetail",submenu:[{title:this.$t("Basic"),name:"JobDetail"},{title:this.$t("History"),name:"JobHistory"}],hasRightSide:!1}}}},D=O,A=Object(p["a"])(D,a,n,!1,null,"76b638f2",null);t["default"]=A.exports},"9ae4":function(e,t,i){},b3af:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"variables el-data-table"},[i("el-table",{staticClass:"el-table--fit el-table--border",attrs:{data:e.variables}},[i("el-table-column",{attrs:{"show-overflow-tooltip":"",label:e.$tc("Name"),prop:"name"}}),e._v(" "),i("el-table-column",{attrs:{"show-overflow-tooltip":"",label:e.$tc("VariableName"),prop:"var_name"}}),e._v(" "),i("el-table-column",{attrs:{"show-overflow-tooltip":"",label:e.$tc("DefaultValue"),prop:"default_value"}}),e._v(" "),e.disableEdit?e._e():i("el-table-column",{attrs:{label:e.$tc("Actions"),align:"center","class-name":"buttons",fixed:"right",width:"135"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{icon:"el-icon-minus",size:"mini",type:"danger"},on:{click:function(i){return e.removeVariable(t.row)}}}),e._v(" "),i("el-button",{attrs:{disabled:!!t.row.template,icon:"el-icon-edit",size:"mini",type:"primary"},on:{click:function(i){return e.onEditClick(t.row)}}})]}}],null,!1,3037588530)})],1),e._v(" "),e.disableEdit?e._e():i("div",{staticClass:"actions"},[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.onAddClick}},[e._v("\n        "+e._s(e.$t("Add"))+"\n      ")])],1),e._v(" "),i("AddVariableDialog",{attrs:{variable:e.variable,variables:e.variables,visible:e.addVariableDialogVisible},on:{"update:visible":function(t){e.addVariableDialogVisible=t}}})],1)])},n=[],r=(i("7f7f"),i("d25f"),i("6d67"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.iVisible?i("Dialog",{attrs:{"destroy-on-close":!0,"show-cancel":!1,"show-confirm":!1,title:e.$tc("AddVariable"),visible:e.iVisible,width:"800px"},on:{"update:visible":function(t){e.iVisible=t}}},[i("VariableCreateForm",{attrs:{variable:e.variable},on:{add:e.addVariable,edit:e.editVariable}})],1):e._e()}),o=[],s=(i("20d6"),i("9039")),l=i("1efb"),c={name:"AddVariableDialog",components:{Dialog:s["a"],VariableCreateForm:l["a"]},props:{visible:{type:Boolean,default:!1},variable:{type:Object,default:function(){return{}}},variables:{type:Array,default:function(){return[]}}},computed:{iVisible:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e)}}},methods:{addVariable:function(e){var t=this.variables.findIndex((function(t){return t.name===e.name||t.var_name===e.var_name}));-1!==t&&this.variables.splice(t,1),this.variables.push(e),this.iVisible=!1},editVariable:function(e){var t=this,i=this.variables.findIndex((function(e){return e.var_name===t.variable.var_name}));this.variables.splice(i,1,e);var a=this.variables.filter((function(t){return t.var_name===e.var_name||t.name===e.name})).length;a>1&&this.variables.splice(i,1),this.iVisible=!1}}},u=c,f=i("2877"),d=Object(f["a"])(u,r,o,!1,null,"e0757cc0",null),b=d.exports,p={name:"Variable",components:{AddVariableDialog:b},props:{value:{type:[Array],default:function(){return[]}},disableEdit:{type:Boolean,default:!1}},data:function(){return{variable:{},initial:!1,addVariableDialogVisible:!1}},computed:{variables:{get:function(){return this.value},set:function(e){this.$emit("update:value",e),this.$emit("change",e)}}},watch:{variables:{handler:function(e,t){void 0!==t&&((e.length>0||!this.initial)&&(e.map((function(e){e.default_value=e.text_default_value||e.select_default_value||void 0})),this.$emit("input",e)),e&&(this.initial=!0))},immediate:!0,deep:!0}},methods:{removeVariable:function(e){this.variables=this.variables.filter((function(t){return e.id&&t.id?t.id!==e.id:e.var_name&&t.var_name?t.var_name!==e.var_name:e.name!==t.name}))},onEditClick:function(e){var t=this;this.variable=e,setTimeout((function(){t.addVariableDialogVisible=!0}))},onAddClick:function(){var e=this;this.variable=null,setTimeout((function(){e.addVariableDialogVisible=!0}))}}},h=p,m=(i("3232"),Object(f["a"])(h,a,n,!1,null,"494ead85",null));t["a"]=m.exports},b708:function(e,t,i){},bd11:function(e,t){e.exports=v,e.exports.match=s,e.exports.regexpToFunction=l,e.exports.parse=n,e.exports.compile=o,e.exports.tokensToFunction=c,e.exports.tokensToRegExp=m;var i="/",a=new RegExp(["(\\\\.)","(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?"].join("|"),"g");function n(e,t){var n,o=[],s=0,l=0,c="",u=t&&t.delimiter||i,d=t&&t.whitelist||void 0,b=!1;while(null!==(n=a.exec(e))){var p=n[0],h=n[1],m=n.index;if(c+=e.slice(l,m),l=m+p.length,h)c+=h[1],b=!0;else{var v="",g=n[2],y=n[3],_=n[4],w=n[5];if(!b&&c.length){var x=c.length-1,j=c[x],$=!d||d.indexOf(j)>-1;$&&(v=j,c=c.slice(0,x))}c&&(o.push(c),c="",b=!1);var V="+"===w||"*"===w,O="?"===w||"*"===w,D=y||_,A=v||u,C=v||("string"===typeof o[o.length-1]?o[o.length-1]:"");o.push({name:g||s++,prefix:v,delimiter:A,optional:O,repeat:V,pattern:D?f(D):r(A,u,C)})}}return(c||l<e.length)&&o.push(c+e.substr(l)),o}function r(e,t,i){var a="[^"+u(e===t?e:e+t)+"]";return!i||i.indexOf(e)>-1||i.indexOf(t)>-1?a+"+?":u(i)+"|(?:(?!"+u(i)+")"+a+")+?"}function o(e,t){return c(n(e,t),t)}function s(e,t){var i=[],a=v(e,i,t);return l(a,i)}function l(e,t){return function(i,a){var n=e.exec(i);if(!n)return!1;for(var r=n[0],o=n.index,s={},l=a&&a.decode||decodeURIComponent,c=1;c<n.length;c++)if(void 0!==n[c]){var u=t[c-1];u.repeat?s[u.name]=n[c].split(u.delimiter).map((function(e){return l(e,u)})):s[u.name]=l(n[c],u)}return{path:r,index:o,params:s}}}function c(e,t){for(var i=new Array(e.length),a=0;a<e.length;a++)"object"===typeof e[a]&&(i[a]=new RegExp("^(?:"+e[a].pattern+")$",d(t)));return function(t,a){for(var n="",r=a&&a.encode||encodeURIComponent,o=!a||!1!==a.validate,s=0;s<e.length;s++){var l=e[s];if("string"!==typeof l){var c,u=t?t[l.name]:void 0;if(Array.isArray(u)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but got array');if(0===u.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var f=0;f<u.length;f++){if(c=r(u[f],l),o&&!i[s].test(c))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'"');n+=(0===f?l.prefix:l.delimiter)+c}}else if("string"!==typeof u&&"number"!==typeof u&&"boolean"!==typeof u){if(!l.optional)throw new TypeError('Expected "'+l.name+'" to be '+(l.repeat?"an array":"a string"))}else{if(c=r(String(u),l),o&&!i[s].test(c))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but got "'+c+'"');n+=l.prefix+c}}else n+=l}return n}}function u(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function f(e){return e.replace(/([=!:$/()])/g,"\\$1")}function d(e){return e&&e.sensitive?"":"i"}function b(e,t){if(!t)return e;var i=e.source.match(/\((?!\?)/g);if(i)for(var a=0;a<i.length;a++)t.push({name:a,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return e}function p(e,t,i){for(var a=[],n=0;n<e.length;n++)a.push(v(e[n],t,i).source);return new RegExp("(?:"+a.join("|")+")",d(i))}function h(e,t,i){return m(n(e,i),t,i)}function m(e,t,a){a=a||{};for(var n=a.strict,r=!1!==a.start,o=!1!==a.end,s=a.delimiter||i,l=[].concat(a.endsWith||[]).map(u).concat("$").join("|"),c=r?"^":"",f=0;f<e.length;f++){var b=e[f];if("string"===typeof b)c+=u(b);else{var p=b.repeat?"(?:"+b.pattern+")(?:"+u(b.delimiter)+"(?:"+b.pattern+"))*":b.pattern;t&&t.push(b),b.optional?b.prefix?c+="(?:"+u(b.prefix)+"("+p+"))?":c+="("+p+")?":c+=u(b.prefix)+"("+p+")"}}if(o)n||(c+="(?:"+u(s)+")?"),c+="$"===l?"$":"(?="+l+")";else{var h=e[e.length-1],m="string"===typeof h?h[h.length-1]===s:void 0===h;n||(c+="(?:"+u(s)+"(?="+l+"))?"),m||(c+="(?="+u(s)+"|"+l+")")}return new RegExp(c,d(a))}function v(e,t,i){return e instanceof RegExp?b(e,t):Array.isArray(e)?p(e,t,i):h(e,t,i)}},c0eb:function(e,t,i){"use strict";var a=i("c5ec"),n=i.n(a);window.$=n.a,window.jQuery=n.a,t["a"]=n.a},e323:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"content"},[e.hasButton?i("el-button",{staticClass:"proto-setting",attrs:{disabled:!e.canSetting,icon:e.icon,size:"small",type:"primary"},on:{click:e.onSetting}}):e._e(),e._v(" "),i("Dialog",{attrs:{"show-cancel":!1,"show-confirm":!1,title:e.title,visible:e.isVisible,width:"60%"},on:{"update:visible":function(t){e.isVisible=t},close:e.onDialogClose}},[i("AutoDataForm",e._g(e._b({ref:"autoDataForm",staticClass:"data-form",attrs:{form:e.form},on:{submit:e.onSubmit}},"AutoDataForm",e.config,!1),e.$listeners))],1)],1)},n=[],r=(i("1c01"),i("58b2"),i("8e6e"),i("f3e2"),i("d25f"),i("bd86")),o=i("768b"),s=(i("ffc1"),i("6762"),i("2fdb"),i("ac6a"),i("456d"),i("96cf"),i("3b8d")),l=i("9039"),c=i("c75f"),u=i("f823");function f(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function d(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?f(Object(i),!0).forEach((function(t){Object(r["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):f(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var b={components:{Dialog:l["a"],AutoDataForm:c["a"]},props:{value:{type:[String,Object],default:function(){return{}}},title:{type:String,default:function(){return this.$t("PushParams")}},btnText:{type:String,default:function(){return""}},icon:{type:String,default:"el-icon-setting"},url:{type:String,default:"/api/v1/assets/platform-automation-methods/"},method:{type:String,default:""},pushAccountParams:{type:Object,default:function(){return{}}},visible:{type:Boolean,default:!1},hasButton:{type:Boolean,default:!0}},data:function(){return{isVisible:this.visible,canSetting:!0,form:this.value,remoteMeta:{},config:{url:this.url,hasSaveContinue:!1,hasButtons:!0,hasReset:!1,fields:[],method:"get"},preFieldsMeta:{change_secret_by_ssh:{commands:{helpTextAsTip:!1}}}}},watch:{visible:function(e){this.isVisible=e},method:function(e,t){e!==t&&this.getUrlMeta()}},mounted:function(){this.getUrlMeta()},methods:{getUrlMeta:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("common/getUrlMeta",{url:this.url});case 2:t=e.sent,this.remoteMeta=t.actions[this.config.method.toUpperCase()]||{},this.onCanSetting()&&this.setFormConfig();case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onCanSetting:function(){var e=Object.keys(this.remoteMeta);return this.canSetting=e.includes(this.method)&&this.$hasPerm("assets.change_platform"),this.$emit("canSetting",this.canSetting),this.canSetting},setFormConfig:function(){var e=[],t={},i=this.method,a=this.remoteMeta[i];e=[[a.label,[i]]],t[i]={fields:[],fieldsMeta:{}};var n=this.pushAccountParams[i];if(Object.keys((null===a||void 0===a?void 0:a.children)||{}).length>0)for(var r=0,s=Object.entries(a.children);r<s.length;r++){var l=Object(o["a"])(s[r],2),c=l[0],f=l[1],b="el-input",p={};switch(null===f||void 0===f?void 0:f.type){case"list":b=u["b"];break;case"boolean":b=u["j"];break;case"text":p["text"]="textarea";break}n&&(f.default=n[c]||f.default);var h=d(d({},f),{},{component:b,el:p});t[i].fields.push(c),t[i].fieldsMeta[c]=h}var m=this.preFieldsMeta[i];if(m)for(var v=0,g=Object.entries(m);v<g.length;v++)for(var y=Object(o["a"])(g[v],2),_=y[0],w=y[1],x=0,j=Object.entries(w);x<j.length;x++){var $=Object(o["a"])(j[x],2),V=$[0],O=$[1];t[i]["fieldsMeta"][_][V]=O}this.config.fields=e,this.config.fieldsMeta=t},onSetting:function(){this.isVisible=!0},onSubmit:function(e){this.$emit("input",e),this.isVisible=!1,this.$emit("update:visible",this.isVisible)},onDialogClose:function(){this.$emit("update:visible",this.isVisible)}}},p=b,h=(i("273b"),i("2877")),m=Object(h["a"])(p,a,n,!1,null,"2772642f",null);t["a"]=m.exports}}]);
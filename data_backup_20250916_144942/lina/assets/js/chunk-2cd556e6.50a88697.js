(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2cd556e6"],{"1f19":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.loading?e._e():n("GenericCreateUpdatePage",e._g(e._b({},"GenericCreateUpdatePage",e.iConfig,!1),e.$listeners))},a=[],i=(n("2caf"),n("ac4d"),n("8a81"),n("5df3"),n("1c4c"),n("6b54"),n("87b3"),n("75fc")),s=(n("7514"),n("7f7f"),n("768b")),o=(n("ac6a"),n("ffc1"),n("d25f"),n("96cf"),n("3b8d")),u=(n("6d67"),n("5e04")),c=n("1b0e"),l=n("dbfd"),f=n("0e1d");function p(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=d(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){o=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw i}}}}function d(e,t){if(e){if("string"===typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var m={components:{GenericCreateUpdatePage:u["a"]},props:{url:{type:String,default:function(){return""},required:!0},addFields:{type:[Array,Function],default:function(){return[]}},addFieldsMeta:{type:Object,default:function(){return{}}},removeFields:{type:[Array,Function],default:function(){return[]}},createSuccessNextRoute:{type:Object,default:function(){return{name:"AssetList"}}},updateSuccessNextRoute:{type:Object,default:function(){return{name:"AssetList"}}},updateInitial:{type:Function,default:function(e){return e}}},data:function(){return{loading:!0,platform:{},initing:!1,platformID:this.$route.query.platform||"",meta:{},iConfig:{},defaultConfig:{initial:{},platform:{},url:"/api/v1/assets/hosts/",hasReset:!1,createSuccessNextRoute:this.createSuccessNextRoute,updateSuccessNextRoute:this.updateSuccessNextRoute,hasDetailInMsg:!1,fields:[[this.$t("Basic"),["name","address","platform","nodes"]],[this.$t("Protocol"),["protocols"]],[this.$t("Account"),["accounts"]],[this.$t("Other"),["directory_services","zone","labels","is_active","comment"]]],fieldsMeta:{},performSubmit:function(e){var t=this.url,n=this.$route.params.id,r=void 0===n?"":n,a=_.cloneDeep(e),i=r?"put":"post";if(a.nodes&&0===a.nodes.length&&delete a["nodes"],"put"===i)t=Object(l["l"])(t,r),delete a["accounts"];else{var s=(null===a||void 0===a?void 0:a.accounts)||[];a.accounts=s.map((function(e){return e["secret"]=Object(c["b"])(e["secret"]),e}))}return this.$axios[i](t,a)}}}},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{init:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.$log.debug("Initing asset base upcate create",this.initing),!this.initing){e.next=3;break}return e.abrupt("return");case 3:return this.initing=!0,e.prev=4,e.next=7,this.genConfig();case 7:return e.next=9,this.setInitial();case 9:return e.next=11,this.setPlatformConstrains();case 11:return e.prev=11,this.initing=!1,this.loading=!1,e.finish(11);case 15:case"end":return e.stop()}}),e,this,[[4,,11,15]])})));function t(){return e.apply(this,arguments)}return t}(),genConfig:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a,i,o,u,c,d,h,m,b,g,v;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=this.addFields,n=this.addFieldsMeta,r=this.defaultConfig,r.fieldsMeta=Object(f["a"])(this),a=this.url,i=this.$route.params.id,i||(a=Object(l["w"])(a,"platform",this.platformID)),r.fields=r.fields.filter(Boolean),o=_.merge(r,{url:a}),u=p(t),e.prev=8,d=regeneratorRuntime.mark((function e(){var t,n,r,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=Object(s["a"])(c.value,3),n=t[0],r=t[1],a=t[2],i=o.fields.find((function(e){var t=Object(s["a"])(e,1),r=t[0];return r===n})),i?i[1]=i[1].concat(r):o.fields.splice(a,0,[n,r]);case 3:case"end":return e.stop()}}),e)})),u.s();case 11:if((c=u.n()).done){e.next=15;break}return e.delegateYield(d(),"t0",13);case 13:e.next=11;break;case 15:e.next=20;break;case 17:e.prev=17,e.t1=e["catch"](8),u.e(e.t1);case 20:return e.prev=20,u.f(),e.finish(20);case 23:for(h=0,m=Object.entries(n);h<m.length;h++)b=Object(s["a"])(m[h],2),g=b[0],v=b[1],o.fieldsMeta[g]?o.fieldsMeta[g]=Object.assign(o.fieldsMeta[g],v):o.fieldsMeta[g]=v;this.iConfig=o;case 25:case"end":return e.stop()}}),e,this,[[8,17,20,23]])})));function t(){return e.apply(this,arguments)}return t}(),setInitial:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.defaultConfig,n=this.$route.query.node,r=n?[n]:[],a=this.platformID||"Linux",i="/api/v1/assets/platforms/".concat(a,"/"),e.next=7,this.$axios.get(i);case 7:if(this.platform=e.sent,s={labels:[],is_active:!0,nodes:r,platform:parseInt(this.platform.id),protocols:[]},!this.updateInitial){e.next=12;break}return e.next=12,this.updateInitial(s);case 12:this.iConfig.initial=Object.assign({},s,t.initial);case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),setPlatformConstrains:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=this.platform,n=(null===t||void 0===t?void 0:t.protocols)||[],n=n.map((function(e){return"http"===e.name&&(e.display_name="http(s)"),delete e["id"],e})),r=this.iConfig.fieldsMeta.protocols.el.choices,r.splice.apply(r,[0,r.length].concat(Object(i["a"])(n))),this.iConfig.fieldsMeta.accounts.el.platform=t;case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},b=m,g=n("2877"),v=Object(g["a"])(b,r,a,!1,null,null,null);t["a"]=v.exports},"9b80":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("BaseAssetCreateUpdate",e._b({},"BaseAssetCreateUpdate",e.$data,!1))},a=[],i=(n("7f7f"),n("96cf"),n("3b8d")),s=n("1f19"),o={name:"GatewayCreateUpdate",components:{BaseAssetCreateUpdate:s["a"]},data:function(){var e=this;return{url:"/api/v1/assets/gateways/",updateInitial:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(n){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r="/api/v1/assets/platforms/?name__startswith=Gateway",t.next=3,e.$axios.get(r);case 3:return a=t.sent,n.platform=parseInt(a[0].id),n.zone=e.$route.query.zone,t.abrupt("return",n);case 7:case"end":return t.stop()}}),t)})));function n(e){return t.apply(this,arguments)}return n}(),addFieldsMeta:{zone:{disabled:!0},platform:{helpText:this.$t("GatewayPlatformHelpText"),el:{multiple:!1,ajax:{url:"/api/v1/assets/platforms/?name__startswith=Gateway",transformOption:function(e){return{label:e.name,value:e.id}}}}}},createSuccessNextRoute:{name:"ZoneDetail",params:{id:this.$route.query.zone},query:{tab:"GatewayList"}},updateSuccessNextRoute:{name:"ZoneDetail",params:{id:this.$route.query.zone},query:{tab:"GatewayList"}}}},methods:{}},u=o,c=n("2877"),l=Object(c["a"])(u,r,a,!1,null,null,null);t["default"]=l.exports}}]);
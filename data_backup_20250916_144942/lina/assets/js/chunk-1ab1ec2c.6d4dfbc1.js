(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1ab1ec2c","chunk-52829884","chunk-ac5ae2ae"],{"0482":function(e,t,n){},"0e1d":function(e,t,n){"use strict";n("ac4d"),n("8a81"),n("5df3"),n("1c4c"),n("6b54"),n("87b3");var r=n("75fc"),a=(n("6d67"),n("0cd8"),n("2caf"),n("28a5"),n("768b")),i=(n("7f7f"),n("57e7"),n("ac6a"),n("f3e2"),n("0692")),o=n("1939"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.isUpdate(this)?n("el-link",{attrs:{underline:!1,type:"default"},on:{click:function(t){return e.goToAssetAccountsPage()}}},[e._v("\n    "+e._s(e.$t("InAssetDetail"))+"\n  ")]):n("div",{staticClass:"accounts el-data-table"},[n("el-table",{staticClass:"el-table--fit el-table--border",attrs:{data:e.accounts}},[n("el-table-column",{attrs:{label:e.$tc("Name"),prop:"name"}}),e._v(" "),n("el-table-column",{attrs:{label:e.$tc("Username"),prop:"username"}}),e._v(" "),n("el-table-column",{attrs:{label:e.$tc("Privileged"),prop:"privileged"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row["privileged"]?n("i",{staticClass:"fa fa-check text-primary"}):n("span",[e._v("-")])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:e.$tc("TemplateAdd"),prop:"template"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row["template"]?n("i",{staticClass:"fa fa-check text-primary"}):n("span",[e._v("-")])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:e.$tc("Actions"),align:"center","class-name":"buttons",fixed:"right",width:"135"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{icon:"el-icon-minus",size:"mini",type:"danger"},on:{click:function(n){return e.removeAccount(t.row)}}}),e._v(" "),n("el-button",{attrs:{disabled:!!t.row.template,icon:"el-icon-edit",size:"mini",type:"primary"},on:{click:function(n){return e.onEditClick(t.row)}}})]}}])})],1),e._v(" "),n("div",{staticClass:"actions"},[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.onAddClick}},[e._v("\n        "+e._s(e.$t("Add"))+"\n      ")]),e._v(" "),e.$hasLicense()||"Applets"!==e.$route.name?n("el-button",{attrs:{disabled:!e.$hasPerm("accounts.view_accounttemplate"),size:"mini",type:"success"},on:{click:e.onAddFromTemplateClick}},[e._v("\n        "+e._s(e.$t("TemplateAdd"))+"\n      ")]):e._e()],1),e._v(" "),n("AddAccountDialog",{attrs:{account:e.account,accounts:e.accounts,platform:e.platform,visible:e.addAccountDialogVisible},on:{"update:visible":function(t){e.addAccountDialogVisible=t}}}),e._v(" "),e.templateDialogVisible?n("AccountTemplateDialog",{attrs:{accounts:e.accounts,visible:e.templateDialogVisible},on:{"update:visible":function(t){e.templateDialogVisible=t}}}):e._e()],1),e._v(" "),n("Drawer",{staticClass:"detail-drawer",attrs:{title:e.$t("Account"),component:e.drawerComponent,"has-footer":!1,visible:e.drawerVisible},on:{"update:visible":function(t){e.drawerVisible=t}}})],1)},c=[],l=(n("d25f"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.iVisible?n("Dialog",{attrs:{"destroy-on-close":!0,model:!1,"show-cancel":!1,"show-confirm":!1,title:e.$tc("AddAccount"),visible:e.iVisible,width:"800px"},on:{"update:visible":function(t){e.iVisible=t}}},[n("AccountCreateForm",{attrs:{account:e.account,"encrypt-password":!1,"label-position":"right",platform:e.platform},on:{add:e.addAccount,edit:e.editAccount}})],1):e._e()}),u=[],p=(n("20d6"),n("9039")),f=n("f422"),d={name:"AddAccountDialog",components:{Dialog:p["a"],AccountCreateForm:f["a"]},props:{platform:{type:Object,default:function(){return null}},visible:{type:Boolean,default:!1},account:{type:Object,default:function(){return{}}},accounts:{type:Array,default:function(){return[]}}},data:function(){return{}},computed:{iVisible:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e)}}},methods:{addAccount:function(e){var t=this.accounts.findIndex((function(t){return t.username===e.username}));-1!==t&&this.accounts.splice(t,1),this.accounts.push(e),this.iVisible=!1},editAccount:function(e){var t=this,n=this.accounts.findIndex((function(e){return e.username===t.account.username}));this.accounts.splice(n,1,e),this.iVisible=!1}}},h=d,m=n("2877"),b=Object(m["a"])(h,l,u,!1,null,null,null),v=b.exports,g=n("ca50"),y=n("260f"),w={name:"AssetAccounts",components:{Drawer:g["a"],AddAccountDialog:v,AccountTemplateDialog:y["a"]},props:{platform:{type:Object,default:function(){return{}}},value:{type:[Array],default:function(){return[]}},isUpdate:{type:Function,default:function(e){return e.$route.params.id}}},data:function(){var e=this.value||[];return{accounts:e,drawerRefName:null,account:{},drawerVisible:!1,initial:!1,addAccountDialogVisible:!1,templateDialogVisible:!1,drawerComponent:function(){return Promise.all([n.e("chunk-commons"),n.e("chunk-ffa07718")]).then(n.bind(null,"2dc2"))}}},watch:{accounts:{handler:function(e){(e.length>0||this.initial)&&this.$emit("input",e),e&&(this.initial=!0)},immediate:!0,deep:!0}},methods:{removeAccount:function(e){this.accounts=this.accounts.filter((function(t){return e.id&&t.id?t.id!==e.id:e.username&&t.username?t.username!==e.username:e.name!==t.name}))},onEditClick:function(e){var t=this;this.account=e,setTimeout((function(){t.addAccountDialogVisible=!0}))},onAddClick:function(){var e=this;this.account=null,setTimeout((function(){e.addAccountDialogVisible=!0}))},onAddFromTemplateClick:function(){this.templateDialogVisible=!0},onSelectTemplate:function(){},goToAssetAccountsPage:function(){var e=this.$route.params.id;"AppletHostUpdate"!==this.$router.currentRoute.name?(this.$store.dispatch("common/setDrawerActionMeta",{action:"detail",row:{},col:{},id:e}),this.drawerVisible=!0):this.$router.push({name:"AppletHostDetail",params:{id:e},query:{tab:"Accounts"}})}}},O=w,x=(n("4d4e"),Object(m["a"])(O,s,c,!1,null,"a5c27758",null)),j=x.exports,C=n("5cba"),A=n("f823");n("7319");function S(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=$(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function $(e,t){if(e){if("string"===typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?R(e,t):void 0}}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,"a",(function(){return D})),n.d(t,"b",(function(){return T}));function k(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];setTimeout((function(){return e.init().then((function(){var a,i="create"===e.$route.query.action&&void 0===(null===e||void 0===e||null===(a=e.$route)||void 0===a?void 0:a.query.clone_from),o=i||r,s=e.platform.protocols;if(o){if("website"===t){var c=Array.isArray(s)?s[0].setting:s.setting;n({autofill:c.autofill?c.autofill:"basic",password_selector:c.password_selector,script:c.script,submit_selector:c.submit_selector,username_selector:c.username_selector})}e.iConfig.fieldsMeta.protocols.el.choices=s}}))}),100)}var D=function(e,t,n){var s=t||e.$route.query.category,c=n||e.$route.query.type,l=[],u=[],p={address:"https://jumpserver:330"};return{address:{rules:[C["f"].specialEmojiCheck,C["f"].RequiredChange],on:{change:function(e,t){var n=Object(a["a"])(e,1),r=n[0];p.address=r},input:function(e,t){var n=Object(a["a"])(e,1),r=n[0];p.address=r}}},protocols:{component:o["a"],el:{settingReadonly:!0,choices:l,instance:p},helpText:i["a"].t("AssetProtocolHelpText"),on:{input:function(e){var t=Object(a["a"])(e,1),n=t[0],i=l.reduce((function(e,t){return e[t.name]=t["secret_types"],e}),{}),o=n.map((function(e){return e.name})).reduce((function(e,t){return i[t]?e.concat(i[t]):e}),[]);u.splice.apply(u,[0,u.length].concat(Object(r["a"])(o)))}}},platform:{el:{multiple:!1,ajax:{url:"/api/v1/assets/platforms/?category=".concat(s,"&type=").concat(c),transformOption:function(e){return{label:e.name,value:e.id}}}},on:{change:_.debounce((function(t,n){var r=Object(a["a"])(t,1),i=r[0],o=i.pk;e.platformID=o,k(e,c,n,!0)}),200),input:_.debounce((function(t,n){var r=Object(a["a"])(t,1);r[0];k(e,c,n)}),200)}},zone:{component:A["i"],disabled:!1,el:{multiple:!1,clearable:!0,ajax:{url:"/api/v1/assets/zones/"}}},accounts:{component:j,el:{platform:{},default:[]}},directory_services:{el:{url:"/api/v1/assets/directories/",disabled:!1},hidden:function(){return!1===e.platform.ds_enabled}},nodes:{rules:[C["f"].RequiredChange],el:{ajax:{url:"/api/v1/assets/nodes/",transformOption:function(e){return{label:"".concat(e.full_value),value:e.id}}},clearable:!0}},labels:{name:"labels",type:"m2m",component:A["e"],el:{multiple:!0,url:"/api/v1/labels/labels/",ajax:{transformOption:function(e){return{label:"".concat(e.name,":").concat(e.value),value:"".concat(e.id)}}}}},is_active:{type:"checkbox"},cluster:{label:i["a"].t("Cluster")},url:{label:"url"},comment:{placeholder:i["a"].t("CommentHelpText")}}},T=function(e){var t=[],n=[],a=[];return e.$axios.get("/api/v1/assets/categories/").then((function(e){var i,o=[],s=[],c=S(e);try{for(c.s();!(i=c.n()).done;){var l=i.value;t.push({value:l.value,label:l.label}),o.push.apply(o,Object(r["a"])(l.types.map((function(e){return{value:e.value,label:e.label}}))));var u,p=S(l.types);try{for(p.s();!(u=p.n()).done;){var f,d=u.value;s.push.apply(s,Object(r["a"])(null===(f=d.constraints.protocols)||void 0===f?void 0:f.map((function(e){return{value:e.name,label:e.name.toUpperCase()}}))))}}catch(h){p.e(h)}finally{p.f()}}}catch(h){c.e(h)}finally{c.f()}n.push.apply(n,Object(r["a"])(_.uniqBy(o,"value"))),a.push.apply(a,Object(r["a"])(_.uniqBy(s,"value")))})),{component:A["c"],el:{value:[],resource:e.$t("Asset"),select2:{url:"/api/v1/assets/assets/",ajax:{transformOption:function(e){return{label:e.name+"("+e.address+")",value:e.id}}}},attrs:[{name:"name",label:e.$t("Name"),inTable:!0},{name:"address",label:e.$t("Address"),type:"ip",inTable:!0},{name:"nodes",label:e.$t("Node"),type:"m2m",el:{url:"/api/v1/assets/nodes/",ajax:{transformOption:function(e){return{label:e.full_value,value:e.id}}}}},{name:"platform",label:e.$t("Platform"),type:"m2m",el:{url:"/api/v1/assets/platforms/"}},{name:"category",label:e.$t("Category"),type:"select",inTable:!0,formatter:function(e,t,n){return n.label},el:{options:t}},{name:"type",label:e.$t("Type"),type:"select",inTable:!0,formatter:function(e,t,n){return n.label},el:{options:n}},{name:"protocols",label:e.$t("Protocols"),type:"select",el:{options:a}},{name:"labels",label:e.$t("Tags"),type:"m2m",el:{multiple:!0,url:"/api/v1/assets/labels/",ajax:{transformOption:function(e){return{label:"".concat(e.name,":").concat(e.value),value:e.id}}}}},{name:"comment",label:e.$t("Comment")}]}}}},1816:function(e,t,n){"use strict";(function(t){var r=n("440d"),a=n("9c59"),i=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,o=/[\n\r\t]/g,s=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,c=/:\d+$/,l=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,u=/^[a-zA-Z]:/;function p(e){return(e||"").toString().replace(i,"")}var f=[["#","hash"],["?","query"],function(e,t){return m(t.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],d={hash:1,query:1};function h(e){var n;n="undefined"!==typeof window?window:"undefined"!==typeof t?t:"undefined"!==typeof self?self:{};var r=n.location||{};e=e||r;var a,i={},o=typeof e;if("blob:"===e.protocol)i=new g(unescape(e.pathname),{});else if("string"===o)for(a in i=new g(e,{}),d)delete i[a];else if("object"===o){for(a in e)a in d||(i[a]=e[a]);void 0===i.slashes&&(i.slashes=s.test(e.href))}return i}function m(e){return"file:"===e||"ftp:"===e||"http:"===e||"https:"===e||"ws:"===e||"wss:"===e}function b(e,t){e=p(e),e=e.replace(o,""),t=t||{};var n,r=l.exec(e),a=r[1]?r[1].toLowerCase():"",i=!!r[2],s=!!r[3],c=0;return i?s?(n=r[2]+r[3]+r[4],c=r[2].length+r[3].length):(n=r[2]+r[4],c=r[2].length):s?(n=r[3]+r[4],c=r[3].length):n=r[4],"file:"===a?c>=2&&(n=n.slice(2)):m(a)?n=r[4]:a?i&&(n=n.slice(2)):c>=2&&m(t.protocol)&&(n=r[4]),{protocol:a,slashes:i||m(a),slashesCount:c,rest:n}}function v(e,t){if(""===e)return t;var n=(t||"/").split("/").slice(0,-1).concat(e.split("/")),r=n.length,a=n[r-1],i=!1,o=0;while(r--)"."===n[r]?n.splice(r,1):".."===n[r]?(n.splice(r,1),o++):o&&(0===r&&(i=!0),n.splice(r,1),o--);return i&&n.unshift(""),"."!==a&&".."!==a||n.push(""),n.join("/")}function g(e,t,n){if(e=p(e),e=e.replace(o,""),!(this instanceof g))return new g(e,t,n);var i,s,c,l,d,y,w=f.slice(),_=typeof t,O=this,x=0;for("object"!==_&&"string"!==_&&(n=t,t=null),n&&"function"!==typeof n&&(n=a.parse),t=h(t),s=b(e||"",t),i=!s.protocol&&!s.slashes,O.slashes=s.slashes||i&&t.slashes,O.protocol=s.protocol||t.protocol||"",e=s.rest,("file:"===s.protocol&&(2!==s.slashesCount||u.test(e))||!s.slashes&&(s.protocol||s.slashesCount<2||!m(O.protocol)))&&(w[3]=[/(.*)/,"pathname"]);x<w.length;x++)l=w[x],"function"!==typeof l?(c=l[0],y=l[1],c!==c?O[y]=e:"string"===typeof c?(d="@"===c?e.lastIndexOf(c):e.indexOf(c),~d&&("number"===typeof l[2]?(O[y]=e.slice(0,d),e=e.slice(d+l[2])):(O[y]=e.slice(d),e=e.slice(0,d)))):(d=c.exec(e))&&(O[y]=d[1],e=e.slice(0,d.index)),O[y]=O[y]||i&&l[3]&&t[y]||"",l[4]&&(O[y]=O[y].toLowerCase())):e=l(e,O);n&&(O.query=n(O.query)),i&&t.slashes&&"/"!==O.pathname.charAt(0)&&(""!==O.pathname||""!==t.pathname)&&(O.pathname=v(O.pathname,t.pathname)),"/"!==O.pathname.charAt(0)&&m(O.protocol)&&(O.pathname="/"+O.pathname),r(O.port,O.protocol)||(O.host=O.hostname,O.port=""),O.username=O.password="",O.auth&&(d=O.auth.indexOf(":"),~d?(O.username=O.auth.slice(0,d),O.username=encodeURIComponent(decodeURIComponent(O.username)),O.password=O.auth.slice(d+1),O.password=encodeURIComponent(decodeURIComponent(O.password))):O.username=encodeURIComponent(decodeURIComponent(O.auth)),O.auth=O.password?O.username+":"+O.password:O.username),O.origin="file:"!==O.protocol&&m(O.protocol)&&O.host?O.protocol+"//"+O.host:"null",O.href=O.toString()}function y(e,t,n){var i=this;switch(e){case"query":"string"===typeof t&&t.length&&(t=(n||a.parse)(t)),i[e]=t;break;case"port":i[e]=t,r(t,i.protocol)?t&&(i.host=i.hostname+":"+t):(i.host=i.hostname,i[e]="");break;case"hostname":i[e]=t,i.port&&(t+=":"+i.port),i.host=t;break;case"host":i[e]=t,c.test(t)?(t=t.split(":"),i.port=t.pop(),i.hostname=t.join(":")):(i.hostname=t,i.port="");break;case"protocol":i.protocol=t.toLowerCase(),i.slashes=!n;break;case"pathname":case"hash":if(t){var o="pathname"===e?"/":"#";i[e]=t.charAt(0)!==o?o+t:t}else i[e]=t;break;case"username":case"password":i[e]=encodeURIComponent(t);break;case"auth":var s=t.indexOf(":");~s?(i.username=t.slice(0,s),i.username=encodeURIComponent(decodeURIComponent(i.username)),i.password=t.slice(s+1),i.password=encodeURIComponent(decodeURIComponent(i.password))):i.username=encodeURIComponent(decodeURIComponent(t))}for(var l=0;l<f.length;l++){var u=f[l];u[4]&&(i[u[1]]=i[u[1]].toLowerCase())}return i.auth=i.password?i.username+":"+i.password:i.username,i.origin="file:"!==i.protocol&&m(i.protocol)&&i.host?i.protocol+"//"+i.host:"null",i.href=i.toString(),i}function w(e){e&&"function"===typeof e||(e=a.stringify);var t,n=this,r=n.host,i=n.protocol;i&&":"!==i.charAt(i.length-1)&&(i+=":");var o=i+(n.protocol&&n.slashes||m(n.protocol)?"//":"");return n.username?(o+=n.username,n.password&&(o+=":"+n.password),o+="@"):n.password?(o+=":"+n.password,o+="@"):"file:"!==n.protocol&&m(n.protocol)&&!r&&"/"!==n.pathname&&(o+="@"),(":"===r[r.length-1]||c.test(n.hostname)&&!n.port)&&(r+=":"),o+=r+n.pathname,t="object"===typeof n.query?e(n.query):n.query,t&&(o+="?"!==t.charAt(0)?"?"+t:t),n.hash&&(o+=n.hash),o}g.prototype={set:y,toString:w},g.extractProtocol=b,g.location=h,g.trimLeft=p,g.qs=a,e.exports=g}).call(this,n("c8ba"))},"1f19":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.loading?e._e():n("GenericCreateUpdatePage",e._g(e._b({},"GenericCreateUpdatePage",e.iConfig,!1),e.$listeners))},a=[],i=(n("2caf"),n("ac4d"),n("8a81"),n("5df3"),n("1c4c"),n("6b54"),n("87b3"),n("75fc")),o=(n("7514"),n("7f7f"),n("768b")),s=(n("ac6a"),n("ffc1"),n("d25f"),n("96cf"),n("3b8d")),c=(n("6d67"),n("5e04")),l=n("1b0e"),u=n("dbfd"),p=n("0e1d");function f(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=d(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function d(e,t){if(e){if("string"===typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var m={components:{GenericCreateUpdatePage:c["a"]},props:{url:{type:String,default:function(){return""},required:!0},addFields:{type:[Array,Function],default:function(){return[]}},addFieldsMeta:{type:Object,default:function(){return{}}},removeFields:{type:[Array,Function],default:function(){return[]}},createSuccessNextRoute:{type:Object,default:function(){return{name:"AssetList"}}},updateSuccessNextRoute:{type:Object,default:function(){return{name:"AssetList"}}},updateInitial:{type:Function,default:function(e){return e}}},data:function(){return{loading:!0,platform:{},initing:!1,platformID:this.$route.query.platform||"",meta:{},iConfig:{},defaultConfig:{initial:{},platform:{},url:"/api/v1/assets/hosts/",hasReset:!1,createSuccessNextRoute:this.createSuccessNextRoute,updateSuccessNextRoute:this.updateSuccessNextRoute,hasDetailInMsg:!1,fields:[[this.$t("Basic"),["name","address","platform","nodes"]],[this.$t("Protocol"),["protocols"]],[this.$t("Account"),["accounts"]],[this.$t("Other"),["directory_services","zone","labels","is_active","comment"]]],fieldsMeta:{},performSubmit:function(e){var t=this.url,n=this.$route.params.id,r=void 0===n?"":n,a=_.cloneDeep(e),i=r?"put":"post";if(a.nodes&&0===a.nodes.length&&delete a["nodes"],"put"===i)t=Object(u["l"])(t,r),delete a["accounts"];else{var o=(null===a||void 0===a?void 0:a.accounts)||[];a.accounts=o.map((function(e){return e["secret"]=Object(l["b"])(e["secret"]),e}))}return this.$axios[i](t,a)}}}},created:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{init:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.$log.debug("Initing asset base upcate create",this.initing),!this.initing){e.next=3;break}return e.abrupt("return");case 3:return this.initing=!0,e.prev=4,e.next=7,this.genConfig();case 7:return e.next=9,this.setInitial();case 9:return e.next=11,this.setPlatformConstrains();case 11:return e.prev=11,this.initing=!1,this.loading=!1,e.finish(11);case 15:case"end":return e.stop()}}),e,this,[[4,,11,15]])})));function t(){return e.apply(this,arguments)}return t}(),genConfig:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a,i,s,c,l,d,h,m,b,v,g;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=this.addFields,n=this.addFieldsMeta,r=this.defaultConfig,r.fieldsMeta=Object(p["a"])(this),a=this.url,i=this.$route.params.id,i||(a=Object(u["w"])(a,"platform",this.platformID)),r.fields=r.fields.filter(Boolean),s=_.merge(r,{url:a}),c=f(t),e.prev=8,d=regeneratorRuntime.mark((function e(){var t,n,r,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=Object(o["a"])(l.value,3),n=t[0],r=t[1],a=t[2],i=s.fields.find((function(e){var t=Object(o["a"])(e,1),r=t[0];return r===n})),i?i[1]=i[1].concat(r):s.fields.splice(a,0,[n,r]);case 3:case"end":return e.stop()}}),e)})),c.s();case 11:if((l=c.n()).done){e.next=15;break}return e.delegateYield(d(),"t0",13);case 13:e.next=11;break;case 15:e.next=20;break;case 17:e.prev=17,e.t1=e["catch"](8),c.e(e.t1);case 20:return e.prev=20,c.f(),e.finish(20);case 23:for(h=0,m=Object.entries(n);h<m.length;h++)b=Object(o["a"])(m[h],2),v=b[0],g=b[1],s.fieldsMeta[v]?s.fieldsMeta[v]=Object.assign(s.fieldsMeta[v],g):s.fieldsMeta[v]=g;this.iConfig=s;case 25:case"end":return e.stop()}}),e,this,[[8,17,20,23]])})));function t(){return e.apply(this,arguments)}return t}(),setInitial:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.defaultConfig,n=this.$route.query.node,r=n?[n]:[],a=this.platformID||"Linux",i="/api/v1/assets/platforms/".concat(a,"/"),e.next=7,this.$axios.get(i);case 7:if(this.platform=e.sent,o={labels:[],is_active:!0,nodes:r,platform:parseInt(this.platform.id),protocols:[]},!this.updateInitial){e.next=12;break}return e.next=12,this.updateInitial(o);case 12:this.iConfig.initial=Object.assign({},o,t.initial);case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),setPlatformConstrains:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=this.platform,n=(null===t||void 0===t?void 0:t.protocols)||[],n=n.map((function(e){return"http"===e.name&&(e.display_name="http(s)"),delete e["id"],e})),r=this.iConfig.fieldsMeta.protocols.el.choices,r.splice.apply(r,[0,r.length].concat(Object(i["a"])(n))),this.iConfig.fieldsMeta.accounts.el.platform=t;case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},b=m,v=n("2877"),g=Object(v["a"])(b,r,a,!1,null,null,null);t["a"]=g.exports},"260f":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.iVisible?n("Dialog",e._g(e._b({attrs:{"close-on-click-modal":!1,"confirm-title":e.$tc("Add"),"destroy-on-close":!0,model:!1,title:e.$tc("SelectTemplate"),visible:e.iVisible,width:"800px"},on:{"update:visible":function(t){e.iVisible=t},cancel:e.handleCancel,confirm:e.handleConfirm}},"Dialog",e.$attrs,!1),e.$listeners),[[n("ListTable",{ref:"listTable",attrs:{"header-actions":e.headerActions,"table-config":e.tableConfig}})]],2):e._e(),e._v(" "),e.isShowCreate?n("CreateAccountTemplateDialog",e._g({attrs:{"create-visible":e.isShowCreate},on:{"update:createVisible":function(t){e.isShowCreate=t},"update:create-visible":function(t){e.isShowCreate=t},onPerform:e.onCreateTemplatePerform}},e.$listeners)):e._e()],1)},a=[],i=(n("20d6"),n("75fc")),o=(n("57e7"),n("d25f"),n("759f"),n("7f7f"),n("6d67"),n("6b54"),n("87b3"),n("9039")),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.isVisible?n("Dialog",{attrs:{"show-cancel":!1,"show-confirm":!1,title:e.$tc("TemplateCreate"),visible:e.isVisible,width:"70%"},on:{"update:visible":function(t){e.isVisible=t}}},[n("GenericCreateUpdateForm",e._b({},"GenericCreateUpdateForm",e.formConfig,!1))],1):e._e()],1)},c=[],l=(n("1c01"),n("58b2"),n("8e6e"),n("6762"),n("2fdb"),n("456d"),n("ac6a"),n("f3e2"),n("bd86")),u=n("2af9"),p=n("d0aa"),f=n("5225");function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){Object(l["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m={name:"EmailContent",components:{GenericCreateUpdateForm:p["a"],Dialog:u["i"]},props:{createVisible:{type:Boolean,default:!1},category:{type:String,default:"all"}},data:function(){var e=this;return{formConfig:{initial:{secret_type:"password"},url:"/api/v1/accounts/account-templates/",getUrl:function(){return"/api/v1/accounts/account-templates/"},needGetObjectDetail:!1,hasDetailInMsg:!1,fields:Object(i["a"])(Object(f["a"])(this)),fieldsMeta:h({},Object(f["b"])(this)),hasSaveContinue:!1,cleanFormValue:function(e){return Object.keys(e).forEach((function(t,n,r){["ssh_key","token","access_key"].includes(t)&&(e["secret"]=e[t],delete e[t])})),e},createSuccessNextRoute:{name:""},onPerformSuccess:function(t){e.isVisible=!1,e.$emit("onPerform")}}}},computed:{isVisible:{set:function(e){this.$emit("update:create-visible",e)},get:function(){return this.createVisible}}},methods:{}},b=m,v=n("2877"),g=Object(v["a"])(b,s,c,!1,null,null,null),y=g.exports,w={name:"AccountTemplateDialog",components:{Dialog:o["a"],ListTable:u["j"],CreateAccountTemplateDialog:y},props:{visible:{type:Boolean,default:!1},asset:{type:Object,default:function(){}},accounts:{type:Array,default:function(){return[]}},showCreate:{type:Boolean,default:!0}},data:function(){var e,t,n=this,r=this.$createElement,a=(null===(e=this.asset)||void 0===e||null===(t=e.protocols)||void 0===t?void 0:t.map((function(e){return e.name})).toString())||"";return{isShowCreate:!1,accountsSelected:[],tableConfig:{url:"/api/v1/accounts/account-templates/?protocols=".concat(a),columns:["name","username","secret_type","privileged"],columnsMeta:{name:{formatter:function(e){return r("span",[e.name])}},privileged:{width:"120px"},actions:{has:!1}},listeners:{"toggle-row-selection":function(e,t){e?n.addRowToSelect(t):n.removeRowToSelect(t)}},theRowDefaultIsSelected:function(e){return n.accounts.some((function(t){return t.id===e.id}))}},headerActions:{onCreate:function(){n.isShowCreate=!0},hasCreate:this.showCreate,hasMoreActions:!1,hasColumnSetting:!1,hasImport:!1,hasExport:!1}}},computed:{refTable:function(){return this.$refs.listTable.$refs.ListTable.$refs.dataTable.$refs.dataTable},iVisible:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e)}}},methods:{onCreateTemplatePerform:function(){this.refTable.getList()},handleConfirm:function(){var e;this.iVisible=!1;var t=this.accounts.filter((function(e){return null===e||void 0===e?void 0:e.template})).map((function(e){return e.template})),n=this.accountsSelected.filter((function(e){return-1===t.indexOf(e.id)})).map((function(e){return{template:e.id,name:e.name,username:e.username,secret_type:e.secret_type.value,privileged:e.privileged}}));(e=this.accounts).push.apply(e,Object(i["a"])(n)),this.$emit("onConfirm",this.accounts)},handleCancel:function(){this.iVisible=!1},onAddClick:function(){this.isShowCreate=!0},hasSelectValue:function(e){return this.accountsSelected.some((function(t){return t.id===e.id}))},hasSameTypeAccount:function(e){var t=this.accounts.filter((function(e){return!(null!==e&&void 0!==e&&e.id)})),n=[].concat(Object(i["a"])(t),Object(i["a"])(this.accountsSelected)),r=n.some((function(t){return e.username===t.username&&(e.secret_type.value===t.secret_type||e.secret_type.value===t.secret_type.value)}));return r&&(this.refTable.toggleRowSelection(e,!1),this.$message.error(this.$tc("SameTypeAccountTip"))),r},addRowToSelect:function(e){var t=this.hasSelectValue(e),n=this.hasSameTypeAccount(e);t||n||this.accountsSelected.push(e)},removeRowToSelect:function(e){var t=this.hasSelectValue(e);if(t){var n=this.accountsSelected.findIndex((function(t){return(null===t||void 0===t?void 0:t.id)===e.id}));this.accountsSelected.splice(n,1)}}}},_=w,O=(n("64bc"),Object(v["a"])(_,r,a,!1,null,"3e72af18",null));t["a"]=O.exports},"273b":function(e,t,n){"use strict";n("0482")},3298:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.loading?e._e():n("BaseAssetCreateUpdate",e._b({},"BaseAssetCreateUpdate",e.config,!1))},a=[],i=(n("96cf"),n("3b8d")),o=n("1f19"),s=n("5cba"),c={components:{BaseAssetCreateUpdate:o["a"]},data:function(){var e=this;return{loading:!0,config:{url:"/api/v1/terminal/applet-hosts/",addFields:[[this.$t("Automation"),["deploy_options"],3],[this.$t("Account"),["using_same_account","auto_create_accounts","accounts_create_amount"]]],addFieldsMeta:{name:{rules:[s["d"],s["c"]]},accounts_create_amount:{hidden:function(e){return!e["auto_create_accounts"]}},using_same_account:{readonly:!0!==this.$store.getters.publicSettings["CACHE_LOGIN_PASSWORD_ENABLED"]},deploy_options:{fields:["CORE_HOST","IGNORE_VERIFY_CERTS","RDS_Licensing","RDS_LicenseServer","RDS_LicensingMode","RDS_fSingleSessionPerUser","RDS_MaxDisconnectionTime","RDS_RemoteAppLogoffTimeLimit"],fieldsMeta:{RDS_LicenseServer:{hidden:function(e){return!e["RDS_Licensing"]}},RDS_LicensingMode:{hidden:function(e){return!e["RDS_Licensing"]}},RDS_fSingleSessionPerUser:{hidden:function(e){return!e["RDS_Licensing"]}},RDS_MaxDisconnectionTime:{hidden:function(e){return!e["RDS_Licensing"]}},RDS_RemoteAppLogoffTimeLimit:{hidden:function(e){return!e["RDS_Licensing"]}}}},platform:{hidden:function(){return!0}},zone:{hidden:function(){return!e.$store.getters.hasValidLicense},helpText:this.$t("AppletHostZoneHelpText")},nodes:{hidden:function(){return!0}},labels:{hidden:function(){return!0}}},createSuccessNextRoute:{name:"Applets"},updateSuccessNextRoute:{name:"Applets"}}}},mounted:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$route.query.platform="RemoteAppHost",this.loading=!1;case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{}},l=c,u=n("2877"),p=Object(u["a"])(l,r,a,!1,null,null,null);t["default"]=p.exports},"3cc2":function(e,t,n){},"440d":function(e,t,n){"use strict";e.exports=function(e,t){if(t=t.split(":")[0],e=+e,!e)return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},"4d4e":function(e,t,n){"use strict";n("9d83")},5225:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return p}));var r=n("75fc"),a=(n("6762"),n("768b")),i=(n("7f7f"),n("dbfd")),o=n("f823"),s=n("49bd"),c=n("863c"),l=n("0692"),u=function(e){return[[e.$t("Basic"),["name","username","privileged","su_from"]],[e.$t("Secret"),["secret_type","secret_strategy","password_rules","secret","ssh_key","token","access_key","passphrase","api_key"]],[e.$t("AutoPush"),["auto_push","platforms","push_params"]],[e.$t("Other"),["comment"]]]},p=function(e){var t=Object(i["m"])(e.$route.path),n=[],u=["password","ssh_key"],p={disabled:!1};return{su_from:{component:s["a"],el:{multiple:!1,clearable:!0,ajax:{url:"/api/v1/accounts/account-templates/su-from-account-templates/?".concat(t?"template_id="+t:""),transformOption:function(e){return{label:"".concat(e.name,"(").concat(e.username,")"),value:e.id}}}}},secret_type:{type:"radio-group",on:{change:function(e,t){var n=Object(a["a"])(e,1),r=n[0];u.includes(r)?p.disabled=!1:(t({secret_strategy:"specific"}),t({auto_push:!1}),p.disabled=!0)}}},secret_strategy:{hidden:function(e){return!u.includes(e.secret_type)}},secret:{label:e.$t("Password"),component:o["m"],hidden:function(e){return"password"!==e.secret_type||"random"===e.secret_strategy}},ssh_key:{label:e.$t("PrivateKey"),el:{type:"textarea",rows:4},component:o["n"],hidden:function(e){return"ssh_key"!==e.secret_type||"random"===e.secret_strategy}},passphrase:{label:e.$t("Passphrase"),component:o["m"],hidden:function(e){return"ssh_key"!==e.secret_type||"random"===e.secret_strategy}},token:{label:e.$t("Token"),el:{type:"textarea",rows:4},hidden:function(e){return"token"!==e.secret_type||"random"===e.secret_strategy}},access_key:{label:e.$t("AccessKey"),el:{type:"textarea",rows:4},hidden:function(e){return"access_key"!==e.secret_type||"random"===e.secret_strategy}},api_key:{label:e.$t("ApiKey"),el:{type:"textarea",rows:4},hidden:function(e){return"api_key"!==e.secret_type||"random"===e.secret_strategy}},password_rules:{component:o["g"],label:l["a"].t("PasswordRule"),hidden:function(e){var t=e.secret_strategy,n=e.secret_type;return"specific"===t||"password"!==n}},platforms:{el:{multiple:!0,ajax:{url:"/api/v1/assets/platforms/",transformOption:function(e){return{label:e.name,value:e.id}}}},on:{input:function(e,t){var i=Object(a["a"])(e,1),o=i[0];n.splice(0,n.length),n.push.apply(n,Object(r["a"])(o))}},hidden:function(e){return!e["auto_push"]}},auto_push:{el:p},push_params:{component:c["a"],el:{platforms:n,method:"push_account_method"},hidden:function(e){return!e["auto_push"]}}}}},"64bc":function(e,t,n){"use strict";n("a9d3")},7:function(e,t){},"9c59":function(e,t,n){"use strict";var r,a=Object.prototype.hasOwnProperty;function i(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return null}}function o(e){try{return encodeURIComponent(e)}catch(t){return null}}function s(e){var t,n=/([^=?#&]+)=?([^&]*)/g,r={};while(t=n.exec(e)){var a=i(t[1]),o=i(t[2]);null===a||null===o||a in r||(r[a]=o)}return r}function c(e,t){t=t||"";var n,i,s=[];for(i in"string"!==typeof t&&(t="?"),e)if(a.call(e,i)){if(n=e[i],n||null!==n&&n!==r&&!isNaN(n)||(n=""),i=o(i),n=o(n),null===i||null===n)continue;s.push(i+"="+n)}return s.length?t+s.join("&"):""}t.stringify=c,t.parse=s},"9d83":function(e,t,n){},a9d3:function(e,t,n){},b708:function(e,t,n){},bd11:function(e,t){e.exports=v,e.exports.match=s,e.exports.regexpToFunction=c,e.exports.parse=a,e.exports.compile=o,e.exports.tokensToFunction=l,e.exports.tokensToRegExp=b;var n="/",r=new RegExp(["(\\\\.)","(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?"].join("|"),"g");function a(e,t){var a,o=[],s=0,c=0,l="",u=t&&t.delimiter||n,f=t&&t.whitelist||void 0,d=!1;while(null!==(a=r.exec(e))){var h=a[0],m=a[1],b=a.index;if(l+=e.slice(c,b),c=b+h.length,m)l+=m[1],d=!0;else{var v="",g=a[2],y=a[3],w=a[4],_=a[5];if(!d&&l.length){var O=l.length-1,x=l[O],j=!f||f.indexOf(x)>-1;j&&(v=x,l=l.slice(0,O))}l&&(o.push(l),l="",d=!1);var C="+"===_||"*"===_,A="?"===_||"*"===_,S=y||w,$=v||u,R=v||("string"===typeof o[o.length-1]?o[o.length-1]:"");o.push({name:g||s++,prefix:v,delimiter:$,optional:A,repeat:C,pattern:S?p(S):i($,u,R)})}}return(l||c<e.length)&&o.push(l+e.substr(c)),o}function i(e,t,n){var r="[^"+u(e===t?e:e+t)+"]";return!n||n.indexOf(e)>-1||n.indexOf(t)>-1?r+"+?":u(n)+"|(?:(?!"+u(n)+")"+r+")+?"}function o(e,t){return l(a(e,t),t)}function s(e,t){var n=[],r=v(e,n,t);return c(r,n)}function c(e,t){return function(n,r){var a=e.exec(n);if(!a)return!1;for(var i=a[0],o=a.index,s={},c=r&&r.decode||decodeURIComponent,l=1;l<a.length;l++)if(void 0!==a[l]){var u=t[l-1];u.repeat?s[u.name]=a[l].split(u.delimiter).map((function(e){return c(e,u)})):s[u.name]=c(a[l],u)}return{path:i,index:o,params:s}}}function l(e,t){for(var n=new Array(e.length),r=0;r<e.length;r++)"object"===typeof e[r]&&(n[r]=new RegExp("^(?:"+e[r].pattern+")$",f(t)));return function(t,r){for(var a="",i=r&&r.encode||encodeURIComponent,o=!r||!1!==r.validate,s=0;s<e.length;s++){var c=e[s];if("string"!==typeof c){var l,u=t?t[c.name]:void 0;if(Array.isArray(u)){if(!c.repeat)throw new TypeError('Expected "'+c.name+'" to not repeat, but got array');if(0===u.length){if(c.optional)continue;throw new TypeError('Expected "'+c.name+'" to not be empty')}for(var p=0;p<u.length;p++){if(l=i(u[p],c),o&&!n[s].test(l))throw new TypeError('Expected all "'+c.name+'" to match "'+c.pattern+'"');a+=(0===p?c.prefix:c.delimiter)+l}}else if("string"!==typeof u&&"number"!==typeof u&&"boolean"!==typeof u){if(!c.optional)throw new TypeError('Expected "'+c.name+'" to be '+(c.repeat?"an array":"a string"))}else{if(l=i(String(u),c),o&&!n[s].test(l))throw new TypeError('Expected "'+c.name+'" to match "'+c.pattern+'", but got "'+l+'"');a+=c.prefix+l}}else a+=c}return a}}function u(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function p(e){return e.replace(/([=!:$/()])/g,"\\$1")}function f(e){return e&&e.sensitive?"":"i"}function d(e,t){if(!t)return e;var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return e}function h(e,t,n){for(var r=[],a=0;a<e.length;a++)r.push(v(e[a],t,n).source);return new RegExp("(?:"+r.join("|")+")",f(n))}function m(e,t,n){return b(a(e,n),t,n)}function b(e,t,r){r=r||{};for(var a=r.strict,i=!1!==r.start,o=!1!==r.end,s=r.delimiter||n,c=[].concat(r.endsWith||[]).map(u).concat("$").join("|"),l=i?"^":"",p=0;p<e.length;p++){var d=e[p];if("string"===typeof d)l+=u(d);else{var h=d.repeat?"(?:"+d.pattern+")(?:"+u(d.delimiter)+"(?:"+d.pattern+"))*":d.pattern;t&&t.push(d),d.optional?d.prefix?l+="(?:"+u(d.prefix)+"("+h+"))?":l+="("+h+")?":l+=u(d.prefix)+"("+h+")"}}if(o)a||(l+="(?:"+u(s)+")?"),l+="$"===c?"$":"(?="+c+")";else{var m=e[e.length-1],b="string"===typeof m?m[m.length-1]===s:void 0===m;a||(l+="(?:"+u(s)+"(?="+c+"))?"),b||(l+="(?="+u(s)+"|"+c+")")}return new RegExp(l,f(r))}function v(e,t,n){return e instanceof RegExp?d(e,t):Array.isArray(e)?h(e,t,n):m(e,t,n)}},c0eb:function(e,t,n){"use strict";var r=n("c5ec"),a=n.n(r);window.$=a.a,window.jQuery=a.a,t["a"]=a.a},e323:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content"},[e.hasButton?n("el-button",{staticClass:"proto-setting",attrs:{disabled:!e.canSetting,icon:e.icon,size:"small",type:"primary"},on:{click:e.onSetting}}):e._e(),e._v(" "),n("Dialog",{attrs:{"show-cancel":!1,"show-confirm":!1,title:e.title,visible:e.isVisible,width:"60%"},on:{"update:visible":function(t){e.isVisible=t},close:e.onDialogClose}},[n("AutoDataForm",e._g(e._b({ref:"autoDataForm",staticClass:"data-form",attrs:{form:e.form},on:{submit:e.onSubmit}},"AutoDataForm",e.config,!1),e.$listeners))],1)],1)},a=[],i=(n("1c01"),n("58b2"),n("8e6e"),n("f3e2"),n("d25f"),n("bd86")),o=n("768b"),s=(n("ffc1"),n("6762"),n("2fdb"),n("ac6a"),n("456d"),n("96cf"),n("3b8d")),c=n("9039"),l=n("c75f"),u=n("f823");function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){Object(i["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d={components:{Dialog:c["a"],AutoDataForm:l["a"]},props:{value:{type:[String,Object],default:function(){return{}}},title:{type:String,default:function(){return this.$t("PushParams")}},btnText:{type:String,default:function(){return""}},icon:{type:String,default:"el-icon-setting"},url:{type:String,default:"/api/v1/assets/platform-automation-methods/"},method:{type:String,default:""},pushAccountParams:{type:Object,default:function(){return{}}},visible:{type:Boolean,default:!1},hasButton:{type:Boolean,default:!0}},data:function(){return{isVisible:this.visible,canSetting:!0,form:this.value,remoteMeta:{},config:{url:this.url,hasSaveContinue:!1,hasButtons:!0,hasReset:!1,fields:[],method:"get"},preFieldsMeta:{change_secret_by_ssh:{commands:{helpTextAsTip:!1}}}}},watch:{visible:function(e){this.isVisible=e},method:function(e,t){e!==t&&this.getUrlMeta()}},mounted:function(){this.getUrlMeta()},methods:{getUrlMeta:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("common/getUrlMeta",{url:this.url});case 2:t=e.sent,this.remoteMeta=t.actions[this.config.method.toUpperCase()]||{},this.onCanSetting()&&this.setFormConfig();case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onCanSetting:function(){var e=Object.keys(this.remoteMeta);return this.canSetting=e.includes(this.method)&&this.$hasPerm("assets.change_platform"),this.$emit("canSetting",this.canSetting),this.canSetting},setFormConfig:function(){var e=[],t={},n=this.method,r=this.remoteMeta[n];e=[[r.label,[n]]],t[n]={fields:[],fieldsMeta:{}};var a=this.pushAccountParams[n];if(Object.keys((null===r||void 0===r?void 0:r.children)||{}).length>0)for(var i=0,s=Object.entries(r.children);i<s.length;i++){var c=Object(o["a"])(s[i],2),l=c[0],p=c[1],d="el-input",h={};switch(null===p||void 0===p?void 0:p.type){case"list":d=u["b"];break;case"boolean":d=u["j"];break;case"text":h["text"]="textarea";break}a&&(p.default=a[l]||p.default);var m=f(f({},p),{},{component:d,el:h});t[n].fields.push(l),t[n].fieldsMeta[l]=m}var b=this.preFieldsMeta[n];if(b)for(var v=0,g=Object.entries(b);v<g.length;v++)for(var y=Object(o["a"])(g[v],2),w=y[0],_=y[1],O=0,x=Object.entries(_);O<x.length;O++){var j=Object(o["a"])(x[O],2),C=j[0],A=j[1];t[n]["fieldsMeta"][w][C]=A}this.config.fields=e,this.config.fieldsMeta=t},onSetting:function(){this.isVisible=!0},onSubmit:function(e){this.$emit("input",e),this.isVisible=!1,this.$emit("update:visible",this.isVisible)},onDialogClose:function(){this.$emit("update:visible",this.isVisible)}}},h=d,m=(n("273b"),n("2877")),b=Object(m["a"])(h,r,a,!1,null,"2772642f",null);t["a"]=b.exports}}]);
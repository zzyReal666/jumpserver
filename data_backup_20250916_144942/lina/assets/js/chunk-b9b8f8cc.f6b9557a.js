(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b9b8f8cc","chunk-52829884"],{"019d":function(e,t,n){e.exports=n.p+"assets/img/state.b813762a.svg"},"0271":function(e,t,n){e.exports=n.p+"assets/img/lan.9c2ebfd3.svg"},"0482":function(e,t,n){},"0716":function(e,t,n){"use strict";n("b77d")},"0e22":function(e,t,n){},"0f7a":function(e,t,n){},1331:function(e,t,n){"use strict";n("3802")},1788:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-card-table"},[n("TableAction",e._b({attrs:{"reload-table":e.reloadTable,"search-table":e.search,"table-url":e.tableUrl}},"TableAction",e.headerActions,!1)),e._v(" "),n("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"the-row"},[0===e.totalData.length?n("IBox",{staticClass:"empty-box"},[n("el-empty",{staticClass:"no-data",staticStyle:{padding:"20px"},attrs:{description:e.$t("NoData"),"image-size":200}})],1):e._e(),e._v(" "),n("div",{staticClass:"card-container"},e._l(e.totalData,(function(t,i){return n("el-card",{key:i,staticClass:"the-card",class:{"is-disabled":e.isDisabled(t)},attrs:{shadow:"hover"}},[n("keep-alive",[e._t("default",[n("Panel",{attrs:{d:t},nativeOn:{click:function(n){return e.onView(t)}}})],{index:i,item:t,onView:e.onView})],2)],1)})),1)],1),e._v(" "),n("Pagination",e._b({directives:[{name:"show",rawName:"v-show",value:e.pagination&&e.total>e.paginationSize,expression:"pagination && total > paginationSize"}],ref:"pagination",staticClass:"pagination",on:{currentSizeChange:e.handleCurrentChange,sizeChange:e.handleSizeChange}},"Pagination",e.$data,!1)),e._v(" "),e.detailDrawer?n("Drawer",{attrs:{component:e.detailDrawer,title:e.detailTitle,visible:e.detailDrawerVisible},on:{"update:visible":function(t){e.detailDrawerVisible=t}}}):e._e()],1)},a=[],s=(n("1c01"),n("58b2"),n("8e6e"),n("f3e2"),n("d25f"),n("7f7f"),n("a481"),n("57e7"),n("ac6a"),n("456d"),n("6d67"),n("96cf"),n("3b8d")),r=n("bd86"),o=(n("c5f6"),n("2f62")),c=n("2af9"),l=n("7d2b"),u=n("e9f9"),d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{on:{click:e.handleClick}},["enterprise"===e.d.edition?n("span",{staticClass:"enterprise"},[e._v("\n    "+e._s(e.$t("Enterprise"))+"\n  ")]):e._e(),e._v(" "),n("el-row",{staticClass:"panel"},[e.d.icon?n("el-col",{staticClass:"image",attrs:{span:e.d.icon?8:0}},[e.d.icon.startsWith("/")||e.d.icon.startsWith("data:")?n("img",{attrs:{alt:e.d.display_name,src:e.d.icon}}):n("Icon",{attrs:{icon:e.d.icon}})],1):e._e(),e._v(" "),n("el-col",{staticClass:"text-zone",attrs:{span:e.d.icon?16:24}},[n("div",{staticClass:"one-line"},[n("b",[e._v(e._s(e.d.display_name))])]),e._v(" "),n("div",{staticClass:"tag-zone"},[e.d.version?n("el-tag",{staticStyle:{"margin-left":"5px","background-color":"#ecf5ff",color:"#409eff"},attrs:{size:"mini"}},[e._v("\n          "+e._s(e.d.version)+"\n        ")]):e._e(),e._v(" "),e._l(e.d.tags,(function(t){return n("el-tag",{key:t,attrs:{size:"mini"}},[e._v("\n          "+e._s(e.capitalize(t))+"\n        ")])}))],2),e._v(" "),n("div",{staticClass:"comment",attrs:{title:e.d.comment}},[e._v("\n        "+e._s(e.d.comment)+"\n      ")])])],1)],1)},p=[],f=n("35a5"),h={name:"Panel",components:{Icon:f["a"]},props:{d:{type:Object,required:!0}},data:function(){return{}},methods:{capitalize:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},handleClick:function(){this.$emit("onClick",this.d)}}},b=h,m=(n("5e03"),n("2877")),g=Object(m["a"])(b,d,p,!1,null,"69f0eeda",null),v=g.exports,y=n("ca50");function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){Object(r["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var C=1,j={name:"CardTable",components:{Drawer:y["a"],IBox:u["a"],Panel:v,TableAction:l["a"],Pagination:c["n"]},props:{columns:{type:Number,default:3},tableConfig:{type:Object,default:function(){return{}}},headerActions:{type:Object,default:function(){return{}}},pagination:{type:Boolean,default:!0},subComponent:{type:Object,default:function(){return null}},subComponentProps:{type:Object,default:function(){return{}}},detailDrawer:{type:[String,Function],default:""}},data:function(){return{total:0,totalData:[],page:C,extraQuery:{},paginationSize:12,paginationLayout:"total, sizes, prev, pager, next",paginationSizes:[12,24,36],loading:!0,axiosConfig:{raw:1,params:{display:1,draw:1}},detailDrawerVisible:!1,detailTitle:""}},computed:k(k({},Object(o["b"])(["hasValidLicense"])),{},{tableUrl:function(){return this.tableConfig.url||""}}),mounted:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getList();case 3:return e.prev=3,this.loading=!1,e.finish(3);case 6:case"end":return e.stop()}}),e,this,[[0,,3,6]])})));function t(){return e.apply(this,arguments)}return t}(),methods:{isDisabled:function(e){var t;return"enterprise"===(null===(t=e.edition)||void 0===t?void 0:t.value)&&!this.hasValidLicense},getIcon:function(e){var t="fa-check-circle";return!1===e&&(t="fa-times-circle"),'<i class="fa '.concat(t,'" />')},getPageQuery:function(e,t){return this.$refs.pagination.getPageQuery(e,t)},getList:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,n,i,a,s,r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.tableConfig.totalData){e.next=4;break}return this.totalData=this.tableConfig.totalData,this.total=this.totalData.length,e.abrupt("return");case 4:if(this.tableUrl){e.next=6;break}return e.abrupt("return");case 6:return t=this.getPageQuery(this.page,this.paginationSize),n=Object.assign(this.extraQuery,t,this.tableConfig.extraQuery),i=Object.keys(n).map((function(e){return e+"="+n[e]})).join("&"),a=-1===this.tableUrl.indexOf("?")?"?":"&",s="".concat(this.tableUrl).concat(a).concat(i),e.next=13,this.$axios.get(s,this.axiosConfig);case 13:r=e.sent,o=r.data,this.total=(null===o||void 0===o?void 0:o.count)||0,this.totalData=(null===o||void 0===o?void 0:o.results)||[];case 17:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),reloadTable:function(){this.getList()},search:function(e){this.extraQuery=e,this.getList()},handleSizeChange:function(e){this.page=C,this.paginationSize=e,this.getList()},handleCurrentChange:function(e){this.page=e,this.getList()},defaultPerformView:function(e){var t=this.$route.name.replace("List","Detail"),n=this.headerActions.detailRoute||t,i={replace:!0};"string"===typeof n?(i.name=n,i.params={id:e.id}):i=n,this.$router.push(i)},defaultPerformDelete:function(e){this.$axios.delete("".concat(this.tableConfig.url).concat(e.id,"/"))},onView:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.isDisabled(t)){e.next=2;break}return e.abrupt("return");case 2:if(!this.detailDrawer){e.next=9;break}return e.next=5,this.$store.dispatch("common/setDrawerActionMeta",{action:"detail",row:t,col:{},id:t.id});case 5:this.detailTitle="".concat(this.$t("Detail"),": ").concat(t.name),this.detailDrawerVisible=!0,e.next=12;break;case 9:return n=this.tableConfig.onView||this.defaultPerformView,e.next=12,n(t);case 12:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),onDelete:function(e){var t=this,n="".concat(this.$t("DeleteWarningMsg"),' "').concat(e.name,'" ?');this.$confirm(n,this.$tc("Info"),{type:"warning",confirmButtonClass:"el-button--danger",beforeClose:function(){var n=Object(s["a"])(regeneratorRuntime.mark((function n(i,a,s){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if("confirm"===i){n.next=2;break}return n.abrupt("return",s());case 2:return r=t.tableConfig.onDelete||t.defaultPerformDelete,n.next=5,r(e);case 5:s(),t.reloadTable(),t.$message.success(t.$tc("DeleteSuccessMsg"));case 8:case"end":return n.stop()}}),n)})));function i(e,t,i){return n.apply(this,arguments)}return i}()}).catch((function(){}))}}},w=j,O=(n("31a9"),Object(m["a"])(w,i,a,!1,null,"2a7bdd37",null));t["a"]=O.exports},2184:function(e,t,n){"use strict";n("9d18")},"223b":function(e,t,n){e.exports=n.p+"assets/img/qcloud.a400ef35.svg"},"270d":function(e,t,n){},"273b":function(e,t,n){"use strict";n("0482")},"284f":function(e,t,n){e.exports=n.p+"assets/img/azure_international.5b7555c9.svg"},"285e":function(e,t,n){"use strict";n("5fc5")},"2df3":function(e,t,n){"use strict";n("270d")},"31a9":function(e,t,n){"use strict";n("a752")},"37ac":function(e,t,n){e.exports=n.p+"assets/img/qing.6b7b0913.svg"},3802:function(e,t,n){},"389e":function(e,t,n){"use strict";n("0f7a")},"3cc2":function(e,t,n){},"41fd":function(e,t,n){e.exports=n.p+"assets/img/proxmox.4884b50b.svg"},4610:function(e,t,n){e.exports=n.p+"assets/img/scp.ed42e2da.svg"},"49e3":function(e,t,n){e.exports=n.p+"assets/img/baidu.58077b2d.svg"},"4e99":function(e,t,n){"use strict";n("8c5e")},"4ee14":function(e,t,n){e.exports=n.p+"assets/img/volcengine.c6951032.svg"},"5d58":function(e,t,n){},"5e03":function(e,t,n){"use strict";n("0e22")},"5fc5":function(e,t,n){},6473:function(e,t,n){e.exports=n.p+"assets/img/azure_china.5b7555c9.svg"},"6ea7":function(e,t,n){e.exports=n.p+"assets/img/jd.2608d59d.svg"},7:function(e,t){},"711b":function(e,t,n){e.exports=n.p+"assets/img/gcp.27632618.svg"},"8272d":function(e,t,n){e.exports=n.p+"assets/img/huawei.5a394f49.svg"},8944:function(e,t,n){},"8c5e":function(e,t,n){},"8dd4":function(e,t,n){e.exports=n.p+"assets/img/openstack.0282f645.svg"},"9d18":function(e,t,n){},"9ea2":function(e,t,n){e.exports=n.p+"assets/img/zstack.0ad49592.svg"},a308:function(e,t,n){e.exports=n.p+"assets/img/ali.6263cc3e.svg"},a6dc:function(e,t,n){"use strict";n("c747")},a752:function(e,t,n){},ab8b:function(e,t,n){"use strict";n("5d58")},acf7:function(e,t,n){e.exports=n.p+"assets/img/qcloud_lighthouse.a400ef35.svg"},b708:function(e,t,n){},b77d:function(e,t,n){},bd11:function(e,t){e.exports=g,e.exports.match=o,e.exports.regexpToFunction=c,e.exports.parse=a,e.exports.compile=r,e.exports.tokensToFunction=l,e.exports.tokensToRegExp=m;var n="/",i=new RegExp(["(\\\\.)","(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?"].join("|"),"g");function a(e,t){var a,r=[],o=0,c=0,l="",u=t&&t.delimiter||n,p=t&&t.whitelist||void 0,f=!1;while(null!==(a=i.exec(e))){var h=a[0],b=a[1],m=a.index;if(l+=e.slice(c,m),c=m+h.length,b)l+=b[1],f=!0;else{var g="",v=a[2],y=a[3],_=a[4],k=a[5];if(!f&&l.length){var C=l.length-1,j=l[C],w=!p||p.indexOf(j)>-1;w&&(g=j,l=l.slice(0,C))}l&&(r.push(l),l="",f=!1);var O="+"===k||"*"===k,$="?"===k||"*"===k,x=y||_,S=g||u,P=g||("string"===typeof r[r.length-1]?r[r.length-1]:"");r.push({name:v||o++,prefix:g,delimiter:S,optional:$,repeat:O,pattern:x?d(x):s(S,u,P)})}}return(l||c<e.length)&&r.push(l+e.substr(c)),r}function s(e,t,n){var i="[^"+u(e===t?e:e+t)+"]";return!n||n.indexOf(e)>-1||n.indexOf(t)>-1?i+"+?":u(n)+"|(?:(?!"+u(n)+")"+i+")+?"}function r(e,t){return l(a(e,t),t)}function o(e,t){var n=[],i=g(e,n,t);return c(i,n)}function c(e,t){return function(n,i){var a=e.exec(n);if(!a)return!1;for(var s=a[0],r=a.index,o={},c=i&&i.decode||decodeURIComponent,l=1;l<a.length;l++)if(void 0!==a[l]){var u=t[l-1];u.repeat?o[u.name]=a[l].split(u.delimiter).map((function(e){return c(e,u)})):o[u.name]=c(a[l],u)}return{path:s,index:r,params:o}}}function l(e,t){for(var n=new Array(e.length),i=0;i<e.length;i++)"object"===typeof e[i]&&(n[i]=new RegExp("^(?:"+e[i].pattern+")$",p(t)));return function(t,i){for(var a="",s=i&&i.encode||encodeURIComponent,r=!i||!1!==i.validate,o=0;o<e.length;o++){var c=e[o];if("string"!==typeof c){var l,u=t?t[c.name]:void 0;if(Array.isArray(u)){if(!c.repeat)throw new TypeError('Expected "'+c.name+'" to not repeat, but got array');if(0===u.length){if(c.optional)continue;throw new TypeError('Expected "'+c.name+'" to not be empty')}for(var d=0;d<u.length;d++){if(l=s(u[d],c),r&&!n[o].test(l))throw new TypeError('Expected all "'+c.name+'" to match "'+c.pattern+'"');a+=(0===d?c.prefix:c.delimiter)+l}}else if("string"!==typeof u&&"number"!==typeof u&&"boolean"!==typeof u){if(!c.optional)throw new TypeError('Expected "'+c.name+'" to be '+(c.repeat?"an array":"a string"))}else{if(l=s(String(u),c),r&&!n[o].test(l))throw new TypeError('Expected "'+c.name+'" to match "'+c.pattern+'", but got "'+l+'"');a+=c.prefix+l}}else a+=c}return a}}function u(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function d(e){return e.replace(/([=!:$/()])/g,"\\$1")}function p(e){return e&&e.sensitive?"":"i"}function f(e,t){if(!t)return e;var n=e.source.match(/\((?!\?)/g);if(n)for(var i=0;i<n.length;i++)t.push({name:i,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return e}function h(e,t,n){for(var i=[],a=0;a<e.length;a++)i.push(g(e[a],t,n).source);return new RegExp("(?:"+i.join("|")+")",p(n))}function b(e,t,n){return m(a(e,n),t,n)}function m(e,t,i){i=i||{};for(var a=i.strict,s=!1!==i.start,r=!1!==i.end,o=i.delimiter||n,c=[].concat(i.endsWith||[]).map(u).concat("$").join("|"),l=s?"^":"",d=0;d<e.length;d++){var f=e[d];if("string"===typeof f)l+=u(f);else{var h=f.repeat?"(?:"+f.pattern+")(?:"+u(f.delimiter)+"(?:"+f.pattern+"))*":f.pattern;t&&t.push(f),f.optional?f.prefix?l+="(?:"+u(f.prefix)+"("+h+"))?":l+="("+h+")?":l+=u(f.prefix)+"("+h+")"}}if(r)a||(l+="(?:"+u(o)+")?"),l+="$"===c?"$":"(?="+c+")";else{var b=e[e.length-1],m="string"===typeof b?b[b.length-1]===o:void 0===b;a||(l+="(?:"+u(o)+"(?="+c+"))?"),m||(l+="(?="+u(o)+"|"+c+")")}return new RegExp(l,p(i))}function g(e,t,n){return e instanceof RegExp?f(e,t):Array.isArray(e)?h(e,t,n):b(e,t,n)}},c0eb:function(e,t,n){"use strict";var i=n("c5ec"),a=n.n(i);window.$=a.a,window.jQuery=a.a,t["a"]=a.a},c6b8:function(e,t,n){e.exports=n.p+"assets/img/kingsoft.ce3318a8.svg"},c747:function(e,t,n){},c95e:function(e,t,n){e.exports=n.p+"assets/img/aws_international.3f70a061.svg"},dab0:function(e,t,n){e.exports=n.p+"assets/img/nutanix.111df53f.svg"},db63:function(e,t,n){"use strict";n("8944")},e1a7:function(e,t,n){"use strict";n.r(t);var i,a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("SmallCard",e._b({ref:"table",staticClass:"account-table"},"SmallCard",e.table,!1)),e._v(" "),e.visible?n("CreateDialog",e._b({attrs:{visible:e.visible},on:{"update:visible":function(t){e.visible=t}}},"CreateDialog",e.providerConfig,!1)):e._e(),e._v(" "),e.updateVisible?n("UpdateDialog",{attrs:{object:e.object,visible:e.updateVisible},on:{"update:visible":function(t){e.updateVisible=t},submitSuccess:e.onSubmitSuccess}}):e._e(),e._v(" "),e.onlineSyncVisible?n("SyncDialog",{attrs:{object:e.object,visible:e.onlineSyncVisible},on:{"update:visible":function(t){e.onlineSyncVisible=t}}}):e._e()],1)},s=[],r=(n("6d67"),n("7f7f"),n("bd86")),o=n("0692"),c=n("1b0e"),l="gcp",u="aliyun",d="baiducloud",p="jdcloud",f="kingsoftcloud",h="aws_international",b="aws_china",m="huaweicloud",g="qcloud",v="qcloud_lighthouse",y="azure",_="azure_international",k="ucloud",C="volcengine",j="qingcloud_private",w="huaweicloud_private",O="ctyun_private",$="openstack",x="zstack",S="nutanix",P="vmware",D="fc",A="scp",V="apsara_stack",R="proxmox",T="lan",E="smartx",I=[u,g,v,m,d,p,f,b,h,y,_,l,k,C,E],F=[u],M=[P,j,w,O,$,x,S,D,A,V,E,R],z=(i={},Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])(i,u,{name:u,title:o["a"].t("Aliyun"),attrs:["access_key_id","access_key_secret"],image:n("a308")}),h,{name:h,title:o["a"].t("AWS_Int"),attrs:["access_key_id","access_key_secret"],image:n("c95e")}),b,{name:b,title:o["a"].t("AWS_China"),attrs:["access_key_id","access_key_secret"],image:n("e796")}),m,{name:m,title:o["a"].t("HuaweiCloud"),attrs:["access_key_id","access_key_secret"],image:n("8272d")}),d,{name:d,title:o["a"].t("BaiduCloud"),attrs:["access_key_id","access_key_secret"],image:n("49e3")}),p,{name:p,title:o["a"].t("JDCloud"),attrs:["access_key_id","access_key_secret"],image:n("6ea7")}),f,{name:f,title:o["a"].t("KingSoftCloud"),attrs:["access_key_id","access_key_secret"],image:n("c6b8")}),g,{name:g,title:o["a"].t("Qcloud"),attrs:["access_key_id","access_key_secret"],image:n("223b")}),v,{name:v,title:o["a"].t("QcloudLighthouse"),attrs:["access_key_id","access_key_secret"],image:n("acf7")}),y,{name:y,title:o["a"].t("Azure"),attrs:["client_id","client_secret","tenant_id","subscription_id"],image:n("6473")}),Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])(i,_,{name:_,title:o["a"].t("Azure_Int"),attrs:["client_id","client_secret","tenant_id","subscription_id"],image:n("284f")}),l,{name:l,title:o["a"].t("GCP"),attrs:["service_account_key"],image:n("711b")}),k,{name:k,title:o["a"].t("UCloud"),attrs:["base_url","public_key","private_key","project"],image:n("ecf6")}),C,{name:C,title:o["a"].t("Volcengine"),attrs:["access_key_id","access_key_secret"],image:n("4ee14")}),P,{name:P,title:"VMware",attrs:["host","port","username","password","auto_sync_node"],image:n("ffa7")}),S,{name:S,title:"Nutanix",attrs:["access_key_id","access_key_secret","api_endpoint"],image:n("dab0")}),j,{name:j,title:o["a"].t("QingYunPrivateCloud"),attrs:["access_key_id","access_key_secret","api_endpoint"],image:n("37ac")}),w,{name:w,title:o["a"].t("HuaweiPrivateCloud"),attrs:["sc_username","sc_password","domain_name","oc_username","oc_password","api_endpoint"],image:n("8272d")}),$,{name:$,title:o["a"].t("OpenStack"),attrs:["auth_url","user_domain_name","username","password"],image:n("8dd4")}),x,{name:x,title:o["a"].t("ZStack"),attrs:["access_key_id","access_key_secret","api_endpoint"],image:n("9ea2")}),Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])(i,E,{name:E,title:o["a"].t("SmartX CloudTower"),attrs:["username","password","api_endpoint"],image:n("e3d6")}),D,{name:D,title:o["a"].t("FC"),attrs:["api_endpoint","username","password"],image:n("8272d")}),O,{name:O,title:o["a"].t("CTYunPrivate"),attrs:["access_key_id","access_key_secret","api_endpoint","cert_file","key_file"],image:n("019d")}),A,{name:A,title:o["a"].t("SCP"),attrs:["access_key_id","access_key_secret","api_endpoint"],image:n("4610")}),V,{name:V,title:o["a"].t("ApsaraStack"),attrs:["access_key_id","access_key_secret","api_endpoint"],image:n("a308")}),R,{name:R,title:o["a"].t("Proxmox"),attrs:["username","password","api_endpoint"],image:n("41fd")}),T,{name:T,title:o["a"].t("LAN"),attrs:["ip_group","test_port","test_timeout","hostname_prefix"],image:n("0271"),imageCSS:{}}));function U(e){for(var t=["access_key_secret","password","client_secret","oc_password","sc_password"],n=0,i=t;n<i.length;n++){var a=i[n],s=e[a];s&&(e[a]=Object(c["b"])(s))}return e}var B=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Drawer",e._g(e._b({attrs:{"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"has-footer":!1,"show-buttons":!1,"show-close":!1,title:e.$tc("CloudSyncConfig"),visible:e.iVisible},on:{"update:visible":function(t){e.iVisible=t}}},"Drawer",e.$attrs,!1),e.$listeners),[n("el-row",{staticStyle:{padding:"10px"},attrs:{gutter:5}},[n("el-col",{staticClass:"left-step-zone",attrs:{span:6}},[n("el-steps",{attrs:{active:e.active,direction:"vertical"}},[n("el-step",{attrs:{description:e.firstStepDesc}}),e._v(" "),n("el-step",{attrs:{description:e.$tc("Authentication")}}),e._v(" "),n("el-step",{attrs:{description:e.$tc("Sync")}}),e._v(" "),n("el-step",{attrs:{description:e.$tc("Result")}})],1)],1),e._v(" "),n("el-col",{attrs:{span:18}},[n("div",{staticClass:"right-content"},[n(e.activeMenu,{tag:"component",attrs:{active:e.active,object:e.account,provider:e.iSelected,providers:e.providers,selected:e.iSelected,visible:e.iVisible},on:{"update:active":function(t){e.active=t},"update:object":function(t){e.account=t},"update:selected":function(t){e.iSelected=t},"update:visible":function(t){e.iVisible=t}}})],1)])],1)],1)},N=[],q=n("ca50"),L=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"cloud-select-wrap"},[n("el-row",{attrs:{gutter:12}},e._l(e.providers,(function(t){return n("el-col",{key:t.name},[n("el-card",{class:e.selected===t.name?"active":"",attrs:{"body-style":{display:"flex",alignItems:"center",justifyContent:"flex-start"},shadow:"hover"},nativeOn:{dblclick:function(n){return e.handleCardDBClick(t.name)},click:function(n){return e.handleCardClick(t.name)}}},[n("el-image",{attrs:{src:t.image,fit:"contain",shape:"square"}}),e._v(" "),n("div",{staticClass:"description"},[e._v(e._s(t.title))])],1)],1)})),1),e._v(" "),n("el-row",{staticClass:"buttons"},[n("el-col",[n("el-button",{attrs:{size:"small"},on:{click:e.handleCancel}},[e._v(e._s(e.$tc("Cancel")))]),e._v(" "),n("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleNext}},[e._v("\n        "+e._s(e.$tc("Next"))+"\n      ")])],1)],1)],1)},Q=[],J=(n("d25f"),n("c5f6"),{name:"ProviderPanel",components:{},props:{providers:{type:Array,default:function(){return[]}},selected:{type:String,default:function(){return""}},active:{type:Number,required:!0}},data:function(){return{}},methods:{handleCardClick:function(e){this.$emit("update:selected",e)},handleCardDBClick:function(e){this.handleCardClick(e),this.handleNext()},handleNext:function(){var e=this,t=this.providers.filter((function(t){return t.name===e.selected}))[0];t?this.$emit("update:active",1):this.$message.error(this.$tc("SelectProviderMsg"))},handleCancel:function(){this.$emit("update:visible",!1)}}}),W=J,K=(n("2184"),n("2877")),G=Object(K["a"])(W,L,Q,!1,null,"002c8970",null),Y=G.exports,H=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("GenericCreateUpdateForm",e._b({ref:"form",staticClass:"form",on:{performError:e.handlePerformError,performFinished:e.handlePerformFinished,submitSuccess:e.handleSubmitSuccess}},"GenericCreateUpdateForm",e.settings,!1))},X=[],Z=(n("1c01"),n("58b2"),n("8e6e"),n("f3e2"),n("ac6a"),n("456d"),n("ac4d"),n("8a81"),n("5df3"),n("1c4c"),n("6b54"),n("87b3"),n("7514"),n("2caf"),n("6762"),n("cd4a")),ee=n("5cba"),te=n("2af9"),ne=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-link",{attrs:{icon:"el-icon-edit",underline:!1},on:{click:e.handlerLinkClick}},[e._v("\n    "+e._s(e.content)+"\n  ")]),e._v(" "),n("Dialog",{attrs:{"destroy-on-close":!0,title:e.$tc("Region"),visible:e.regionVisible,"show-cancel":!1,width:"60%"},on:{"update:visible":function(t){e.regionVisible=t},confirm:function(t){e.regionVisible=!1}}},[n("el-row",[n("el-col",[n("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckedAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("\n          "+e._s(e.$t("All"))+"\n        ")])],1)],1),e._v(" "),n("el-checkbox-group",{on:{change:e.handleCheckedRegionChange},model:{value:e.checkedRegion,callback:function(t){e.checkedRegion=t},expression:"checkedRegion"}},e._l(e.allRegions,(function(t){return n("el-row",{key:t.id,attrs:{type:"flex"}},[n("el-col",[n("el-checkbox",{attrs:{label:t.id,value:t.id}},[e._v("\n            "+e._s(t.name)+"\n          ")])],1)],1)})),1)],1)],1)},ie=[],ae=(n("2fdb"),n("0cd8"),n("7618")),se={name:"RegionPanel",components:{Dialog:te["i"]},props:{provider:{type:String,required:!0},regions:{type:Array,default:function(){return[]}},getAuthInfo:{type:Function,default:function(){}}},data:function(){return{content:"",checkedRegion:[],allRegions:[],checkAll:!1,regionVisible:!1,isIndeterminate:!0}},watch:{regions:{immediate:!0,handler:function(e){this.checkedRegion=e,this.refreshContent()}}},mounted:function(){this.regions&&(this.checkedRegion=this.regions),this.refreshContent()},methods:{refreshContent:function(){var e=this.checkedRegion.length||this.$t("SelectAll");this.content="".concat(this.$t("Modify")," [").concat(e,"]")},handlerLinkClick:function(){var e=this,t=this.getAuthInfo(),n="get",i={},a="/api/v1/xpack/cloud/regions/?account_id=".concat(t);if("object"===Object(ae["a"])(t)){var s=JSON.parse(JSON.stringify(t)),r=this.$route.query.category||"host";n="post",a="/api/v1/xpack/cloud/regions/?provider=".concat(this.provider,"&category=").concat(r),i={attrs:U(s)}}this.content=this.$t("Loading"),this.$axios[n](a,i).then((function(t){e.allRegions=null===t||void 0===t?void 0:t.regions,e.regionVisible=!0,e.updateCheckedStatus()})).catch((function(){e.$message.error(e.$tc("CloudRegionTip"))})).finally((function(){e.refreshContent()}))},handleCheckedAllChange:function(e){this.checkedRegion=e?this.allRegions.map((function(e){return e.id})):[],this.isIndeterminate=!1,this.checkAll=!!e,this.$emit("input",[]),this.refreshContent()},handleCheckedRegionChange:function(e){var t=e.length;this.checkAll=0===t||t===this.allRegions.length,this.isIndeterminate=t>0&&t<this.allRegions.length;var n=this.allRegions.filter((function(t){return e.includes(t.id)})).reduce((function(e,t){return e[t.id]=t.name,e}),{});this.$emit("input",n),this.refreshContent()},updateCheckedStatus:function(){var e=this.checkedRegion.length;this.checkAll=e===this.allRegions.length,0!==e&&e!==this.allRegions.length||this.handleCheckedAllChange(this.allRegions)}}},re=se,oe=(n("1331"),Object(K["a"])(re,ne,ie,!1,null,"6c1782d2",null)),ce=oe.exports;function le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?le(Object(n),!0).forEach((function(t){Object(r["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function de(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=pe(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,r=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return r=e.done,e},e:function(e){o=!0,s=e},f:function(){try{r||null==n.return||n.return()}finally{if(o)throw s}}}}function pe(e,t){if(e){if("string"===typeof e)return fe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fe(e,t):void 0}}function fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var he={name:"AuthPanel",components:{GenericCreateUpdateForm:Z["b"]},props:{provider:{type:String,default:function(){return""}},object:{type:Object,default:function(){}},origin:{type:String,default:""}},data:function(){var e,t,n,i,a=this,s=this;function r(e){var t,n={},i=["access_key_secret","client_secret","password","sc_password","oc_password","cert_file","key_file","public_key","private_key"],a=de(z[e].attrs);try{for(a.s();!(t=a.n()).done;){var r,o=t.value;n[o]={rules:i.includes(o)&&null!==(r=s.object)&&void 0!==r&&r.id?[]:[ee["e"]]}}}catch(c){a.e(c)}finally{a.f()}return n}return{priSubmitForm:null,submitType:"auto",settings:{url:"/api/v1/xpack/cloud/accounts/",fields:[[this.$t("Basic"),["name"]],[this.$t("Auth"),["attrs"]],[this.$t("Other"),["regions"]]],fieldsMeta:{name:{rules:[ee["e"],ee["g"]]},attrs:{encryptedFields:["access_key_secret"],fields:z[this.provider].attrs,fieldsMeta:ue(ue({},r(this.provider)),{},{service_account_key:{label:this.$t("ServerAccountKey"),component:te["t"],el:{toFormat:"object"}},cert_file:{label:this.$t("Certificate"),component:te["t"],el:{toFormat:"object"}},key_file:{label:this.$t("SecretKey"),component:te["t"],el:{toFormat:"object"}},password:{rules:this.$route.params.id?[]:[ee["e"]]},public_key:{label:this.$t("PublicKey"),rules:this.$route.params.id?[]:[ee["e"]]},private_key:{label:this.$t("PrivateKey"),rules:this.$route.params.id?[]:[ee["e"]]},project:{label:this.$t("Project")},hostname_prefix:{required:!1}})},regions:{label:this.$tc("Region"),component:ce,el:{provider:this.provider,regions:(null===(e=this.object.task)||void 0===e?void 0:e.regions)||[],getAuthInfo:function(){var e;if(null!==(e=a.object)&&void 0!==e&&e.id)return a.object.id;var t=a.$refs.form.$refs.form.dataForm;return t.$refs.form.validate(),t.getFormValue()["attrs"]}}}},defaultButton:!1,submitMethod:null!==(t=this.object)&&void 0!==t&&t.id?"put":"post",moreButtons:[{title:this.$tc("Next"),type:"primary",loading:!1,hidden:null===(n=this.object)||void 0===n?void 0:n.id,callback:function(e,t,n){a.submitForm(t,n,"manual")}},{title:this.$t("Confirm"),type:"primary",loading:!1,hidden:!(null!==(i=this.object)&&void 0!==i&&i.id),callback:function(e,t,n){a.submitForm(t,n,"update")}},{title:this.$tc("Cancel"),callback:function(){a.$emit("update:visible",!1)}}],getUrl:function(){var e;return null!==(e=a.object)&&void 0!==e&&e.id?"".concat(s.settings.url).concat(a.object.id,"/?provider=").concat(a.provider):"".concat(s.settings.url,"?provider=").concat(a.provider)},cleanFormValue:function(e){var t=JSON.parse(JSON.stringify(e));return t["attrs"]=U(t.attrs),t["provider"]=s.provider,t["category"]=this.$route.query.category||"host",t},addContinue:!0}}},methods:{submitForm:function(e,t,n){var i=this;this.priSubmitForm=e,e.validate((function(e){e&&(t.loading=!0,i.$refs.form.$refs.form.dataForm.submitForm("form",!1),i.submitType=n)}))},handleSubmitSuccess:function(e){var t=this;"manual"===this.submitType?(this.$emit("update:object",e),this.$emit("update:active",2)):"update"===this.submitType&&setTimeout((function(){t.$emit("submitSuccess"),t.$emit("update:visible",!1)}),500)},handlePerformFinished:function(){var e,t=de(this.settings.moreButtons);try{for(t.s();!(e=t.n()).done;){var n=e.value;n.loading=!1}}catch(i){t.e(i)}finally{t.f()}},handlePerformError:function(e){if(e.hasOwnProperty("attrs"))for(var t in e["attrs"])this.setAttrsFieldError(t,e["attrs"][t])},setAttrsFieldError:function(e,t){var n,i=de(this.priSubmitForm.content);try{for(i.s();!(n=i.n()).done;){var a=n.value;if("attrs"===a.id){t=Array.isArray(t)?t.join(","):t;var s=a.el.fields,r=s.find((function(t){return t.prop===e}));if(!r)return;"string"===typeof t&&(r.el.errors=t,r.attrs.error=t)}}}catch(o){i.e(o)}finally{i.f()}}}},be=he,me=(n("a6dc"),Object(K["a"])(be,H,X,!1,null,"20e5ed94",null)),ge=me.exports,ve=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"asset-panel"},[n("el-alert",{staticStyle:{"margin-bottom":"6px"},attrs:{center:!1,closable:!0}},[n("el-link",{attrs:{icon:e.linkIcon,type:e.linkType,underline:!1}},[e._v(" "+e._s(e.tip))])],1),e._v(" "),n("ImportTable",e._b({ref:"importTable",attrs:{origin:"cloudSync"},on:{cancel:e.closeDialog,finish:e.showResult}},"ImportTable",e.settings,!1))],1)},ye=[],_e=(n("96cf"),n("3b8d")),ke=n("87cc"),Ce=n("5da1"),je=n.n(Ce),we={name:"AssetPanel",components:{ImportTable:ke["a"]},props:{active:{type:Number,default:null},object:{type:Object,required:!0},visible:{type:Boolean,default:function(){return!1}}},data:function(){var e=this,t=this;return{ws:null,importAssets:{},tip:this.$tc("PrepareSyncTask"),linkType:"primary",linkIcon:"el-icon-loading",alreadySync:[],settings:{showCancel:!this.active,importOption:"create",showButtons:!0,disableImportBtn:!1,canEdit:!1,moreButtons:[{title:this.$t("Next"),type:"primary",hidden:!this.active,callback:function(){e.$emit("update:active",3)}}],config:{url:"",hasSelection:!0,persistSelection:!1,hasPagination:!1,tableAttrs:{height:"300px"}},jsonData:{title:[[this.$tc("Name"),"name"],[this.$tc("Address"),"address"],[this.$tc("Platform"),"platform"],[this.$tc("Node"),"node"],[this.$tc("Protocol"),"protocols"],[this.$tc("Region"),"region_id"]],data:[]},performUploadObject:function(){var e=Object(_e["a"])(regeneratorRuntime.mark((function e(n){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:i={action:"sync_import",asset_id:n.id},t.ws.send(JSON.stringify(i)),t.importAssets[n.id]=n;case 3:case"end":return e.stop()}}),e)})));function n(t){return e.apply(this,arguments)}return n}()}}},watch:{visible:{handler:function(e,t){e&&!je()(e,t)&&this.enableWS()},immediate:!0,deep:!0}},methods:{enableWS:function(){var e=this;if(!this.ws){var t="https:"===document.location.protocol?"wss":"ws",n=document.location.port?":"+document.location.port:"",i="/ws/xpack/cloud/",a=t+"://"+document.location.hostname+n+i;this.ws=new WebSocket(a),this.ws.onopen=function(t){e.settings.disableImportBtn=!0,e.ws.send(JSON.stringify({action:"sync_task",account_id:e.object.id}))},this.ws.onerror=function(){e.$message.error(e.$tc("ConnectWebSocketError"))},this.ws.onmessage=function(t){var n=JSON.parse(t.data);"sync_region"===n.action?e.addRegion(n.region_id):"import"===n.action?(n["@status"]="pending",e.$refs.importTable.addTableItem(n)):"imported"===n.action?e.importAssets[n.asset_id]["@status"]="ok":"finished"===n.action?(e.linkType="success",e.linkIcon="el-icon-success",e.settings.disableImportBtn=!1,e.tip="".concat(e.$t("SyncSuccessMsg"))):e.$message.error(null===n||void 0===n?void 0:n.msg)}}},addRegion:function(e){this.alreadySync.includes(e)||(this.alreadySync.push(e),this.tip="".concat(this.$t("SyncRegion"),": ").concat(this.alreadySync.at(-1)))},showResult:function(){this.ws&&this.ws.close(),this.$emit("update:active",4)},closeDialog:function(){this.$emit("update:visible",!1)}}},Oe=we,$e=(n("db63"),Object(K["a"])(Oe,ve,ye,!1,null,"59c9fb71",null)),xe=$e.exports,Se=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"result-panel"},[n("el-table",{attrs:{data:e.tableData,"show-header":!1,size:"medium"}},[n("el-table-column",{attrs:{prop:"key",width:"120"}}),e._v(" "),n("el-table-column",{attrs:{prop:"value"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-link",{attrs:{underline:!1}},[e._v(" "+e._s(t.row.value))])]}}])})],1),e._v(" "),n("div",{staticStyle:{"margin-top":"20px"}},[n("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleClick}},[e._v(e._s(e.$t("CloudAccountDetail")))]),e._v(" "),n("el-button",{attrs:{size:"small"},on:{click:e.handleClose}},[e._v(e._s(e.$t("Close")))])],1)],1)},Pe=[],De={name:"ResultPanel",components:{},props:{object:{type:Object,default:function(){}}},data:function(){return{tableData:[{key:this.$t("Name"),value:this.object.name},{key:this.$t("Platform"),value:this.object.provider.value},{key:this.$t("Region"),value:this.object.task.regions.length},{key:this.$t("Strategy"),value:this.object.task.strategy.map((function(e){return e["name"]})).join(", ")||this.$t("Empty")},{key:this.$t("IPType"),value:1===this.object.task.sync_ip_type?this.$t("PublicIP"):this.$t("PrivateIP")},{key:this.$t("Timer"),value:this.object.task.is_periodic?this.$t("Yes"):this.$t("No")}]}},methods:{handleClick:function(){this.$router.push({name:"CloudAccountDetail",params:{id:this.object.id}}),this.handleClose()},handleClose:function(){this.$emit("update:visible",!1)}}},Ae=De,Ve=(n("285e"),Object(K["a"])(Ae,Se,Pe,!1,null,"6aabeadf",null)),Re=Ve.exports,Te=n("e9f9"),Ee={name:"CreateDialog",components:{IBox:Te["a"],Drawer:q["a"],AuthPanel:ge,AssetPanel:xe,ResultPanel:Re,ProviderPanel:Y},props:{providers:{type:Array,default:function(){return[]}},visible:{type:Boolean,default:function(){return!1}}},data:function(){return{activeMenuMap:{0:"ProviderPanel",1:"AuthPanel",2:"AssetPanel",3:"ResultPanel"},activeMenu:"ProviderPanel",selected:"",firstStepDesc:this.$tc("SelectProvider"),active:0,account:{}}},computed:{iSelected:{set:function(e){var t,n=null===(t=z[e])||void 0===t?void 0:t.title;this.firstStepDesc=n||this.firstStepDesc,this.selected=e},get:function(){return this.selected}},iVisible:{set:function(e){this.$emit("update:visible",e)},get:function(){return this.visible}}},watch:{active:{handler:function(e){this.activeMenu=this.activeMenuMap[e]}}}},Ie=Ee,Fe=(n("2df3"),Object(K["a"])(Ie,B,N,!1,null,"250d279c",null)),Me=Fe.exports,ze=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Drawer",e._g({staticClass:"drawer",attrs:{"destroy-on-close":!0,"show-buttons":!1,title:e.$tc("CloudAccountUpdate"),visible:e.iVisible},on:{"update:visible":function(t){e.iVisible=t}}},e.$listeners),[n("IBox",[n("AuthPanel",{attrs:{object:e.object,provider:e.object.provider.value,visible:e.iVisible,origin:"update"},on:{"update:visible":function(t){e.iVisible=t},submitSuccess:e.onSubmitSuccess}})],1)],1)},Ue=[],Be={name:"UpdateDialog",components:{Drawer:q["a"],AuthPanel:ge,IBox:Te["a"]},props:{object:{type:Object,required:!0},visible:{type:Boolean,default:!1}},computed:{iVisible:{set:function(e){this.$emit("update:visible",e)},get:function(){return this.visible}}},methods:{onSubmitSuccess:function(){this.$emit("submitSuccess")}}},Ne=Be,qe=(n("ab8b"),Object(K["a"])(Ne,ze,Ue,!1,null,"45477474",null)),Le=qe.exports,Qe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Dialog",e._g({attrs:{"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"show-buttons":!1,title:e.$tc("SyncOnline"),visible:e.iVisible},on:{"update:visible":function(t){e.iVisible=t}}},e.$listeners),[n("AssetPanel",{attrs:{object:e.object,visible:e.iVisible},on:{"update:visible":function(t){e.iVisible=t}}})],1)},Je=[],We=n("9039"),Ke={name:"SyncDialog",components:{Dialog:We["a"],AssetPanel:xe},props:{object:{type:Object,default:function(){return{}}},visible:{type:Boolean,default:function(){return!1}}},computed:{iVisible:{set:function(e){this.$emit("update:visible",e)},get:function(){return this.visible}}}},Ge=Ke,Ye=Object(K["a"])(Ge,Qe,Je,!1,null,"39a955fc",null),He=Ye.exports,Xe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("CardTable",e._g(e._b({ref:"table",staticClass:"info-card-table",attrs:{columns:3,"table-config":e.tableConfig},scopedSlots:e._u([{key:"default",fn:function(t){return[n("CardPanel",e._b({attrs:{object:t.item,"on-view":t.onView,"table-config":e.tableConfig},on:{refresh:e.reloadTable}},"CardPanel",e.subComponentProps,!1))]}}])},"CardTable",e.$attrs,!1),e.$listeners))},Ze=[],et=n("1788"),tt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"info-panel",on:{click:e.gotoDetail}},[n("div",{staticClass:"panel-header"},[n("div",{staticClass:"panel-title"},[n("el-avatar",{attrs:{src:e.imageUrl,shape:"square"}}),e._v(" "),n("div",{staticClass:"title-display"},[n("span",{staticClass:"name"},[e._v(e._s(e.object.name))]),e._v(" "),n("span",{staticClass:"comment"},[e._v(e._s(e.object.provider.label))])])],1),e._v(" "),0!==e.iActions.length?n("div",{staticClass:"panel-actions",on:{click:function(t){return e.handleClick(t)}}},[n("el-dropdown",[n("el-button",{attrs:{size:"mini"}},[n("i",{staticClass:"el-icon-more el-icon--right"})]),e._v(" "),n("el-dropdown-menu",{attrs:{default:"dropdown"}},e._l(e.iActions,(function(t){return n("el-dropdown-item",{key:t.name,attrs:{disabled:t.disabled},nativeOn:{click:function(n){return t.callback(e.object)}}},[e._v("\n            "+e._s(t.name)+"\n          ")])})),1)],1)],1):e._e()]),e._v(" "),n("div",{staticClass:"panel-content"},[n("InfoPanel",{attrs:{infos:e.getInfos(e.object)}})],1),e._v(" "),n("el-row",{staticClass:"panel-footer"})],1)},nt=[],it=(n("f400"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"item-info"},[n("el-row",e._l(e.infos,(function(t,i){return n("el-col",{key:i,staticClass:"panel-item",attrs:{span:12}},[n("small",{staticClass:"item-label"},[e._v(e._s(t.title))]),e._v(" "),n("h4",{staticClass:"item-value"},[e._v(e._s(t.content))])])})),1)],1)}),at=[],st={name:"InfoPanel",components:{},props:{infos:{type:Array,default:function(){return[]}}},data:function(){return{}}},rt=st,ot=(n("4e99"),Object(K["a"])(rt,it,at,!1,null,"5ebe6a74",null)),ct=ot.exports;function lt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ut(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lt(Object(n),!0).forEach((function(t){Object(r["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var dt={name:"CardPanel",components:{InfoPanel:ct},props:{tableConfig:{type:Object,default:function(){return{}}},object:{type:Object,required:!0},actions:{type:Array,default:function(){return[]}},infos:{type:Array,default:function(){return[]}},getImage:{type:Function,default:function(e){return""}},getInfos:{type:Function,default:function(e){return[]}},handleUpdate:{type:Function,default:function(){}},onView:{type:Function,default:function(){}}},data:function(){return{defaultActions:[{id:"update",name:this.$tc("Update"),icon:"el-icon-edit",callback:this.handleUpdate,disabled:this.isDisabled("change")},{id:"delete",name:this.$tc("Delete"),icon:"el-icon-delete",callback:this.handleDelete,disabled:this.isDisabled("delete")}]}},computed:{imageUrl:function(){return this.getImage(this.object)},iActions:function(){var e=new Map;return this.defaultActions.forEach((function(t){e.set(t.id,ut({},t))})),this.actions.forEach((function(t){e.set(t.id,ut({},t))})),Array.from(e.values())}},mounted:function(){},methods:{isDisabled:function(e){var t,n,i=null===(t=this.tableConfig.permissions)||void 0===t?void 0:t.app,a=null===(n=this.tableConfig.permissions)||void 0===n?void 0:n.resource;return!this.$hasPerm("".concat(i,".").concat(e,"_").concat(a))},gotoDetail:function(){this.onView(this.object)},handleClick:function(e){e.stopPropagation()},handleDelete:function(){var e=this,t=this.tableConfig.url;this.$confirm(this.$tc("DeleteConfirmMessage"),this.$tc("Delete"),{confirmButtonText:this.$tc("Confirm"),cancelButtonText:this.$tc("Cancel"),type:"warning"}).then((function(){e.$axios.delete("".concat(t).concat(e.object.id,"/")).then((function(){e.$message({type:"success",message:e.$tc("DeleteSuccess")}),e.$emit("refresh")}))}))}}},pt=dt,ft=(n("0716"),Object(K["a"])(pt,tt,nt,!1,null,"3c6097fe",null)),ht=ft.exports,bt={name:"SmallCard",components:{CardPanel:ht,CardTable:et["a"]},props:{tableConfig:{type:Object,default:function(){return{}}},subComponentProps:{type:Object,default:function(){return{}}}},data:function(){return{}},methods:{reloadTable:function(){this.$refs.table.reloadTable()}}},mt=bt,gt=(n("389e"),Object(K["a"])(mt,Xe,Ze,!1,null,"6b4eac72",null)),vt=gt.exports,yt=n("3f95"),_t={name:"CloudAccountList",components:{SyncDialog:He,SmallCard:vt,CreateDialog:Me,UpdateDialog:Le},data:function(){var e=this,t=this;return{object:null,table:{tableConfig:{url:"",permissions:{app:"xpack",resource:"account"},extraQuery:{}},subComponentProps:{handleUpdate:function(t){e.object=t,e.updateVisible=!0},getImage:function(e){return z[e.provider.value].image},getInfos:function(t){return[{title:e.$tc("TotalSyncRegion"),content:null===t||void 0===t?void 0:t.task.regions.length},{title:e.$tc("TotalSyncAsset"),content:null===t||void 0===t?void 0:t.task.instance_count},{title:e.$tc("DateLastSync"),content:Object(yt["i"])(null===t||void 0===t?void 0:t.task.date_last_sync)}]},actions:[{id:"online-sync",name:this.$tc("SyncOnline"),icon:"el-icon-thumb",callback:this.handleOnlineExecute,disabled:!this.$hasPerm("xpack.change_syncinstancetask")}]},headerActions:{hasImport:!1,hasExport:!1,hasColumnSetting:!1,hasMoreActions:!1,searchConfig:{getUrlQuery:!1},moreCreates:{loading:!1,callback:function(e){t.$router.push({name:"AccountCreate",query:{provider:e.name}})},dropdown:[{name:"publicCloud",title:this.$t("PublicCloud"),icon:"public-cloud",callback:function(){var t="host"===e.iCategory?I:F;e.providerConfig.providers=t.map((function(e){return z[e]})),e.visible=!0}},{name:"privateCloud",title:this.$t("PrivateCloud"),icon:"private-cloud",has:function(){return"host"===e.iCategory},callback:function(){e.providerConfig.providers=M.map((function(e){return z[e]})),e.visible=!0}},{name:"LAN",title:this.$t("LAN"),icon:"computer",has:function(){return"host"===e.iCategory},callback:function(){var t=[T];e.providerConfig.providers=t.map((function(e){return z[e]})),e.visible=!0}}]}},detailDrawer:function(){return Promise.all([n.e("chunk-commons"),n.e("chunk-02faec5e")]).then(n.bind(null,"a7d8"))}},providerConfig:{providers:[]},visible:!1,updateVisible:!1,onlineSyncVisible:!1}},computed:{iCategory:function(){return this.$route.query.category||"host"}},watch:{visible:{handler:function(e){e||this.$refs.table.reloadTable()}},onlineSyncVisible:{handler:function(e){!1===e&&this.$refs.table.reloadTable()}},updateVisible:{handler:function(e){!1===e&&this.$refs.table.reloadTable()}}},mounted:function(){this.table.tableConfig.url="/api/v1/xpack/cloud/accounts/",this.table.tableConfig.extraQuery={category:this.iCategory}},methods:{valid:function(e){return 200!==e?(this.$message.error(this.$tc("TestAccountConnectionError")),200):e},handleOnlineExecute:function(e){this.object=e,this.onlineSyncVisible=!0},onSubmitSuccess:function(){this.$refs.table.reloadTable(),this.updateVisible=!1}}},kt=_t,Ct=Object(K["a"])(kt,a,s,!1,null,"df47349e",null);t["default"]=Ct.exports},e323:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content"},[e.hasButton?n("el-button",{staticClass:"proto-setting",attrs:{disabled:!e.canSetting,icon:e.icon,size:"small",type:"primary"},on:{click:e.onSetting}}):e._e(),e._v(" "),n("Dialog",{attrs:{"show-cancel":!1,"show-confirm":!1,title:e.title,visible:e.isVisible,width:"60%"},on:{"update:visible":function(t){e.isVisible=t},close:e.onDialogClose}},[n("AutoDataForm",e._g(e._b({ref:"autoDataForm",staticClass:"data-form",attrs:{form:e.form},on:{submit:e.onSubmit}},"AutoDataForm",e.config,!1),e.$listeners))],1)],1)},a=[],s=(n("1c01"),n("58b2"),n("8e6e"),n("f3e2"),n("d25f"),n("bd86")),r=n("768b"),o=(n("ffc1"),n("6762"),n("2fdb"),n("ac6a"),n("456d"),n("96cf"),n("3b8d")),c=n("9039"),l=n("c75f"),u=n("f823");function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){Object(s["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f={components:{Dialog:c["a"],AutoDataForm:l["a"]},props:{value:{type:[String,Object],default:function(){return{}}},title:{type:String,default:function(){return this.$t("PushParams")}},btnText:{type:String,default:function(){return""}},icon:{type:String,default:"el-icon-setting"},url:{type:String,default:"/api/v1/assets/platform-automation-methods/"},method:{type:String,default:""},pushAccountParams:{type:Object,default:function(){return{}}},visible:{type:Boolean,default:!1},hasButton:{type:Boolean,default:!0}},data:function(){return{isVisible:this.visible,canSetting:!0,form:this.value,remoteMeta:{},config:{url:this.url,hasSaveContinue:!1,hasButtons:!0,hasReset:!1,fields:[],method:"get"},preFieldsMeta:{change_secret_by_ssh:{commands:{helpTextAsTip:!1}}}}},watch:{visible:function(e){this.isVisible=e},method:function(e,t){e!==t&&this.getUrlMeta()}},mounted:function(){this.getUrlMeta()},methods:{getUrlMeta:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("common/getUrlMeta",{url:this.url});case 2:t=e.sent,this.remoteMeta=t.actions[this.config.method.toUpperCase()]||{},this.onCanSetting()&&this.setFormConfig();case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onCanSetting:function(){var e=Object.keys(this.remoteMeta);return this.canSetting=e.includes(this.method)&&this.$hasPerm("assets.change_platform"),this.$emit("canSetting",this.canSetting),this.canSetting},setFormConfig:function(){var e=[],t={},n=this.method,i=this.remoteMeta[n];e=[[i.label,[n]]],t[n]={fields:[],fieldsMeta:{}};var a=this.pushAccountParams[n];if(Object.keys((null===i||void 0===i?void 0:i.children)||{}).length>0)for(var s=0,o=Object.entries(i.children);s<o.length;s++){var c=Object(r["a"])(o[s],2),l=c[0],d=c[1],f="el-input",h={};switch(null===d||void 0===d?void 0:d.type){case"list":f=u["b"];break;case"boolean":f=u["j"];break;case"text":h["text"]="textarea";break}a&&(d.default=a[l]||d.default);var b=p(p({},d),{},{component:f,el:h});t[n].fields.push(l),t[n].fieldsMeta[l]=b}var m=this.preFieldsMeta[n];if(m)for(var g=0,v=Object.entries(m);g<v.length;g++)for(var y=Object(r["a"])(v[g],2),_=y[0],k=y[1],C=0,j=Object.entries(k);C<j.length;C++){var w=Object(r["a"])(j[C],2),O=w[0],$=w[1];t[n]["fieldsMeta"][_][O]=$}this.config.fields=e,this.config.fieldsMeta=t},onSetting:function(){this.isVisible=!0},onSubmit:function(e){this.$emit("input",e),this.isVisible=!1,this.$emit("update:visible",this.isVisible)},onDialogClose:function(){this.$emit("update:visible",this.isVisible)}}},h=f,b=(n("273b"),n("2877")),m=Object(b["a"])(h,i,a,!1,null,"2772642f",null);t["a"]=m.exports},e3d6:function(e,t,n){e.exports=n.p+"assets/img/smartx.51da7eb4.svg"},e796:function(e,t,n){e.exports=n.p+"assets/img/aws_china.3f70a061.svg"},ecf6:function(e,t,n){e.exports=n.p+"assets/img/ucloud.d5586da7.svg"},ffa7:function(e,t,n){e.exports=n.p+"assets/img/vmware.34f39680.svg"}}]);
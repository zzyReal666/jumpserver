(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-153fcb3d","chunk-52829884","chunk-ffa07718","chunk-62d84970","chunk-ffa07718","chunk-6f56e3c0","chunk-61800e09"],{"0482":function(e,t,n){},"09ba":function(e,t,n){},"0d6d":function(e,t,n){var a=n("d3f4"),i=n("67ab").onFreeze;n("5eda")("freeze",(function(e){return function(t){return e&&a(t)?e(i(t)):t}}))},"1ff5":function(e,t,n){"use strict";n("39d3")},"260f":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.iVisible?n("Dialog",e._g(e._b({attrs:{"close-on-click-modal":!1,"confirm-title":e.$tc("Add"),"destroy-on-close":!0,model:!1,title:e.$tc("SelectTemplate"),visible:e.iVisible,width:"800px"},on:{"update:visible":function(t){e.iVisible=t},cancel:e.handleCancel,confirm:e.handleConfirm}},"Dialog",e.$attrs,!1),e.$listeners),[[n("ListTable",{ref:"listTable",attrs:{"header-actions":e.headerActions,"table-config":e.tableConfig}})]],2):e._e(),e._v(" "),e.isShowCreate?n("CreateAccountTemplateDialog",e._g({attrs:{"create-visible":e.isShowCreate},on:{"update:createVisible":function(t){e.isShowCreate=t},"update:create-visible":function(t){e.isShowCreate=t},onPerform:e.onCreateTemplatePerform}},e.$listeners)):e._e()],1)},i=[],r=(n("20d6"),n("75fc")),s=(n("57e7"),n("d25f"),n("759f"),n("7f7f"),n("6d67"),n("6b54"),n("87b3"),n("9039")),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.isVisible?n("Dialog",{attrs:{"show-cancel":!1,"show-confirm":!1,title:e.$tc("TemplateCreate"),visible:e.isVisible,width:"70%"},on:{"update:visible":function(t){e.isVisible=t}}},[n("GenericCreateUpdateForm",e._b({},"GenericCreateUpdateForm",e.formConfig,!1))],1):e._e()],1)},c=[],l=(n("1c01"),n("58b2"),n("8e6e"),n("6762"),n("2fdb"),n("456d"),n("ac6a"),n("f3e2"),n("bd86")),u=n("2af9"),f=n("d0aa"),d=n("5225");function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){Object(l["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h={name:"EmailContent",components:{GenericCreateUpdateForm:f["a"],Dialog:u["i"]},props:{createVisible:{type:Boolean,default:!1},category:{type:String,default:"all"}},data:function(){var e=this;return{formConfig:{initial:{secret_type:"password"},url:"/api/v1/accounts/account-templates/",getUrl:function(){return"/api/v1/accounts/account-templates/"},needGetObjectDetail:!1,hasDetailInMsg:!1,fields:Object(r["a"])(Object(d["a"])(this)),fieldsMeta:m({},Object(d["b"])(this)),hasSaveContinue:!1,cleanFormValue:function(e){return Object.keys(e).forEach((function(t,n,a){["ssh_key","token","access_key"].includes(t)&&(e["secret"]=e[t],delete e[t])})),e},createSuccessNextRoute:{name:""},onPerformSuccess:function(t){e.isVisible=!1,e.$emit("onPerform")}}}},computed:{isVisible:{set:function(e){this.$emit("update:create-visible",e)},get:function(){return this.createVisible}}},methods:{}},b=h,g=n("2877"),v=Object(g["a"])(b,o,c,!1,null,null,null),y=v.exports,_={name:"AccountTemplateDialog",components:{Dialog:s["a"],ListTable:u["j"],CreateAccountTemplateDialog:y},props:{visible:{type:Boolean,default:!1},asset:{type:Object,default:function(){}},accounts:{type:Array,default:function(){return[]}},showCreate:{type:Boolean,default:!0}},data:function(){var e,t,n=this,a=this.$createElement,i=(null===(e=this.asset)||void 0===e||null===(t=e.protocols)||void 0===t?void 0:t.map((function(e){return e.name})).toString())||"";return{isShowCreate:!1,accountsSelected:[],tableConfig:{url:"/api/v1/accounts/account-templates/?protocols=".concat(i),columns:["name","username","secret_type","privileged"],columnsMeta:{name:{formatter:function(e){return a("span",[e.name])}},privileged:{width:"120px"},actions:{has:!1}},listeners:{"toggle-row-selection":function(e,t){e?n.addRowToSelect(t):n.removeRowToSelect(t)}},theRowDefaultIsSelected:function(e){return n.accounts.some((function(t){return t.id===e.id}))}},headerActions:{onCreate:function(){n.isShowCreate=!0},hasCreate:this.showCreate,hasMoreActions:!1,hasColumnSetting:!1,hasImport:!1,hasExport:!1}}},computed:{refTable:function(){return this.$refs.listTable.$refs.ListTable.$refs.dataTable.$refs.dataTable},iVisible:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e)}}},methods:{onCreateTemplatePerform:function(){this.refTable.getList()},handleConfirm:function(){var e;this.iVisible=!1;var t=this.accounts.filter((function(e){return null===e||void 0===e?void 0:e.template})).map((function(e){return e.template})),n=this.accountsSelected.filter((function(e){return-1===t.indexOf(e.id)})).map((function(e){return{template:e.id,name:e.name,username:e.username,secret_type:e.secret_type.value,privileged:e.privileged}}));(e=this.accounts).push.apply(e,Object(r["a"])(n)),this.$emit("onConfirm",this.accounts)},handleCancel:function(){this.iVisible=!1},onAddClick:function(){this.isShowCreate=!0},hasSelectValue:function(e){return this.accountsSelected.some((function(t){return t.id===e.id}))},hasSameTypeAccount:function(e){var t=this.accounts.filter((function(e){return!(null!==e&&void 0!==e&&e.id)})),n=[].concat(Object(r["a"])(t),Object(r["a"])(this.accountsSelected)),a=n.some((function(t){return e.username===t.username&&(e.secret_type.value===t.secret_type||e.secret_type.value===t.secret_type.value)}));return a&&(this.refTable.toggleRowSelection(e,!1),this.$message.error(this.$tc("SameTypeAccountTip"))),a},addRowToSelect:function(e){var t=this.hasSelectValue(e),n=this.hasSameTypeAccount(e);t||n||this.accountsSelected.push(e)},removeRowToSelect:function(e){var t=this.hasSelectValue(e);if(t){var n=this.accountsSelected.findIndex((function(t){return(null===t||void 0===t?void 0:t.id)===e.id}));this.accountsSelected.splice(n,1)}}}},w=_,j=(n("64bc"),Object(g["a"])(w,a,i,!1,null,"3e72af18",null));t["a"]=j.exports},"273b":function(e,t,n){"use strict";n("0482")},"2dc2":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("GenericDetailPage",e._g(e._b({attrs:{"active-menu":e.config.activeMenu,object:e.asset},on:{"update:activeMenu":function(t){return e.$set(e.config,"activeMenu",t)},"update:active-menu":function(t){return e.$set(e.config,"activeMenu",t)},"update:object":function(t){e.asset=t}}},"GenericDetailPage",e.config,!1),e.$listeners),[n("keep-alive",[n(e.config.activeMenu,{tag:"component",attrs:{exclude:"Account",object:e.asset}})],1)],1)},i=[],r=n("cd4a"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("TwoCol",{scopedSlots:e._u([{key:"right",fn:function(){return[n("QuickActions",{attrs:{actions:e.quickActions,type:"primary"}}),e._v(" "),n("RelationCard",e._b({directives:[{name:"perms",rawName:"v-perms",value:"assets.change_asset",expression:"'assets.change_asset'"}],ref:"NodeRelation",staticStyle:{"margin-top":"15px"},attrs:{type:"info"}},"RelationCard",e.nodeRelationConfig,!1)),e._v(" "),n("RelationCard",e._b({directives:[{name:"perms",rawName:"v-perms",value:"assets.change_asset",expression:"'assets.change_asset'"}],ref:"LabelRelation",staticStyle:{"margin-top":"15px"},attrs:{type:"warning"}},"RelationCard",e.labelConfig,!1))]},proxy:!0}])},[[n("AutoDetailCard",e._b({},"AutoDetailCard",e.basicInfoConfig,!1)),e._v(" "),e.isShowSpecInfo?n("AutoDetailCard",e._b({},"AutoDetailCard",e.specInfoConfig,!1)):e._e(),e._v(" "),n("AutoDetailCard",e._b({},"AutoDetailCard",e.customInfoConfig,!1)),e._v(" "),n("AutoDetailCard",e._b({},"AutoDetailCard",e.gatheredInfoConfig,!1))]],2)},o=[],c=(n("ac6a"),n("456d"),n("f559"),n("d25f"),n("7f7f"),n("6d67"),n("d92a"),n("e3bc")),l=n("2af9"),u=n("ac6b"),f=n("52cc"),d={name:"Detail",components:{TwoCol:f["a"],AutoDetailCard:c["a"],QuickActions:l["o"],RelationCard:l["p"]},props:{object:{type:Object,default:function(){}}},data:function(){var e,t=this,n=this;return{quickActions:[{title:this.$t("IsActive"),type:"switch",attrs:{label:this.$t("Test"),model:this.object.is_active,disabled:!n.$hasPerm("assets.change_asset")},callbacks:{change:function(e){var t=this;this.$axios.patch("/api/v1/assets/assets/".concat(this.object.id,"/"),{is_active:e}).then((function(e){t.$message.success(t.$tc("UpdateSuccessMsg"))})).catch((function(e){t.$message.error(t.$tc("UpdateErrorMsg "+e))}))}.bind(this)}},{title:this.$t("RefreshHardware"),attrs:{type:"primary",label:this.$t("Refresh"),disabled:!n.$hasPerm("assets.refresh_assethardwareinfo")||!this.object["auto_config"].gather_facts_enabled||!this.object["auto_config"].ansible_enabled||this.$store.getters.currentOrgIsRoot},callbacks:{click:function(){this.$axios.post("/api/v1/assets/assets/".concat(this.object.id,"/tasks/"),{action:"refresh"}).then((function(e){Object(u["k"])(e["task"])}))}.bind(this)}},{title:this.$t("TestAssetsConnective"),attrs:{type:"primary",label:this.$t("Test"),disabled:!n.$hasPerm("assets.test_assetconnectivity")||!this.object["auto_config"].ansible_enabled||!this.object["auto_config"]["ping_enabled"]||this.$store.getters.currentOrgIsRoot},callbacks:{click:function(){this.$axios.post("/api/v1/assets/assets/".concat(this.object.id,"/tasks/"),{action:"test"}).then((function(e){Object(u["k"])(e["task"])}))}.bind(this)}}],nodeRelationConfig:{icon:"fa-info",title:this.$t("Node"),objectsAjax:{url:"/api/v1/assets/nodes/",transformOption:function(e){return{label:e.full_value,value:e.id}}},hasObjectsId:(null===(e=this.object.nodes)||void 0===e?void 0:e.map((function(e){return e.id})))||[],performAdd:function(e){var n=[],a=t.$refs.NodeRelation.iHasObjects;a.map((function(e){n.push(e.value)}));var i="/api/v1/assets/assets/".concat(t.object.id,"/");return e.map((function(e){n.push(e.value)})),t.$axios.patch(i,{nodes:n})},performDelete:function(e){var n=e.value,a=[],i=t.$refs.NodeRelation.iHasObjects;i.map((function(e){e.value!==n&&a.push(e.value)}));var r="/api/v1/assets/assets/".concat(t.object.id,"/");return t.$axios.patch(r,{nodes:a})}},labelConfig:{icon:"fa-info",title:this.$t("Tags"),allowCreate:!0,objectsAjax:{url:"/api/v1/labels/labels/",transformOption:function(e){var t="".concat(e.name,": ").concat(e.value);return{label:t,value:e.id}}},hasObjectsId:this.object.labels.map((function(e){return e.id})),performAdd:function(e){var n=[],a=t.$refs.LabelRelation.iHasObjects;a.map((function(e){return n.push(e.label)}));var i="/api/v1/assets/assets/".concat(t.object.id,"/");return e.map((function(e){return n.push(e.label)})),t.$axios.patch(i,{labels:n})},performDelete:function(e){var n=e.value,a=t.$refs.LabelRelation.iHasObjects,i=a.filter((function(e){return e.value!==n})).map((function(e){return e.value})),r="/api/v1/assets/assets/".concat(t.object.id,"/");return t.$axios.patch(r,{labels:i})}},basicInfoConfig:{url:"/api/v1/assets/assets/".concat(this.object.id,"/"),object:this.object,fields:["id","name","category","type","address","platform","protocols","zone","directory_services","is_active","date_created","date_updated","created_by","comment"],formatters:{protocols:function(){return n.object.protocols.map((function(e){return(t.object.address.startsWith("https://")?"https":e.name)+"/"+e.port})).join(", ")}}},specInfoConfig:{title:this.$t("SpecificInfo"),url:"/api/v1/assets/assets/".concat(this.object.id,"/"),object:this.object,nested:"spec_info",showUndefined:!0},customInfoConfig:{title:this.$t("CustomInfo"),url:"/api/v1/assets/assets/".concat(this.object.id,"/"),object:this.object,nested:"custom_info",showUndefined:!1},gatheredInfoConfig:{url:"/api/v1/assets/hosts/".concat(this.object.id,"/"),title:this.$t("HardwareInfo"),object:this.object,nested:"gathered_info",showUndefined:!1}}},computed:{isShowSpecInfo:function(){var e,t=this.object,n=t.type.value,a=null===(e=t.spec_info)||void 0===e?void 0:e.autofill;return!("website"===n&&"script"===a)&&Object.keys(t.spec_info||{}).length>0}},mounted:function(){},methods:{}},p=d,m=n("2877"),h=Object(m["a"])(p,s,o,!1,null,"44ad55b2",null),b=h.exports,g=n("75d2"),v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("TwoCol",{scopedSlots:e._u([{key:"right",fn:function(){return[n("PermUserGroupCard",e._b({},"PermUserGroupCard",e.UserGroupCardConfig,!1))]},proxy:!0}])},[[n("ListTable",{ref:"ListTable",attrs:{"header-actions":e.headerActions,"table-config":e.tableConfig}})]],2),e._v(" "),n("GenericListTableDialog",e._b({attrs:{visible:e.GenericListTableDialogConfig.visible},on:{"update:visible":function(t){return e.$set(e.GenericListTableDialogConfig,"visible",t)}}},"GenericListTableDialog",e.GenericListTableDialogConfig,!1))],1)},y=[],w=(n("6762"),n("2fdb"),n("53f7")),j=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("IBox",e._b({attrs:{fa:e.icon,title:e.title,type:e.type}},"IBox",e.$attrs,!1),[n("table",{staticClass:"card-table"},[e.iObjects.length>0?n("div",{},e._l(e.iObjects,(function(t){return n("tr",{key:t.value,staticClass:"item"},[n("td",[n("el-tooltip",{staticStyle:{margin:"4px"},attrs:{content:t.label,"open-delay":500,effect:"dark",placement:"left"}},[n("el-link",{staticClass:"detail",on:{click:function(n){return e.goDetail(t)}}},[e._v("\n                "+e._s(t.label)+"\n              ")])],1)],1),e._v(" "),n("td",[n("el-button",{staticStyle:{float:"right"},attrs:{size:"mini",type:"primary"},on:{click:function(n){return e.buttonClickCallback(t)}}},[e._v("\n              "+e._s(e.buttonTitle)+"\n            ")])],1)])})),0):n("div",{staticStyle:{"text-align":"center"}},[e._v("\n        "+e._s(e.$t("NoData"))+"\n      ")])])]),e._v(" "),n("Drawer",{attrs:{component:e.detailDrawer,"has-footer":!1,title:e.title,visible:e.drawerVisible},on:{"update:visible":function(t){e.drawerVisible=t}}})],1)},$=[],O=(n("2caf"),n("ac4d"),n("8a81"),n("5df3"),n("1c4c"),n("6b54"),n("87b3"),n("96cf"),n("3b8d")),A=n("e9f9"),C=n("ca50");function x(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=S(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){o=!0,r=e},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw r}}}}function S(e,t){if(e){if("string"===typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k(e,t):void 0}}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var D={name:"PermUserGroupCard",components:{IBox:A["a"],Drawer:C["a"]},props:{icon:{type:String,default:""},title:{type:String,required:!0},type:{type:String,default:"primary"},url:{type:String,required:!0},detailRoute:{type:[String,Function],default:""},buttonTitle:{type:String,required:!0},buttonClickCallback:{type:Function,default:function(e){}}},data:function(){return{detailDrawer:"",drawerVisible:!1,objects:[]}},computed:{iObjects:function(){return this.objects}},mounted:function(){this.loadObjects()},methods:{loadObjects:function(){var e=Object(O["a"])(regeneratorRuntime.mark((function e(){var t,n,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$axios.get(this.url);case 2:t=e.sent,n=x(t);try{for(n.s();!(a=n.n()).done;)i=a.value,i["label"]=i["name"]}catch(r){n.e(r)}finally{n.f()}this.objects=t;case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),goDetail:function(e){var t=this;this.detailDrawer=this.detailRoute,this.$store.dispatch("common/setDrawerActionMeta",{action:"create",row:{},id:e.id}).then((function(){t.drawerVisible=!0}))}}},P=D,T=(n("1ff5"),Object(m["a"])(P,j,$,!1,null,"d29e39e2",null)),E=T.exports,M={name:"PermUserList",components:{TwoCol:f["a"],ListTable:l["j"],GenericListTableDialog:r["g"],PermUserGroupCard:E},props:{object:{type:Object,default:function(){}}},data:function(){var e=this,t=this;return{tableConfig:{url:"/api/v1/assets/assets/".concat(this.object.id,"/perm-users/"),columns:["name","username","email","comment","created_by"],columnsShow:{min:["name","username"],default:["name","username"]},columnsMeta:{name:{formatter:w["i"],formatterArgs:{drawer:!0,can:t.$hasPerm("users.view_user"),getRoute:function(e){var t=e.row;return{name:"UserDetail",params:{id:t.id}}}}},source:{width:"120px"},system_roles:{width:"100px",label:this.$t("SystemRoles"),formatter:function(e){return e["system_roles"].map((function(e){return e["display_name"]})).join(", ")||"-"},filters:[],columnKey:"system_roles"},org_roles:{width:"100px",label:this.$t("OrgRoles"),formatter:function(e){return e["org_roles"].map((function(e){return e["display_name"]})).join(", ")||"-"},filters:[],columnKey:"org_roles",has:function(){return e.$store.getters.hasValidLicense&&!e.currentOrgIsRoot}},mfa_enabled:{label:"MFA",formatterArgs:{showFalse:!1}},mfa_force_enabled:{formatterArgs:{showFalse:!1}},is_expired:{formatterArgs:{showFalse:!1}},groups_display:{width:"200px"},actions:{formatterArgs:{hasUpdate:!1,hasDelete:!1,hasClone:!1,extraActions:[{title:t.$t("ViewPerm"),name:"view",type:"primary",callback:function(e){t.GenericListTableDialogConfig.visible=!0,t.GenericListTableDialogConfig.tableConfig.url="/api/v1/assets/assets/".concat(t.object.id,"/perm-users/").concat(e.row.id,"/permissions/")}}]}}}},headerActions:{hasImport:!1,hasExport:!1,hasLeftActions:!1},UserGroupCardConfig:{title:this.$t("UserGroups"),url:"/api/v1/assets/assets/".concat(t.object.id,"/perm-user-groups/"),detailRoute:function(){return n.e("chunk-6baf669b").then(n.bind(null,"d3b8"))},buttonTitle:this.$t("ViewPerm"),buttonClickCallback:function(e){t.GenericListTableDialogConfig.visible=!0,t.GenericListTableDialogConfig.tableConfig.url="/api/v1/assets/assets/".concat(t.object.id,"/perm-user-groups/").concat(e.id,"/permissions/")}},GenericListTableDialogConfig:{title:this.$t("Permissions"),visible:!1,width:"60%",tableConfig:{url:"",columns:["name","user_groups_amount","assets_amount","is_valid","is_active","date_expired","comment","org_name","created_by","date_created"],columnsShow:{min:["name"],default:["name","is_valid","created_by","date_created"]},columnsMeta:{name:{formatterArgs:{route:"AssetPermissionDetail"}},users_amount:{label:this.$t("User"),width:"60px",formatter:w["i"],formatterArgs:{route:"AssetPermissionDetail",routeQuery:{tab:"AssetPermissionUser"}}},user_groups_amount:{label:this.$t("UserGroups"),width:"100px",formatter:w["i"],formatterArgs:{route:"AssetPermissionDetail",routeQuery:{tab:"AssetPermissionUser"}}},assets_amount:{label:this.$t("Asset"),width:"60px",formatter:w["i"],formatterArgs:{route:"AssetPermissionDetail",routeQuery:{tab:"AssetPermissionAsset"}}}}},headerActions:{hasImport:!1,hasExport:!1,hasLeftActions:!1,hasColumnSetting:!1,searchConfig:{getUrlQuery:!1}}}}},watch:{$route:{handler:function(e){e.fullPath.includes("/console/perms/asset-permissions/")&&(this.GenericListTableDialogConfig.visible=!1)}}}},V=M,R=Object(m["a"])(V,v,y,!1,null,null,null),U=R.exports,L=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("TwoCol",[n("BaseList",{attrs:{"columns-show":e.columnsShow,"columns-meta":e.columnsMeta,url:e.url}})],1)},I=[],F=n("d106"),B={name:"AssetsSession",components:{TwoCol:f["a"],BaseList:F["a"]},props:{object:{type:Object,required:!0}},data:function(){return{url:"/api/v1/terminal/sessions/?asset_id=".concat(this.object.id,"&order=is_finished,-date_end"),columnsShow:{min:["id"],default:["id","user","asset","account","date_start","duration"]},columnsMeta:{id:{width:"80px"}}}}},G=B,N=Object(m["a"])(G,L,I,!1,null,null,null),z=N.exports,q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("BaseList",{attrs:{"asset-id":e.object.id,"is-page":!1}})},Q=[],H=n("8c70"),K={name:"AssetCommand",components:{BaseList:H["default"]},props:{object:{type:Object,required:!0}},data:function(){return{title:"",url:"/api/v1/terminal/command-storages/tree/?real=1&asset_id=".concat(this.object.id,"&order=-date_end&is_finished=1")}}},W=K,Y=Object(m["a"])(W,q,Q,!1,null,null,null),Z=Y.exports,J={name:"AssetListDetail",components:{GenericDetailPage:r["d"],TabPage:r["l"],Detail:b,Account:g["a"],PermUserList:U,AssetSession:z,AssetCommand:Z},data:function(){var e=this;return{asset:{},config:{url:"/api/v1/assets/assets",activeMenu:"Detail",submenu:[{title:this.$t("Basic"),name:"Detail"},{title:this.$t("Accounts"),name:"Account",hidden:function(){return!e.$hasPerm("accounts.view_account")}},{title:this.$t("PermUserList"),name:"PermUserList",hidden:function(){return!e.$hasPerm("perms.view_assetpermission")}},{title:this.$t("SessionList"),name:"AssetSession",hidden:function(){return!e.$hasPerm("terminal.view_session")}},{title:this.$t("Commands"),name:"AssetCommand",hidden:function(){return!e.$hasPerm("terminal.view_command")}}],hasRightSide:!0,actions:{updateCallback:function(){var t=e.asset.category.value||"host",n=_.capitalize(t)+"Update";e.$router.push({name:n,params:{id:e.$route.params.id},query:{platform:e.asset.platform.id,type:e.asset.type.value}})}}}}}},X=J,ee=Object(m["a"])(X,a,i,!1,null,null,null);t["default"]=ee.exports},"39d3":function(e,t,n){},"3cc2":function(e,t,n){},5225:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return f}));var a=n("75fc"),i=(n("6762"),n("768b")),r=(n("7f7f"),n("dbfd")),s=n("f823"),o=n("49bd"),c=n("863c"),l=n("0692"),u=function(e){return[[e.$t("Basic"),["name","username","privileged","su_from"]],[e.$t("Secret"),["secret_type","secret_strategy","password_rules","secret","ssh_key","token","access_key","passphrase","api_key"]],[e.$t("AutoPush"),["auto_push","platforms","push_params"]],[e.$t("Other"),["comment"]]]},f=function(e){var t=Object(r["m"])(e.$route.path),n=[],u=["password","ssh_key"],f={disabled:!1};return{su_from:{component:o["a"],el:{multiple:!1,clearable:!0,ajax:{url:"/api/v1/accounts/account-templates/su-from-account-templates/?".concat(t?"template_id="+t:""),transformOption:function(e){return{label:"".concat(e.name,"(").concat(e.username,")"),value:e.id}}}}},secret_type:{type:"radio-group",on:{change:function(e,t){var n=Object(i["a"])(e,1),a=n[0];u.includes(a)?f.disabled=!1:(t({secret_strategy:"specific"}),t({auto_push:!1}),f.disabled=!0)}}},secret_strategy:{hidden:function(e){return!u.includes(e.secret_type)}},secret:{label:e.$t("Password"),component:s["m"],hidden:function(e){return"password"!==e.secret_type||"random"===e.secret_strategy}},ssh_key:{label:e.$t("PrivateKey"),el:{type:"textarea",rows:4},component:s["n"],hidden:function(e){return"ssh_key"!==e.secret_type||"random"===e.secret_strategy}},passphrase:{label:e.$t("Passphrase"),component:s["m"],hidden:function(e){return"ssh_key"!==e.secret_type||"random"===e.secret_strategy}},token:{label:e.$t("Token"),el:{type:"textarea",rows:4},hidden:function(e){return"token"!==e.secret_type||"random"===e.secret_strategy}},access_key:{label:e.$t("AccessKey"),el:{type:"textarea",rows:4},hidden:function(e){return"access_key"!==e.secret_type||"random"===e.secret_strategy}},api_key:{label:e.$t("ApiKey"),el:{type:"textarea",rows:4},hidden:function(e){return"api_key"!==e.secret_type||"random"===e.secret_strategy}},password_rules:{component:s["g"],label:l["a"].t("PasswordRule"),hidden:function(e){var t=e.secret_strategy,n=e.secret_type;return"specific"===t||"password"!==n}},platforms:{el:{multiple:!0,ajax:{url:"/api/v1/assets/platforms/",transformOption:function(e){return{label:e.name,value:e.id}}}},on:{input:function(e,t){var r=Object(i["a"])(e,1),s=r[0];n.splice(0,n.length),n.push.apply(n,Object(a["a"])(s))}},hidden:function(e){return!e["auto_push"]}},auto_push:{el:f},push_params:{component:c["a"],el:{platforms:n,method:"push_account_method"},hidden:function(e){return!e["auto_push"]}}}}},"59a1":function(e,t,n){"use strict";n("b29f")},"64bc":function(e,t,n){"use strict";n("a9d3")},7:function(e,t){},"707f":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("GenericDetailPage",e._g(e._b({attrs:{"active-menu":e.config.activeMenu,object:e.account},on:{"update:activeMenu":function(t){return e.$set(e.config,"activeMenu",t)},"update:active-menu":function(t){return e.$set(e.config,"activeMenu",t)},"update:object":function(t){e.account=t}}},"GenericDetailPage",e.config,!1),e.$listeners),[n("keep-alive",[n(e.config.activeMenu,{tag:"component",attrs:{object:e.account}})],1)],1),e._v(" "),e.AccountVisible?n("AccountCreateUpdate",{attrs:{account:e.account,asset:e.account.asset,title:e.$tc("UpdateAccount"),visible:e.AccountVisible},on:{"update:visible":function(t){e.AccountVisible=t},add:e.addAccountSuccess}}):e._e()],1)},i=[],r=(n("7f7f"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("TwoCol",{scopedSlots:e._u([{key:"right",fn:function(){return[n("QuickActions",{attrs:{actions:e.quickActions,type:"primary"}}),e._v(" "),e.showViewSecretDialog?n("ViewSecret",{attrs:{account:e.object,url:e.secretUrl,visible:e.showViewSecretDialog},on:{"update:visible":function(t){e.showViewSecretDialog=t}}}):e._e(),e._v(" "),n("AutomationParamsForm",{attrs:{"has-button":!1,method:e.pushAccountMethod,visible:e.autoPushVisible},on:{"update:visible":function(t){e.autoPushVisible=t},canSetting:e.onCanSetting,submit:e.onSubmit}})]},proxy:!0}])},[[n("AutoDetailCard",e._b({attrs:{object:e.object}},"AutoDetailCard",e.detail,!1))]],2),e._v(" "),n("el-drawer",{attrs:{"append-to-body":!0,visible:e.pamDrawerShow,"with-header":!1,size:"50%"},on:{"update:visible":function(t){e.pamDrawerShow=t}}},[n(e.drawerRefName,{tag:"component"})],1)],1)}),s=[],o=(n("0d6d"),n("e3bc")),c=n("fcd5"),l=n("8e48"),u=n("ac6b"),f=n("e323"),d=n("2dc2"),p=n("52cc"),m={name:"Detail",components:{TwoCol:p["a"],AutoDetailCard:o["a"],QuickActions:c["a"],AssetDetail:d["default"],AutomationParamsForm:f["a"],ViewSecret:l["a"]},props:{object:{type:Object,default:function(){}}},data:function(){var e,t,n,a,i,r,s,o,c=this,l=this.$createElement,f=this;return{pamDrawerShow:!1,drawerRefName:null,needSetAutoPushParams:!1,autoPushVisible:!1,secretUrl:"/api/v1/accounts/account-secrets/".concat(this.object.id,"/"),showViewSecretDialog:!1,quickActions:[{title:this.$t("Active"),type:"switcher",attrs:{model:f.object.is_active,disabled:!f.$hasPerm("accounts.change_account")},callbacks:Object.freeze({change:function(e){c.$axios.patch("/api/v1/accounts/accounts/".concat(c.object.id,"/"),{is_active:e,name:c.object.name}).then((function(e){c.$message.success(c.$tc("UpdateSuccessMsg"))}))}})},{title:this.$t("Privileged"),type:"switcher",attrs:{model:f.object.privileged,disabled:!f.$hasPerm("accounts.change_account")},callbacks:Object.freeze({change:function(e){var t;c.$axios.patch("/api/v1/accounts/accounts/".concat(c.object.id,"/"),{name:null===(t=c.object)||void 0===t?void 0:t.name,privileged:e}).then((function(e){c.$message.success(c.$tc("UpdateSuccessMsg"))}))}})},{title:this.$t("TestAccountConnective"),attrs:{type:"primary",label:this.$t("Test"),disabled:!f.$hasPerm("accounts.verify_account")||!(null!==(e=f.object.asset.auto_config)&&void 0!==e&&e.ansible_enabled)||!(null!==(t=f.object.asset.auto_config)&&void 0!==t&&t.ping_enabled)||this.$store.getters.currentOrgIsRoot},callbacks:Object.freeze({click:function(){c.$axios.post("/api/v1/accounts/accounts/tasks/",{action:"verify",accounts:[c.object.id]}).then((function(e){Object(u["k"])(e["task"])}))}})},{title:this.$t("PushAccount"),attrs:{type:"primary",label:this.$t("Push"),disabled:!f.$hasPerm("accounts.push_account")||!(null!==(n=f.object.asset.auto_config)&&void 0!==n&&n.push_account_enabled)||this.$store.getters.currentOrgIsRoot},callbacks:Object.freeze({click:function(){c.needSetAutoPushParams?c.autoPushVisible=!0:c.$axios.post("/api/v1/accounts/accounts/tasks/",{action:"push",accounts:[c.object.id]}).then((function(e){Object(u["k"])(e["task"])}))}})},{title:this.$t("ViewSecret"),attrs:{type:"primary",label:this.$t("View"),disabled:!f.$hasPerm("accounts.view_accountsecret")},callbacks:Object.freeze({click:function(){f.showViewSecretDialog=!1,setTimeout((function(){f.showViewSecretDialog=!0}))}})},{title:this.$t("ClearSecret"),attrs:{type:"primary",label:this.$t("Clear"),disabled:!f.$hasPerm("accounts.change_account")},callbacks:Object.freeze({click:function(){c.$axios.patch("/api/v1/accounts/accounts/clear-secret/",{account_ids:[c.object.id]}).then((function(){c.$message.success(c.$tc("ClearSuccessMsg"))}))}})},{title:this.$t("SuFrom"),type:"updateSelect",attrs:{type:"primary",class:"su-from-select2",multiple:!1,clearable:!0,model:(null===(a=f.object.su_from)||void 0===a?void 0:a.id)||"",label:null!==(i=f.object.su_from)&&void 0!==i&&i.name?(null===(r=f.object.su_from)||void 0===r?void 0:r.name)+"(".concat(null===(s=f.object.su_from)||void 0===s?void 0:s.username,")"):"-",ajax:{url:"/api/v1/accounts/accounts/su-from-accounts/?account=".concat(f.object.id,"&fields_size=mini"),transformOption:function(e){return{label:e.name+"("+e.username+")",value:e.id}}},disabled:!f.$hasPerm("accounts.change_account")||!(null!==(o=f.object.asset.auto_config)&&void 0!==o&&o.su_enabled)},callbacks:Object.freeze({change:function(e){var t="/api/v1/accounts/accounts/".concat(c.object.id,"/");return c.$axios.patch(t,{su_from:e,name:c.object.name})}})}],detail:{url:"/api/v1/accounts/accounts/".concat(this.object.id),excludes:["template","privileged","secret","passphrase","spec_info","params"],formatters:{asset:function(e,t){return l("span",[null===t||void 0===t?void 0:t.name])},su_from:function(e,t){return l("span",[null!==t&&void 0!==t&&t.name?(null===t||void 0===t?void 0:t.name)+"(".concat(null===t||void 0===t?void 0:t.username,")"):""])}}}}},computed:{pushAccountMethod:function(){var e,t;return(null===(e=this.object.asset)||void 0===e||null===(t=e.auto_config)||void 0===t?void 0:t.push_account_method)||""}},methods:{onCanSetting:function(e){this.needSetAutoPushParams=e},onSubmit:function(e){this.$axios.post("/api/v1/accounts/accounts/tasks/",{action:"push",accounts:[this.object.id],params:e}).then((function(e){Object(u["k"])(e["task"])}))}}},h=m,b=n("2877"),g=Object(b["a"])(h,r,s,!1,null,"7ee63406",null),v=g.exports,y=n("cd4a"),_=n("5838"),w={components:{TabPage:y["l"],Detail:v,GenericDetailPage:y["d"],AccountCreateUpdate:_["a"]},data:function(){var e=this;return{AccountVisible:!1,account:{},config:{url:"/api/v1/accounts/accounts",activeMenu:"Detail",submenu:[{title:this.$t("Basic"),name:"Detail"}],actions:{hasUpdate:function(){return!0},updateCallback:function(){var t=e;t.AccountVisible=!1,setTimeout((function(){t.AccountVisible=!0}))}}}}},methods:{addAccountSuccess:function(){this.$store.commit("common/reload")},getPageTitle:function(e){var t=e.row;return"".concat(t.username,"@").concat(t.asset.name)}}},j=w,$=Object(b["a"])(j,a,i,!1,null,null,null);t["default"]=$.exports},"75d2":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("TwoCol",[[n("AccountListTable",e._b({ref:"ListTable",attrs:{asset:e.object,"columns-default":e.columnsDefault,"has-clone":!1,"has-import":!1,"has-left-actions":!0,"header-extra-actions":e.headerExtraActions,url:e.iUrl}},"AccountListTable",e.$attrs,!1)),e._v(" "),e.templateDialogVisible?n("AccountTemplateDialog",{attrs:{asset:e.object,"show-create":!1,visible:e.templateDialogVisible},on:{"update:visible":function(t){e.templateDialogVisible=t},onConfirm:e.onConfirm}}):e._e()]],2)],1)},i=[],r=(n("6d67"),n("0d6d"),n("57e7"),n("75fc")),s=(n("7f7f"),n("2af9")),o=n("260f"),c=n("ac6b"),l=n("52cc"),u={name:"Detail",components:{TwoCol:l["a"],AccountListTable:s["a"],AccountTemplateDialog:o["a"]},props:{object:{type:Object,default:function(){}},url:{type:String,default:""},extraQuickActions:{type:Array,default:function(){return[]}}},data:function(){var e=this;return{title:this.$t("Test"),templateDialogVisible:!1,columnsDefault:["name","username","connect"],headerExtraActions:[{name:this.$t("AccountTemplate"),title:this.$t("AccountTemplate"),has:this.$hasLicense()||"Applets"!==this.$route.name,can:function(){return e.$hasPerm("accounts.view_accounttemplate")&&!e.$store.getters.currentOrgIsRoot},callback:function(){e.templateDialogVisible=!0}}],quickActions:[{title:this.$t("BatchTest"),attrs:{type:"primary",label:this.$tc("Test"),disabled:-1!==["clickhouse","redis","website","chatgpt"].indexOf(this.object.type.value)||this.$store.getters.currentOrgIsRoot},callbacks:Object.freeze({click:function(){e.$axios.post("/api/v1/accounts/accounts/tasks/",{action:"verify",assets:[e.object.id]}).then((function(e){Object(c["k"])(e["task"])}))}})}].concat(Object(r["a"])(this.extraQuickActions))}},computed:{iUrl:function(){return this.url||"/api/v1/accounts/accounts/?asset=".concat(this.object.id)}},methods:{onConfirm:function(e){var t,n=this;e=null===(t=e)||void 0===t?void 0:t.map((function(e){return e.asset=n.object.id,e})),this.$axios.post("/api/v1/accounts/accounts/",e).then((function(){n.templateDialogVisible=!1,n.$refs.ListTable.addAccountSuccess(),n.$message.success(n.$tc("AddSuccessMsg"))}))}}},f=u,d=n("2877"),p=Object(d["a"])(f,a,i,!1,null,null,null);t["a"]=p.exports},8633:function(e,t,n){"use strict";n("09ba")},"8c70":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isPage?n("Page",e._b({},"Page",e.$attrs,!1),[n("CommandList",e._b({},"CommandList",e.$attrs,!1))],1):n("div",[n("CommandList",e._b({},"CommandList",e.$attrs,!1))],1)},i=[],r=n("cd4a"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("TreeTable",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"CommandTreeTable",staticClass:"command-list-table",attrs:{"header-actions":e.headerActions,"table-config":e.tableConfig,"tree-setting":e.treeSetting},on:{TagDateChange:e.handleDateChange,TagFilter:e.handleFilterChange,TagSearch:e.handleTagChange,TreeInitFinish:e.checkFirstNode}})},o=[],c=(n("2caf"),n("ac4d"),n("8a81"),n("5df3"),n("1c4c"),n("7f7f"),n("1c01"),n("58b2"),n("8e6e"),n("f3e2"),n("6b54"),n("87b3"),n("4f37"),n("ac6a"),n("456d"),n("d25f"),n("0cd8"),n("57e7"),n("bd86")),l=(n("96cf"),n("3b8d")),u=(n("8ea5"),n("6557")),f=n("3f95"),d=n("d58a"),p=n("53f7"),m=n("6943"),h=n("3c4e"),b=n.n(h),g=n("c3eb"),v=n("2934"),y=n("dbfd");function _(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=w(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){o=!0,r=e},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw r}}}}function w(e,t){if(e){if("string"===typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j(e,t):void 0}}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){Object(c["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A={name:"CommandList",components:{TreeTable:u["a"]},props:{assetId:{type:String,default:function(){return""}}},data:function(){var e=this,t=this.$createElement,n=Object(f["e"])(7).toISOString(),a=this.$moment(Object(f["c"])()).add(1,"day").toISOString();return{loading:!0,tableConfig:{url:"/api/v1/terminal/commands/",tableAttrs:{rowClassName:function(e){var t=e.row;return 5===t.risk_level?"risk-command":"command"}},columns:["expandCol","input","risk_level","user","asset","account","session","timestamp"],extraQuery:{date_to:a,date_from:n},columnsMeta:{expandCol:{type:"expand",prop:"output",label:"",formatter:d["a"]},risk_level:{formatter:function(e,n,a){var i=e["risk_level"].label;return 0===(null===a||void 0===a?void 0:a.value)?i:t("span",{class:"text-danger"},[" ",i," "])}},actions:{has:!1},session:{formatter:p["i"],formatterArgs:{drawer:!0,can:this.$hasPerm("terminal.view_session"),getRoute:function(e){var t=e.cellValue;return{name:"SessionDetail",params:{id:t}}}}},timestamp:{label:this.$t("Datetime"),width:180,sortable:"custom",formatter:function(e){return Object(f["i"])(1e3*e.timestamp)}}}},headerActions:{hasLeftActions:!1,hasImport:!1,hasExport:this.$hasPerm("terminal.view_command"),hasDatePicker:!0,datePicker:{dateStart:n,dateEnd:a},canExportSelected:!0,exportOptions:{performExport:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(n,a,i,r){var s,o,c,l,u,f,d,p;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(s=e.tableConfig.url,s="".concat(s),o=O({},i),"selected"!==a){t.next=11;break}c=[],l=_(n);try{for(l.s();!(u=l.n()).done;)f=u.value,c.push(f.id)}catch(m){l.e(m)}finally{l.f()}return t.next=9,Object(v["a"])(c);case 9:d=t.sent,o["spm"]=d.spm;case 11:o["format"]=r,p=(s.indexOf("?")>-1?"&":"?")+g["d"](o,"=","&"),s+=p,e.$log.debug("Export url: ",e.url,"=>",s),Object(y["e"])(s+p);case 16:case"end":return t.stop()}}),t)})));function n(e,n,a,i){return t.apply(this,arguments)}return n}()}},treeSetting:{showMenu:!1,showRefresh:!0,showAssets:!1,treeUrl:"/api/v1/terminal/command-storages/tree/?real=1&date_from=".concat(n,"&date_to=").concat(a,"&asset_id=").concat(this.assetId),view:{fontCss:function(e,t){return t.chkDisabled?{opacity:"0.4"}:{}}},callback:{onSelected:function(t,n){"root"!==n.id&&(n.valid?(e.tableConfig.url="/api/v1/terminal/commands/?command_storage_id=".concat(n.id,"&order=-timestamp"),e.assetId&&(e.tableConfig.url+="&asset_id=".concat(e.assetId))):e.$message.error(e.$tc("EsDisabled")))}}}}},computed:{treeTable:function(){return this.$refs.CommandTreeTable}},watch:{},methods:{checkFirstNode:function(e){var t=e,n=t.getNodes();n[0].children.length>0&&t.selectNode(n[0].children[0]),this.loading=!1},handleTagChange:function(e){var t=this.cleanUrl(e),n="/api/v1/terminal/command-storages/tree/?real=1&asset_id=".concat(this.assetId),a=(n.indexOf("?")>-1?"&":"?")+g["d"](t,"=","&"),i=n+a;this.$set(this.treeSetting,"treeUrl",i)},handleFilterChange:function(e){var t=this.cleanUrl(e),n="/api/v1/terminal/command-storages/tree/?real=1&asset_id=".concat(this.assetId),a=(n.indexOf("?")>-1?"&":"?")+g["d"](t,"=","&"),i=n+a;this.$set(this.treeSetting,"treeUrl",i)},handleDateChange:function(e){this.query={date_from:e[0].toISOString(),date_to:e[1].toISOString()};var t="/api/v1/terminal/command-storages/tree/?real=1&asset_id=".concat(this.assetId),n=(t.indexOf("?")>-1?"&":"?")+g["d"](this.query,"=","&"),a=t+n;this.$set(this.treeSetting,"treeUrl",a),this.treeTable.forceRerenderTree()},cleanUrl:function(e){return e=Object.keys(e).filter((function(t){return!Object(m["a"])(e[t])})).reduce((function(t,n){return t[n]=e[n].toString().trim(),t}),{}),e=b()(this.query,e),e}}},C=A,x=(n("59a1"),n("2877")),S=Object(x["a"])(C,s,o,!1,null,"1b463be6",null),k=S.exports,D={name:"BaseList",components:{Page:r["k"],CommandList:k},props:{isPage:{type:Boolean,default:function(){return!0}}}},P=D,T=Object(x["a"])(P,a,i,!1,null,null,null);t["default"]=T.exports},"94df":function(e,t,n){"use strict";const a=["B","kB","MB","GB","TB","PB","EB","ZB","YB"],i=["B","kiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],r=["b","kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],s=["b","kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],o=(e,t,n)=>{let a=e;return"string"===typeof t||Array.isArray(t)?a=e.toLocaleString(t,n):!0!==t&&void 0===n||(a=e.toLocaleString(void 0,n)),a};e.exports=(e,t)=>{if(!Number.isFinite(e))throw new TypeError(`Expected a finite number, got ${typeof e}: ${e}`);t=Object.assign({bits:!1,binary:!1},t);const n=t.bits?t.binary?s:r:t.binary?i:a;if(t.signed&&0===e)return" 0 "+n[0];const c=e<0,l=c?"-":t.signed?"+":"";let u;if(c&&(e=-e),void 0!==t.minimumFractionDigits&&(u={minimumFractionDigits:t.minimumFractionDigits}),void 0!==t.maximumFractionDigits&&(u=Object.assign({maximumFractionDigits:t.maximumFractionDigits},u)),e<1){const a=o(e,t.locale,u);return l+a+" "+n[0]}const f=Math.min(Math.floor(t.binary?Math.log(e)/Math.log(1024):Math.log10(e)/3),n.length-1);e/=Math.pow(t.binary?1024:1e3,f),u||(e=e.toPrecision(3));const d=o(Number(e),t.locale,u),p=n[f];return l+d+" "+p}},a9d3:function(e,t,n){},b29f:function(e,t,n){},b708:function(e,t,n){},bd11:function(e,t){e.exports=g,e.exports.match=o,e.exports.regexpToFunction=c,e.exports.parse=i,e.exports.compile=s,e.exports.tokensToFunction=l,e.exports.tokensToRegExp=b;var n="/",a=new RegExp(["(\\\\.)","(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?"].join("|"),"g");function i(e,t){var i,s=[],o=0,c=0,l="",u=t&&t.delimiter||n,d=t&&t.whitelist||void 0,p=!1;while(null!==(i=a.exec(e))){var m=i[0],h=i[1],b=i.index;if(l+=e.slice(c,b),c=b+m.length,h)l+=h[1],p=!0;else{var g="",v=i[2],y=i[3],_=i[4],w=i[5];if(!p&&l.length){var j=l.length-1,$=l[j],O=!d||d.indexOf($)>-1;O&&(g=$,l=l.slice(0,j))}l&&(s.push(l),l="",p=!1);var A="+"===w||"*"===w,C="?"===w||"*"===w,x=y||_,S=g||u,k=g||("string"===typeof s[s.length-1]?s[s.length-1]:"");s.push({name:v||o++,prefix:g,delimiter:S,optional:C,repeat:A,pattern:x?f(x):r(S,u,k)})}}return(l||c<e.length)&&s.push(l+e.substr(c)),s}function r(e,t,n){var a="[^"+u(e===t?e:e+t)+"]";return!n||n.indexOf(e)>-1||n.indexOf(t)>-1?a+"+?":u(n)+"|(?:(?!"+u(n)+")"+a+")+?"}function s(e,t){return l(i(e,t),t)}function o(e,t){var n=[],a=g(e,n,t);return c(a,n)}function c(e,t){return function(n,a){var i=e.exec(n);if(!i)return!1;for(var r=i[0],s=i.index,o={},c=a&&a.decode||decodeURIComponent,l=1;l<i.length;l++)if(void 0!==i[l]){var u=t[l-1];u.repeat?o[u.name]=i[l].split(u.delimiter).map((function(e){return c(e,u)})):o[u.name]=c(i[l],u)}return{path:r,index:s,params:o}}}function l(e,t){for(var n=new Array(e.length),a=0;a<e.length;a++)"object"===typeof e[a]&&(n[a]=new RegExp("^(?:"+e[a].pattern+")$",d(t)));return function(t,a){for(var i="",r=a&&a.encode||encodeURIComponent,s=!a||!1!==a.validate,o=0;o<e.length;o++){var c=e[o];if("string"!==typeof c){var l,u=t?t[c.name]:void 0;if(Array.isArray(u)){if(!c.repeat)throw new TypeError('Expected "'+c.name+'" to not repeat, but got array');if(0===u.length){if(c.optional)continue;throw new TypeError('Expected "'+c.name+'" to not be empty')}for(var f=0;f<u.length;f++){if(l=r(u[f],c),s&&!n[o].test(l))throw new TypeError('Expected all "'+c.name+'" to match "'+c.pattern+'"');i+=(0===f?c.prefix:c.delimiter)+l}}else if("string"!==typeof u&&"number"!==typeof u&&"boolean"!==typeof u){if(!c.optional)throw new TypeError('Expected "'+c.name+'" to be '+(c.repeat?"an array":"a string"))}else{if(l=r(String(u),c),s&&!n[o].test(l))throw new TypeError('Expected "'+c.name+'" to match "'+c.pattern+'", but got "'+l+'"');i+=c.prefix+l}}else i+=c}return i}}function u(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function f(e){return e.replace(/([=!:$/()])/g,"\\$1")}function d(e){return e&&e.sensitive?"":"i"}function p(e,t){if(!t)return e;var n=e.source.match(/\((?!\?)/g);if(n)for(var a=0;a<n.length;a++)t.push({name:a,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return e}function m(e,t,n){for(var a=[],i=0;i<e.length;i++)a.push(g(e[i],t,n).source);return new RegExp("(?:"+a.join("|")+")",d(n))}function h(e,t,n){return b(i(e,n),t,n)}function b(e,t,a){a=a||{};for(var i=a.strict,r=!1!==a.start,s=!1!==a.end,o=a.delimiter||n,c=[].concat(a.endsWith||[]).map(u).concat("$").join("|"),l=r?"^":"",f=0;f<e.length;f++){var p=e[f];if("string"===typeof p)l+=u(p);else{var m=p.repeat?"(?:"+p.pattern+")(?:"+u(p.delimiter)+"(?:"+p.pattern+"))*":p.pattern;t&&t.push(p),p.optional?p.prefix?l+="(?:"+u(p.prefix)+"("+m+"))?":l+="("+m+")?":l+=u(p.prefix)+"("+m+")"}}if(s)i||(l+="(?:"+u(o)+")?"),l+="$"===c?"$":"(?="+c+")";else{var h=e[e.length-1],b="string"===typeof h?h[h.length-1]===o:void 0===h;i||(l+="(?:"+u(o)+"(?="+c+"))?"),b||(l+="(?="+u(o)+"|"+c+")")}return new RegExp(l,d(a))}function g(e,t,n){return e instanceof RegExp?p(e,t):Array.isArray(e)?m(e,t,n):h(e,t,n)}},c0eb:function(e,t,n){"use strict";var a=n("c5ec"),i=n.n(a);window.$=i.a,window.jQuery=i.a,t["a"]=i.a},d106:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ListTable",{attrs:{"detail-drawer":e.detailDrawer,"header-actions":e.headerActions,"table-config":e.tableConfig}})},i=[],r=(n("1c01"),n("58b2"),n("8e6e"),n("f3e2"),n("d25f"),n("ac6a"),n("456d"),n("c5f6"),n("bd86")),s=n("75fc"),o=n("94df"),c=n.n(o),l=n("2af9"),u=n("3f95"),f=n("53f7");function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){Object(r["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m={name:"BaseList",components:{ListTable:l["j"]},props:{url:{type:String,default:function(){return"/api/v1/terminal/sessions/"}},extraActions:{type:Array,default:function(){return[]}},columnsShow:{type:Object,default:function(){return{min:["id","actions"],default:["id","user","asset","account","protocol","date_start","actions"]}}},columnsMeta:{type:Object,default:function(){}},columnsExclude:{type:Array,default:function(){return[]}}},data:function(){return{detailDrawer:function(){return n.e("chunk-58e2a36e").then(n.bind(null,"b662"))},tableConfig:{url:this.url,columnsExclude:["terminal"].concat(Object(s["a"])(this.columnsExclude)),columnsShow:this.columnsShow,columnsMeta:p({id:{prop:"id",label:this.$t("Number"),width:"80px",align:"center",formatter:f["i"],formatterArgs:{drawer:!0,can:this.$hasPerm("assets.view_asset"),getTitle:function(e){e.row,e.col,e.cellValue;var t=e.index;return t+1},getDrawerTitle:function(e){var t=e.row;return t.id},getRoute:function(e){var t=e.row;return{name:"SessionDetail",params:{id:t.id}}}}},user:{formatter:f["i"],formatterArgs:{drawer:!0,getTitle:function(e){var t=e.row;return t.user},getRoute:function(e){var t=e.row;return{name:"UserDetail",params:{id:t.user_id}}}}},can_join:{formatterArgs:{showFalse:!1}},can_replay:{formatterArgs:{showFalse:!1}},can_terminate:{formatterArgs:{showFalse:!1}},has_command:{formatterArgs:{showFalse:!1}},is_finished:{formatterArgs:{showFalse:!1}},has_replay:{formatterArgs:{showFalse:!1}},asset:{label:this.$t("Target"),formatter:f["i"],formatterArgs:{drawer:!0,can:this.$hasPerm("assets.view_asset"),getTitle:function(e){var t=e.row;return t.asset},getRoute:function(e){var t=e.row;return{name:"AssetDetail",params:{id:t.asset_id},query:{tab:"Basic"}}}}},protocol:{sortable:!1,formatter:null},duration:{label:this.$t("Duration"),formatter:function(e){return Object(u["h"])(e.date_start,e.date_end)}},is_locked:{label:this.$t("IsLocked"),formatter:f["e"],formatterArgs:{showFalse:!0}},replay_size:{width:"120px",formatter:function(e){return c()(Number(e.replay_size))}},actions:{prop:"actions",label:this.$t("Actions"),width:this.dynamicActionWidth,formatter:f["c"],formatterArgs:{hasEdit:!1,hasClone:!1,hasDelete:!1,hasUpdate:!1,extraActions:this.extraActions}}},this.columnsMeta)},headerActions:{hasLeftActions:!1,hasImport:!1,hasDatePicker:!0,searchConfig:{getUrlQuery:!1,exclude:["is_finished"]}}}},computed:{dynamicActionWidth:function(){return"pt-br"===this.$i18n.locale?"160px":"130px"}}},h=m,b=(n("8633"),n("2877")),g=Object(b["a"])(h,a,i,!1,null,"0495f38f",null);t["a"]=g.exports},d58a:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("pre",{staticStyle:{border:"none",background:"none","white-space":"pre-wrap","word-wrap":"break-word",padding:"10px 20px"}},[e._v(e._s("$ "+e.row.input)+"\n"),n("br"),e._v("\n"+e._s(e.row.output)+"\n  ")])},i=[],r=n("73c8"),s={name:"OutputExpandFormatter",extends:r["a"]},o=s,c=n("2877"),l=Object(c["a"])(o,a,i,!1,null,"55cdfbb2",null),u=l.exports;n.d(t,"a",(function(){return u}))},e323:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content"},[e.hasButton?n("el-button",{staticClass:"proto-setting",attrs:{disabled:!e.canSetting,icon:e.icon,size:"small",type:"primary"},on:{click:e.onSetting}}):e._e(),e._v(" "),n("Dialog",{attrs:{"show-cancel":!1,"show-confirm":!1,title:e.title,visible:e.isVisible,width:"60%"},on:{"update:visible":function(t){e.isVisible=t},close:e.onDialogClose}},[n("AutoDataForm",e._g(e._b({ref:"autoDataForm",staticClass:"data-form",attrs:{form:e.form},on:{submit:e.onSubmit}},"AutoDataForm",e.config,!1),e.$listeners))],1)],1)},i=[],r=(n("1c01"),n("58b2"),n("8e6e"),n("f3e2"),n("d25f"),n("bd86")),s=n("768b"),o=(n("ffc1"),n("6762"),n("2fdb"),n("ac6a"),n("456d"),n("96cf"),n("3b8d")),c=n("9039"),l=n("c75f"),u=n("f823");function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){Object(r["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={components:{Dialog:c["a"],AutoDataForm:l["a"]},props:{value:{type:[String,Object],default:function(){return{}}},title:{type:String,default:function(){return this.$t("PushParams")}},btnText:{type:String,default:function(){return""}},icon:{type:String,default:"el-icon-setting"},url:{type:String,default:"/api/v1/assets/platform-automation-methods/"},method:{type:String,default:""},pushAccountParams:{type:Object,default:function(){return{}}},visible:{type:Boolean,default:!1},hasButton:{type:Boolean,default:!0}},data:function(){return{isVisible:this.visible,canSetting:!0,form:this.value,remoteMeta:{},config:{url:this.url,hasSaveContinue:!1,hasButtons:!0,hasReset:!1,fields:[],method:"get"},preFieldsMeta:{change_secret_by_ssh:{commands:{helpTextAsTip:!1}}}}},watch:{visible:function(e){this.isVisible=e},method:function(e,t){e!==t&&this.getUrlMeta()}},mounted:function(){this.getUrlMeta()},methods:{getUrlMeta:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("common/getUrlMeta",{url:this.url});case 2:t=e.sent,this.remoteMeta=t.actions[this.config.method.toUpperCase()]||{},this.onCanSetting()&&this.setFormConfig();case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onCanSetting:function(){var e=Object.keys(this.remoteMeta);return this.canSetting=e.includes(this.method)&&this.$hasPerm("assets.change_platform"),this.$emit("canSetting",this.canSetting),this.canSetting},setFormConfig:function(){var e=[],t={},n=this.method,a=this.remoteMeta[n];e=[[a.label,[n]]],t[n]={fields:[],fieldsMeta:{}};var i=this.pushAccountParams[n];if(Object.keys((null===a||void 0===a?void 0:a.children)||{}).length>0)for(var r=0,o=Object.entries(a.children);r<o.length;r++){var c=Object(s["a"])(o[r],2),l=c[0],f=c[1],p="el-input",m={};switch(null===f||void 0===f?void 0:f.type){case"list":p=u["b"];break;case"boolean":p=u["j"];break;case"text":m["text"]="textarea";break}i&&(f.default=i[l]||f.default);var h=d(d({},f),{},{component:p,el:m});t[n].fields.push(l),t[n].fieldsMeta[l]=h}var b=this.preFieldsMeta[n];if(b)for(var g=0,v=Object.entries(b);g<v.length;g++)for(var y=Object(s["a"])(v[g],2),_=y[0],w=y[1],j=0,$=Object.entries(w);j<$.length;j++){var O=Object(s["a"])($[j],2),A=O[0],C=O[1];t[n]["fieldsMeta"][_][A]=C}this.config.fields=e,this.config.fieldsMeta=t},onSetting:function(){this.isVisible=!0},onSubmit:function(e){this.$emit("input",e),this.isVisible=!1,this.$emit("update:visible",this.isVisible)},onDialogClose:function(){this.$emit("update:visible",this.isVisible)}}},m=p,h=(n("273b"),n("2877")),b=Object(h["a"])(m,a,i,!1,null,"2772642f",null);t["a"]=b.exports}}]);
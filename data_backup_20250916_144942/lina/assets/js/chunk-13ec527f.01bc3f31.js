(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-13ec527f"],{4963:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("GenericCreateUpdatePage",e._b({on:{getObjectDone:e.getObjectDone}},"GenericCreateUpdatePage",e.$data,!1))},a=[],c=(n("1c01"),n("58b2"),n("8e6e"),n("d25f"),n("2caf"),n("ac4d"),n("8a81"),n("5df3"),n("1c4c"),n("7f7f"),n("6b54"),n("87b3"),n("96cf"),n("3b8d")),s=n("768b"),o=(n("6762"),n("2fdb"),n("456d"),n("ac6a"),n("f3e2"),n("bd86")),u=(n("57e7"),n("5e04")),i=n("5225"),l=n("1b0e");function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=y(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,s=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){o=!0,c=e},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw c}}}}function y(e,t){if(e){if("string"===typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var h={name:"GatewayCreateUpdate",components:{GenericCreateUpdatePage:u["a"]},data:function(){var e,t,n=this,r=n.$route.path.indexOf("/update")>-1&&(null===(e=n.$route.params)||void 0===e?void 0:e.id),a=Object(i["a"])(n),c=d(a);try{for(c.s();!(t=c.n()).done;){var o=Object(s["a"])(t.value,2),u=o[0],p=o[1];u===n.$t("Secret")&&r&&p.push("is_sync_account")}}catch(y){c.e(y)}finally{c.f()}return{initial:{secret_type:"password",push_params:{}},url:"/api/v1/accounts/account-templates/",hasDetailInMsg:!1,fields:a,fieldsMeta:f(f({},Object(i["b"])(n)),{},{is_sync_account:{label:this.$t("SyncUpdateAccountInfo"),el:{icon:"fa fa-external-link",type:"primary",size:"mini"},component:"el-button",on:{click:function(){n.$router.push({name:"AccountTemplateDetail",query:{tab:"Account"}})}}}}),cleanFormValue:function(e){return Object.keys(e).forEach((function(t,n,r){["ssh_key","token","access_key","api_key"].includes(t)&&(e["secret"]=e[t],delete e[t])})),e["secret"]=Object(l["b"])(e["secret"]),delete e.is_sync_account,e},createSuccessNextRoute:{name:"AccountTemplateList"},updateSuccessNextRoute:{name:"AccountTemplateList"}}},mounted:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.setSecretTypeOptions();case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{setSecretTypeOptions:function(){var e=[{label:this.$t("Password"),value:"password"},{label:this.$t("SSHKey"),value:"ssh_key"},{label:this.$t("Token"),value:"token"},{label:this.$t("AccessKey"),value:"access_key"},{label:this.$t("ApiKey"),value:"api_key"}];this.fieldsMeta.secret_type.options=e},getObjectDone:function(e){["token","access_key","api_key"].includes(e.secret_type.value)&&(this.fieldsMeta.auto_push.el.disabled=!0)}}},m=h,_=n("2877"),v=Object(_["a"])(m,r,a,!1,null,null,null);t["default"]=v.exports},5225:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return p}));var r=n("75fc"),a=(n("6762"),n("768b")),c=(n("7f7f"),n("dbfd")),s=n("f823"),o=n("49bd"),u=n("863c"),i=n("0692"),l=function(e){return[[e.$t("Basic"),["name","username","privileged","su_from"]],[e.$t("Secret"),["secret_type","secret_strategy","password_rules","secret","ssh_key","token","access_key","passphrase","api_key"]],[e.$t("AutoPush"),["auto_push","platforms","push_params"]],[e.$t("Other"),["comment"]]]},p=function(e){var t=Object(c["m"])(e.$route.path),n=[],l=["password","ssh_key"],p={disabled:!1};return{su_from:{component:o["a"],el:{multiple:!1,clearable:!0,ajax:{url:"/api/v1/accounts/account-templates/su-from-account-templates/?".concat(t?"template_id="+t:""),transformOption:function(e){return{label:"".concat(e.name,"(").concat(e.username,")"),value:e.id}}}}},secret_type:{type:"radio-group",on:{change:function(e,t){var n=Object(a["a"])(e,1),r=n[0];l.includes(r)?p.disabled=!1:(t({secret_strategy:"specific"}),t({auto_push:!1}),p.disabled=!0)}}},secret_strategy:{hidden:function(e){return!l.includes(e.secret_type)}},secret:{label:e.$t("Password"),component:s["m"],hidden:function(e){return"password"!==e.secret_type||"random"===e.secret_strategy}},ssh_key:{label:e.$t("PrivateKey"),el:{type:"textarea",rows:4},component:s["n"],hidden:function(e){return"ssh_key"!==e.secret_type||"random"===e.secret_strategy}},passphrase:{label:e.$t("Passphrase"),component:s["m"],hidden:function(e){return"ssh_key"!==e.secret_type||"random"===e.secret_strategy}},token:{label:e.$t("Token"),el:{type:"textarea",rows:4},hidden:function(e){return"token"!==e.secret_type||"random"===e.secret_strategy}},access_key:{label:e.$t("AccessKey"),el:{type:"textarea",rows:4},hidden:function(e){return"access_key"!==e.secret_type||"random"===e.secret_strategy}},api_key:{label:e.$t("ApiKey"),el:{type:"textarea",rows:4},hidden:function(e){return"api_key"!==e.secret_type||"random"===e.secret_strategy}},password_rules:{component:s["g"],label:i["a"].t("PasswordRule"),hidden:function(e){var t=e.secret_strategy,n=e.secret_type;return"specific"===t||"password"!==n}},platforms:{el:{multiple:!0,ajax:{url:"/api/v1/assets/platforms/",transformOption:function(e){return{label:e.name,value:e.id}}}},on:{input:function(e,t){var c=Object(a["a"])(e,1),s=c[0];n.splice(0,n.length),n.push.apply(n,Object(r["a"])(s))}},hidden:function(e){return!e["auto_push"]}},auto_push:{el:p},push_params:{component:u["a"],el:{platforms:n,method:"push_account_method"},hidden:function(e){return!e["auto_push"]}}}}},7:function(e,t){}}]);
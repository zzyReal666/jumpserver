(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-49d7dc86","chunk-52829884"],{"0482":function(e,t,s){},"243c":function(e,t,s){"use strict";s("d3b7")},"273b":function(e,t,s){"use strict";s("0482")},"3cc2":function(e,t,s){},"4b97":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("GenericDetailPage",e._g(e._b({attrs:{"active-menu":e.config.activeMenu,object:e.AssetPermission},on:{"update:activeMenu":function(t){return e.$set(e.config,"activeMenu",t)},"update:active-menu":function(t){return e.$set(e.config,"activeMenu",t)},"update:object":function(t){e.AssetPermission=t},"tab-click":e.handleTabClick}},"GenericDetailPage",e.config,!1),e.$listeners),[s("keep-alive",[s(e.config.activeMenu,{tag:"component",attrs:{object:e.AssetPermission}})],1)],1)},n=[],i=(s("7f7f"),s("cd4a")),r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("TwoCol",{scopedSlots:e._u([{key:"right",fn:function(){return[s("QuickActions",{attrs:{actions:e.quickActions,type:"primary"}})]},proxy:!0}])},[[s("AutoDetailCard",{attrs:{fields:e.detailFields,object:e.object,url:e.url}})]],2)},o=[],c=(s("a481"),s("6d67"),s("d92a"),s("e3bc")),l=s("2af9"),u=s("52cc"),d={name:"AssetPermissionDetail",components:{TwoCol:u["a"],AutoDetailCard:c["a"],QuickActions:l["o"]},props:{object:{type:Object,default:function(){return{}}}},data:function(){this.$createElement;return{quickActions:[{title:this.$t("Active"),type:"switch",attrs:{model:this.object.is_active,disabled:!this.$hasPerm("perms.change_assetpermission")},callbacks:{change:function(e){var t=this;this.$axios.patch("/api/v1/perms/asset-permissions/".concat(this.object.id,"/"),{is_active:e}).then((function(e){t.$message.success(t.$tc("UpdateSuccessMsg"))})).catch((function(e){t.$message.error(t.$tc("UpdateErrorMsg "+e))}))}.bind(this)}}],url:"/api/v1/perms/asset-permissions/".concat(this.object.id),detailFields:["id","name",{key:this.$t("Action"),value:this.object.actions,formatter:function(e,t){var s=this.$createElement,a=t.map((function(e){return e.label.replace(/ \([^)]*\)/,"")}));return s("div",[a.map((function(e){return s("el-tag",{attrs:{size:"mini"},style:{marginRight:"3px"},key:e},[e])}))])}},"date_start","date_expired","date_created","created_by","comment"]}},computed:{detailCardItems:function(){return[{key:this.$t("DateStart"),value:this.object.date_start},{key:this.$t("DateExpired"),value:this.object.date_expired},{key:this.$t("DateCreated"),value:this.object.date_created},{key:this.$t("CreatedBy"),value:this.object.created_by},{key:this.$t("Comment"),value:this.object.comment}]}}},p=d,f=s("2877"),m=Object(f["a"])(p,r,o,!1,null,null,null),h=m.exports,b=s("84cc"),v=s("94db"),g=s("b0b7"),A={components:{GenericDetailPage:i["d"],AssetPermissionDetail:h,AssetPermissionUser:b["a"],AssetPermissionAsset:v["a"],AssetPermissionAccount:g["a"],TabPage:i["l"]},data:function(){var e=this;return{AssetPermission:{name:"",users_amount:0,user_groups_amount:0,assets_amount:0,nodes_amount:0,system_users_amount:0,date_start:"",date_expired:""},config:{url:"/api/v1/perms/asset-permissions/",activeMenu:"AssetPermissionDetail",submenu:[{title:this.$t("Basic"),name:"AssetPermissionDetail"},{title:this.$t("UsersAndUserGroups"),name:"AssetPermissionUser",hidden:function(){return!e.$hasPerm("users.view_user")||!e.$hasPerm("perms.change_assetpermission")}},{title:this.$t("AssetAndNode"),name:"AssetPermissionAsset",hidden:function(){return!e.$hasPerm("assets.view_asset")||!e.$hasPerm("perms.change_assetpermission")}},{title:this.$t("PermAccount"),name:"AssetPermissionAccount",hidden:function(){return!e.$hasPerm("accounts.view_account")||!e.$hasPerm("perms.change_assetpermission")}}]}}},methods:{handleTabClick:function(e){"AssetPermissionDetail"!==e.name?this.$set(this.config,"hasRightSide",!1):this.$set(this.config,"hasRightSide",!0)}}},j=A,y=Object(f["a"])(j,a,n,!1,null,null,null);t["default"]=y.exports},"54ec":function(e,t,s){},"5ebc":function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-form",{staticClass:"account-content",nativeOn:{submit:function(e){e.preventDefault()}}},[s("el-form-item",[s("el-radio-group",{on:{input:e.handleRadioChanged},model:{value:e.realRadioSelected,callback:function(t){e.realRadioSelected=t},expression:"realRadioSelected"}},e._l(e.realChoices,(function(t){return s("el-radio",{key:t.label,attrs:{disabled:t.disabled,label:t.value}},[e._v("\n        "+e._s(t.label)+"\n        "),t.tip?s("el-tooltip",{attrs:{content:t.tip,"open-delay":500,placement:"top"}},[s("i",{staticClass:"fa fa-question-circle-o"})]):e._e()],1)})),1),e._v(" "),e.showSpecZone?s("div",{staticClass:"spec-accounts spec-zone"},[s("div",{staticClass:"group-title"},[e._v(e._s(e.$t("SpecAccount")))]),e._v(" "),s("TagInput",{attrs:{autocomplete:e.autocomplete,"tag-type":e.getTagType},on:{change:e.handleTagChange},model:{value:e.specAccountsInput,callback:function(t){e.specAccountsInput=t},expression:"specAccountsInput"}}),e._v(" "),e.showAddTemplate?s("span",[s("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.showTemplateDialog=!0}}},[e._v("\n          "+e._s(e.$t("TemplateAdd"))+"\n        ")]),e._v(" "),s("span",{staticClass:"help-block"},[e._v("\n          "+e._s(e.addTemplateHelpText)+"\n        ")])],1):e._e()],1):e._e(),e._v(" "),e.enableVirtualAccount?s("div",{staticClass:"spec-zone virtual-choices"},[s("el-checkbox",{on:{change:e.handleVirtualChecked},model:{value:e.virtualChecked,callback:function(t){e.virtualChecked=t},expression:"virtualChecked"}},[e._v("\n        "+e._s(e.virtualAccount.label)+"\n      ")]),e._v(" "),e.virtualChecked?s("el-select",{attrs:{multiple:!0,placeholder:e.$t("SelectVirtualAccount")},on:{change:e.handleVirtualChecked},model:{value:e.virtualSelected,callback:function(t){e.virtualSelected=t},expression:"virtualSelected"}},e._l(e.virtualAccounts,(function(t){return s("el-option",{key:t.label,attrs:{label:t.label,value:t.value}},[e._v("\n          "+e._s(t.label)+"\n          "),s("el-tooltip",{attrs:{content:t.tip,"open-delay":500,placement:"top"}},[s("i",{staticClass:"fa fa-question-circle-o"})])],1)})),1):e._e()],1):e._e()],1),e._v(" "),e.showTemplateDialog?s("Dialog",{attrs:{title:e.$tc("AccountTemplate"),visible:e.showTemplateDialog},on:{"update:visible":function(t){e.showTemplateDialog=t},cancel:e.handleAccountTemplateCancel,confirm:e.handleAccountTemplateConfirm}},[s("ListTable",e._b({ref:"templateTable"},"ListTable",e.accountTemplateTable,!1))],1):e._e()],1)},n=[],i=s("75fc"),r=(s("f559"),s("6762"),s("2fdb"),s("57e7"),s("7618")),o=(s("6d67"),s("d25f"),s("f823")),c=s("992f"),l=s("af7d"),u=s("9039"),d={components:{TagInput:o["k"],ListTable:l["a"],Dialog:u["a"]},props:{value:{type:[Array,String],default:function(){return[]}},assets:{type:[Array],default:function(){return[]}},nodes:{type:[Array],default:function(){return[]}},oid:{type:String,default:""},showAddTemplate:{type:Boolean,default:!0},enableVirtualAccount:{type:Boolean,default:!0},addTemplateHelpText:{type:String,default:function(){return this.$t("TemplateHelpText")}}},data:function(){var e=this,t=this,s="@VIRTUAL";return{ALL:c["b"],SPEC:c["j"],VIRTUAL:s,EXCLUDE:c["h"],showTemplateDialog:!1,realRadioSelected:this.ALL,realChoices:c["m"],virtualChecked:!1,virtualSelected:[],output:[],excludeAccountsInput:[],virtualAccounts:c["o"],virtualAccountsNames:[c["f"],c["i"],c["c"]],specAccountsInput:[],specAccountsTemplate:[],showSpecZone:!1,getTagType:function(e){return t.specAccountsTemplate.filter((function(t){return t.username===e})).length>0?"primary":"info"},showExcludeZone:!1,accountTemplateTable:c["l"],autocomplete:function(s,a){var n={username:s,assets:e.assets.slice(0,20),nodes:e.nodes.slice(0,20).map((function(e){return"object"===Object(r["a"])(e)?e.pk:e}))};e.$axios.post("/api/v1/accounts/accounts/username-suggestions/",n,{params:{oid:e.oid}}).then((function(e){e||(e=[]);var s=e.filter((function(e){return-1===t.value.indexOf(e)})).map((function(e){return{value:e,label:e}}));a(s)}))}}},computed:{virtualAccount:function(){return c["n"]}},watch:{realRadioSelected:{handler:function(e){this.showSpecZone=e===this.SPEC,this.showExcludeZone=e===this.EXCLUDE},sync:!0}},mounted:function(){this.initDefaultChoice()},methods:{getVirtualChoices:function(e){return this.virtualAccounts.filter((function(t){return e.includes(t.value)})).map((function(e){return e.value}))},getExcludeChoices:function(e){return e.filter((function(e){return e.startsWith("!")})).map((function(e){return e.substring(1)}))},getSpecValues:function(e){return e.filter((function(e){return!e.startsWith("@")&&!e.startsWith("!")}))},initDefaultChoice:function(){var e=this.value||[],t=this.getSpecValues(e),s=e.includes(this.ALL);s?this.realRadioSelected=this.ALL:t.length>0||e.includes(this.SPEC)?(this.realRadioSelected=this.SPEC,this.specAccountsInput=t):this.realRadioSelected=c["g"];var a=this.getVirtualChoices(this.value);a.length>0&&(this.virtualChecked=!0,this.virtualSelected=a)},handleAccountTemplateCancel:function(){this.showTemplateDialog=!1},handleAccountTemplateConfirm:function(){var e=this;this.specAccountsTemplate=this.$refs.templateTable.selectedRows;var t=this.specAccountsTemplate.map((function(e){return e.username}));this.specAccountsInput=this.specAccountsInput.filter((function(e){return!t.includes(e)})).concat(t),this.outputValue(),setTimeout((function(){e.showTemplateDialog=!1,e.outputValue()}),100)},handleVirtualChecked:function(e,t){this.outputValue()},handleRadioChanged:function(e){this.outputValue()},handleTagChange:function(){this.outputValue()},outputValue:function(){var e=[];if(this.realRadioSelected===this.ALL)e=[this.ALL];else if(this.realRadioSelected===this.SPEC&&this.showSpecZone){var t=this.specAccountsTemplate.map((function(e){return"%".concat(e.id)}));e=[this.realRadioSelected].concat(Object(i["a"])(this.specAccountsInput),Object(i["a"])(t))}else this.realRadioSelected===c["g"]&&(e=[]);this.virtualChecked&&(e=[].concat(Object(i["a"])(e),Object(i["a"])(this.virtualSelected))),this.$log.debug("choicesSelected",e),this.$emit("input",e),this.$emit("change",e)}}},p=d,f=(s("243c"),s("2877")),m=Object(f["a"])(p,a,n,!1,null,"202e51b6",null);t["a"]=m.exports},7:function(e,t){},"84cc":function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("TwoCol",{scopedSlots:e._u([{key:"right",fn:function(){return[s("RelationCard",e._b({attrs:{type:"primary"}},"RelationCard",e.userRelationConfig,!1)),e._v(" "),s("RelationCard",e._b({staticStyle:{"margin-top":"15px"},attrs:{type:"info"}},"RelationCard",e.groupRelationConfig,!1))]},proxy:!0}])},[[s("ListTable",{ref:"ListTable",attrs:{"header-actions":e.headerActions,"table-config":e.tableConfig}})]],2)},n=[],i=(s("57e7"),s("20d6"),s("75fc")),r=(s("6d67"),s("7f7f"),s("d92a"),s("af7d")),o=s("9e38"),c=s("53f7"),l=s("52cc"),u={name:"AssetPermissionUser",components:{TwoCol:l["a"],ListTable:r["a"],RelationCard:o["a"]},props:{object:{type:Object,default:function(){return{}}}},data:function(){var e,t,s=this;return{tableConfig:{url:"",id:"user",columnsExclude:["user"],columnsExtra:["delete_action"],columnsShow:{min:["user_display","delete_action"]},columnsMeta:{user_display:{label:this.$t("User"),align:"center"},delete_action:{prop:"user",label:this.$t("Actions"),align:"center",width:150,objects:this.object.users,formatter:c["h"],onDelete:function(e,t,s,a){var n=this,i="/api/v1/perms/asset-permissions-users-relations/?assetpermission=".concat(this.object.id,"&user=").concat(s);this.$axios.delete(i).then((function(e){n.$message.success(n.$tc("DeleteSuccessMsg")),n.$store.commit("common/reload")})).catch((function(e){n.$message.error(n.$tc("DeleteErrorMsg")+" "+e)}))}.bind(this)},actions:{has:!1}},tableAttrs:{border:!1}},headerActions:{hasLeft:!1,hasSearch:!0,hasRefresh:!0,hasExport:!1,hasImport:!1},userRelationConfig:{icon:"fa-user",title:this.$t("AddUserToThisPermission"),objectsAjax:{url:"/api/v1/users/users/?fields_size=mini&order=name",transformOption:function(e){return{label:e.name+"("+e.username+")",value:e.id}}},showHasMore:!1,hasObjectsId:(null===(e=this.object.users)||void 0===e?void 0:e.map((function(e){return e.id})))||[],showHasObjects:!1,performAdd:function(e){var t="/api/v1/perms/asset-permissions-users-relations/",a=s.object.id,n=e.map((function(e){return{user:e.value,assetpermission:a}}));return s.$axios.post(t,n)},onAddSuccess:function(e,t){s.$log.debug("Select value",t.select2.value),t.iHasObjects=[].concat(Object(i["a"])(t.iHasObjects),Object(i["a"])(e)),t.$refs.select2.clearSelected(),s.$refs.ListTable.reloadTable()}},groupRelationConfig:{icon:"fa-group",title:this.$t("AddUserGroupToThisPermission"),objectsAjax:{url:"/api/v1/users/groups/"},hasObjectsId:(null===(t=this.object.user_groups)||void 0===t?void 0:t.map((function(e){return e.id})))||[],performAdd:function(e){var t="/api/v1/perms/asset-permissions-user-groups-relations/",a=s.object.id,n=e.map((function(e){return{assetpermission:a,usergroup:e.value}}));return s.$axios.post(t,n)},performDelete:function(e){var t=s.object.id,a=e.value,n="/api/v1/perms/asset-permissions-user-groups-relations/?assetpermission=".concat(t,"&usergroup=").concat(a);return s.$axios.delete(n)},onAddSuccess:function(e,t){t.iHasObjects=[].concat(Object(i["a"])(t.iHasObjects),Object(i["a"])(e)),t.$refs.select2.clearSelected(),s.$message.success(s.$tc("UpdateSuccessMsg")),s.$refs.ListTable.reloadTable()},onDeleteSuccess:function(e,t){var a=t.iHasObjects.findIndex((function(t){return t.value===e.value}));t.iHasObjects.splice(a,1);while(-1!==t.select2.disabledValues.indexOf(e.value)){var n=t.select2.disabledValues.indexOf(e.value);s.$log.debug("disabled values remove index: ",n),t.select2.disabledValues.splice(n,1)}s.$message.success(s.$tc("DeleteSuccessMsg")),s.$refs.ListTable.reloadTable()}}}},watch:{object:{handler:function(e){this.updateTableConfigUrl(e.id)},immediate:!0,deep:!0}},mounted:function(){this.updateTableConfigUrl(this.$route.params.id)},methods:{updateTableConfigUrl:function(e){e&&(this.tableConfig.url="/api/v1/perms/asset-permissions/".concat(e,"/users/all/"))}}},d=u,p=s("2877"),f=Object(p["a"])(d,a,n,!1,null,null,null);t["a"]=f.exports},"94db":function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("TwoCol",{scopedSlots:e._u([{key:"right",fn:function(){return[s("AssetRelationCard",e._b({attrs:{type:"primary"}},"AssetRelationCard",e.assetRelationConfig,!1)),e._v(" "),s("RelationCard",e._b({staticStyle:{"margin-top":"15px"},attrs:{type:"info"}},"RelationCard",e.nodeRelationConfig,!1))]},proxy:!0}])},[[s("ListTable",{ref:"ListTable",attrs:{"header-actions":e.headerActions,"table-config":e.tableConfig}})]],2)},n=[],i=(s("20d6"),s("75fc")),r=(s("57e7"),s("6d67"),s("d92a"),s("af7d")),o=s("9e38"),c=s("53f7"),l=s("a82e"),u=s("52cc"),d={name:"AssetPermissionAsset",components:{TwoCol:u["a"],ListTable:r["a"],RelationCard:o["a"],AssetRelationCard:l["a"]},props:{object:{type:Object,default:function(){return{}}}},data:function(){var e,t,s=this,a=this.object.id,n=a?"/api/v1/perms/asset-permissions/".concat(a,"/assets/all/"):"";return{tableConfig:{url:n,id:"asset",columnsExclude:["asset"],columnsExtra:["delete_action"],columns:["asset_display","delete_action"],columnsShow:{min:["asset_display","delete_action"]},columnsMeta:{asset_display:{label:this.$t("Asset"),align:"center"},actions:{has:!1},delete_action:{prop:"asset",label:this.$t("Actions"),align:"center",width:150,objects:this.object.assets,formatter:c["h"],onDelete:function(e,t,s,a){var n=this,i="/api/v1/perms/asset-permissions-assets-relations/?assetpermission=".concat(this.object.id,"&asset=").concat(s);this.$axios.delete(i).then((function(e){n.$message.success(n.$tc("DeleteSuccessMsg")),n.$store.commit("common/reload")})).catch((function(e){n.$message.error(n.$tc("DeleteErrorMsg")+" "+e)}))}.bind(this)}},tableAttrs:{border:!1}},headerActions:{hasLeftActions:!1,hasExport:!1,hasImport:!1},assetRelationConfig:{icon:"fa-edit",title:this.$t("AddAssetToThisPermission"),hasObjectsId:(null===(e=this.object.assets)||void 0===e?void 0:e.map((function(e){return e.id})))||[],disabled:this.$store.getters.currentOrgIsRoot,canSelect:function(e,t){var a;return-1===((null===(a=s.object.assets)||void 0===a?void 0:a.map((function(e){return e.id})))||[]).indexOf(e.id)},performAdd:function(e,t){var a="/api/v1/perms/asset-permissions-assets-relations/",n=s.object.id,i=e.map((function(e){return{assetpermission:n,asset:e}}));return s.$axios.post(a,i)},onAddSuccess:function(e,t){s.$log.debug("AssetSelect value",t.assets),s.$message.success(s.$tc("UpdateSuccessMsg")),s.$store.commit("common/reload")}},nodeRelationConfig:{icon:"fa-edit",title:this.$t("AddNodeToThisPermission"),objectsAjax:{url:"/api/v1/assets/nodes/",transformOption:function(e){return{label:e.full_value,value:e.id}}},hasObjectsId:(null===(t=this.object.nodes)||void 0===t?void 0:t.map((function(e){return e.id})))||[],performAdd:function(e){var t="/api/v1/perms/asset-permissions-nodes-relations/",a=s.object.id,n=e.map((function(e){return{assetpermission:a,node:e.value}}));return s.$axios.post(t,n)},onAddSuccess:function(e,t){s.$log.debug("Select value",t.select2.value),t.iHasObjects=[].concat(Object(i["a"])(t.iHasObjects),Object(i["a"])(e)),t.$refs.select2.clearSelected(),s.$message.success(s.$tc("UpdateSuccessMsg")),s.$refs.ListTable.reloadTable()},performDelete:function(e){var t=e.value,a=s.object.id,n="/api/v1/perms/asset-permissions-nodes-relations/?assetpermission=".concat(a,"&node=").concat(t);return s.$axios.delete(n)},onDeleteSuccess:function(e,t){var a=t.iHasObjects.findIndex((function(t){return t.value===e.value}));t.iHasObjects.splice(a,1);while(-1!==t.select2.disabledValues.indexOf(e.value)){var n=t.select2.disabledValues.indexOf(e.value);s.$log.debug("disabled values remove index: ",n),t.select2.disabledValues.splice(n,1)}s.$message.success(s.$tc("DeleteSuccessMsg")),s.$refs.ListTable.reloadTable()}}}}},p=d,f=s("2877"),m=Object(f["a"])(p,a,n,!1,null,"03cbe86c",null);t["a"]=m.exports},"992f":function(e,t,s){"use strict";s.d(t,"k",(function(){return o})),s.d(t,"e",(function(){return c})),s.d(t,"d",(function(){return l})),s.d(t,"b",(function(){return u})),s.d(t,"j",(function(){return d})),s.d(t,"h",(function(){return p})),s.d(t,"i",(function(){return f})),s.d(t,"f",(function(){return m})),s.d(t,"c",(function(){return h})),s.d(t,"g",(function(){return b})),s.d(t,"a",(function(){return v})),s.d(t,"n",(function(){return g})),s.d(t,"m",(function(){return A})),s.d(t,"o",(function(){return j})),s.d(t,"l",(function(){return y}));var a=s("bd86"),n=(s("a481"),s("6d67"),s("0692")),i=s("b318"),r=s("62f3"),o=[{label:n["a"].t("Name"),value:"name"},{label:n["a"].t("Username"),value:"username"},{label:n["a"].t("UserGroups"),value:"user_group"},{label:n["a"].t("AssetName"),value:"asset_name"},{label:n["a"].t("AssetAddress"),value:"address"},{label:n["a"].t("Account"),value:"accounts"},{label:n["a"].t("Valid"),value:"is_valid",children:[{value:"1",label:n["a"].t("Yes")},{value:"0",label:n["a"].t("No")}]},{label:n["a"].t("Effective"),value:"is_effective",children:[{value:"1",label:n["a"].t("Yes")},{value:"0",label:n["a"].t("No")}]},{label:n["a"].t("FromTicket"),value:"from_ticket",children:[{value:"1",label:n["a"].t("Yes")},{value:"0",label:n["a"].t("No")}]}],c={name:{formatter:r["a"],minWidth:"120px",formatterArgs:{route:"AssetPermissionDetail",drawer:!0,routeQuery:{tab:"Basic"}}},action:{label:n["a"].t("Action"),formatter:function(e){return 6===e.actions.length?n["a"].t("All"):e.actions.map((function(e){return e.label.replace(/ \([^)]*\)/,"")})).join(",")}},is_expired:{formatterArgs:{showFalse:!1}},from_ticket:{width:"130px",formatterArgs:{showFalse:!1}},users_amount:{width:80,formatter:i["a"],formatterArgs:{async:!0,route:"AssetPermissionDetail",drawer:!0,routeQuery:{tab:"AssetPermissionUser"}}},user_groups_amount:{width:80,formatter:i["a"],formatterArgs:{async:!0,drawer:!0,route:"AssetPermissionDetail",routeQuery:{tab:"AssetPermissionUser"}}},assets_amount:{width:80,formatter:i["a"],formatterArgs:{async:!0,drawer:!0,route:"AssetPermissionDetail",routeQuery:{tab:"AssetPermissionAsset"}}},nodes_amount:{width:80,formatter:i["a"],formatterArgs:{async:!0,drawer:!0,route:"AssetPermissionDetail",routeQuery:{tab:"AssetPermissionAsset"}}},accounts:{width:80,formatter:i["a"],formatterArgs:{cellValueToRemove:["@SPEC"],drawer:!0,getItem:function(e){if("@SPEC"!==e)return v[e]||e},route:"AssetPermissionDetail",routeQuery:{tab:"AssetPermissionAccount"}}},actions:{formatterArgs:{updateRoute:"AssetPermissionUpdate",cloneRoute:"AssetPermissionCreate",performDelete:function(e){var t=e.row,s=(e.col,t.id),a="/api/v1/perms/asset-permissions/".concat(s,"/");return this.$axios.delete(a)}}}},l=[].concat(o,[{label:n["a"].t("NodeSearchStrategy"),value:"all",children:[{value:"0",label:n["a"].t("OnlySearchCurrentNodePerm")},{value:"1",label:n["a"].t("SearchAncestorNodePerm")}]}]),u="@ALL",d="@SPEC",p="@NOT",f="@USER",m="@INPUT",h="@ANON",b="@NONE",v=Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])({},u,n["a"].t("AllAccounts")),d,n["a"].t("SpecAccount")),p,n["a"].t("ExcludeAccount")),b,n["a"].t("None")),f,n["a"].t("SameAccount")),m,n["a"].t("ManualAccount")),h,n["a"].t("AnonymousAccount")),g={label:n["a"].t("VirtualAccounts"),value:"@VIRTUAL",tip:n["a"].t("VirtualAccountHelpMsg")},A=[{label:v[u],value:u,tip:n["a"].t("AllAccountTip")},{label:v[d],value:d,tip:n["a"].t("SpecAccountTip")},{label:v[b],value:b}],j=[{label:v[m],value:m,tip:n["a"].t("ManualAccountTip")},{label:v[f],value:f,tip:n["a"].t("SameAccountTip")},{label:v[h],value:h,tip:n["a"].t("AnonymousAccountTip")}],y={tableConfig:{url:"/api/v1/accounts/account-templates/",columns:["name","username","has_secret","comment","date_created","date_updated"],columnsMeta:{name:{formatterArgs:{openInNewPage:!0,getRoute:function(e){var t=e.row;e.col,e.cellValue;return{name:"AccountTemplateDetail",params:{id:t.id}}}}},has_secret:{formatterArgs:{showFalse:!1}},actions:{has:!1}}},headerActions:{hasLeftActions:!1,hasImport:!1,hasExport:!1}}},b0b7:function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("TwoCol",{scopedSlots:e._u([{key:"right",fn:function(){return[s("IBox",{attrs:{title:e.$tc("Account"),type:"primary"}},[s("AccountFormatter",{staticClass:"checkbox-accounts",attrs:{assets:e.assetIds,nodes:e.nodeIds,value:e.object["accounts"]},on:{change:e.updateAccount}})],1)]},proxy:!0}])},[[s("AccountListTable",{ref:"ListTable",attrs:{"columns-default":e.columns,"has-clone":!1,"has-column-actions":!1,"has-delete-action":!1,"has-export":!1,"has-import":!1,"has-left-actions":!1,"show-quick-filters":!1,url:e.url}})]],2)},n=[],i=(s("96cf"),s("3b8d")),r=(s("6d67"),s("2af9")),o=s("5ebc"),c=s("52cc"),l={name:"AssetPermissionAccount",components:{TwoCol:c["a"],IBox:r["k"],AccountFormatter:o["a"],AccountListTable:r["a"]},props:{object:{type:Object,default:function(){return{}}}},data:function(){var e=this.object.id,t=e?"/api/v1/perms/asset-permissions/".concat(e,"/accounts/"):"";return{url:t,relation:{disabled:!1,username:""},columns:["name","username","secret","asset","connect"]}},computed:{assetIds:function(){return this.object.assets.map((function(e){return e.id}))},nodeIds:function(){return this.object.nodes.map((function(e){return e.id}))}},methods:{updateAccount:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var s,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:s="/api/v1/perms/asset-permissions/".concat(this.object.id,"/"),this.$axios.patch(s,{accounts:t}).then((function(){a.object.accounts=t,a.$refs.ListTable.refresh()}));case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}},u=l,d=(s("b773"),s("2877")),p=Object(d["a"])(u,a,n,!1,null,"50ccfc67",null);t["a"]=p.exports},b708:function(e,t,s){},b773:function(e,t,s){"use strict";s("54ec")},bd11:function(e,t){e.exports=v,e.exports.match=o,e.exports.regexpToFunction=c,e.exports.parse=n,e.exports.compile=r,e.exports.tokensToFunction=l,e.exports.tokensToRegExp=b;var s="/",a=new RegExp(["(\\\\.)","(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?"].join("|"),"g");function n(e,t){var n,r=[],o=0,c=0,l="",u=t&&t.delimiter||s,p=t&&t.whitelist||void 0,f=!1;while(null!==(n=a.exec(e))){var m=n[0],h=n[1],b=n.index;if(l+=e.slice(c,b),c=b+m.length,h)l+=h[1],f=!0;else{var v="",g=n[2],A=n[3],j=n[4],y=n[5];if(!f&&l.length){var $=l.length-1,_=l[$],x=!p||p.indexOf(_)>-1;x&&(v=_,l=l.slice(0,$))}l&&(r.push(l),l="",f=!1);var T="+"===y||"*"===y,w="?"===y||"*"===y,C=A||j,S=v||u,O=v||("string"===typeof r[r.length-1]?r[r.length-1]:"");r.push({name:g||o++,prefix:v,delimiter:S,optional:w,repeat:T,pattern:C?d(C):i(S,u,O)})}}return(l||c<e.length)&&r.push(l+e.substr(c)),r}function i(e,t,s){var a="[^"+u(e===t?e:e+t)+"]";return!s||s.indexOf(e)>-1||s.indexOf(t)>-1?a+"+?":u(s)+"|(?:(?!"+u(s)+")"+a+")+?"}function r(e,t){return l(n(e,t),t)}function o(e,t){var s=[],a=v(e,s,t);return c(a,s)}function c(e,t){return function(s,a){var n=e.exec(s);if(!n)return!1;for(var i=n[0],r=n.index,o={},c=a&&a.decode||decodeURIComponent,l=1;l<n.length;l++)if(void 0!==n[l]){var u=t[l-1];u.repeat?o[u.name]=n[l].split(u.delimiter).map((function(e){return c(e,u)})):o[u.name]=c(n[l],u)}return{path:i,index:r,params:o}}}function l(e,t){for(var s=new Array(e.length),a=0;a<e.length;a++)"object"===typeof e[a]&&(s[a]=new RegExp("^(?:"+e[a].pattern+")$",p(t)));return function(t,a){for(var n="",i=a&&a.encode||encodeURIComponent,r=!a||!1!==a.validate,o=0;o<e.length;o++){var c=e[o];if("string"!==typeof c){var l,u=t?t[c.name]:void 0;if(Array.isArray(u)){if(!c.repeat)throw new TypeError('Expected "'+c.name+'" to not repeat, but got array');if(0===u.length){if(c.optional)continue;throw new TypeError('Expected "'+c.name+'" to not be empty')}for(var d=0;d<u.length;d++){if(l=i(u[d],c),r&&!s[o].test(l))throw new TypeError('Expected all "'+c.name+'" to match "'+c.pattern+'"');n+=(0===d?c.prefix:c.delimiter)+l}}else if("string"!==typeof u&&"number"!==typeof u&&"boolean"!==typeof u){if(!c.optional)throw new TypeError('Expected "'+c.name+'" to be '+(c.repeat?"an array":"a string"))}else{if(l=i(String(u),c),r&&!s[o].test(l))throw new TypeError('Expected "'+c.name+'" to match "'+c.pattern+'", but got "'+l+'"');n+=c.prefix+l}}else n+=c}return n}}function u(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function d(e){return e.replace(/([=!:$/()])/g,"\\$1")}function p(e){return e&&e.sensitive?"":"i"}function f(e,t){if(!t)return e;var s=e.source.match(/\((?!\?)/g);if(s)for(var a=0;a<s.length;a++)t.push({name:a,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return e}function m(e,t,s){for(var a=[],n=0;n<e.length;n++)a.push(v(e[n],t,s).source);return new RegExp("(?:"+a.join("|")+")",p(s))}function h(e,t,s){return b(n(e,s),t,s)}function b(e,t,a){a=a||{};for(var n=a.strict,i=!1!==a.start,r=!1!==a.end,o=a.delimiter||s,c=[].concat(a.endsWith||[]).map(u).concat("$").join("|"),l=i?"^":"",d=0;d<e.length;d++){var f=e[d];if("string"===typeof f)l+=u(f);else{var m=f.repeat?"(?:"+f.pattern+")(?:"+u(f.delimiter)+"(?:"+f.pattern+"))*":f.pattern;t&&t.push(f),f.optional?f.prefix?l+="(?:"+u(f.prefix)+"("+m+"))?":l+="("+m+")?":l+=u(f.prefix)+"("+m+")"}}if(r)n||(l+="(?:"+u(o)+")?"),l+="$"===c?"$":"(?="+c+")";else{var h=e[e.length-1],b="string"===typeof h?h[h.length-1]===o:void 0===h;n||(l+="(?:"+u(o)+"(?="+c+"))?"),b||(l+="(?="+u(o)+"|"+c+")")}return new RegExp(l,p(a))}function v(e,t,s){return e instanceof RegExp?f(e,t):Array.isArray(e)?m(e,t,s):h(e,t,s)}},c0eb:function(e,t,s){"use strict";var a=s("c5ec"),n=s.n(a);window.$=n.a,window.jQuery=n.a,t["a"]=n.a},d3b7:function(e,t,s){},e323:function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"content"},[e.hasButton?s("el-button",{staticClass:"proto-setting",attrs:{disabled:!e.canSetting,icon:e.icon,size:"small",type:"primary"},on:{click:e.onSetting}}):e._e(),e._v(" "),s("Dialog",{attrs:{"show-cancel":!1,"show-confirm":!1,title:e.title,visible:e.isVisible,width:"60%"},on:{"update:visible":function(t){e.isVisible=t},close:e.onDialogClose}},[s("AutoDataForm",e._g(e._b({ref:"autoDataForm",staticClass:"data-form",attrs:{form:e.form},on:{submit:e.onSubmit}},"AutoDataForm",e.config,!1),e.$listeners))],1)],1)},n=[],i=(s("1c01"),s("58b2"),s("8e6e"),s("f3e2"),s("d25f"),s("bd86")),r=s("768b"),o=(s("ffc1"),s("6762"),s("2fdb"),s("ac6a"),s("456d"),s("96cf"),s("3b8d")),c=s("9039"),l=s("c75f"),u=s("f823");function d(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function p(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?d(Object(s),!0).forEach((function(t){Object(i["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):d(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var f={components:{Dialog:c["a"],AutoDataForm:l["a"]},props:{value:{type:[String,Object],default:function(){return{}}},title:{type:String,default:function(){return this.$t("PushParams")}},btnText:{type:String,default:function(){return""}},icon:{type:String,default:"el-icon-setting"},url:{type:String,default:"/api/v1/assets/platform-automation-methods/"},method:{type:String,default:""},pushAccountParams:{type:Object,default:function(){return{}}},visible:{type:Boolean,default:!1},hasButton:{type:Boolean,default:!0}},data:function(){return{isVisible:this.visible,canSetting:!0,form:this.value,remoteMeta:{},config:{url:this.url,hasSaveContinue:!1,hasButtons:!0,hasReset:!1,fields:[],method:"get"},preFieldsMeta:{change_secret_by_ssh:{commands:{helpTextAsTip:!1}}}}},watch:{visible:function(e){this.isVisible=e},method:function(e,t){e!==t&&this.getUrlMeta()}},mounted:function(){this.getUrlMeta()},methods:{getUrlMeta:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("common/getUrlMeta",{url:this.url});case 2:t=e.sent,this.remoteMeta=t.actions[this.config.method.toUpperCase()]||{},this.onCanSetting()&&this.setFormConfig();case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onCanSetting:function(){var e=Object.keys(this.remoteMeta);return this.canSetting=e.includes(this.method)&&this.$hasPerm("assets.change_platform"),this.$emit("canSetting",this.canSetting),this.canSetting},setFormConfig:function(){var e=[],t={},s=this.method,a=this.remoteMeta[s];e=[[a.label,[s]]],t[s]={fields:[],fieldsMeta:{}};var n=this.pushAccountParams[s];if(Object.keys((null===a||void 0===a?void 0:a.children)||{}).length>0)for(var i=0,o=Object.entries(a.children);i<o.length;i++){var c=Object(r["a"])(o[i],2),l=c[0],d=c[1],f="el-input",m={};switch(null===d||void 0===d?void 0:d.type){case"list":f=u["b"];break;case"boolean":f=u["j"];break;case"text":m["text"]="textarea";break}n&&(d.default=n[l]||d.default);var h=p(p({},d),{},{component:f,el:m});t[s].fields.push(l),t[s].fieldsMeta[l]=h}var b=this.preFieldsMeta[s];if(b)for(var v=0,g=Object.entries(b);v<g.length;v++)for(var A=Object(r["a"])(g[v],2),j=A[0],y=A[1],$=0,_=Object.entries(y);$<_.length;$++){var x=Object(r["a"])(_[$],2),T=x[0],w=x[1];t[s]["fieldsMeta"][j][T]=w}this.config.fields=e,this.config.fieldsMeta=t},onSetting:function(){this.isVisible=!0},onSubmit:function(e){this.$emit("input",e),this.isVisible=!1,this.$emit("update:visible",this.isVisible)},onDialogClose:function(){this.$emit("update:visible",this.isVisible)}}},m=f,h=(s("273b"),s("2877")),b=Object(h["a"])(m,a,n,!1,null,"2772642f",null);t["a"]=b.exports}}]);
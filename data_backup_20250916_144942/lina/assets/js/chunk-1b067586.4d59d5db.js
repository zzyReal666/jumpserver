(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1b067586"],{"1ac1":function(t,n,e){"use strict";e.r(n);var r=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{ref:"terminal",staticClass:"xterm",attrs:{id:"terminal"}})},i=[],o=(e("386d"),e("ac6a"),e("abb2"),e("fcf3")),s=e("47d0"),a=["|","/","-","\\"],c={name:"ComponentLogTail",data:function(){return{xterm:null,ws:null,currentIndex:0,intervalSpin:null}},mounted:function(){this.initTermAndWs()},methods:{reset:function(){this.xterm.reset()},write:function(t){this.xterm.write(t)},initTermAndWs:function(){var t=this.$refs.terminal;this.xterm=new o["Terminal"]({cursorBlink:!1,screenKeys:!1,fontFamily:'"Monaco", "Consolas", "monospace"',fontSize:13,lineHeight:1.2,rightClickSelectsWord:!0,theme:{background:"#1f1b1b"}});var n=new s["FitAddon"];this.xterm.loadAddon(n),this.xterm.open(t),n.fit(),window.onresize=function(){n.fit()},this.xterm.scrollToBottom(),this.enableWS()},enableWS:function(){var t=this,n="https:"===document.location.protocol?"wss":"ws",e=document.location.port?":"+document.location.port:"",r="/ws/component-log-tail/",i=n+"://"+document.location.hostname+e+r;this.ws=new WebSocket(i),this.ws.onerror=function(n){t.xterm.write(t.wrapperError("Connect websocket server error")),clearInterval(t.intervalSpin)},this.setWsCallback()},setWsCallback:function(){var t=this;this.intervalSpin=setInterval(this.displaySpin,200),this.ws.onmessage=function(n){clearInterval(t.intervalSpin),t.cleanSpinChar();for(var e=JSON.parse(n.data),r=e.streams,i=0;i<r.length;i++){var o=r[i];t.xterm.writeln(o["values"][0][1])}t.intervalSpin=setInterval(t.displaySpin,200)},this.ws.onopen=function(n){var e=t.$route.query.components,r=t.$route.query.search,i={components:e,search:r};t.ws.send(JSON.stringify(i))}},wrapperError:function(t){return"\r\n".concat(t,"\r\n")},displaySpin:function(){this.xterm.write("\r"+a[this.currentIndex]),this.currentIndex=(this.currentIndex+1)%a.length},cleanSpinChar:function(){this.xterm.write("\r")}}},l=c,u=(e("426f"),e("2877")),h=Object(u["a"])(l,r,i,!1,null,"6c280bec",null);n["default"]=h.exports},"426f":function(t,n,e){"use strict";e("d6f4")},d6f4:function(t,n,e){}}]);
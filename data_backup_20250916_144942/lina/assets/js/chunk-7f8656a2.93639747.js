(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7f8656a2"],{3232:function(e,a,i){"use strict";i("9ae4")},"54f0":function(e,a,i){"use strict";i.r(a);var t=function(){var e=this,a=e.$createElement,i=e._self._c||a;return i("GenericCreateUpdatePage",e._b({},"GenericCreateUpdatePage",e.$data,!1))},l=[],n=(i("6d67"),i("cd4a")),r=i("32b3"),s=i("b3af"),o={components:{GenericCreateUpdatePage:n["c"]},data:function(){return{url:"/api/v1/ops/adhocs/",fields:[[this.$t("Basic"),["name","scope","module","args","variable"]],[this.$t("Other"),["comment"]]],initial:{module:"shell",args:""},fieldsMeta:{args:{component:r["a"]},variable:{component:s["a"]}},createSuccessNextRoute:{name:"Template"},updateSuccessNextRoute:{name:"Template"},cleanFormValue:function(e){var a="clone"===(null===this||void 0===this?void 0:this.action);return a&&(null===e||void 0===e||e.variable.map((function(e){delete e.id,delete e.adhoc}))),e}}}},c=o,u=i("2877"),d=Object(u["a"])(c,t,l,!1,null,"119075ce",null);a["default"]=d.exports},"9ae4":function(e,a,i){},b3af:function(e,a,i){"use strict";var t=function(){var e=this,a=e.$createElement,i=e._self._c||a;return i("div",[i("div",{staticClass:"variables el-data-table"},[i("el-table",{staticClass:"el-table--fit el-table--border",attrs:{data:e.variables}},[i("el-table-column",{attrs:{"show-overflow-tooltip":"",label:e.$tc("Name"),prop:"name"}}),e._v(" "),i("el-table-column",{attrs:{"show-overflow-tooltip":"",label:e.$tc("VariableName"),prop:"var_name"}}),e._v(" "),i("el-table-column",{attrs:{"show-overflow-tooltip":"",label:e.$tc("DefaultValue"),prop:"default_value"}}),e._v(" "),e.disableEdit?e._e():i("el-table-column",{attrs:{label:e.$tc("Actions"),align:"center","class-name":"buttons",fixed:"right",width:"135"},scopedSlots:e._u([{key:"default",fn:function(a){return[i("el-button",{attrs:{icon:"el-icon-minus",size:"mini",type:"danger"},on:{click:function(i){return e.removeVariable(a.row)}}}),e._v(" "),i("el-button",{attrs:{disabled:!!a.row.template,icon:"el-icon-edit",size:"mini",type:"primary"},on:{click:function(i){return e.onEditClick(a.row)}}})]}}],null,!1,3037588530)})],1),e._v(" "),e.disableEdit?e._e():i("div",{staticClass:"actions"},[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.onAddClick}},[e._v("\n        "+e._s(e.$t("Add"))+"\n      ")])],1),e._v(" "),i("AddVariableDialog",{attrs:{variable:e.variable,variables:e.variables,visible:e.addVariableDialogVisible},on:{"update:visible":function(a){e.addVariableDialogVisible=a}}})],1)])},l=[],n=(i("7f7f"),i("d25f"),i("6d67"),function(){var e=this,a=e.$createElement,i=e._self._c||a;return e.iVisible?i("Dialog",{attrs:{"destroy-on-close":!0,"show-cancel":!1,"show-confirm":!1,title:e.$tc("AddVariable"),visible:e.iVisible,width:"800px"},on:{"update:visible":function(a){e.iVisible=a}}},[i("VariableCreateForm",{attrs:{variable:e.variable},on:{add:e.addVariable,edit:e.editVariable}})],1):e._e()}),r=[],s=(i("20d6"),i("9039")),o=i("1efb"),c={name:"AddVariableDialog",components:{Dialog:s["a"],VariableCreateForm:o["a"]},props:{visible:{type:Boolean,default:!1},variable:{type:Object,default:function(){return{}}},variables:{type:Array,default:function(){return[]}}},computed:{iVisible:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e)}}},methods:{addVariable:function(e){var a=this.variables.findIndex((function(a){return a.name===e.name||a.var_name===e.var_name}));-1!==a&&this.variables.splice(a,1),this.variables.push(e),this.iVisible=!1},editVariable:function(e){var a=this,i=this.variables.findIndex((function(e){return e.var_name===a.variable.var_name}));this.variables.splice(i,1,e);var t=this.variables.filter((function(a){return a.var_name===e.var_name||a.name===e.name})).length;t>1&&this.variables.splice(i,1),this.iVisible=!1}}},u=c,d=i("2877"),b=Object(d["a"])(u,n,r,!1,null,"e0757cc0",null),v=b.exports,f={name:"Variable",components:{AddVariableDialog:v},props:{value:{type:[Array],default:function(){return[]}},disableEdit:{type:Boolean,default:!1}},data:function(){return{variable:{},initial:!1,addVariableDialogVisible:!1}},computed:{variables:{get:function(){return this.value},set:function(e){this.$emit("update:value",e),this.$emit("change",e)}}},watch:{variables:{handler:function(e,a){void 0!==a&&((e.length>0||!this.initial)&&(e.map((function(e){e.default_value=e.text_default_value||e.select_default_value||void 0})),this.$emit("input",e)),e&&(this.initial=!0))},immediate:!0,deep:!0}},methods:{removeVariable:function(e){this.variables=this.variables.filter((function(a){return e.id&&a.id?a.id!==e.id:e.var_name&&a.var_name?a.var_name!==e.var_name:e.name!==a.name}))},onEditClick:function(e){var a=this;this.variable=e,setTimeout((function(){a.addVariableDialogVisible=!0}))},onAddClick:function(){var e=this;this.variable=null,setTimeout((function(){e.addVariableDialogVisible=!0}))}}},m=f,p=(i("3232"),Object(d["a"])(m,t,l,!1,null,"494ead85",null));a["a"]=p.exports}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3a9bdadc"],{1576:function(t,e,a){},"27d3":function(t,e,a){"use strict";a("1576")},5423:function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));a("a481");var s=a("b416"),n=function(){var t=document.documentElement.style,e=t.getPropertyValue("--color-primary"),a=e.replace(/#/g,""),n=Object(s["c"])(a,"ffffff",38),i=Object(s["c"])(a,"ffffff",20),o=Object(s["c"])(a,"ffffff",1);return{primary:e,TwoLevelColor:n,ThreeLevelColor:i,shadowColor:o}}},"5b61":function(t,e,a){},"5ce7":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box"},[a("el-table",{staticClass:"table",staticStyle:{width:"100%"},attrs:{data:t.config.data}},[a("el-table-column",{attrs:{label:t.$tc("Ranking"),width:"100"},scopedSlots:t._u([{key:"header",fn:function(){return[a("el-tooltip",{attrs:{content:t.$t("Ranking"),placement:"top","open-delay":500}},[a("span",{staticStyle:{cursor:"pointer"}},[t._v(t._s(t.$t("Ranking")))])])]},proxy:!0},{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.$index+1)+"\n      ")]}}])}),t._v(" "),t._l(t.config.columns,(function(e){return a("el-table-column",{key:e.prop,attrs:{prop:e.prop,width:t.getColumnWidth(e)},scopedSlots:t._u([{key:"header",fn:function(){return[a("el-tooltip",{attrs:{content:e.label,placement:"top","open-delay":500}},[a("span",{staticStyle:{cursor:"pointer"}},[t._v(t._s(e.label))])])]},proxy:!0}],null,!0)})}))],2)],1)},n=[],i={props:{config:{type:Object,default:function(){}}},data:function(){return{}},methods:{getColumnWidth:function(t){if("total"===t.prop){var e=this.$i18n.locale;switch(e){case"en":return"120px";case"pt-br":return"220px";default:return"100px"}}}}},o=i,c=(a("e96f"),a("2877")),r=Object(c["a"])(o,s,n,!1,null,"45fb135c",null);e["a"]=r.exports},"68b4d":function(t,e,a){},cd2f:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("BaseReport",t._b({attrs:{title:t.title,nav:t.nav,name:t.name}},"BaseReport",t.$attrs,!1),[a("div",{staticClass:"charts-grid"},[a("div",{staticClass:"chart-container full-width"},[a("div",{staticClass:"chart-container-title"},[a("div",{staticClass:"chart-container-title-text"},[t._v(t._s(t.$t("Overview")))]),t._v(" "),a("SummaryCountCard",{attrs:{items:t.totalData}})],1)]),t._v(" "),a("div",{staticClass:"chart-container"},[a("div",{staticClass:"chart-container-title"},[a("div",{staticClass:"chart-container-title-text"},[t._v(t._s(t.$t("AccountCreationSourceDistribution")))]),t._v(" "),a("div",{staticClass:"chart"},[a("echarts",{attrs:{options:t.SourceOptions,autoresize:!0}})],1)])]),t._v(" "),a("div",{staticClass:"chart-container"},[a("div",{staticClass:"chart-container-title"},[a("div",{staticClass:"chart-container-title-text"},[t._v(t._s(t.$t("AccountConnectivityStatusDistribution")))]),t._v(" "),a("div",{staticClass:"chart"},[a("echarts",{attrs:{options:t.ConnectivityOptions,autoresize:!0}})],1)])]),t._v(" "),a("div",{staticClass:"chart-container full-width"},[a("div",{staticClass:"chart-container-title"},[a("div",{staticClass:"chart-container-title-text"},[t._v(t._s(t.$t("AccountPasswordChangeTrends")))]),t._v(" "),a("div",{staticClass:"chart"},[a("echarts",{attrs:{options:t.ChangeSecretOptions,autoresize:!0}})],1)])]),t._v(" "),a("div",{staticClass:"chart-container"},[a("div",{staticClass:"chart-container-title"},[a("div",{staticClass:"chart-container-title-text"},[t._v(t._s(t.$t("RankByNumberOfAssetAccounts")))]),t._v(" "),a("RankTable",{attrs:{config:t.config.top10_asset_accounts}})],1)]),t._v(" "),a("div",{staticClass:"chart-container"},[a("div",{staticClass:"chart-container-title"},[a("div",{staticClass:"chart-container-title-text"},[t._v(t._s(t.$t("AccountAndPasswordChangeRank")))]),t._v(" "),a("RankTable",{attrs:{config:t.config.top10_version_accounts}})],1)])])])],1)},n=[],i=(a("6d67"),a("96cf"),a("3b8d")),o=a("d619"),c=a("5f2d"),r=a("313e"),l=a("5423"),u=a("5ce7"),d={components:{RankTable:u["a"],SummaryCountCard:c["a"],BaseReport:o["a"]},props:{nav:{type:Boolean,default:!0}},data:function(){return{title:this.$t("AccountStatisticsReport"),name:"AccountStatistics",account_stats:{total:0,active:0,connected:0,su_from:0,date_change_secret:0,template_total:0},change_secret_account_metrics:{dates_metrics_date:[],dates_metrics_total:{}},config:{source_pie:[],top_assets:[],by_connectivity:[],top10_asset_accounts:{data:[],columns:[{prop:"asset__name",label:this.$t("Asset")},{prop:"account_count",label:this.$t("AccountTotal")}]},top10_version_accounts:{data:[],columns:[{prop:"display_key",label:this.$t("Asset")},{prop:"version",label:this.$t("Version")}]}}}},computed:{totalData:function(){return[{title:this.$t("Total"),body:{count:this.account_stats.total}},{title:this.$t("Active"),body:{count:this.account_stats.active}},{title:this.$t("Connectable"),body:{count:this.account_stats.connected}},{title:this.$t("SuFrom"),body:{count:this.account_stats.su_from}},{title:this.$t("ResetSecret"),body:{count:this.account_stats.date_change_secret}},{title:this.$t("BaseAccountTemplate"),body:{count:this.account_stats.template_total}}]},SourceOptions:function(){return{tooltip:{trigger:"item"},legend:{orient:"vertical",left:"left"},series:[{type:"pie",minAngle:5,radius:["40%","70%"],itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:15,fontWeight:"bold"}},data:this.config.source_pie}]}},ConnectivityOptions:function(){return{tooltip:{trigger:"item"},legend:{orient:"vertical",left:"left"},series:[{type:"pie",minAngle:5,radius:["40%","70%"],itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:15,fontWeight:"bold"}},data:this.config.by_connectivity}]}},ChangeSecretOptions:function(){var t=Object(l["a"])(),e=t.primary,a=t.TwoLevelColor,s=t.ThreeLevelColor,n=t.shadowColor;return{title:{show:!1},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{left:"auto",icon:"rect",itemWidth:10,itemHeight:10},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},color:[e,"#F3B44B"],xAxis:[{type:"category",boundaryGap:!1,axisLine:{lineStyle:{color:"#8F959E"}},axisLabel:{textStyle:{color:"#8F959E"}},axisTick:{show:!1},data:this.change_secret_account_metrics.dates_metrics_date}],yAxis:[{type:"value",name:"",axisLine:{show:!1,lineStyle:{color:"#fff"}},axisLabel:{textStyle:{color:"#8F959E"}},axisTick:{show:!1},splitLine:{show:!0,lineStyle:{color:"#EFF0F1"}}}],animationDuration:500,series:[{name:this.$t("Account"),type:"line",smooth:!0,areaStyle:{normal:{color:new r["graphic"].LinearGradient(0,0,0,1,[{offset:0,color:e},{offset:.6,color:a},{offset:.8,color:s}],!1),shadowColor:n,shadowBlur:5}},data:this.change_secret_account_metrics.dates_metrics_total}]}}},mounted:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getData();case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{getData:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$axios.get("/api/v1/reports/reports/account-statistic/?days=30");case 2:e=t.sent,this.$set(this.account_stats,"total",e.account_stats.total),this.$set(this.account_stats,"active",e.account_stats.active),this.$set(this.account_stats,"connected",e.account_stats.connected),this.$set(this.account_stats,"su_from",e.account_stats.su_from),this.$set(this.account_stats,"date_change_secret",e.account_stats.date_change_secret),this.$set(this.account_stats,"template_total",e.account_stats.template_total),this.$set(this.change_secret_account_metrics,"dates_metrics_date",e.change_secret_account_metrics.dates_metrics_date),this.$set(this.change_secret_account_metrics,"dates_metrics_total",e.change_secret_account_metrics.dates_metrics_total),a=e.source_pie,0!==a.length&&this.$set(this.config,"source_pie",a),s=e.by_connectivity.map((function(t){return{name:t.label,value:t.total}})),this.$set(this.config,"by_connectivity",s),this.$set(this.config.top10_asset_accounts,"data",e.top_assets),this.$set(this.config.top10_version_accounts,"data",e.top_version_accounts);case 17:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},h=d,p=a("2877"),_=Object(p["a"])(h,s,n,!1,null,"37d042b4",null);e["default"]=_.exports},cd5f:function(t,e,a){"use strict";a("68b4d")},d619:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:{"no-padding":t.onlyCharts,nav:t.nav}},[!t.onlyCharts&&t.nav?a("div",{staticClass:"header nav-bar"},[a("div",{staticClass:"nav-bar-logo"},[a("Logo")],1),t._v(" "),a("RightAction",{attrs:{name:t.name}})],1):t._e(),t._v(" "),a("div",{staticClass:"content"},[t.onlyCharts?t._e():a("div",{staticClass:"title-bar"},[a("div",{staticClass:"title"},[t._v("\n        "+t._s(t.title)+"\n\n        "),a("span",{staticClass:"datetime"},[t._v("\n          ["+t._s((new Date).toLocaleString())+"]\n        ")]),t._v(" "),!t.nav&&t.url?a("span",{staticStyle:{float:"right","line-height":"40px"}},[a("el-button",{attrs:{type:"text"},on:{click:t.openNewWindow}},[a("i",{staticClass:"fa fa-external-link",staticStyle:{"font-size":"15px"}}),t._v("\n            "+t._s(t.$t("Export"))+"\n          ")])],1):t._e()]),t._v(" "),t.isDescription?a("div",{staticClass:"description"},[t._v("\n        "+t._s(t.description)+"\n      ")]):t._e()]),t._v(" "),a("div",{staticClass:"charts-zone"},[t._t("default")],2)])])},n=[],i=(a("6762"),a("2fdb"),a("4f37"),a("62db")),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"nav-bar-right export-bar"},[a("el-button-group",[a("el-button",{staticClass:"export-btn",attrs:{loading:t.exportLoading,disabled:t.exportLoading,type:"text",icon:"el-icon-printer"},on:{click:t.exportPdf}},[t._v("\n      "+t._s(t.$t("ExportAsPDF"))+"\n\n    ")]),t._v(" "),a("el-button",{staticClass:"export-btn",attrs:{type:"text",icon:"el-icon-message"},on:{click:t.emailReport}},[t._v("\n\n      "+t._s(t.$t("EMailReport"))+"\n    ")]),t._v(" "),a("el-button",{staticClass:"export-btn",attrs:{type:"text",icon:"el-icon-printer"},on:{click:t.printReport}},[t._v("\n      "+t._s(t.$t("Print"))+"\n    ")])],1)],1)},c=[],r=(a("7f7f"),a("dbfd")),l={name:"RightAction",props:{name:{type:String,default:""}},data:function(){return{exportLoading:!1}},methods:{checkName:function(){return!!this.name||(this.$message.error("Please select a chart"),!1)},getDaysParam:function(){return this.$route.query.days||localStorage.getItem(this.name)||"7"},exportPdf:function(){if(this.checkName()){var t=this.getDaysParam(),e="/core/reports/export-pdf/?chart=".concat(this.name,"&days=").concat(t);this.$message.success(this.$t("Export")+"..."),Object(r["e"])(e)}},emailReport:function(){var t=this;if(this.checkName()){var e=this.getDaysParam();this.$message.success(this.$t("EMailReport")+"..."),this.$axios.post("/core/reports/send-mail/?chart=".concat(this.name,"&days=").concat(e)).catch((function(e){t.$message.error(t.$t("Failed")+": "+e.message)}))}},printReport:function(){window.print()}}},u=l,d=(a("cd5f"),a("2877")),h=Object(d["a"])(u,o,c,!1,null,"04bfb9fd",null),p=h.exports,_={components:{Logo:i["a"],RightAction:p},props:{onlyCharts:{type:Boolean,default:!1},nav:{type:Boolean,default:!1},name:{type:String,default:""},title:{type:String,default:""},description:{type:String,default:""},url:{type:String,default:""}},data:function(){return{}},computed:{isDescription:function(){return this.description&&""!==this.description.trim()}},methods:{handleChangeChart:function(t){},openNewWindow:function(){try{if(!this.win||this.win.closed){var t=1048,e=800,a=(screen.width-t)/2,s=(screen.height-e)/2,n="width=".concat(t,",height=").concat(e,",left=").concat(a,",top=").concat(s,",scrollbars=yes,resizable=yes"),i=this.url;if(this.$route.query.days){var o=i.includes("?")?"&":"?";i="".concat(i).concat(o,"days=").concat(this.$route.query.days)}this.win=window.open(i,"_blank",n)}this.win.focus()}catch(c){console.error("打开新窗口失败:",c),window.location.href=this.url}},openSettings:function(){console.log("openSettings")}}},f=_,v=(a("27d3"),Object(d["a"])(f,s,n,!1,null,"5785de42",null));e["a"]=v.exports},e96f:function(t,e,a){"use strict";a("5b61")}}]);
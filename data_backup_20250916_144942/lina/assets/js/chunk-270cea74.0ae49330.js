(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-270cea74","chunk-52829884","chunk-7ba31bf5"],{"0482":function(e,t,i){},"273b":function(e,t,i){"use strict";i("0482")},3232:function(e,t,i){"use strict";i("9ae4")},"3cc2":function(e,t,i){},"3de0":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("GenericDetailPage",e._g(e._b({attrs:{"active-menu":e.config.activeMenu,object:e.AdhocDetail},on:{"update:activeMenu":function(t){return e.$set(e.config,"activeMenu",t)},"update:active-menu":function(t){return e.$set(e.config,"activeMenu",t)},"update:object":function(t){e.AdhocDetail=t}}},"GenericDetailPage",e.config,!1),e.$listeners),[i("keep-alive",[i(e.config.activeMenu,{tag:"component",attrs:{object:e.AdhocDetail}})],1)],1)},a=[],r=(i("7f7f"),i("cd4a")),o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("TwoCol",{scopedSlots:e._u([{key:"right",fn:function(){return[i("IBox",{attrs:{title:e.$tc("Variable")}},[i("Variable",{attrs:{value:e.object.variable,"disable-edit":e.disableEdit},on:{"update:value":function(t){return e.$set(e.object,"variable",t)},input:e.updateVariable}})],1)]},proxy:!0}])},[i("AutoDetailCard",{attrs:{excludes:e.excludes,object:e.object,url:e.url}})],1)},s=[],l=i("e3bc"),c=i("b3af"),u=i("2af9"),f=i("52cc"),d={components:{IBox:u["k"],Variable:c["a"],TwoCol:f["a"],AutoDetailCard:l["a"]},props:{object:{type:Object,default:function(){return{}}}},data:function(){return{url:"/api/v1/ops/adhocs/".concat(this.object.id,"/"),excludes:["variable"],disableEdit:this.object.creator!==this.$store.state.users.profile.id}},computed:{cardTitle:function(){return this.object.name}},methods:{updateVariable:function(){var e=this,t="/api/v1/ops/adhocs/".concat(this.object.id,"/");this.$axios.patch(t,{variable:this.object.variable}).then((function(){e.$message.success(e.$tc("UpdateSuccessMsg"))}))}}},p=d,b=i("2877"),h=Object(b["a"])(p,o,s,!1,null,"45cf8327",null),v=h.exports,m={components:{GenericDetailPage:r["d"],AdhocDetail:v},data:function(){return{AdhocDetail:{},config:{getTitle:function(e){return e["name"]},url:"/api/v1/ops/adhocs",activeMenu:"AdhocDetail",submenu:[{title:this.$t("Basic"),name:"AdhocDetail"}],hasRightSide:!1}}}},g=m,y=Object(b["a"])(g,n,a,!1,null,"88102764",null);t["default"]=y.exports},7:function(e,t){},"9ae4":function(e,t,i){},b3af:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"variables el-data-table"},[i("el-table",{staticClass:"el-table--fit el-table--border",attrs:{data:e.variables}},[i("el-table-column",{attrs:{"show-overflow-tooltip":"",label:e.$tc("Name"),prop:"name"}}),e._v(" "),i("el-table-column",{attrs:{"show-overflow-tooltip":"",label:e.$tc("VariableName"),prop:"var_name"}}),e._v(" "),i("el-table-column",{attrs:{"show-overflow-tooltip":"",label:e.$tc("DefaultValue"),prop:"default_value"}}),e._v(" "),e.disableEdit?e._e():i("el-table-column",{attrs:{label:e.$tc("Actions"),align:"center","class-name":"buttons",fixed:"right",width:"135"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{icon:"el-icon-minus",size:"mini",type:"danger"},on:{click:function(i){return e.removeVariable(t.row)}}}),e._v(" "),i("el-button",{attrs:{disabled:!!t.row.template,icon:"el-icon-edit",size:"mini",type:"primary"},on:{click:function(i){return e.onEditClick(t.row)}}})]}}],null,!1,3037588530)})],1),e._v(" "),e.disableEdit?e._e():i("div",{staticClass:"actions"},[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.onAddClick}},[e._v("\n        "+e._s(e.$t("Add"))+"\n      ")])],1),e._v(" "),i("AddVariableDialog",{attrs:{variable:e.variable,variables:e.variables,visible:e.addVariableDialogVisible},on:{"update:visible":function(t){e.addVariableDialogVisible=t}}})],1)])},a=[],r=(i("7f7f"),i("d25f"),i("6d67"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.iVisible?i("Dialog",{attrs:{"destroy-on-close":!0,"show-cancel":!1,"show-confirm":!1,title:e.$tc("AddVariable"),visible:e.iVisible,width:"800px"},on:{"update:visible":function(t){e.iVisible=t}}},[i("VariableCreateForm",{attrs:{variable:e.variable},on:{add:e.addVariable,edit:e.editVariable}})],1):e._e()}),o=[],s=(i("20d6"),i("9039")),l=i("1efb"),c={name:"AddVariableDialog",components:{Dialog:s["a"],VariableCreateForm:l["a"]},props:{visible:{type:Boolean,default:!1},variable:{type:Object,default:function(){return{}}},variables:{type:Array,default:function(){return[]}}},computed:{iVisible:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e)}}},methods:{addVariable:function(e){var t=this.variables.findIndex((function(t){return t.name===e.name||t.var_name===e.var_name}));-1!==t&&this.variables.splice(t,1),this.variables.push(e),this.iVisible=!1},editVariable:function(e){var t=this,i=this.variables.findIndex((function(e){return e.var_name===t.variable.var_name}));this.variables.splice(i,1,e);var n=this.variables.filter((function(t){return t.var_name===e.var_name||t.name===e.name})).length;n>1&&this.variables.splice(i,1),this.iVisible=!1}}},u=c,f=i("2877"),d=Object(f["a"])(u,r,o,!1,null,"e0757cc0",null),p=d.exports,b={name:"Variable",components:{AddVariableDialog:p},props:{value:{type:[Array],default:function(){return[]}},disableEdit:{type:Boolean,default:!1}},data:function(){return{variable:{},initial:!1,addVariableDialogVisible:!1}},computed:{variables:{get:function(){return this.value},set:function(e){this.$emit("update:value",e),this.$emit("change",e)}}},watch:{variables:{handler:function(e,t){void 0!==t&&((e.length>0||!this.initial)&&(e.map((function(e){e.default_value=e.text_default_value||e.select_default_value||void 0})),this.$emit("input",e)),e&&(this.initial=!0))},immediate:!0,deep:!0}},methods:{removeVariable:function(e){this.variables=this.variables.filter((function(t){return e.id&&t.id?t.id!==e.id:e.var_name&&t.var_name?t.var_name!==e.var_name:e.name!==t.name}))},onEditClick:function(e){var t=this;this.variable=e,setTimeout((function(){t.addVariableDialogVisible=!0}))},onAddClick:function(){var e=this;this.variable=null,setTimeout((function(){e.addVariableDialogVisible=!0}))}}},h=b,v=(i("3232"),Object(f["a"])(h,n,a,!1,null,"494ead85",null));t["a"]=v.exports},b708:function(e,t,i){},bd11:function(e,t){e.exports=m,e.exports.match=s,e.exports.regexpToFunction=l,e.exports.parse=a,e.exports.compile=o,e.exports.tokensToFunction=c,e.exports.tokensToRegExp=v;var i="/",n=new RegExp(["(\\\\.)","(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?"].join("|"),"g");function a(e,t){var a,o=[],s=0,l=0,c="",u=t&&t.delimiter||i,d=t&&t.whitelist||void 0,p=!1;while(null!==(a=n.exec(e))){var b=a[0],h=a[1],v=a.index;if(c+=e.slice(l,v),l=v+b.length,h)c+=h[1],p=!0;else{var m="",g=a[2],y=a[3],w=a[4],x=a[5];if(!p&&c.length){var _=c.length-1,j=c[_],V=!d||d.indexOf(j)>-1;V&&(m=j,c=c.slice(0,_))}c&&(o.push(c),c="",p=!1);var $="+"===x||"*"===x,O="?"===x||"*"===x,D=y||w,A=m||u,E=m||("string"===typeof o[o.length-1]?o[o.length-1]:"");o.push({name:g||s++,prefix:m,delimiter:A,optional:O,repeat:$,pattern:D?f(D):r(A,u,E)})}}return(c||l<e.length)&&o.push(c+e.substr(l)),o}function r(e,t,i){var n="[^"+u(e===t?e:e+t)+"]";return!i||i.indexOf(e)>-1||i.indexOf(t)>-1?n+"+?":u(i)+"|(?:(?!"+u(i)+")"+n+")+?"}function o(e,t){return c(a(e,t),t)}function s(e,t){var i=[],n=m(e,i,t);return l(n,i)}function l(e,t){return function(i,n){var a=e.exec(i);if(!a)return!1;for(var r=a[0],o=a.index,s={},l=n&&n.decode||decodeURIComponent,c=1;c<a.length;c++)if(void 0!==a[c]){var u=t[c-1];u.repeat?s[u.name]=a[c].split(u.delimiter).map((function(e){return l(e,u)})):s[u.name]=l(a[c],u)}return{path:r,index:o,params:s}}}function c(e,t){for(var i=new Array(e.length),n=0;n<e.length;n++)"object"===typeof e[n]&&(i[n]=new RegExp("^(?:"+e[n].pattern+")$",d(t)));return function(t,n){for(var a="",r=n&&n.encode||encodeURIComponent,o=!n||!1!==n.validate,s=0;s<e.length;s++){var l=e[s];if("string"!==typeof l){var c,u=t?t[l.name]:void 0;if(Array.isArray(u)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but got array');if(0===u.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var f=0;f<u.length;f++){if(c=r(u[f],l),o&&!i[s].test(c))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'"');a+=(0===f?l.prefix:l.delimiter)+c}}else if("string"!==typeof u&&"number"!==typeof u&&"boolean"!==typeof u){if(!l.optional)throw new TypeError('Expected "'+l.name+'" to be '+(l.repeat?"an array":"a string"))}else{if(c=r(String(u),l),o&&!i[s].test(c))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but got "'+c+'"');a+=l.prefix+c}}else a+=l}return a}}function u(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function f(e){return e.replace(/([=!:$/()])/g,"\\$1")}function d(e){return e&&e.sensitive?"":"i"}function p(e,t){if(!t)return e;var i=e.source.match(/\((?!\?)/g);if(i)for(var n=0;n<i.length;n++)t.push({name:n,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return e}function b(e,t,i){for(var n=[],a=0;a<e.length;a++)n.push(m(e[a],t,i).source);return new RegExp("(?:"+n.join("|")+")",d(i))}function h(e,t,i){return v(a(e,i),t,i)}function v(e,t,n){n=n||{};for(var a=n.strict,r=!1!==n.start,o=!1!==n.end,s=n.delimiter||i,l=[].concat(n.endsWith||[]).map(u).concat("$").join("|"),c=r?"^":"",f=0;f<e.length;f++){var p=e[f];if("string"===typeof p)c+=u(p);else{var b=p.repeat?"(?:"+p.pattern+")(?:"+u(p.delimiter)+"(?:"+p.pattern+"))*":p.pattern;t&&t.push(p),p.optional?p.prefix?c+="(?:"+u(p.prefix)+"("+b+"))?":c+="("+b+")?":c+=u(p.prefix)+"("+b+")"}}if(o)a||(c+="(?:"+u(s)+")?"),c+="$"===l?"$":"(?="+l+")";else{var h=e[e.length-1],v="string"===typeof h?h[h.length-1]===s:void 0===h;a||(c+="(?:"+u(s)+"(?="+l+"))?"),v||(c+="(?="+u(s)+"|"+l+")")}return new RegExp(c,d(n))}function m(e,t,i){return e instanceof RegExp?p(e,t):Array.isArray(e)?b(e,t,i):h(e,t,i)}},c0eb:function(e,t,i){"use strict";var n=i("c5ec"),a=i.n(n);window.$=a.a,window.jQuery=a.a,t["a"]=a.a},e323:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"content"},[e.hasButton?i("el-button",{staticClass:"proto-setting",attrs:{disabled:!e.canSetting,icon:e.icon,size:"small",type:"primary"},on:{click:e.onSetting}}):e._e(),e._v(" "),i("Dialog",{attrs:{"show-cancel":!1,"show-confirm":!1,title:e.title,visible:e.isVisible,width:"60%"},on:{"update:visible":function(t){e.isVisible=t},close:e.onDialogClose}},[i("AutoDataForm",e._g(e._b({ref:"autoDataForm",staticClass:"data-form",attrs:{form:e.form},on:{submit:e.onSubmit}},"AutoDataForm",e.config,!1),e.$listeners))],1)],1)},a=[],r=(i("1c01"),i("58b2"),i("8e6e"),i("f3e2"),i("d25f"),i("bd86")),o=i("768b"),s=(i("ffc1"),i("6762"),i("2fdb"),i("ac6a"),i("456d"),i("96cf"),i("3b8d")),l=i("9039"),c=i("c75f"),u=i("f823");function f(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function d(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?f(Object(i),!0).forEach((function(t){Object(r["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):f(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var p={components:{Dialog:l["a"],AutoDataForm:c["a"]},props:{value:{type:[String,Object],default:function(){return{}}},title:{type:String,default:function(){return this.$t("PushParams")}},btnText:{type:String,default:function(){return""}},icon:{type:String,default:"el-icon-setting"},url:{type:String,default:"/api/v1/assets/platform-automation-methods/"},method:{type:String,default:""},pushAccountParams:{type:Object,default:function(){return{}}},visible:{type:Boolean,default:!1},hasButton:{type:Boolean,default:!0}},data:function(){return{isVisible:this.visible,canSetting:!0,form:this.value,remoteMeta:{},config:{url:this.url,hasSaveContinue:!1,hasButtons:!0,hasReset:!1,fields:[],method:"get"},preFieldsMeta:{change_secret_by_ssh:{commands:{helpTextAsTip:!1}}}}},watch:{visible:function(e){this.isVisible=e},method:function(e,t){e!==t&&this.getUrlMeta()}},mounted:function(){this.getUrlMeta()},methods:{getUrlMeta:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("common/getUrlMeta",{url:this.url});case 2:t=e.sent,this.remoteMeta=t.actions[this.config.method.toUpperCase()]||{},this.onCanSetting()&&this.setFormConfig();case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onCanSetting:function(){var e=Object.keys(this.remoteMeta);return this.canSetting=e.includes(this.method)&&this.$hasPerm("assets.change_platform"),this.$emit("canSetting",this.canSetting),this.canSetting},setFormConfig:function(){var e=[],t={},i=this.method,n=this.remoteMeta[i];e=[[n.label,[i]]],t[i]={fields:[],fieldsMeta:{}};var a=this.pushAccountParams[i];if(Object.keys((null===n||void 0===n?void 0:n.children)||{}).length>0)for(var r=0,s=Object.entries(n.children);r<s.length;r++){var l=Object(o["a"])(s[r],2),c=l[0],f=l[1],p="el-input",b={};switch(null===f||void 0===f?void 0:f.type){case"list":p=u["b"];break;case"boolean":p=u["j"];break;case"text":b["text"]="textarea";break}a&&(f.default=a[c]||f.default);var h=d(d({},f),{},{component:p,el:b});t[i].fields.push(c),t[i].fieldsMeta[c]=h}var v=this.preFieldsMeta[i];if(v)for(var m=0,g=Object.entries(v);m<g.length;m++)for(var y=Object(o["a"])(g[m],2),w=y[0],x=y[1],_=0,j=Object.entries(x);_<j.length;_++){var V=Object(o["a"])(j[_],2),$=V[0],O=V[1];t[i]["fieldsMeta"][w][$]=O}this.config.fields=e,this.config.fieldsMeta=t},onSetting:function(){this.isVisible=!0},onSubmit:function(e){this.$emit("input",e),this.isVisible=!1,this.$emit("update:visible",this.isVisible)},onDialogClose:function(){this.$emit("update:visible",this.isVisible)}}},b=p,h=(i("273b"),i("2877")),v=Object(h["a"])(b,n,a,!1,null,"2772642f",null);t["a"]=v.exports}}]);
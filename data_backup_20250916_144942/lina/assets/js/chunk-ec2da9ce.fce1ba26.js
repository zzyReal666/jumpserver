(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ec2da9ce","chunk-b2388106"],{1576:function(t,e,s){},"1c28":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("BaseReport",t._b({attrs:{title:t.title,nav:t.nav,name:t.name}},"BaseReport",t.$attrs,!1),[s("div",{staticClass:"charts-grid"},[s("div",{staticClass:"chart-container full-width"},[s("div",{staticClass:"chart-container-title"},[s("div",{staticClass:"chart-container-title-text"},[t._v(t._s(t.$t("Overview")))]),t._v(" "),s("SummaryCountCard",{attrs:{items:t.totalData}})],1)]),t._v(" "),s("div",{staticClass:"chart-container full-width"},[s("div",{staticClass:"chart-container-title"},[s("div",{staticClass:"chart-container-title-text"},[t._v(t._s(t.$t("AssetTypeDistribution")))]),t._v(" "),s("div",{staticClass:"chart"},[s("echarts",{attrs:{options:t.AssetTypeOptions,autoresize:!0}})],1)])]),t._v(" "),s("div",{staticClass:"chart-container full-width"},[s("div",{staticClass:"chart-container-title"},[s("div",{staticClass:"chart-container-title-text"},[t._v(t._s(t.$t("WeeklyGrowthTrend")))]),t._v(" "),s("div",{staticClass:"chart"},[s("echarts",{attrs:{options:t.AddedAssetOptions,autoresize:!0}})],1)])])])])],1)},i=[],n=(s("7514"),s("6d67"),s("4f7f"),s("456d"),s("96cf"),s("3b8d")),r=(s("1c4c"),s("f3e2"),s("d25f"),s("ac6a"),s("5df3"),s("f400"),s("d619")),o=s("5f2d"),c=s("313e"),l=s("5423"),d={components:{SummaryCountCard:o["a"],BaseReport:r["a"]},props:{nav:{type:Boolean,default:!0}},data:function(){return{title:this.$t("AssetStatisticsReport"),name:"AssetStatistics",asset_stats:{total:0,active:0,connected:0,zone:0,directory_services:0,platform_count:0},assets_by_type_category:{categories:[],typeLabelMap:new Map,series:[]},added_asset_metrics:{dates_metrics_date:[],dates_metrics_total:{}}}},computed:{totalData:function(){return[{title:this.$t("Total"),body:{route:{name:"AssetList"},count:this.asset_stats.total}},{title:this.$t("Active"),body:{count:this.asset_stats.active}},{title:this.$t("Connectable"),body:{count:this.asset_stats.connected}},{title:this.$t("LinkedDomains"),body:{count:this.asset_stats.zone}},{title:this.$t("ConnectedDirectoryServices"),body:{count:this.asset_stats.directory_services}},{title:this.$t("Platform"),body:{count:this.asset_stats.platform_count}}]},AssetTypeOptions:function(){var t=this;return{tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:function(e){var s=e[0].dataIndex,a=e.filter((function(t){return t.data>0})),i="".concat(t.assets_by_type_category.categories[s],"<br/>");return a.forEach((function(t){i+="".concat(t.marker).concat(t.seriesName,": ").concat(t.value,"<br/>")})),i}},legend:{data:Array.from(this.assets_by_type_category.typeLabelMap.values())},xAxis:{type:"category",data:this.assets_by_type_category.categories},yAxis:{type:"value"},series:this.assets_by_type_category.series,barCategoryGap:"70%"}},AddedAssetOptions:function(){var t=Object(l["a"])(),e=t.primary,s=t.TwoLevelColor,a=t.ThreeLevelColor,i=t.shadowColor;return{title:{show:!1},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{left:"auto",icon:"rect",itemWidth:10,itemHeight:10},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},color:[e,"#F3B44B"],xAxis:[{type:"category",boundaryGap:!1,axisLine:{lineStyle:{color:"#8F959E"}},axisLabel:{textStyle:{color:"#8F959E"}},axisTick:{show:!1},data:this.added_asset_metrics.dates_metrics_date}],yAxis:[{type:"value",name:"",axisLine:{show:!1,lineStyle:{color:"#fff"}},axisLabel:{textStyle:{color:"#8F959E"}},axisTick:{show:!1},splitLine:{show:!0,lineStyle:{color:"#EFF0F1"}}}],animationDuration:500,series:[{name:this.$t("Asset"),type:"line",smooth:!0,areaStyle:{normal:{color:new c["graphic"].LinearGradient(0,0,0,1,[{offset:0,color:e},{offset:.6,color:s},{offset:.8,color:a}],!1),shadowColor:i,shadowBlur:5}},data:this.added_asset_metrics.dates_metrics_total}]}}},mounted:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getData();case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{getData:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,s,a,i,n,r,o,c=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$axios.get("/api/v1/reports/reports/asset-statistic/?days=7");case 2:e=t.sent,this.$set(this.asset_stats,"total",e.asset_stats.total),this.$set(this.asset_stats,"active",e.asset_stats.active),this.$set(this.asset_stats,"connected",e.asset_stats.connected),this.$set(this.asset_stats,"zone",e.asset_stats.zone),this.$set(this.asset_stats,"directory_services",e.asset_stats.directory_services),this.$set(this.asset_stats,"platform_count",e.asset_stats.platform_count),this.$set(this.added_asset_metrics,"dates_metrics_date",e.added_asset_metrics.dates_metrics_date),this.$set(this.added_asset_metrics,"dates_metrics_total",e.added_asset_metrics.dates_metrics_total),s=e.assets_by_type_category||{},a=Object.keys(s),i=new Map,n=new Set,a.forEach((function(t){s[t].forEach((function(t){n.add(t.type),i.set(t.type,t.label)}))})),r=Array.from(n),o=r.map((function(t){var e=a.map((function(e){var a=s[e].find((function(e){return e.type===t}));return a?a.total:0}));return{name:i.get(t),type:"bar",stack:c.$t("Total"),data:e}})),this.$set(this.assets_by_type_category,"categories",a),this.$set(this.assets_by_type_category,"typeLabelMap",i),this.$set(this.assets_by_type_category,"series",o);case 21:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},h=d,u=s("2877"),p=Object(u["a"])(h,a,i,!1,null,"10bd1725",null);e["default"]=p.exports},"27d3":function(t,e,s){"use strict";s("1576")},"472b":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Page",[s("el-row",{attrs:{gutter:10}},[s("el-col",{staticStyle:{padding:"10px"},attrs:{span:4}},[s("div",{staticClass:"tag-container"},[s("h5",[t._v(t._s(t.title))]),t._v(" "),s("ul",{staticClass:"folder-list m-b-md",staticStyle:{padding:"0"}},t._l(t.charts,(function(e){return s("li",{key:e.name,class:{active:t.selectedChart&&t.selectedChart.name===e.name}},[s("a",{staticStyle:{display:"flex","align-items":"center"},on:{click:function(s){return t.handleChangeChart(e)}}},[s("i",{class:e.icon,staticStyle:{"margin-right":"6px"}}),t._v("\n              "+t._s(e.title)+"\n            ")])])})),0)])]),t._v(" "),s("el-col",{staticClass:"chart",staticStyle:{"background-color":"#fff"},attrs:{span:20}},[s(t.component,{tag:"component",attrs:{nav:!1,url:t.url}})],1)],1)],1)},i=[],n=(s("7f7f"),s("1c28")),r=s("83b2"),o=s("1b5c"),c={name:"Assets",components:{AssetStatistics:n["default"],Page:r["a"]},data:function(){return{url:"",title:this.$t("ReportType"),component:"",selectedChart:null,charts:[{title:this.$t("AssetStatisticsReport"),name:"AssetStatistics",icon:"fa fa-database"},{title:this.$t("AssetActivityReport"),name:"AssetReport",icon:"fa fa-exchange"}]}},created:function(){this.handleChangeChart(this.charts[0])},methods:{handleChangeChart:function(t){this.selectedChart=t;var e=Object(o["a"])({name:t.name},this.$router);this.component=e.components.default;var s=e.path;this.url="/ui/#"+s,this.name=t.name}}},l=c,d=(s("8508"),s("2877")),h=Object(d["a"])(l,a,i,!1,null,"3443826a",null);e["default"]=h.exports},5423:function(t,e,s){"use strict";s.d(e,"a",(function(){return i}));s("a481");var a=s("b416"),i=function(){var t=document.documentElement.style,e=t.getPropertyValue("--color-primary"),s=e.replace(/#/g,""),i=Object(a["c"])(s,"ffffff",38),n=Object(a["c"])(s,"ffffff",20),r=Object(a["c"])(s,"ffffff",1);return{primary:e,TwoLevelColor:i,ThreeLevelColor:n,shadowColor:r}}},"68b4d":function(t,e,s){},8508:function(t,e,s){"use strict";s("be43")},be43:function(t,e,s){},cd5f:function(t,e,s){"use strict";s("68b4d")},d619:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{"no-padding":t.onlyCharts,nav:t.nav}},[!t.onlyCharts&&t.nav?s("div",{staticClass:"header nav-bar"},[s("div",{staticClass:"nav-bar-logo"},[s("Logo")],1),t._v(" "),s("RightAction",{attrs:{name:t.name}})],1):t._e(),t._v(" "),s("div",{staticClass:"content"},[t.onlyCharts?t._e():s("div",{staticClass:"title-bar"},[s("div",{staticClass:"title"},[t._v("\n        "+t._s(t.title)+"\n\n        "),s("span",{staticClass:"datetime"},[t._v("\n          ["+t._s((new Date).toLocaleString())+"]\n        ")]),t._v(" "),!t.nav&&t.url?s("span",{staticStyle:{float:"right","line-height":"40px"}},[s("el-button",{attrs:{type:"text"},on:{click:t.openNewWindow}},[s("i",{staticClass:"fa fa-external-link",staticStyle:{"font-size":"15px"}}),t._v("\n            "+t._s(t.$t("Export"))+"\n          ")])],1):t._e()]),t._v(" "),t.isDescription?s("div",{staticClass:"description"},[t._v("\n        "+t._s(t.description)+"\n      ")]):t._e()]),t._v(" "),s("div",{staticClass:"charts-zone"},[t._t("default")],2)])])},i=[],n=(s("6762"),s("2fdb"),s("4f37"),s("62db")),r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"nav-bar-right export-bar"},[s("el-button-group",[s("el-button",{staticClass:"export-btn",attrs:{loading:t.exportLoading,disabled:t.exportLoading,type:"text",icon:"el-icon-printer"},on:{click:t.exportPdf}},[t._v("\n      "+t._s(t.$t("ExportAsPDF"))+"\n\n    ")]),t._v(" "),s("el-button",{staticClass:"export-btn",attrs:{type:"text",icon:"el-icon-message"},on:{click:t.emailReport}},[t._v("\n\n      "+t._s(t.$t("EMailReport"))+"\n    ")]),t._v(" "),s("el-button",{staticClass:"export-btn",attrs:{type:"text",icon:"el-icon-printer"},on:{click:t.printReport}},[t._v("\n      "+t._s(t.$t("Print"))+"\n    ")])],1)],1)},o=[],c=(s("7f7f"),s("dbfd")),l={name:"RightAction",props:{name:{type:String,default:""}},data:function(){return{exportLoading:!1}},methods:{checkName:function(){return!!this.name||(this.$message.error("Please select a chart"),!1)},getDaysParam:function(){return this.$route.query.days||localStorage.getItem(this.name)||"7"},exportPdf:function(){if(this.checkName()){var t=this.getDaysParam(),e="/core/reports/export-pdf/?chart=".concat(this.name,"&days=").concat(t);this.$message.success(this.$t("Export")+"..."),Object(c["e"])(e)}},emailReport:function(){var t=this;if(this.checkName()){var e=this.getDaysParam();this.$message.success(this.$t("EMailReport")+"..."),this.$axios.post("/core/reports/send-mail/?chart=".concat(this.name,"&days=").concat(e)).catch((function(e){t.$message.error(t.$t("Failed")+": "+e.message)}))}},printReport:function(){window.print()}}},d=l,h=(s("cd5f"),s("2877")),u=Object(h["a"])(d,r,o,!1,null,"04bfb9fd",null),p=u.exports,f={components:{Logo:n["a"],RightAction:p},props:{onlyCharts:{type:Boolean,default:!1},nav:{type:Boolean,default:!1},name:{type:String,default:""},title:{type:String,default:""},description:{type:String,default:""},url:{type:String,default:""}},data:function(){return{}},computed:{isDescription:function(){return this.description&&""!==this.description.trim()}},methods:{handleChangeChart:function(t){},openNewWindow:function(){try{if(!this.win||this.win.closed){var t=1048,e=800,s=(screen.width-t)/2,a=(screen.height-e)/2,i="width=".concat(t,",height=").concat(e,",left=").concat(s,",top=").concat(a,",scrollbars=yes,resizable=yes"),n=this.url;if(this.$route.query.days){var r=n.includes("?")?"&":"?";n="".concat(n).concat(r,"days=").concat(this.$route.query.days)}this.win=window.open(n,"_blank",i)}this.win.focus()}catch(o){console.error("打开新窗口失败:",o),window.location.href=this.url}},openSettings:function(){console.log("openSettings")}}},_=f,y=(s("27d3"),Object(h["a"])(_,a,i,!1,null,"5785de42",null));e["a"]=y.exports}}]);